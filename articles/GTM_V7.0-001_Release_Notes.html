<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>GT.M V7.0-001 Release Notes</title><link rel="stylesheet" href="gtm.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><meta name="description" content="Contact Information GT.M Group Fidelity National Information Services, Inc. 200 Campus Drive Collegeville, PA 19426 United States of America GT.M Support for customers: gtmsupport@fisglobal.com Automated attendant for 24 hour support: +1 (484) 302-3248 Switchboard: +1 (484) 302-3160 Website: http://fis-gtm.com"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" title="GT.M V7.0-001 Release Notes"><div class="titlepage"><div><div><div class="mediaobject"><img src="images/FIS_RGB_logo.jpg"></div></div><div><h2 class="title"><a name="idm46107595745856"></a>GT.M V7.0-001 Release Notes</h2></div><div><h3 class="subtitle"><i>Release Notes: GT.M V7.0-001</i></h3></div><div><p class="copyright">Copyright (C) 2021 Fidelity National Information Services, Inc.</p></div><div><div class="legalnotice" title="Legal Notice"><a name="idm46107595572240"></a><p class="legalnotice-title"><b>Legal Notice</b></p><p>Copyright (C)2021 Fidelity National Information Services, Inc. and/or its subsidiaries. All Rights Reserved.</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the <a class="ulink" href="http://www.gnu.org/licenses/fdl.txt" target="_blank">GNU Free Documentation License</a>, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts and no Back-Cover Texts. </p><p>GT.M&#8482; is a trademark of Fidelity National Information Services, Inc. Other trademarks are the property of their respective owners. </p><p>This document contains a description of GT.M and the operating instructions pertaining to the various functions that comprise the system. This document does not contain any commitment of FIS. FIS believes the information in this publication is accurate as of its publication date; such information is subject to change without notice. FIS is not responsible for any errors or defects. </p></div></div><div><p class="pubdate">22 November 2021</p></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><b>Revision History</b></th></tr><tr><td align="left">Revision 1.0</td><td align="left">22 November 2021</td><td align="left">V7.0-001 </td></tr></table></div></div><div><div class="abstract" title="Contact Information"><p class="title"><b>Contact Information</b></p><div class="informaltable"><table border="0" width="100%"><colgroup><col><col></colgroup><tbody><tr><td>
                  <p>
</p><div class="address"><p>GT.M Group <br>
Fidelity National Information Services, Inc. <br>
<span class="street">200 Campus Drive</span> <br>
<span class="city">Collegeville, </span><span class="state">PA </span><span class="postcode">19426</span><br>
<span class="country">United States of America</span></p></div><p>
</p>
                </td><td>
                  <p>
</p><div class="address"><p><br>
<span class="phone">GT.M Support for customers: gtmsupport@fisglobal.com </span><br>
<span class="phone">Automated attendant for 24 hour support: +1 (484) 302-3248</span><br>
<span class="phone">Switchboard: +1 (484) 302-3160</span><br>
<span class="otheraddr">Website: <a class="ulink" href="http://fis-gtm.com" target="_blank">http://fis-gtm.com</a></span> <br>
</p></div><p> 
</p>
                </td></tr></tbody></table></div><p>
</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#GTMrel_overview">V7.0-001</a></span></dt><dd><dl><dt><span class="sect2"><a href="#overview"> Overview </a></span></dt><dt><span class="sect2"><a href="#conventions">Conventions</a></span></dt><dt><span class="sect2"><a href="#platforms"> Platforms </a></span></dt><dt><span class="sect2"><a href="#manage64">32- vs. 64-bit platforms</a></span></dt><dt><span class="sect2"><a href="#addn_instr">Additional Installation Instructions</a></span></dt><dt><span class="sect2"><a href="#upgrade"> Upgrading to GT.M V7.0-001</a></span></dt><dt><span class="sect2"><a href="#mng_mode">Managing M mode and UTF-8 mode</a></span></dt><dt><span class="sect2"><a href="#setterm">Setting the environment variable TERM</a></span></dt><dt><span class="sect2"><a href="#install_comp_lib"> Installing Compression Libraries</a></span></dt></dl></dd><dt><span class="sect1"><a href="#GTMchng_hist"> Change History</a></span></dt><dd><dl><dt><span class="sect2"><a href="#GTMtaV70-001ble">V7.0-001</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idm46107595483696">Database </a></span></dt><dt><span class="sect1"><a href="#idm46107595282336">Language </a></span></dt><dt><span class="sect1"><a href="#idm46107595604560">System Administration </a></span></dt><dt><span class="sect1"><a href="#idm46107595407328">Other </a></span></dt><dt><span class="sect1"><a href="#GTMAddinform">Additional Information</a></span></dt><dd><dl><dt><span class="sect2"><a href="#about8843">Additional Information about GTM-8843</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idm46107595228304">Error and Other Messages</a></span></dt><dd><dl></dl></dd></dl></div><div class="sect1" title="V7.0-001"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GTMrel_overview"></a>V7.0-001</h2></div></div></div><div class="sect2" title="Overview"><div class="titlepage"><div><div><h3 class="title"><a name="overview"></a> Overview </h3></div></div></div><p>V7.0-001 supports database files with up to 11 levels (10 index and one data). V7.0-001 includes support for operation with V6 database file format used by recent GT.M versions.</p><p> V7.0-001 also includes other fixes and enhancements including changes aimed at making management of backups and replication more straightforward. For more information, refer to the <a class="link" href="#GTMchng_hist" title="Change History">Change History</a> section.</p><p>Items marked with <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="New Feature"></span>
  document new or different capabilities.</p><p>Please pay special attention to the items marked with the symbols <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="Alert"></span>
 as those document items that have a possible impact on existing code, practice or process. Please be sure to recompile all objects to ensure all the updates are in place.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>While FIS keeps message IDs and mnemonics quite stable, messages texts change more frequently as we strive to improve them, especially in response to user feedback. Please ensure you review any automated scripting that parses GT.M messages.</p></td></tr></table></div></div><div class="sect2" title="Conventions"><div class="titlepage"><div><div><h3 class="title"><a name="conventions"></a>Conventions</h3></div></div></div><p>This document uses the following conventions:</p><div class="informaltable"><table border="1" width="70%"><colgroup><col><col><col></colgroup><tbody><tr><td>
            
<p>              <span class="bold"><strong>Flag/Qualifiers</strong></span>            </p>
          </td><td colspan="2">             
<p>-</p>
          </td></tr><tr><td>
            
<p>              <span class="bold"><strong>Program Names or Functions</strong></span>            </p>
          </td><td colspan="2">            
<p>upper case. For example, MUPIP BACKUP</p>
          </td></tr><tr><td>
            
<p>              <span class="bold"><strong>Examples</strong></span>            </p>
          </td><td colspan="2">            
<p>lower case. For example: <br> mupip backup -database ACN,HIST /backup</p>
          </td></tr><tr><td>
            
<p>              <span class="bold"><strong>Reference Number</strong></span>            </p>
          </td><td colspan="2">            
<p>A reference number is used to track software <br> enhancements and support requests. <br> It is enclosed between parentheses (). </p>
          </td></tr><tr><td>
            
<p>              <span class="bold"><strong>Platform Identifier</strong></span>            </p>
          </td><td colspan="2">            
<p>Where an item affects only specific platforms, the platforms are listed in square brackets, e.g., [AIX]</p>
          </td></tr></tbody></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The term UNIX refers to the general sense of all platforms on which GT.M uses a POSIX API. As of this date, this includes: AIX and GNU/Linux on x86 (32- and 64-bits).</p></td></tr></table></div><p>The following table summarizes the new and revised replication terminology and qualifiers. </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
            
<p>Pre V5.5-000 terminology</p>
          </th><th>
            
<p>Pre V5.5-000 qualifier</p>
          </th><th>
            
<p>Current terminology</p>
          </th><th>
            
<p>Current qualifiers </p>
          </th></tr></thead><tbody><tr><td>
            
<p>originating instance or primary instance </p>
          </td><td>
            
<p>-rootprimary</p>
          </td><td>
            
<p>originating instance or originating primary instance. </p>
            
<p>Within the context of a replication connection between two instances, an originating instance is referred to as source instance or source side. For example, in an B&lt;-A-&gt;C replication configuration, A is the source instance for B and C. </p>
          </td><td>
            
<p>-updok (recommended)</p>
            
<p>-rootprimary (still accepted)</p>
          </td></tr><tr><td>
            
<p>replicating instance (or secondary instance) and propagating instance </p>
          </td><td>
            
<p>N/A for replicating instance or secondary instance. </p>
            
<p>-propagateprimary for propagating instance </p>
          </td><td>
            
<p>replicating instance. </p>
            
<p>Within the context of a replication connection between two instances, a replicating instance that receives updates from a source instance is referred to as receiving instance or receiver side. For example, in an B&lt;-A-&gt;C replication configuration, both B and C can be referred to as a receiving instance. </p>
          </td><td>
            
<p>-updnotok </p>
          </td></tr><tr><td>
            
<p>N/A</p>
          </td><td>
            
<p>N/A</p>
          </td><td>
            
<p>supplementary instance. </p>
            
<p>For example, in an A-&gt;P-&gt;Q replication configuration, P is the supplementary instance. Both A and P are originating instances. </p>
          </td><td>
            
<p>-updok</p>
          </td></tr></tbody></table></div><p>Effective V6.0-000, GT.M documentation adopted IEC standard <a class="ulink" href="http://physics.nist.gov/cuu/Units/binary.html" target="_blank">Prefixes for binary multiples</a>. This document therefore uses prefixes Ki, Mi and Ti (e.g., 1MiB for 1,048,576 bytes). Over time, we'll update all GT.M documentation to this standard.</p><p><span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="New Feature"></span>
 denotes a new feature that requires updating the manuals. </p><p><span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="New Feature"></span>
 denotes a new feature or an enhancement that may not be upward compatible and may affect an existing application. </p><p><span class="inlinemediaobject"><img src="images/deprecated.png" alt="-Deprecated Message-"></span>
 denotes deprecated messages.</p><p><span class="inlinemediaobject"><img src="images/revised.png" alt="-Revised Message-"></span>
 denotes revised messages.</p><p><span class="inlinemediaobject"><img src="images/new.png" alt="-New Message-"></span>
 denotes added messages.</p></div><div class="sect2" title="Platforms"><div class="titlepage"><div><div><h3 class="title"><a name="platforms"></a> Platforms </h3></div></div></div><p> Over time, computing platforms evolve. Vendors obsolete hardware architectures. New versions of operating systems replace old ones. We at FIS continually evaluate platforms and versions of platforms that should be Supported for GT.M. In the table below, we document not only the ones that are currently Supported for this release, but also alert you to our future plans given the evolution of computing platforms. If you are an FIS customer, and these plans would cause you hardship, please contact your FIS account executive promptly to discuss your needs. </p><p>Each GT.M release is extensively tested by FIS on a set of specific versions of operating systems on specific hardware architectures (the combination of operating system and hardware architecture is referred to as a platform). This set of specific versions is considered Supported. There may be other versions of the same operating systems on which a GT.M release may not have been tested, but on which the FIS GT.M Group knows of no reason why GT.M would not work. This larger set of versions is considered Supportable. There is an even larger set of platforms on which GT.M may well run satisfactorily, but where the FIS GT.M team lacks the knowledge to determine whether GT.M is Supportable. These are considered Unsupported. Contact FIS GT.M Support with inquiries about your preferred platform.</p><p>As of the publication date, FIS supports this release on the hardware and operating system versions below. Contact FIS for a current list of Supported platforms. The reference implementation of the encryption plugin has its own additional requirements, should you opt to use it as included with GT.M.</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>
            <p class="bold"> Platform </p>
          </th><th>
            <p class="bold"> Supported Versions </p>
          </th><th>
            <p class="bold"> Notes </p>
          </th></tr></thead><tbody><tr><td>
            
<p> IBM Power Systems AIX </p>
          </td><td>
            
<p> 7.1 TL 5, 7.2 TL 3</p>
          </td><td>
            
<p>Only 64-bit versions of AIX with POWER7 as the minimum required CPU architecture level are Supported.</p>
            
<p> While GT.M supports both UTF-8 mode and M mode on this platform, there are problems with the AIX ICU utilities that prevent FIS from testing 4-byte UTF-8 characters as comprehensively on this platform as we do on others. </p>
            
<p> Running GT.M on AIX 7.1 requires APAR IZ87564, a fix for the POW() function, to be applied. To verify that this fix has been installed, execute <code class="code"> instfix -ik IZ87564. </code> </p>
            
<p>Only the AIX jfs2 filesystem is Supported. Other filesystems, such as jfs1 are Supportable, but not Supported. FIS strongly recommends use of the jfs2 filesystem on AIX; use jfs1 only for existing databases not yet migrated to a jfs2 filesystem.</p>
          </td></tr><tr><td>
            
<p> x86_64 GNU/Linux </p>
          </td><td>
            
<p>Red Hat Enterprise Linux 7.9, 8.5; Ubuntu 18.04 LTS, and 20.04 LTS</p>
          </td><td>
            
<p> To run 64-bit GT.M processes requires both a 64-bit kernel as well as 64-bit hardware. </p>
            
<p> GT.M should also run on recent releases of other major Linux distributions with a contemporary Linux kernel (2.6.32 or later), glibc (version 2.12 or later) and ncurses (version 5.7 or later). </p>
            
<p>Due to build optimization and library incompatibilities, GT.M versions older than V6.2-000 are incompatible with glibc 2.24 and up. This incompatibility has not been reported by a customer, but was observed on internal test systems that use the latest Linux software distributions from Fedora (26), Debian (unstable), and Ubuntu (17.10). In internal testing, processes either hung or encountered a segmentation violation (SIG-11) during operation. Customers upgrading to Linux distributions that utilize glibc 2.24+ must upgrade their GT.M version at the same time as or before the OS upgrade.</p>
            
<p> GT.M requires a compatible version of the libtinfo library. On Red Hat, the ncurses-libs and ncurses-compat-libs packages contain the libtinfo library. On Debian/Ubuntu, libtinfo5 and libncurses5 packages contain the libtinfo library. If any of these packages is not already installed on your system, please install using an appropriate package manager. </p>
            
<p>To support the optional WRITE /TLS fifth argument (the ability to provide / override options in the tlsid section of the encryption configuration file), the reference implementation of the encryption plugin requires libconfig 1.4.x.</p>
            
<p>Only the ext4 and xfs filesystems are Supported. Other filesystems are Supportable, but not Supported. Furthermore, if you use the NODEFER_ALLOCATE feature, FIS strongly recommends that you use xfs. If you must use NODEFER_ALLOCATE with ext4, you <span class="bold"><strong>must</strong></span> ensure that your kernel includes commit d2dc317d564a46dfc683978a2e5a4f91434e9711 (search for d2dc317d564a46dfc683978a2e5a4f91434e9711 at <a class="ulink" href="https://www.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.0.3" target="_blank">https://www.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.0.3</a>). The Red Hat Bugzilla identifier for the bug is 1213487. With NODEFER_ALLOCATE, do not use any filesystem other than ext4 and a kernel with the fix, or xfs.</p>
            
<p>Ubuntu 21.10 is Supportable.</p>
          </td></tr></tbody></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Debian 11 (bullseye) x86 GNU/Linux is Supportable but not Supported. The 32-bit version of GT.M runs on either 32- or 64-bit x86 platforms; we expect the x86_64 GNU/Linux version of GT.M to be preferable on 64-bit hardware. Running a 32-bit GT.M on a 64-bit GNU/Linux requires 32-bit libraries to be installed. The CPU must have an instruction set equivalent to 586 (Pentium) or better. If you are using the 32-bit GT.M, please also refer to the notes above on x86_64 GNU/Linux.</p></td></tr></table></div><div class="sect3" title="Platform support lifecycle"><div class="titlepage"><div><div><h4 class="title"><a name="GTMplatform_lifecycle"></a> Platform support lifecycle </h4></div></div></div><p> FIS usually supports new operating system versions six months or so after stable releases are available and we usually support each version for a two year window. GT.M releases are also normally supported for two years after release. While FIS will attempt to provide support to customers in good standing for any GT.M release and operating system version, our ability to provide support diminishes after the two year window. </p><p> GT.M cannot be patched, and bugs are only fixed in new releases of software.</p></div></div><div class="sect2" title="32- vs. 64-bit platforms"><div class="titlepage"><div><div><h3 class="title"><a name="manage64"></a>32- vs. 64-bit platforms</h3></div></div></div><p>The same application code runs on both 32-bit and 64-bit platforms; however there are operational differences between them (for example, auto-relink and the ability to use GT.M object code from shared libraries exist only on 64-bit platforms). Please note that:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> You must compile the application code separately for each platform. Even though the M source code is the same, the generated object modules are different - the object code differs between x86 and x86_64.</p></li><li class="listitem"><p> Parameter-types that interface GT.M with non-M code using C calling conventions must match the data-types on their target platforms. Mostly, these parameters are for call-ins, external calls, internationalization (collation) and environment translation, and are listed in the tables below. Note that most addresses on 64-bit platforms are 8 bytes long and require 8 byte alignment in structures whereas all addresses on 32-bit platforms are 4 bytes long and require 4-byte alignment in structures.</p></li></ul></div><div class="sect3" title="Call-ins and External Calls"><div class="titlepage"><div><div><h4 class="title"><a name="GTMcallext"></a>Call-ins and External Calls</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
              <p class="bold">Parameter type</p>
            </th><th>
              <p class="bold">32-Bit</p>
            </th><th>
              <p class="bold">64-bit</p>
            </th><th>
              <p class="bold">Remarks</p>
            </th></tr></thead><tbody><tr><td>
              
<p> gtm_long_t</p>
            </td><td>
              
<p> 4-byte (32-bit)</p>
            </td><td>
              
<p> 8-byte (64-bit)</p>
            </td><td>
              
<p> gtm_long_t is much the same as the C language long type.</p>
            </td></tr><tr><td>
              
<p> gtm_ulong_t</p>
            </td><td>
              
<p> 4-byte</p>
            </td><td>
              
<p> 8-byte</p>
            </td><td>
              
<p> gtm_ulong_t is much the same as the C language unsigned long type.</p>
            </td></tr><tr><td>
              
<p> gtm_int_t</p>
            </td><td>
              
<p> 4-byte</p>
            </td><td>
              
<p> 4-byte</p>
            </td><td>
              
<p> gtm_int_t has 32-bit length on all platforms.</p>
            </td></tr><tr><td>
              
<p> gtm_uint_t</p>
            </td><td>
              
<p> 4-byte</p>
            </td><td>
              
<p> 4-byte</p>
            </td><td>
              
<p> gtm_uint_t has 32-bit length on all platforms</p>
            </td></tr></tbody></table></div><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution:  Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.jpg"></td><th align="left"> Caution</th></tr><tr><td align="left" valign="top"><p> If your interface uses gtm_long_t or gtm_ulong_t types but your interface code uses int or signed int types, failure to revise the types so they match on a 64-bit platform will cause the code to fail in unpleasant, potentially dangerous, and hard to diagnose ways.</p></td></tr></table></div></div><div class="sect3" title="Internationalization (Collation)"><div class="titlepage"><div><div><h4 class="title"><a name="GTMinternationalization"></a> Internationalization (Collation)</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
              <p class="bold">Parameter type</p>
            </th><th>
              <p class="bold">32-Bit</p>
            </th><th>
              <p class="bold">64-bit</p>
            </th><th>
              <p class="bold">Remarks</p>
            </th></tr></thead><tbody><tr><td>
              
<p> gtm_descriptor in gtm_descript.h</p>
            </td><td>
              
<p> 4-byte</p>
            </td><td>
              
<p> 8-byte</p>
            </td><td>
              
<p> Although it is only the address within these types that changes, the structures may grow by up to 8 bytes as a result of compiler padding to meet platform alignment requirements.</p>
            </td></tr></tbody></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> Assuming other aspects of code are 64-bit capable, collation routines should require only recompilation. </p></td></tr></table></div></div><div class="sect3" title="Environment Translation"><div class="titlepage"><div><div><h4 class="title"><a name="GTMenv_trans"></a> Environment Translation</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
              <p class="bold">Parameter type</p>
            </th><th>
              <p class="bold">32-Bit</p>
            </th><th>
              <p class="bold">64-bit</p>
            </th><th>
              <p class="bold">Remarks</p>
            </th></tr></thead><tbody><tr><td>
              
<p> gtm_string_t type in gtmxc_types.h</p>
            </td><td>
              
<p> 4-byte</p>
            </td><td>
              
<p> 8-byte</p>
            </td><td>
              
<p> Although it is only the address within these types that changes, the structures may grow by up to 8 bytes as a result of compiler padding to meet platform alignment requirements.</p>
            </td></tr></tbody></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>Assuming other aspects of code are 64-bit capable, environment translation routines should require only recompilation.</p></td></tr></table></div></div></div><div class="sect2" title="Additional Installation Instructions"><div class="titlepage"><div><div><h3 class="title"><a name="addn_instr"></a>Additional Installation Instructions</h3></div></div></div><p>To install GT.M, see the "Installing GT.M" section in the GT.M Administration and Operations Guide. For minimal down time, upgrade a current replicating instance and restart replication. Once that replicating instance is current, switch it to become the originating instance. Upgrade the prior originating instance to become a replicating instance, and perform a switchover when you want it to resume an originating primary role.</p><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution: Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.jpg"></td><th align="left">Caution</th></tr><tr><td align="left" valign="top"><p>Never replace the binary image on disk of any executable file while it is in use by an active process. It may lead to unpredictable results. Depending on the operating system, these results include but are not limited to denial of service (that is, system lockup) and damage to files that these processes have open (that is, database structural damage). </p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>FIS strongly recommends installing each version of GT.M in a separate (new) directory, rather than overwriting a previously installed version. If you have a legitimate need to overwrite an existing GT.M installation with a new version, you must first shut down all processes using the old version. FIS suggests installing GT.M V7.0-001 in a Filesystem Hierarchy Standard compliant location such as /usr/lib/fis-gtm/V7.0-001_arch (for example, /usr/lib/fis-gtm/V7.0-001_x86 on 32-bit Linux systems). A location such as /opt/fis-gtm/V7.0-001_arch would also be appropriate. Note that the <em class="replaceable"><code>arch</code></em> suffix is especially important if you plan to install 32- and 64-bit versions of the same release of GT.M on the same system.</p></li><li class="listitem"><p>Use the appropriate MUPIP command (e.g. ROLLBACK, RECOVER,  RUNDOWN) of the old GT.M version to ensure all database files are cleanly closed.</p></li><li class="listitem"><p>Make sure gtmsecshr is not running. If gtmsecshr is running, first stop all GT.M processes including the DSE, LKE and MUPIP utilities and then perform a <code class="code">MUPIP STOP</code> <em class="replaceable"><code>pid_of_gtmsecshr</code></em>.</p></li><li class="listitem"><p>Starting with V6.2-000, GT.M no longer supports the use of the deprecated $gtm_dbkeys and the master key file it points to for database encryption. To convert master files to the libconfig format, please click <a class="ulink" href="downloadables/CONVDBKEYS.m" target="_blank"><span class="inlinemediaobject"><img src="images/download.png" alt="Download CONVDBKEYS.m"></span>
</a> to download the CONVDBKEYS.m program and follow instructions in the comments near the top of the program file. You can also download CONVDBKEYS.m from http://tinco.pair.com/bhaskar/gtm/doc/articles/downloadables/CONVDBKEYS.m. If you are using $gtm_dbkeys for database encryption, please convert master key files to libconfig format immediately after upgrading to V6.2-000 or later. Also, modify your environment scripts to include the use of gtmcrypt_config environment variable. </p></li></ul></div><div class="sect3" title="Recompile"><div class="titlepage"><div><div><h4 class="title"><a name="idm46107595488528"></a> Recompile </h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Recompile all M and C source files.</p></li></ul></div></div><div class="sect3" title="Rebuild Shared Libraries or Images"><div class="titlepage"><div><div><h4 class="title"><a name="idm46107595484208"></a>Rebuild Shared Libraries or Images</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Rebuild all Shared Libraries after recompiling all M and C source files.</p></li><li class="listitem"><p>If your application is not using object code shared using GT.M's auto-relink functionality, please consider using it.</p></li></ul></div></div><div class="sect3" title="Compiling the Reference Implementation Plugin"><div class="titlepage"><div><div><h4 class="title"><a name="idm46107595487376"></a>Compiling the Reference Implementation Plugin </h4></div></div></div><p>If you plan to use database encryption, TLS replication, or TLS sockets, you must compile the reference implementation plugin to match the shared library dependencies unique to your platform. The instructions for compiling the Reference Implementation plugin are as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Install the development headers and libraries for libgcrypt, libgpgme, libconfig, and libssl. On Linux, the package names of development libraries usually have a suffix such as -dev or -devel and are available through the package manager. For example, on Ubuntu_x86_64 a command like the following installs the required development libraries:</p><pre class="programlisting">sudo apt-get install libgcrypt11-dev libgpgme11-dev libconfig-dev libssl-dev</pre><p>Note that the package names may vary by distribution / version. </p></li><li class="listitem"><p>Unpack $gtm_dist/plugin/gtmcrypt/source.tar to a temporary directory. </p><pre class="programlisting">mkdir /tmp/plugin-build
cd /tmp/plugin-build
cp $gtm_dist/plugin/gtmcrypt/source.tar . 
tar -xvf source.tar</pre></li><li class="listitem"><p>Follow the instructions in the README.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Open Makefile with your editor; review and edit the common header (IFLAGS) and library paths (LIBFLAGS) in the Makefile to reflect those on your system.</p></li><li class="listitem"><p>Define the gtm_dist environment variable to point to the absolute path for the directory where you have GT.M installed</p></li><li class="listitem"><p>Copy and paste the commands from the README to compile and install the encryption plugin with the permissions defined at install time</p><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution: Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.jpg"></td><th align="left">Caution</th></tr><tr><td align="left" valign="top"><p>These are separate steps to compile the encryption plugin for GT.M versions V5.3-004 through V6.3-000 when OpenSSL 1.1 is installed and OpenSSL 1.0.x libraries are still available.</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Download the most recent OpenSSL 1.0.x version</p></li><li class="listitem"><p>Compile and install (default installs to /usr/local/ssl)</p><pre class="programlisting">./config &amp;&amp; make install</pre></li><li class="listitem"><p>Adjust the configuration : Move the newly installed libraries out of the way</p><pre class="programlisting">mv /usr/local/ssl/lib /usr/local/ssl/lib.donotuse</pre></li><li class="listitem"><p>Adjust the configuration : Create another /usr/local/ssl/lib and symlink the existing 1.0.x library into it as the default. This ensures that the encryption plugin is compiled using the compatible OpenSSL 1.0.x library. Adjust the path below as necessary.</p><pre class="programlisting">mkdir /usr/local/ssl/lib &amp;&amp; ln -s /path/to/existing/libssl.so.1.0.x /usr/local/ssl/libssl.so</pre></li><li class="listitem"><p>Recompile the encryption plugin following the above directions. </p></li><li class="listitem"><p>Remove /usr/local/ssl/lib.donotuse to avoid future complications.</p></li></ul></div></td></tr></table></div></li></ul></div></li></ol></div></div></div><div class="sect2" title="Upgrading to GT.M V7.0-001"><div class="titlepage"><div><div><h3 class="title"><a name="upgrade"></a> Upgrading to GT.M V7.0-001</h3></div></div></div><p>There are two upgrade paths available when you upgrade to GT.M V7.0-000:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>V7 Upgrade Path 1</strong></span>: Perform a MUPIP EXTRACT -FREEZE on an existing V6  database and then perform MUPIP LOAD on an empty V7 database using replication to minimize downtime. You can also use the MERGE command to move data from V6 to the new V7 database; as with MUPIP EXTRACT, you need to keep the source data in a stable state. If you are using triggers, extract the triggers from the V6 database and load them in the new V7 database. </p></li><li class="listitem"><p><span class="bold"><strong>V7 Upgrade Path 2</strong></span>: Continue using your V6 databases with GT.M V7.0-000. </p></li></ul></div><p>Choose V7 Upgrade Path 1 if you anticipate a database file to grow up to 16Gi blocks. Note that the maximum size of a V7 database file having 8KiB block size is 114688GiB (8KiB*16Gi).</p><p>Choose V7 Upgrade Path 2 if you do not anticipate a database file to grow beyond the V6 database limit of 994Mi blocks. Note that the maximum size of a V6 database file having 8KiB block size is 7936GiB (8KiB*992Mi).  </p><p>Other that the new maximum database file size that comes with V7 Upgrade Path 1, there is no difference between V7 Upgrade Path 1 and V7 Upgrade Path 2. You can choose V7 Upgrade Path 2 first and then later choose V7 Upgrade Path 1 if a need arises. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>To upgrade your database from V5 to V7, you need to first upgrade your database from V5 to a V6 database and then choose an appropriate V7 upgrade path. Refer to the appropriate V6 release notes for the database upgrade instructions or consult your GT.M support channel. </p></td></tr></table></div><div class="note" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>In an upcoming release, the FIS GT.M team plans to provide in-place database upgrade with minimal downtime. </p></td></tr></table></div></div><div class="sect2" title="Managing M mode and UTF-8 mode"><div class="titlepage"><div><div><h3 class="title"><a name="mng_mode"></a>Managing M mode and UTF-8 mode</h3></div></div></div><p>With <a class="ulink" href="http://icu-project.org" target="_blank">International Components for Unicode</a> (ICU) version 3.6 or later installed, GT.M's UTF-8 mode provides support for <span class="trademark">Unicode</span>(R) (ISO/IEC-10646) character strings. On a system that does not have ICU 3.6 or later installed, GT.M only supports M mode.</p><p>On a system that has ICU installed, GT.M optionally installs support for both M mode and UTF-8 mode, including a utf8 subdirectory of the directory where GT.M is installed. From the same source file, depending upon the value of the environment variable gtm_chset, the GT.M compiler generates an object file either for M mode or UTF-8 mode. GT.M generates a new object file when it finds both a source and an object file, and the object predates the source file and was generated with the same setting of $gtm_chset/$ZCHset. A GT.M process generates an error if it encounters an object file generated with a different setting of $gtm_chset/$ZCHset than that processes' current value.</p><p>Always generate an M object module with a value of $gtm_chset/$ZCHset matching the value processes executing that module will have. As the GT.M installation itself contains utility programs written in M, their object files also conform to this rule. In order to use utility programs in both M mode and UTF-8 mode, the GT.M installation ensures that both M and UTF-8 versions of object modules exist, the latter in the utf8 subdirectory. This technique of segregating the object modules by their compilation mode prevents both frequent recompiles and errors in installations where both modes are in use. If your installation uses both modes, consider a similar pattern for structuring application object code repositories.</p><p>GT.M is installed in a parent directory and a utf8 subdirectory as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Actual files for GT.M executable programs (mumps, mupip, dse, lke, and so on) are in the parent directory, that is, the location specified for installation.</p></li><li class="listitem"><p>Object files for programs written in M (GDE, utilities) have two versions - one compiled with support for UTF-8 mode in the utf8 subdirectory, and one compiled without support for UTF-8 mode in the parent directory. Installing GT.M generates both versions of object files, as long as ICU 3.6 or greater is installed and visible to GT.M when GT.M is installed, and you choose the option to install UTF-8 mode support. Note that on 64-bit versions of GT.M, the object code is in shared libraries, rather than individual files in the directory.</p></li><li class="listitem"><p>The utf8 subdirectory has files called mumps, mupip, dse, lke, and so on, which are relative symbolic links to the executables in the parent directory (for example, mumps is the symbolic link ../mumps).</p></li><li class="listitem"><p>When a shell process sources the file gtmprofile, the behavior is as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>If $gtm_chset is "m", "M" or undefined, there is no change from the previous GT.M versions to the value of the environment variable $gtmroutines.</p></li><li class="listitem"><p>If $gtm_chset is "UTF-8" (the check is case-insensitive),</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>$gtm_dist is set to the utf8 subdirectory (that is, if GT.M is installed in /usr/lib/fis-gtm/gtm_V7.0-001_i686, then gtmprofile sets $gtm_dist to /usr/lib/fis-gtm/gtm_V7.0-001_i686/utf8).</p></li><li class="listitem"><p>On platforms where the object files have not been placed in a libgtmutil.so shared library, the last element of $gtmroutines is $gtm_dist($gtm_dist/..) so that the source files in the parent directory for utility programs are matched with object files in the utf8 subdirectory. On platforms where the object files are in libgtmutil.so, that shared library is the one with the object files compiled in the mode for the process.</p></li></ul></div></li></ul></div></li></ul></div><p>For more information on gtmprofile, refer to the <a class="ulink" href="../books/ao/UNIX_manual/ch03.html" target="_blank">Basic Operations</a> chapter of GT.M Administration and Operations Guide.</p><p>Although GT.M uses ICU for UTF-8 operation, ICU is not FIS software and FIS does not support ICU.</p></div><div class="sect2" title="Setting the environment variable TERM"><div class="titlepage"><div><div><h3 class="title"><a name="setterm"></a>Setting the environment variable TERM</h3></div></div></div><p>The environment variable TERM must specify a terminfo entry that accurately matches the terminal (or terminal emulator) settings. Refer to the terminfo man pages for more information on the terminal settings of the platform where GT.M needs to run.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Some terminfo entries may seem to work properly but fail to recognize function key sequences or fail to position the cursor properly in response to escape sequences from GT.M. GT.M itself does not have any knowledge of specific terminal control characteristics. Therefore, it is important to specify the right terminfo entry to let GT.M communicate correctly with the terminal. You may need to add new terminfo entries depending on your specific platform and implementation. The terminal (emulator) vendor may also be able to help.</p></li><li class="listitem"><p>GT.M uses the following terminfo capabilities. The full variable name is followed by the capname in parenthesis:</p><pre class="programlisting">auto_right_margin(am), clr_eos(ed), clr_eol(el), columns(cols), cursor_address(cup), cursor_down(cud1), cursor_left(cub1), cursor_right(cuf1), cursor_up(cuu1), eat_newline_glitch(xenl), key_backspace(kbs), key_dc(kdch1),key_down(kcud1), key_left(kcub1), key_right(kcuf1), key_up(kcuu1), key_insert(kich1), keypad_local(rmkx),keypad_xmit(smkx), lines(lines).</pre></li></ul></div><p>GT.M sends keypad_xmit before terminal reads for direct mode and READs (other than READ *) if EDITING is enabled. GT.M sends keypad_local after these terminal reads.</p></div><div class="sect2" title="Installing Compression Libraries"><div class="titlepage"><div><div><h3 class="title"><a name="install_comp_lib"></a> Installing Compression Libraries</h3></div></div></div><p> If you plan to use the optional compression facility for replication, you must provide the compression library. The GT.M interface for compression libraries accepts the zlib compression libraries without any need for adaptation. These libraries are included in many UNIX distributions and are downloadable from the <a class="ulink" href="http://www.zlib.net" target="_blank">zlib home page</a>. If you prefer to use other compression libraries, you need to configure or adapt them to provide the same API as that provided by zlib.</p><p> If a package for zlib is available with your operating system, FIS suggests that you use it rather than building your own.</p><p> By default, GT.M searches for the libz.so shared library in the standard system library directories (for example, /usr/lib, /usr/local/lib, /usr/local/lib64). If the shared library is installed in a non-standard location, before starting replication, you must ensure that the environment variable LIBPATH (AIX) or LD_LIBRARY_PATH (GNU/Linux) includes the directory containing the library. The Source and Receiver Server link the shared library at runtime. If this fails for any reason (such as file not found, or insufficient authorization), the replication logic logs a DLLNOOPEN error and continues with no compression.</p><p>Although GT.M uses a library such as zlib for compression, such libraries are not FIS software and FIS does not support any compression libraries.</p></div></div><div class="sect1" title="Change History"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GTMchng_hist"></a> Change History</h2></div></div></div><div class="sect2" title="V7.0-001"><div class="titlepage"><div><div><h3 class="title"><a name="GTMtaV70-001ble"></a>V7.0-001</h3></div></div></div><p>Fixes and enhancements specific to V7.0-001:</p><p></p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>                <p><span class="bold"><strong>Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Prior Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Category</strong></span></p>              </th><th>                <p><span class="bold"><strong>Summary</strong></span></p>              </th></tr></thead><tbody><tr><td><p><a class="link" href="#GTM-4272">GTM-4272</a></p></td><td><p>C9C04-001975</p></td><td><p>Admin</p></td><td><p>MUPIP BACKUP displays information in standard GT.M messages format</p></td></tr><tr><td><p><a class="link" href="#GTM-4814">GTM-4814</a></p></td><td><p>C9D01-002231</p></td><td><p>Language</p></td><td><p>M-profiling (VIEW "TRACE") restored after ZSTEP</p></td></tr><tr><td><p><a class="link" href="#GTM-5148">GTM-5148</a></p></td><td><p>C9D10-002419</p></td><td><p>Admin</p></td><td><p>REPLAHEAD message for ROLLBACK</p></td></tr><tr><td><p><a class="link" href="#GTM-8010">GTM-8010</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Appropriate handling of deviceparmeters on OPEN "dev/null" and EXCEPTION values in general</p></td></tr><tr><td><p><a class="link" href="#GTM-8681">GTM-8681</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP BACKUP -RECORD stores the time of its start when it completes successfully <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8843">GTM-8843</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>GT.M SOCKET devices support non blocking WRITEs <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-9057">GTM-9057</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP JOURNAL -EXTRACT to a FIFO device <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-9131">GTM-9131</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>LOGTPRESTART appropriately identifies restarts due to less frequent reduced statsdb file extensions</p></td></tr><tr><td><p><a class="link" href="#GTM-9213">GTM-9213</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>A process can SET  the trailing portion of $SYSTEM <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-9324">GTM-9324</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>ZSTEP restored after MUPIP INTRPT or $ZTIMEOUT; ZSTEP subject to ZBREAK restriction <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-9333">GTM-9333</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Handle one asynchronous event of any type at a time</p></td></tr><tr><td><p><a class="link" href="#GTM-9363">GTM-9363</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> Source Server polling and TLS renegotiation improvements <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-9373">GTM-9373</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Additional information from MUPIP REPLICATE -SOURCE -SHOWBACKLOG <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-9378">GTM-9378</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Appropriate handling of pattern match in large compilations</p></td></tr><tr><td><p><a class="link" href="#GTM-9382">GTM-9382</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Fix V7.0-000 issue with symbolic links and relative addresses for $gtm_dist</p></td></tr><tr><td><p><a class="link" href="#GTM-9388">GTM-9388</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>ZSHOW "B" shows the action <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-9392">GTM-9392</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>NOISOLATION characteristics maintained correctly when databases and global directories are not aligned</p></td></tr><tr><td><p><a class="link" href="#GTM-9400">GTM-9400</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP REORG prevents MUPIP STOP from causing KILLABANDONED</p></td></tr><tr><td><p><a class="link" href="#GTM-9405">GTM-9405</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Better diagnostic information from MUPIP JOURNAL for errors reading and writing flat files</p></td></tr><tr><td><p><a class="link" href="#GTM-9408">GTM-9408</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Prevent an occasional indefinite HANG</p></td></tr><tr><td><p><a class="link" href="#GTM-9409">GTM-9409</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>More context with certain JOBFAIL errors</p></td></tr><tr><td><p><a class="link" href="#GTM-9410">GTM-9410</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>GT.M components try to ensure a missing global directory does not mean a GDE is writing an updated version  </p></td></tr><tr><td><p><a class="link" href="#GTM-9416">GTM-9416</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Receiver server started with -REUSE continues to operate across a connection reset</p></td></tr><tr><td><p><a class="link" href="#GTM-9422">GTM-9422</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> Counter statistics replace waiting state for critical code section waits <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-9423">GTM-9423</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP DUMPFHEAD recognizes the -FLUSH qualifier <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-9424">GTM-9424</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> Automatically select the best copy mechanism for MUPIP BACKUP <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-9425">GTM-9425</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>$GTCM_&lt;node-name&gt; accepts "host-name:port-number"</p></td></tr><tr><td><p><a class="link" href="#GTM-9429">GTM-9429</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> Features such as $QLENGTH() and $QSUBSCRIPT() do tighter checking for canonic references</p></td></tr><tr><td><p><a class="link" href="#GTM-9432">GTM-9432</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>ztriggers with GT.CM errors out with REMOTEDBNOTRIG</p></td></tr><tr><td><p><a class="link" href="#GTM-9434">GTM-9434</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Maximum tree depth of 11 <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-9437">GTM-9437</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> USE for SOCKET improvements</p></td></tr><tr><td><p><a class="link" href="#GTM-9441">GTM-9441</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Cleaner build for the encrption plug-in on AIX</p></td></tr><tr><td><p><a class="link" href="#GTM-9442">GTM-9442</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Scripts no longer rely on /usr/bin/which</p></td></tr><tr><td><p><a class="link" href="#GTM-9443">GTM-9443</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP SET -JOURNAL more cautious with the journal file chain</p></td></tr><tr><td><p><a class="link" href="#GTM-9444">GTM-9444</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> Change in behavior when an indirect argument to a potentially argumentless command evalutes to an empty string</p></td></tr><tr><td><p><a class="link" href="#GTM-9451">GTM-9451</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>TPNOACID releases database critical sections for LOCK operations that hang for lack of LOCKSPACE </p></td></tr><tr><td><p><a class="link" href="#GTM-9452">GTM-9452</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>CLOSE deviceparameter REPLACE overwrites an existing file, which RENAME does not</p></td></tr></tbody></table></div></div></div><div class="sect1" title="Database"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46107595483696"></a>Database </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-9392"></a> GT.M correctly maintains NOISOLATION characteristics for globals. Due to a regression in V6.3-003, the application of NOISOLATION to globals may not have worked when there was a configuration difference between a region's maximum key size in the Global Directory and the database file header. The workaround was to ensure that the maximum key size settings are the same in the Global Directory and the database file header. (GTM-9392)</p></li><li class="listitem"><p><a name="GTM-9434"></a> GT.M databases support a maximum tree depth of 11 levels; previously the limit was 7. The workarounds were to use a large block size, or to map the data into multiple files. (GTM-9434) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9451"></a> GT.M issues a TPNOTACID message and releases all database critical sections it owns during any LOCK operation in the final retry that could result in an indefinite hang, e.g. LOCKSPACE full. Previously, LOCK operations with a timeout less than $gtm_tpnotacidtime (or the default of 2 seconds), would not generate such an action. As a result, a process could hang in the final transaction processing retry. (GTM-9451)</p></li></ul></div></div><div class="sect1" title="Language"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46107595282336"></a>Language </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-4814"></a> GT.M restores TRACE operation (M-Profiling) after ZSTEP operations. However, issuing a VIEW "[NO]TRACE" may interfere with ZSTEP operations. Note that using ZSTEP materially impacts M-Profiling times, so using these two facilities together may be problematic. Previously, ZSTEP usage usually turned off M-Profiling. (GTM-4814)</p></li><li class="listitem"><p><a name="GTM-8010"></a> OPEN "/dev/null" with deviceparameters works appropriately. The only deviceparameters GT.M actually attempts to implement for /dev/null are [NO]WRAP and EXCEPTION= and, at least in theory, the device should never give an exception. Previously, such an OPEN handled deviceparameters inappropriately, which could cause unintended WRAP behavior or an attempt to instantiate an exception handler constructed out of garbage, which, in turn, could cause a segmentation violation (SIG-11). The workaround was to specify no deviceparmeters on an OPEN of /dev/null. In addition, GT.M appropriately handles EXCEPTION= values settings whose lengths are between 128 and 255 bytes long. Previously, GT.M mishandled such settings potentially resulting in a segmentation violation (SIG-11). The second issue has not been reported by a customer, but was observed in development. (GTM-8010)</p></li><li class="listitem"><p><a name="GTM-8843"></a> GT.M SOCKET devices support non blocking WRITEs. For more information, refer to the <a class="link" href="#about8843" title="Additional Information about GTM-8843">Additional Information</a> section.  (GTM-8843) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9213"></a> GT.M accepts SET $SYSTEM=expr, where expr appends to the initial value up to the length permitted for an initial value; an empty string removes any current added value. Initial values are determined by the $gtm_sysid environment variable always preceded by "47,". Previously, an attempt to SET $SYSTEM produced an SVNOSET error. (GTM-9213) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9324"></a> GT.M restores ZSTEP operations after an asynchronous event such as MUPIP INTRPT or $ZTIMEOUT; previously asynchronous events implicitly removed any pending ZSTEP operations. In addition, a restriction configured for ZBREAK also applies to ZSTEP; previously it did not. If you prefer we separate these restrictions, please let FIS know. (GTM-9324) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9378"></a> The GT.M compiler appropriately manages the heap during compilation of pattern match (?) operations; previously it could mishandle an address that produced a segmentation violation at compile time or an ASSERTPRO at runtime, typically with large patterns. (GTM-9378)</p></li><li class="listitem"><p><a name="GTM-9388"></a> ZSHOW "B" output consists of an entryref followed by any associated code with a right angle-bracket delimiter after the entryref. Previously the outbut only contained the entryref. (GTM-9388)  <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9408"></a> The HANG command avoids a race condition where a non-zero duration could occasionally hang indefinitely. The change makes things, including $HOLOROG and $ZUT, that rely on the system clock more sensitive to changes which adjust that resource. The workaround for this was to wake the affected process with a SIGALRM, and change any HANG that exhibited the symptom to use a timed READ of some non-responding device in place of the HANG. (GTM-9408)</p></li><li class="listitem"><p><a name="GTM-9429"></a> $QLENGTH() and $QSUBSCRIPT() report errors when a literal portion of the namevalue argument contains a leading decimal point (.) or minus-sign (-) not followed by one or more numeric digits, or text matching the appearance of a $[Z]CHAR() function. Previously these cases were not appropriately detected. (GTM-9429) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span></p></li><li class="listitem"><p><a name="GTM-9437"></a> Making a socket current in a SOCKET device with "USE dev:SOCKET=handle" is now significantly faster when no other device parameters are specified.Previously, the operation was slowed down by preparations needed by other device parameters. In addition, USE ATTACH and USE DETACH issue an error if additional device parameters are specified. Previously, they silently ignored the extra device parameters. (GTM-9437) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span></p></li><li class="listitem"><p><a name="GTM-9444"></a> When a command has an argument in the form @indir where indir evaluates to the empty string, GT.M treats it as equivalent to the argument being an empty string, which typically generates an error; the exceptions being IF, QUIT, and TROLLBACK where the indirect-derived argmentless form acts the same as an empty string argument,  and also cases where the empty string acts as a NOOP, namely: HANG, WRITE, XECUTE and ZSHOW. For example: DO @x where ""=x now produces a LABELEXPECTED error. Previously with this form, some potentially argumentless commands (DO, KILL, LOCK, NEW, and ZDEALLOCATE) behaved as if argumentless, and certain Z* commands behaved as NOOPs. We believe this is more in conformance with the language definition and less likely to violate the principal of "least surprise." (GTM-9444) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span></p></li><li class="listitem"><p><a name="GTM-9452"></a> CLOSE accepts REPLACE=&lt;file-name&gt; as a deviceparameter, to overwrite an existing file. RENAME or REPLACE that specifies the original name simply closes the file. Previously GT.M only provided RENAME on CLOSE which intentionally protected against accidental replacement, including of itself. (GTM-9452)</p></li></ul></div></div><div class="sect1" title="System Administration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46107595604560"></a>System Administration </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-4272"></a> MUPIP BACKUP and RESTORE display information in standard GT.M messages format. The messages display the full path when they include a file context. Please refer to the Error and Other Messages section of these release notes for details on the standard messages. Previously, certain MUPIP BACKUP and RESTORE messages did not follow the standard GT.M message format and/or did not display the full path when there was a file context. (GTM-4272)</p></li><li class="listitem"><p><a name="GTM-5148"></a> The Receiver Server reports a REPLAHEAD warning when it detects the replicating instance is ahead of the originating instance. The message also includes the backlog count, and information on whether the Receiver Server requires a manual rollback. Previously, the Receiver Server recorded the REPL_ROLLBACK_FIRST message which lacked clarity on the Receiver Server actions. (GTM-5148)</p></li><li class="listitem"><p><a name="GTM-8681"></a> MUPIP BACKUP -RECORD provides a timestamp marking the start of backup when a backup a backup completes with no errors. The timestamp provides a backup date which is meaningful to operators without regard to when a particular transaction might have occurred. MUPIP DUMPFHEAD characterizes the timestamp as "sgmnt_data.last_start_backup", while DSE DUMP -FILEHEADER, labels it as "Last Record Backup Start". If a database has never been backed up with MUPIP BACKUP -RECORD, the utilities display "Never" for the field. Previously the -RECORD option stored only a starting transaction number. (GTM-8681) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9057"></a> MUPIP JOURNAL -EXTRACT accepts a named pipe (FIFO) as its output device. A process needs to open one end of the FIFO (in read mode) and the device can then be passed as an extract output device. Previously, such extracts could not be written into a FIFO.(GTM-9057) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9363"></a> The Source Server performs its polling activities in a more CPU-efficient manner. Also, the Source Server schedules a TLS renegotiation after an appropriate multiple of heartbeat events. This prevents a TLS renegotiation from interfering/overlapping with the normal replication message interchange mechanism and eliminates the need of a separate timer event for running periodic TLS renegotiation. Previously, the Source Server used a separate timer for TLS renegotiation which could cause a race condition. MUPIP produces the MUPCLIERR error when the specified heartbeat interval (the fifth parameter of -CONNECTPARAMS) is larger than the TLS renegotiate interval. Previously, it did not report this condition as an error. The default value of the heartbeat max period (the sixth parameter) of -CONNECTPARAMS is 300 seconds. Previously, the value was 60 seconds. The Receiver Server logs an REPLCOMM information message when the connection breaks during a message exchange. Previously, the Receiver Server reported this event in its log file but not as an REPLCOMM informational message.. (GTM-9363) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span> <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9373"></a> MUPIP REPLICATE -SOURCE -SHOWBACKLOG considers a transaction as backlogged until it is acknowledged from the Receiver Server. The SRCBACKLOGSTATUS message reports whether a Receiver Server is behind, ahead, or has not yet acknowledged the transactions. The LASTTRANS message reports the state (posted, sent, or acknowledged) of the Source Server transactions under replication. Previously, the MUPIP REPLICATE -SOURCE -SHOWBACKLOG did not display the SRCBACKLOGSTATUS and LASTTRANS messages, did not consider in-flight transactions as a backlog and did not report when the replicating instance was ahead during conditions such as online rollback. (GTM-9373) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9400"></a> MUPIP REORG defers MUPIP STOP recognition while performing bit map adjustments after an action that frees a block, which prevents such events from possibly causing KILLABANDONED and associated errors. Previously REORG did not use such a deferral. The workaround was to stop the REORG with a CTRL-C. (GTM-9400)</p></li><li class="listitem"><p><a name="GTM-9410"></a>GDE attempts to avoid inappropriately creating a global directory by retrying its opening of an existing file a number of times; other components that read a global directory use the same technique to ensure a missing global directory is not a transient condition. These additional attempts take a fraction of a second, but one may perceive the additional time. Writing a revised global directory has a short gap between the removal of the prior file and the replacement by the new/revised file, during which another process might find the global directory missing; previously this was unlikely but has been encountered. (GTM-9410)</p></li><li class="listitem"><p><a name="GTM-9416"></a> A Receiver Server of an SI replication started with -REUSE qualifier continues to run normally on a connection reset. Previously on a connection reset, the receiver server exited with GTM-E-REUSEINSTNAME. (GTM-9416)</p></li><li class="listitem"><p><a name="GTM-9423"></a> MUPIP DUMPFHEAD -FLUSH -REGION performs a database file header flush for the specified region(s) before displaying the database file header fields. If the database file header flush fails, MUPIP DUMPFHEAD -FLUSH produces the BUFFLUFAILED warning. The qualifier makes the command considerably more heavy weight, and, in most cases, does not provide material benefit, but there may be cases where it addresses a need. Previously, MUPIP DUMPFHEAD provided no option to flush the database file header fields. (GTM-9423) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9424"></a> MUPIP BACKUP -DATABASE uses what seems to be the best copy mechanism available on the kernel to create a backup copy of the database. If the copy mechanism supports monitoring, MUPIP BACKUP -SHOWPROGRESS periodically displays the transfer progress, estimated time left, speed, and the number of transaction applied to the database during backup. Pressing CTRL_C performs the appropriate cleanup and exits the BACKUP command. Previously, MUPIP BACKUP used cp or pax for copy phase and did not have a progress monitoring mechanism. On kernels where the copy mechanism supports robust error handling, MUPIP BACKUP handles error conditions such as ENOMEM, ENOSPC, EIO, and so on with a more descriptive action message. </p><p>MUPIP BACKUP displays the BKUPFILPERM message when it finds that there is no write permission for the backup file. MUPIP BACKUP performs this check before starting BACKUP. Previously, MUPIP BACKUP reported this condition after performing the copy.</p><p> The -RETRY=n qualifier of MUPIP BACKUP -DATABASE makes n number of attempts to retry performing BACKUP if the backup fails. If -RETRY is not specified, GT.M defaults -RETRY to zero (0). In case of an error, retry attempts are always based on cp or pax. Previously, the -RETRY qualifier was not available.(GTM-9424) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span> <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9425"></a> The environment variable $GTCM_&lt;node-name&gt; accepts host-name and port-number in the form "host-name:port-number". Previously, host names were accepted only in the form [host-name]:port-number. (GTM-9425)</p></li><li class="listitem"><p><a name="GTM-9441"></a> The GT.M encryption plugin build looks for libraries in /opt/freeware. Previously, the build could generate plugins based on AIX RPM/YUM encryption packages which obtain incompatible library dependencies at run time from elsewhere (e.g. /usr/local/lib). [AIX] (GTM-9441)</p></li><li class="listitem"><p><a name="GTM-9442"></a> The gtminstall script wrapper (gtminstall.sh) and the reference encryption plugin scripts no longer rely on the presence of the utility /usr/bin/which. (GTM-9442)</p></li><li class="listitem"><p><a name="GTM-9443"></a> When MUPIP SET -JOURNAL encounters a temporary journal file that is an artifact of the renaming process GT.M uses to create a chain of journal files, it only deletes it after concluding that has been abandoned by seeing that it persists for an interval longer than the renaming process should take. Previously when MUPIP encountered a temporary journal file, it assumed the file was an abandoned artifact and immediately deleted it potentially inappropriately breaking the chain. (GTM-9443)</p></li></ul></div></div><div class="sect1" title="Other"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46107595407328"></a>Other </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-9131"></a> LOGTPRESTART appropriately identifies restarts associated with extensions of a statsdb database; Previously, it inappropriately identified these as caused by a BITMAP conflict. GT.M doubles the block count with each statsdb size increase; Previously, GT.M used a fixed extension size of 2050 blocks. GT.M saves the database block count after each extension and uses it as the initial size for any subsequent recreation of the statsdb database during the life of the associated database file; Previously, GT.M always created a statsdb database with 2050 blocks, which is still the initial size for such a database file when the corresponding database is first created. (GTM-9131)</p></li><li class="listitem"><p><a name="GTM-9333"></a> At any point GT.M recognizes only one request for any type of asynchronous processing, including CTRL-C, CTRAP, MUPIP INTRPT, $ZMAXTPTIME, and $ZTIMEOUT. Note that MUPIP INTRPT (SIGUSR1) and untrapped CTRL-C can interrupt other asynchronous events, and an untrapped CTRL-C cancels any other pending asynchronous processing. Previously, GT.M could inappropriately attempt to handle multiple requests for a single type of asynchronous operation, which caused unintended behavior, most likely a stack overflow. The workaround was to avoid rapid interrupting. (GTM-9333)</p></li><li class="listitem"><p><a name="GTM-9382"></a> GT.M appropriately handles symbolic links and relative paths in the $gtm_dist path. In V7.0-000, GT.M issued a GTMSECSHRPERM or SYSCALL error when the first process attempting access to a previously quiescent database file had read-only permissions to the file. Other actions that require gtmsecshr (e.g., when dealing with processes or resources created or owned by a different user, such as waking or checking for the existence, and removing or instantiating a resource, such as semaphores, shared memory or socket files) could result in such error messages as well. The workaround was to avoid symbolic links and relative paths for V7.0-000 (GTM-9382)</p></li><li class="listitem"><p><a name="GTM-9405"></a> MUPIP JOURNAL reports error conditions related to file reads and file writes both for sequential devices and non-database product-specific files more accurately. Previously, MUPIP always displayed "ENO1 : operation not permitted" for such error conditions. (GTM-9405)</p></li><li class="listitem"><p><a name="GTM-9409"></a> GT.M appropriately reports the underlying cause of a JOBFAIL error due to an issue setting up a socketpair to transfer context to the new JOB process. Previously, it did not supply this information. (GTM-9409)</p></li><li class="listitem"><p><a name="GTM-9422"></a> GT.M provides counter statistics designated DEXA, GLB, JNL, MLK, PRC, TRX, ZAD, JOPA, AFRA, BREA, MLBA &amp; TRGA, which accumulate counts when a process waits for a critical code section in various cases. These counters are documented in the "ZSHOW" section of the GT.M Programmers Guide. Previously, GT.M provided toggle statistics to indicate when a process was waiting for a critical code section. (GTM-9422) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span> <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-9432"></a> A ZTRIGGER command involving a remote GT.CM database errors out with GTM-E-REMOTEDBNOTRIG. Previously, it resulted in a segmentation violation (SIG-11). (GTM-9432)</p></li></ul></div></div><div class="sect1" title="Additional Information"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GTMAddinform"></a>Additional Information</h2></div></div></div><div class="sect2" title="Additional Information about GTM-8843"><div class="titlepage"><div><div><h3 class="title"><a name="about8843"></a>Additional Information about GTM-8843</h3></div></div></div><p>Sockets default to blocking WRITEs. WRITE /BLOCK("OFF") enables non blocking WRITEs for the current socket of the current SOCKET device.</p><p>A socket must be enabled for non blocking WRITEs before enabling it for TLS if both features are desired.</p><p>For non blocking sockets, GT.M retries a WRITE that blocks up to the number of times specified by the $gtm_non_blocked_write_retries environment variable with a 100 millisecond delay between each retry.  The default retries value is 10 times if $gtm_non_blocked_write_retries is not defined. </p><p>If WRITE remains blocked after the specified retries, the WRITE sets $DEVICE to "1,Resource temporarily unavailable" and issues an error if IOERROR is "TRAP".</p><p>If IOERROR is not "TRAP", $DEVICE must be checked after each WRITE.  An attempt to WRITE to a socket after it has been blocked is an error which sets $DEVICE to "1,Non blocking WRITE blocked - no further WRITEs allowed". Thus the only operation permitted on a blocked socket is to CLOSE it.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Note that multi-argument WRITEs are equivalent to a series of one argument WRITEs, and that GT.M turns unparenthesized concatenation within a write argument into multi-argument WRITEs.  Format control characters such as "!" and "#" are each considered as an argument.</p><p>Note that a significant delay between bytes for any reason, including blocking, especially within a multibyte character when CHSET is UTF-8, may be considered an error by the receiving end of a connection. If the application is unable to handle such a delay, it may result in an application error. </p></td></tr></table></div><p>A WRITE to a non blocking socket, which is not enabled for TLS, may terminate early on the following events:</p><p>&lt;CTRL-C&gt;, exceeding $ZMAXTPTIME, or $ZTIMEOUT expiring.  These events result in a transfer to the interrupt vector or error handler at the next execution boundary as described in the "Interrupt Handling" section of the GT.M Programmer's Guide.</p><p>When non blocking WRITEs are enabled for a socket, WRITE /WAIT may check if that socket would not block on WRITE in addition to READ. The optional second argument may contain a string containing "READ" and/or "WRITE".</p><p>If the second argument is omitted or specifies both "READ" and "WRITE" and the socket selected by WRITE /WAIT is ready for both READ and WRITE, $KEY contains:</p><pre class="programlisting">READWRITE|&lt;socket handle&gt;|&lt;address&gt;.</pre><p>If the second argument is omitted or contains "WRITE", WRITE /WAIT checks readiness for WRITE on non blocking sockets, but never checks readiness to WRITE on blocking sockets, even if explicitly requested.</p><p>If the socket selected by a WRITE /WAIT which implicitly or explicitly requests the write state would block on a READ but not block on WRITE, $KEY contains:</p><pre class="programlisting">WRITE|&lt;socket handle&gt;|&lt;address&gt;</pre><p>Note that a WRITE may still not be able to complete if it tries to write more bytes than the system is ready to accept.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>In most circumstances, WRITE /WAIT or WRITE /WAIT(timeout,"WRITE") for SOCKET devices which contain a non blocking socket returns immediately because non blocking sockets are usually ready for writing.</p></td></tr></table></div><p>If the socket selected by WRITE /WAIT which implicitly or explicitly requests the read state would not block on a READ but would block on a WRITE, $KEY contains:</p><pre class="programlisting">READ|&lt;socket handle&gt;|&lt;address&gt;</pre><p>If the second argument only specifies "WRITE", WRITE /WAIT does not check incoming connections for listening sockets.</p><p>The optional third argument to WRITE /WAIT can be used to check only a single socket instead of all sockets in the current SOCKET device by specifying the handle name of a socket:</p><pre class="programlisting">WRITE /WAIT[(timeout[,[what][,handle]])]</pre><p>$ZKEY after a prior WRITE /WAIT will contain a piece of the format "WRITE|sockethandle|ipaddress" if a non blocking socket was considered writable which will be the case most of the time.  If a socket was also readable, there will be two pieces in $ZKEY for the socket, one for WRITE and the other for READ.</p><p>Whether a socket is enabled for non blocking WRITEs may be determined by:</p><pre class="programlisting">$ZSOCKET(device,"BLOCKING",index)</pre><p>which returns either 1 (TRUE) for blocking, or 0 (FALSE) for non blocking.</p></div></div><div class="sect1" title="Error and Other Messages"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46107595228304"></a>Error and Other Messages</h2></div></div></div><div class="sect2" title="BACKUPDBFILE  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMBACKUPDBFILE"></a>BACKUPDBFILE <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>BACKUPDBFILE, </strong></span>
DB file dddd backed up in file bbbb</p><p>MUPIP Information: This message indicates MUPIP BACKUP successfully backed up database file dddd to file bbbb.</p><p>Action: None required.</p></div><div class="sect2" title="BACKUPFAIL  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMBACKUPFAIL"></a>BACKUPFAIL <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>BACKUPFAIL, </strong></span>
MUPIP cannot start backup with the above errors</p><p>MUPIP Error: This message indicates MUPIP BACKUP was unable to complete the backup.</p><p>Action: Review accompanying messages for action guidance.</p></div><div class="sect2" title="BACKUPREPL  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMBACKUPREPL"></a>BACKUPREPL <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>BACKUPREPL, </strong></span>
Replication Instance file iiii backed up in file rrrr</p><p>MUPIP Information: This message indicates that MUPIP BACKUP was successful in backing up replication instance file iiii to file rrrr.</p><p>Action: None required.</p></div><div class="sect2" title="BACKUPSEQNO  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMBACKUPSEQNO"></a>BACKUPSEQNO <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>BACKUPSEQNO, </strong></span>
Journal Seqnos up to 0xhhhh are backed up</p><p>MUPIP Information: This message indicates MUPIP BACKUP -REPLINSTANCE backed up journal sequence numbers up to 0xhhhh to the specified replication instance file.</p><p>Action: None required.</p></div><div class="sect2" title="BACKUPSUCCESS  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMBACKUPSUCCESS"></a>BACKUPSUCCESS <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>BACKUPSUCCESS, </strong></span>
Backup completed successfully</p><p>MUPIP Information: This message indicates the backup actions specified with MUPIP BACKUP command were successful. MUPIP does not display this message until all actions are complete.</p><p>Action: None required.</p></div><div class="sect2" title="BACKUPTN  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMBACKUPTN"></a>BACKUPTN <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>BACKUPTN, </strong></span>
Transactions from 0xbbbb to 0xeeee are backed up</p><p>MUPIP Information: This information message indicates MUPIP BACKUP backed up transactions from 0xbbbb to 0xeeee.</p><p>Action: None required.</p></div><div class="sect2" title="BKUPFILEPERM  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMBKUPFILEPERM"></a>BKUPFILEPERM <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>BKUPFILEPERM, </strong></span>
Backup file dddd does not have write permission</p><p>MUPIP Information: MUPIP BACKUP encountered an authorization issue with the target location while preparing to perform the BACKUP.</p><p>Action: Ensure the target location has appropriate authorization and the appropriate user is properly configured.</p></div><div class="sect2" title="BKUPPROGRESS  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMBKUPPROGRESS"></a>BKUPPROGRESS <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>BKUPPROGRESS, </strong></span>
Transfer : cccc / tttt (pppp%) ; Speed : zzzz MiB/sec ; Transactions : nnnn ; Estimated left : tt minutes</p><p>MUPIP Information: MUPIP BACKUP -SHOWPROGRESS displays this message when the kernel supports copy progress monitoring. cccc is the size (MiB or GiB) of the copied database file and tttt is the total size of the database file. pppp is the progress percentage. Speed is always in MiB/sec and can vary based on the resources available for copy. Transactions includes the number of transaction (increments of current tn), applied to the region during MUPIP BACKUP. If the kernel does not support progress monitoring, MUPIP BACKUP -SHOWPROGRESS does not report this message. This message is expected to appear after about 25% completion of copy. Note that GT.M instructs the kernel to copy as much data as possible in one go. If the kernel has available resources and the database file size is relatively small, you may only see one BKUPPROGRESS message followed by the BACKUP COMPLETED message.</p><p>Action: None required.</p></div><div class="sect2" title="BKUPRETRY  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMBKUPRETRY"></a>BKUPRETRY <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>BKUPRETRY, </strong></span>
Retrying MUPIP BACKUP for region: rrrr (database file: dddd). Attempt: #nnnn of mmmm</p><p>MUPIP Information: This message appears when MUPIP BACKUP initiates a retry attempt because a prior backup attempt failed. #nnnn is the current retry attempt count and mmmm is the maximum number of retry attempts.</p><p>Action: None required.</p></div><div class="sect2" title="CMDERR  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMCMDERR"></a>CMDERR <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>CMDERR, </strong></span>
Error running command : cccc</p><p>MUPIP Error: This message indicates MUPIP BACKUP received an error trying to execute the shell command cccc.</p><p>Action: Look at the error message and preceding messages. Check for errors in paths, authorizations and/or other possibilities related to the specified MUPIP BACKUP actions.</p></div><div class="sect2" title="CRYPTNOV4  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMCRYPTNOV4"></a>CRYPTNOV4 <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>CRYPTNOV4, </strong></span>
ffff is an encrypted database. Cannot downgrade(to V4) with Encryption option enabled</p><p>MUPIP Error: An attempt to downgrade ffff which is an encrypted database to the V4 (GT.M version 4) format failed because the V4 format does not support encrypted database files.</p><p>Action: Use the database in the current format. If a V4 format is required, extract the data in unencrypted ZWRite format with MUPIP EXTRACT and load it into a newly created V4 database.</p></div><div class="sect2" title="DBMISALIGN  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMDBMISALIGN"></a>DBMISALIGN <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>DBMISALIGN, </strong></span>
Database file xxxx has yyyy blocks which does not match alignment rules. Reconstruct the database from a backup or extend it by at least zzzz blocks.</p><p>MUPIP Error: This error appears when GT.M detects a mismatch between the total block count in the file header and the expected block count based on the database file size reported by the file system. This error may appear when you perform a MUPIP INTEG -FILE after a GT.M upgrade on a database file which has not yet been opened by a process using a normal database access which performs an automatic database file header upgrade.</p><p>Action: If there are prior messages, adress them first. Extend the database by at least one block, perform at least one $GET() operation or run MUPIP INTEG -REGION. If the error persists, reconstruct the database from a backup.</p></div><div class="sect2" title="DIRACCESS  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMDIRACCESS"></a>DIRACCESS <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>DIRACCESS, </strong></span>
Do not have full access to directory for temporary files: pppp</p><p>MUPIP Error: The message indicates that MUPIP BACKUP does not have appropriate access to the temporary directory pppp.</p><p>Action: Check the path and the directory permissions for the temporary directory. You can also set the gtm_baktmpdir environment variable to specify the location of the temporary directory.</p></div><div class="sect2" title="LASTTRANS  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMLASTTRANS"></a>LASTTRANS <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>LASTTRANS, </strong></span>
Last transaction sequence number SSSS : NNNN</p><p>MUPIP Information: This message appears with the output of MUPIP REPLICATE -SOURCE -SHOWBACKLOG. SSSS denotes the three states the latest transaction sequence number - posted, sent, and acknowledged. NNNN denotes the associated count for each state. A transaction is first "posted" on the Journal Pool, "sent" to the Receiver Server, and finally "acknowledged" once the Source Server receives confirmation that it has reached the Receiver Server.</p><p>Action: None</p></div><div class="sect2" title="NORTN  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMNORTN"></a>NORTN <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>NORTN, </strong></span>
Routine name missing</p><p>Run Time Error: This indicates the specification used to locate a routine for compilation and / or zlinking was missing the name.</p><p>Action: Correct the routine specification.</p></div><div class="sect2" title="REPLAHEAD  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMREPLAHEAD"></a>REPLAHEAD   </h3></div></div></div><p><span class="bold"><strong>REPLAHEAD, </strong></span>
Replicating instance is ahead of the originating instance. aaaa</p><p>MUPIP Error: The message appears on the Source and Receiver Server log files when the Receiver Server is ahead due to a possible rollback on the Source Server side. aaaa contains additional information or action that the user may have to perform.</p><p>Action: Action: Acknowledge or perform the appropriate action suggested with aaaa.</p></div><div class="sect2" title="REPLCOMM  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMREPLCOMM"></a>REPLCOMM <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>REPLCOMM, </strong></span>
Replication subsystem communication failure</p><p>MUPIP Error: This is a generic error or message indicating that there has been a communication error between the two systems performing replication.</p><p>Action: Review the accompanying message(s) for more information about the cause of this error. When REPLCOMM has an error severity, it accompanys a shut down of the replicating server. When REPLCOMM has an information severity, it indicates a temporary pause in replication due to a situation described by accompanying messages.</p></div><div class="sect2" title="RESTORESUCCESS  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMRESTORESUCCESS"></a>RESTORESUCCESS <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>RESTORESUCCESS, </strong></span>
Restore completed successfully</p><p>MUPIP Information: This message indicates MUPIP RESTORE successfully completed all specified with command actions.</p><p>Action: None required.</p></div><div class="sect2" title="SOCKBLOCKERR  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMSOCKBLOCKERR"></a>SOCKBLOCKERR <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>SOCKBLOCKERR, </strong></span>
WRITE /BLOCK error: dddd</p><p>Run Time Error: This indicates a format or usage error in a WRITE /BLOCK command. Specific details are provided by dddd.</p><p>Action: Correct the format or usage of the WRITE /BLOCK command.</p></div><div class="sect2" title="SOCKWAITARG  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMSOCKWAITARG"></a>SOCKWAITARG <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>SOCKWAITARG, </strong></span>
nnnn argument to WRITE /WAIT xxxx</p><p>Run Time Error: This indicates an error with argument number nnnn of a WRITE /WAIT as described by xxxx.</p><p>Action: Correct the specified argument.</p></div><div class="sect2" title="SRCBACKLOGSTATUS  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMSRCBACKLOGSTATUS"></a>SRCBACKLOGSTATUS <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>SRCBACKLOGSTATUS, </strong></span>
Instance RRRR SSSS NNNN transaction(s)</p><p>MUPIP Information: This message appears with the output of MUPIP REPLICATE -SOURCE -SHOWBACKLOG. RRRR specifies the name of the replicating instance. SSSS denotes three possible stages of the replicating instance in relation to the originating instance - "is behind by", "has not acknowledged" and "is ahead by". A replicating instance is behind by the originating instance when there is a backlog of unacknowledged transactions. A replicating instance is ahead by the originating instance when the Receiver Server is performing an online rollback. An instance has not yet acknowledged transaction when the originating instance has not received a response from the replicating instance. NNNN is the number of transactions. There are no in-flight updates when SRCBACKLOGSTAUS reports that the replicating instance is behind by 0 transactions and the LASTTRANS messages for "posted", "sent", and "acknowledged" have the same number of transaction count.</p><p>Action: Use this message as an operational aid to determine the status of the replicating instance in relation to the originating instance.</p></div></div></div></body></html>
