<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>GT.M V7.0-005 Release Notes</title><link rel="stylesheet" href="gtm.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><meta name="description" content="Contact Information GT.M Group Fidelity National Information Services, Inc. 347 Riverside Drive Jacksonville, FL 13220 United States of America GT.M Support for customers: gtmsupport@fisglobal.com Automated attendant for 24 hour support: +1 (484) 302-3248 Switchboard: +1 (484) 302-3160"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" title="GT.M V7.0-005 Release Notes"><div class="titlepage"><div><div><div class="mediaobject"><img src="images/FIS_RGB_logo.jpg"></div></div><div><h2 class="title"><a name="idm45984052332208"></a>GT.M V7.0-005 Release Notes</h2></div><div><h3 class="subtitle"><i>Release Notes: GT.M V7.0-005</i></h3></div><div><p class="copyright">Copyright (C) 2022 Fidelity National Information Services, Inc.</p></div><div><div class="legalnotice" title="Legal Notice"><a name="idm45984052207888"></a><p class="legalnotice-title"><b>Legal Notice</b></p><p>Copyright (C)2022 Fidelity National Information Services, Inc. and/or its subsidiaries. All Rights Reserved.</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the <a class="ulink" href="http://www.gnu.org/licenses/fdl.txt" target="_blank">GNU Free Documentation License</a>, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts and no Back-Cover Texts. </p><p>GT.M&#8482; is a trademark of Fidelity National Information Services, Inc. Other trademarks are the property of their respective owners. </p><p>This document contains a description of GT.M and the operating instructions pertaining to the various functions that comprise the system. This document does not contain any commitment of FIS. FIS believes the information in this publication is accurate as of its publication date; such information is subject to change without notice. FIS is not responsible for any errors or defects. </p></div></div><div><p class="pubdate">02 December 2022</p></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><b>Revision History</b></th></tr><tr><td align="left">Revision 1.0</td><td align="left">02 December 2022</td><td align="left">V7.0-005 </td></tr></table></div></div><div><div class="abstract" title="Contact Information"><p class="title"><b>Contact Information</b></p><div class="informaltable"><table border="0" width="100%"><colgroup><col><col></colgroup><tbody><tr><td>
                  <p>
</p><div class="address"><p>GT.M Group <br>
Fidelity National Information Services, Inc. <br>
<span class="street">347 Riverside Drive</span> <br>
<span class="city">Jacksonville, </span><span class="state">FL </span><span class="postcode">13220</span><br>
<span class="country">United States of America</span></p></div><p>
</p>
                </td><td>
                  <p>
</p><div class="address"><p><br>
<span class="phone">GT.M Support for customers: gtmsupport@fisglobal.com </span><br>
<span class="phone">Automated attendant for 24 hour support: +1 (484) 302-3248</span><br>
<span class="phone">Switchboard: +1 (484) 302-3160</span><br>
</p></div><p> 
</p>
                </td></tr></tbody></table></div><p>
</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#GTMrel_overview">V7.0-005</a></span></dt><dd><dl><dt><span class="sect2"><a href="#overview"> Overview </a></span></dt><dt><span class="sect2"><a href="#conventions">Conventions</a></span></dt><dt><span class="sect2"><a href="#platforms"> Platforms </a></span></dt><dt><span class="sect2"><a href="#addn_instr">Additional Installation Instructions</a></span></dt><dt><span class="sect2"><a href="#upgrade"> Upgrading to GT.M V7.0-005</a></span></dt><dt><span class="sect2"><a href="#mng_mode">Managing M mode and UTF-8 mode</a></span></dt><dt><span class="sect2"><a href="#setterm">Setting the environment variable TERM</a></span></dt><dt><span class="sect2"><a href="#install_comp_lib"> Installing Compression Libraries</a></span></dt></dl></dd><dt><span class="sect1"><a href="#GTMchng_hist"> Change History</a></span></dt><dd><dl><dt><span class="sect2"><a href="#GTMtaV70-005ble">V7.0-005</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idm45984052192016">Database </a></span></dt><dt><span class="sect1"><a href="#idm45984052082160">Language </a></span></dt><dt><span class="sect1"><a href="#idm45984051989968">System Administration </a></span></dt><dt><span class="sect1"><a href="#idm45984052119312">Other </a></span></dt><dt><span class="sect1"><a href="#idm45984051941744">Error and Other Messages</a></span></dt><dd><dl></dl></dd></dl></div><div class="sect1" title="V7.0-005"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GTMrel_overview"></a>V7.0-005</h2></div></div></div><div class="sect2" title="Overview"><div class="titlepage"><div><div><h3 class="title"><a name="overview"></a> Overview </h3></div></div></div><p>V7.0-005 adds audit logging facilities for DSE, GDE, and LKE. In addition, there are  restriction settings for ZLINK, ZRUPDATE and SET $ZROUTINES, an option to pin shared memory, and statistics for triggers, as well as various fixes. For more information, refer to the <a class="link" href="#GTMchng_hist" title="Change History">Change History</a> section.</p><p>Items marked with the <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="New Feature"></span>
 symbol document new or different capabilities.</p><p>Please pay special attention to the items marked with the <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="Alert"></span>
 symbol. as those document items that have a possible impact on existing code, practice or process. Please be sure to recompile all objects to ensure all the updates are in place.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>While FIS keeps message IDs and mnemonics quite stable, messages texts change more frequently as we strive to improve them, especially in response to user feedback. Please ensure you review any automated scripting that parses GT.M messages.</p></td></tr></table></div></div><div class="sect2" title="Conventions"><div class="titlepage"><div><div><h3 class="title"><a name="conventions"></a>Conventions</h3></div></div></div><p>This document uses the following conventions:</p><div class="informaltable"><table border="1" width="70%"><colgroup><col><col><col></colgroup><tbody><tr><td>
            
<p>              <span class="bold"><strong>Flag/Qualifiers</strong></span>            </p>
          </td><td colspan="2">            
<p>-</p>
          </td></tr><tr><td>
            
<p>              <span class="bold"><strong>Program Names or Functions</strong></span>            </p>
          </td><td colspan="2">            
<p>upper case. For example, MUPIP BACKUP</p>
          </td></tr><tr><td>
            
<p>              <span class="bold"><strong>Examples</strong></span>            </p>
          </td><td colspan="2">            
<p>lower case. For example: <br> mupip backup -database ACN,HIST /backup</p>
          </td></tr><tr><td>
            
<p>              <span class="bold"><strong>Reference Number</strong></span>            </p>
          </td><td colspan="2">            
<p>A reference number is used to track software <br> enhancements and support requests. <br> It is enclosed between parentheses (). </p>
          </td></tr><tr><td>
            
<p>              <span class="bold"><strong>Platform Identifier</strong></span>            </p>
          </td><td colspan="2">            
<p>Where an item affects only specific platforms, the platforms are listed in square brackets, e.g., [AIX]</p>
          </td></tr></tbody></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The term UNIX refers to the general sense of all platforms on which GT.M uses a POSIX API. As of this date, this includes: AIX and GNU/Linux x86_64.</p></td></tr></table></div><p>The following table summarizes the new and revised replication terminology and qualifiers. </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
            
<p>Pre V5.5-000 terminology</p>
          </th><th>
            
<p>Pre V5.5-000 qualifier</p>
          </th><th>
            
<p>Current terminology</p>
          </th><th>
            
<p>Current qualifiers </p>
          </th></tr></thead><tbody><tr><td>
            
<p>originating instance or primary instance </p>
          </td><td>
            
<p>-rootprimary</p>
          </td><td>
            
<p>originating instance or originating primary instance. </p>
            
<p>Within the context of a replication connection between two instances, an originating instance is referred to as source instance or source side. For example, in an B&lt;-A-&gt;C replication configuration, A is the source instance for B and C. </p>
          </td><td>
            
<p>-updok (recommended)</p>
            
<p>-rootprimary (still accepted)</p>
          </td></tr><tr><td>
            
<p>replicating instance (or secondary instance) and propagating instance </p>
          </td><td>
            
<p>N/A for replicating instance or secondary instance. </p>
            
<p>-propagateprimary for propagating instance </p>
          </td><td>
            
<p>replicating instance. </p>
            
<p>Within the context of a replication connection between two instances, a replicating instance that receives updates from a source instance is referred to as receiving instance or receiver side. For example, in an B&lt;-A-&gt;C replication configuration, both B and C can be referred to as a receiving instance. </p>
          </td><td>
            
<p>-updnotok </p>
          </td></tr><tr><td>
            
<p>N/A</p>
          </td><td>
            
<p>N/A</p>
          </td><td>
            
<p>supplementary instance. </p>
            
<p>For example, in an A-&gt;P-&gt;Q replication configuration, P is the supplementary instance. Both A and P are originating instances. </p>
          </td><td>
            
<p>-updok</p>
          </td></tr></tbody></table></div><p>Effective V6.0-000, GT.M documentation adopted IEC standard <a class="ulink" href="http://physics.nist.gov/cuu/Units/binary.html" target="_blank">Prefixes for binary multiples</a>. This document therefore uses prefixes Ki, Mi and Ti (e.g., 1MiB for 1,048,576 bytes). Over time, we'll update all GT.M documentation to this standard.</p><p><span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="New Feature"></span>
 denotes a new feature that requires updating the manuals. </p><p><span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="New Feature"></span>
 denotes a new feature or an enhancement that may not be upward compatible and may affect an existing application. </p><p><span class="inlinemediaobject"><img src="images/deprecated.png" alt="-Deprecated Message-"></span>
 denotes deprecated messages.</p><p><span class="inlinemediaobject"><img src="images/revised.png" alt="-Revised Message-"></span>
 denotes revised messages.</p><p><span class="inlinemediaobject"><img src="images/new.png" alt="-New Message-"></span>
 denotes added messages.</p></div><div class="sect2" title="Platforms"><div class="titlepage"><div><div><h3 class="title"><a name="platforms"></a> Platforms </h3></div></div></div><p> Over time, computing platforms evolve. Vendors obsolete hardware architectures. New versions of operating systems replace old ones. We at FIS continually evaluate platforms and versions of platforms that should be Supported for GT.M. In the table below, we document not only the ones that are currently Supported for this release, but also alert you to our future plans given the evolution of computing platforms. If you are an FIS customer, and these plans would cause you hardship, please contact your FIS account executive promptly to discuss your needs. </p><p>Each GT.M release is extensively tested by FIS on a set of specific versions of operating systems on specific hardware architectures, we refer to the combination of operating system and hardware architecture as a platform. We deem this set of specific versions: Supported. There may be other versions of the same operating systems on which a GT.M release may not have been tested, but on which the FIS GT.M Group knows of no reason why GT.M would not work. We deem this larger set of versions: Supportable. There is an even larger set of platforms on which GT.M may well run satisfactorily, but where the FIS GT.M team lacks the knowledge to determine whether GT.M is Supportable and therefore deem them: Unsupported. Contact FIS GT.M Support with inquiries about your preferred platform.</p><p>As of the publication date, FIS supports this release on the hardware and operating system versions below. Contact FIS for a current list of Supported platforms. The reference implementation of the encryption reference plugin has its own additional requirements.</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>
            <p class="bold"> Platform </p>
          </th><th>
            <p class="bold"> Supported Versions </p>
          </th><th>
            <p class="bold"> Notes </p>
          </th></tr></thead><tbody><tr><td>
            
<p> IBM Power Systems AIX </p>
          </td><td>
            
<p> 7.1 TL 5, 7.2 TL 5</p>
          </td><td>
            
<p>Only 64-bit versions of AIX with POWER7 as the minimum required CPU architecture level are Supported.</p>
            
<p> While GT.M supports both UTF-8 mode and M mode on this platform, there are problems with the AIX ICU utilities that prevent FIS from testing 4-byte UTF-8 characters as comprehensively on this platform as we do on others. </p>
            
<p> Running GT.M on AIX 7.1 requires APAR IZ87564, a fix for the POW() function, to be applied. To verify that this fix has been installed, execute <code class="code"> instfix -ik IZ87564. </code> </p>
            
<p>Only the AIX jfs2 filesystem is Supported. Other filesystems, such as jfs1 are Supportable, but not Supported. FIS strongly recommends use of the jfs2 filesystem on AIX; use jfs1 only for existing databases not yet migrated to a jfs2 filesystem.</p>
          </td></tr><tr><td>
            
<p> x86_64 GNU/Linux </p>
          </td><td>
            
<p>Red Hat Enterprise Linux 7.9, 8.6, 8.7; Ubuntu 18.04 LTS, 20.04 LTS, and 22.04 LTS; Amazon Linux 2</p>
          </td><td>
            
<p> To run 64-bit GT.M processes requires both a 64-bit kernel as well as 64-bit hardware. </p>
            
<p> GT.M should also run on recent releases of other major Linux distributions with a contemporary Linux kernel (2.6.32 or later), glibc (version 2.12 or later) and ncurses (version 5.7 or later). </p>
            
<p>Due to build optimization and library incompatibilities, GT.M versions older than V6.2-000 are incompatible with glibc 2.24 and up. This incompatibility has not been reported by a customer, but was observed on internal test systems that use the latest Linux software distributions from Fedora (26), Debian (unstable), and Ubuntu (17.10). In internal testing, processes either hung or encountered a segmentation violation (SIG-11) during operation. Customers upgrading to Linux distributions that utilize glibc 2.24+ must upgrade their GT.M version at the same time as or before the OS upgrade.</p>
            
<p> GT.M requires a compatible version of the libtinfo library. On Red Hat, the ncurses-libs and ncurses-compat-libs packages contain the libtinfo library. On Debian/Ubuntu, libtinfo5 and libncurses5 packages contain the libtinfo library. If any of these packages is not already installed on your system, please install using an appropriate package manager. </p>
            
<p>To support the optional WRITE /TLS fifth argument (the ability to provide / override options in the tlsid section of the encryption configuration file), the reference implementation of the encryption plugin requires libconfig 1.4.x.</p>
            
<p>Only the ext4 and xfs filesystems are Supported. Other filesystems are Supportable, but not Supported. Furthermore, if you use the NODEFER_ALLOCATE feature, FIS strongly recommends that you use xfs. If you must use NODEFER_ALLOCATE with ext4, you <span class="bold"><strong>must</strong></span> ensure that your kernel includes commit d2dc317d564a46dfc683978a2e5a4f91434e9711 (search for d2dc317d564a46dfc683978a2e5a4f91434e9711 at <a class="ulink" href="https://www.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.0.3" target="_blank">https://www.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.0.3</a>). The Red Hat Bugzilla identifier for the bug is 1213487. With NODEFER_ALLOCATE, do not use any filesystem other than ext4 and a kernel with the fix, or xfs.</p>
            
<p>Ubuntu 21.10 is Supportable.</p>
            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>To use TLSv1.3 with OpenSSL 1.1.1 and up, you must recompile the reference encryption plugins</p></li><li class="listitem"><p>RHEL 8 includes compat-openssl10.x86_64 for binaries compiled against OpenSSL 1.0.2 on RHEL 7</p></li></ul></div></td></tr></table></div>          </td></tr></tbody></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>Effective V7.0-003, GT.M is no longer Supportable on the 32 bit x86 platform. Please contact your FIS account manager if you need ongoing support for GT.M on this platform.</p></td></tr></table></div><div class="sect3" title="Platform support lifecycle"><div class="titlepage"><div><div><h4 class="title"><a name="GTMplatform_lifecycle"></a> Platform support lifecycle </h4></div></div></div><p> FIS usually supports new operating system versions six months or so after stable releases are available and we usually support each version for a two year window. GT.M releases are also normally supported for two years after release. While FIS attempts to provide support for customers in good standing on any GT.M release and operating system version, our ability to provide support diminishes after the two year window. </p><p> GT.M cannot be patched, and bugs are only fixed in new releases of software.</p></div></div><div class="sect2" title="Additional Installation Instructions"><div class="titlepage"><div><div><h3 class="title"><a name="addn_instr"></a>Additional Installation Instructions</h3></div></div></div><p>To install GT.M, see the "Installing GT.M" section in the GT.M Administration and Operations Guide. For minimal down time, upgrade a current replicating instance and restart replication. Once that replicating instance is current, switch it to become the originating instance. Upgrade the prior originating instance to become a replicating instance, and perform a switchover when you want it to resume an originating primary role.</p><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution: Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.jpg"></td><th align="left">Caution</th></tr><tr><td align="left" valign="top"><p>Never replace the binary image on disk of any executable file while it is in use by an active process. It may lead to unpredictable results. Depending on the operating system, these results include but are not limited to denial of service (that is, system lockup) and damage to files that these processes have open (that is, database structural damage). </p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>FIS strongly recommends installing each version of GT.M in a separate (new) directory, rather than overwriting a previously installed version. If you have a legitimate need to overwrite an existing GT.M installation with a new version, you must first shut down all processes using the old version. FIS suggests installing GT.M V7.0-005 in a Filesystem Hierarchy Standard compliant location such as /usr/lib/fis-gtm/V7.0-005_arch (for example, /usr/lib/fis-gtm/V7.0-005_x86_64 on Linux systems). A location such as /opt/fis-gtm/V7.0-005_arch would also be appropriate. </p></li><li class="listitem"><p>Use the appropriate MUPIP command (e.g. ROLLBACK, RECOVER,  RUNDOWN) of the old GT.M version to ensure all database files are cleanly closed.</p></li><li class="listitem"><p>Make sure gtmsecshr is not running. If gtmsecshr is running, first stop all GT.M processes including the DSE, LKE and MUPIP utilities and then perform a <code class="code">MUPIP STOP</code> <em class="replaceable"><code>pid_of_gtmsecshr</code></em>.</p></li><li class="listitem"><p>Starting with V6.2-000, GT.M no longer supports the use of the deprecated $gtm_dbkeys and the master key file it points to for database encryption. To convert master files to the libconfig format, please click <a class="ulink" href="downloadables/CONVDBKEYS.m" target="_blank"><span class="inlinemediaobject"><img src="images/download.png" alt="Download CONVDBKEYS.m"></span>
</a> to download the CONVDBKEYS.m program and follow instructions in the comments near the top of the program file. You can also download CONVDBKEYS.m from http://tinco.pair.com/bhaskar/gtm/doc/articles/downloadables/CONVDBKEYS.m. If you are using $gtm_dbkeys for database encryption, please convert master key files to libconfig format immediately after upgrading to V6.2-000 or later. Also, modify your environment scripts to include the use of gtmcrypt_config environment variable. </p></li></ul></div><div class="sect3" title="Recompile"><div class="titlepage"><div><div><h4 class="title"><a name="idm45984052102272"></a> Recompile </h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Recompile all M and C source files.</p></li></ul></div></div><div class="sect3" title="Rebuild Shared Libraries or Images"><div class="titlepage"><div><div><h4 class="title"><a name="idm45984052103456"></a>Rebuild Shared Libraries or Images</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Rebuild all Shared Libraries after recompiling all M and C source files.</p></li><li class="listitem"><p>If your application is not using object code shared using GT.M's auto-relink functionality, please consider using it.</p></li></ul></div></div><div class="sect3" title="Compiling the Reference Implementation Plugin"><div class="titlepage"><div><div><h4 class="title"><a name="idm45984052138192"></a>Compiling the Reference Implementation Plugin </h4></div></div></div><p>If you plan to use the example / reference implementation plugin in support of database encryption, TLS replication, or TLS sockets, you must compile the reference  plugin in order to match the shared library dependencies specific to your platform. The instructions for compiling the Reference Implementation plugin are as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Install the development headers and libraries for libgcrypt, libgpgme, libconfig, and libssl. On Linux, the package names of development libraries usually have a suffix such as -dev or -devel and are available through the package manager. For example, on Ubuntu_x86_64 a command like the following installs the required development libraries:</p><pre class="programlisting">sudo apt-get install libgcrypt11-dev libgpgme11-dev libconfig-dev libssl-dev</pre><p>Note that the package names may vary by distribution / version. </p></li><li class="listitem"><p>Unpack $gtm_dist/plugin/gtmcrypt/source.tar to a temporary directory. </p><pre class="programlisting">mkdir /tmp/plugin-build
cd /tmp/plugin-build
cp $gtm_dist/plugin/gtmcrypt/source.tar . 
tar -xvf source.tar</pre></li><li class="listitem"><p>Follow the instructions in the README.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Open Makefile with your editor; review and edit the common header (IFLAGS) and library paths (LIBFLAGS) in the Makefile to reflect those on your system.</p></li><li class="listitem"><p>Define the gtm_dist environment variable to point to the absolute path for the directory where you have GT.M installed</p></li><li class="listitem"><p>Copy and paste the commands from the README to compile and install the encryption plugin with the permissions defined at install time</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left"></th></tr><tr><td align="left" valign="top">The encryption plugin currently uses functionality that is deprecated in OpenSSL 3.0. This will be fixed in a future release.</td></tr></table></div></li></ul></div></li></ol></div></div><div class="sect3" title="Re-evaluate TLS configuration options"><div class="titlepage"><div><div><h4 class="title"><a name="idm45984052112688"></a>Re-evaluate TLS configuration options </h4></div></div></div><p>The GT.M TLS reference encryption plugin implements a subset of options as documented in the OpenSSL 1.0.2 man page for SSL_set_options which modify the default behavior of OpenSSL. Future versions of the plugin will enable new options as and when the OpenSSL library adds them. To enable options not supported by the GT.M TLS reference plugin, it is possible to create an OpenSSL configuration for GT.M processes. See the OpenSSL man page for "config".</p></div></div><div class="sect2" title="Upgrading to GT.M V7.0-005"><div class="titlepage"><div><div><h3 class="title"><a name="upgrade"></a> Upgrading to GT.M V7.0-005</h3></div></div></div><p>There are two upgrade paths available when you upgrade to GT.M V7.0-003 from a V6 version:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>V7 Upgrade Path 1</strong></span>: Perform a MUPIP EXTRACT -FREEZE on an existing V6  database and then perform MUPIP LOAD on an empty V7 database using replication to minimize downtime. You can also use the MERGE command to move data from V6 to the new V7 database; as with MUPIP EXTRACT, you need to keep the source data in a stable state. If you are using triggers, extract the triggers from the V6 database and load them in the new V7 database. We recommend you use replication to further stage the conversion and minimize down time. </p></li><li class="listitem"><p><span class="bold"><strong>V7 Upgrade Path 2</strong></span>: Continue using your V6 databases with GT.M V7.0-003. You may wish to keep your latest V6 version available to create new database file, in case you do not wish to operate with files of differing format, as V7 releases always create V7 format databases.</p></li></ul></div><p>Choose V7 Upgrade Path 1 if you anticipate a database file to grow up to 16Gi blocks or require trees of up to 11 levels. Note that the maximum size of a V7 database file having 8KiB block size is 114688GiB (8KiB*16Gi).</p><p>Choose V7 Upgrade Path 2 if you do not anticipate a database file to grow beyond the V6 database limit of 994Mi blocks or a tree depth limit of 7 levels. Note that the maximum size of a V6 database file having 8KiB block size is 7936GiB (8KiB*992Mi).  </p><p>Other that the new maximum database file size that comes with V7 Upgrade Path 1, there is no difference between V7 Upgrade Path 1 and V7 Upgrade Path 2. You can choose V7 Upgrade Path 2 first and then later choose V7 Upgrade Path 1 if a need arises. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>To upgrade your database from V5 to V7, you need to first upgrade your database from V5 to a V6 database and then choose an appropriate V7 upgrade path. Refer to the appropriate V6 release notes for the database upgrade instructions or consult your GT.M support channel. </p></td></tr></table></div><div class="note" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>In an upcoming release, the FIS GT.M team plans to provide in-place database upgrade with minimal downtime. </p></td></tr></table></div></div><div class="sect2" title="Managing M mode and UTF-8 mode"><div class="titlepage"><div><div><h3 class="title"><a name="mng_mode"></a>Managing M mode and UTF-8 mode</h3></div></div></div><p>With <a class="ulink" href="http://icu-project.org" target="_blank">International Components for <span class="trademark">Unicode</span>(R)</a> (ICU) version 3.6 or later installed, GT.M's UTF-8 mode provides support for <span class="trademark">Unicode</span>(R) (ISO/IEC-10646) character strings. On a system that does not have ICU 3.6 or later installed, GT.M only supports M mode.</p><p>On a system that has ICU installed, GT.M optionally installs support for both M mode and UTF-8 mode, including a utf8 subdirectory of the directory where GT.M is installed. From the same source file, depending upon the value of the environment variable gtm_chset, the GT.M compiler generates an object file either for M mode or UTF-8 mode. GT.M generates a new object file when it finds both a source and an object file, and the object predates the source file and was generated with the same setting of $gtm_chset/$ZCHset. A GT.M process generates an error if it encounters an object file generated with a different setting of $gtm_chset/$ZCHset than that processes' current value.</p><p>Always generate an M object module with a value of $gtm_chset/$ZCHset matching the value processes executing that module will have. As the GT.M installation itself contains utility programs written in M, their object files also conform to this rule. In order to use utility programs in both M mode and UTF-8 mode, the GT.M installation ensures that both M and UTF-8 versions of object modules exist, the latter in the utf8 subdirectory. This technique of segregating the object modules by their compilation mode prevents both frequent recompiles and errors in installations where both modes are in use. If your installation uses both modes, consider a similar pattern for structuring application object code repositories.</p><p>GT.M is installed in a parent directory and a utf8 subdirectory as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Actual files for GT.M executable programs (mumps, mupip, dse, lke, and so on) are in the parent directory, that is, the location specified for installation.</p></li><li class="listitem"><p>Object files for programs written in M (GDE, utilities) have two versions - one compiled with support for UTF-8 mode in the utf8 subdirectory, and one compiled without support for UTF-8 mode in the parent directory. Installing GT.M generates both versions of object files, as long as ICU 3.6 or greater is installed and visible to GT.M when GT.M is installed, and you choose the option to install UTF-8 mode support. During installation, GT.M provides an option that allows placing the object code in shared libraries in addition to individual files in the directory.</p></li><li class="listitem"><p>The utf8 subdirectory has files called mumps, mupip, dse, lke, and so on, which are relative symbolic links to the executables in the parent directory (for example, mumps is the symbolic link ../mumps).</p></li><li class="listitem"><p>When a shell process sources the file gtmprofile, the behavior is as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>If $gtm_chset is "m", "M" or undefined, there is no change from the previous GT.M versions to the value of the environment variable $gtmroutines.</p></li><li class="listitem"><p>If $gtm_chset is "UTF-8" (the check is case-insensitive),</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>$gtm_dist is set to the utf8 subdirectory (that is, if GT.M is installed in /usr/lib/fis-gtm/gtm_V7.0-005_i686, then gtmprofile sets $gtm_dist to /usr/lib/fis-gtm/gtm_V7.0-005_i686/utf8).</p></li><li class="listitem"><p>On platforms where the object files have not been placed in a libgtmutil.so shared library, the last element of $gtmroutines is $gtm_dist($gtm_dist/..) so that the source files in the parent directory for utility programs are matched with object files in the utf8 subdirectory. On platforms where the object files are in libgtmutil.so, that shared library is the one with the object files compiled in the mode for the process.</p></li></ul></div></li></ul></div></li></ul></div><p>For more information on gtmprofile, refer to the <a class="ulink" href="../books/ao/UNIX_manual/ch03.html" target="_blank">Basic Operations</a> chapter of GT.M Administration and Operations Guide.</p><p>Although GT.M uses ICU for UTF-8 operation, ICU is not FIS software and FIS does not support ICU.</p></div><div class="sect2" title="Setting the environment variable TERM"><div class="titlepage"><div><div><h3 class="title"><a name="setterm"></a>Setting the environment variable TERM</h3></div></div></div><p>The environment variable TERM must specify a terminfo entry that accurately matches the terminal (or terminal emulator) settings. Refer to the terminfo man pages for more information on the terminal settings of the platform where GT.M needs to run.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Some terminfo entries may seem to work properly but fail to recognize function key sequences or fail to position the cursor properly in response to escape sequences from GT.M. GT.M itself does not have any knowledge of specific terminal control characteristics. Therefore, it is important to specify the right terminfo entry to let GT.M communicate correctly with the terminal. You may need to add new terminfo entries depending on your specific platform and implementation. The terminal (emulator) vendor may also be able to help.</p></li><li class="listitem"><p>GT.M uses the following terminfo capabilities. The full variable name is followed by the capname in parenthesis:</p><pre class="programlisting">auto_right_margin(am), clr_eos(ed), clr_eol(el), columns(cols), cursor_address(cup), cursor_down(cud1), cursor_left(cub1), cursor_right(cuf1), cursor_up(cuu1), eat_newline_glitch(xenl), key_backspace(kbs), key_dc(kdch1),key_down(kcud1), key_left(kcub1), key_right(kcuf1), key_up(kcuu1), key_insert(kich1), keypad_local(rmkx),keypad_xmit(smkx), lines(lines).</pre></li></ul></div><p>GT.M sends keypad_xmit before terminal reads for direct mode and READs (other than READ *) if EDITING is enabled. GT.M sends keypad_local after these terminal reads.</p></div><div class="sect2" title="Installing Compression Libraries"><div class="titlepage"><div><div><h3 class="title"><a name="install_comp_lib"></a> Installing Compression Libraries</h3></div></div></div><p> If you plan to use the optional compression facility for replication, you must provide the compression library. The GT.M interface for compression libraries accepts the zlib compression libraries without any need for adaptation. These libraries are included in many UNIX distributions and are downloadable from the <a class="ulink" href="http://www.zlib.net" target="_blank">zlib home page</a>. If you prefer to use other compression libraries, you need to configure or adapt them to provide the same API as that provided by zlib.</p><p> If a package for zlib is available with your operating system, FIS suggests that you use it rather than building your own.</p><p> By default, GT.M searches for the libz.so shared library in the standard system library directories (for example, /usr/lib, /usr/local/lib, /usr/local/lib64). If the shared library is installed in a non-standard location, before starting replication, you must ensure that the environment variable LIBPATH (AIX) or LD_LIBRARY_PATH (GNU/Linux) includes the directory containing the library. The Source and Receiver Server link the shared library at runtime. If this fails for any reason (such as file not found, or insufficient authorization), the replication logic logs a DLLNOOPEN error and continues with no compression.</p><p>Although GT.M uses a library such as zlib for compression, such libraries are not FIS software and FIS does not support any compression libraries.</p></div></div><div class="sect1" title="Change History"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GTMchng_hist"></a> Change History</h2></div></div></div><div class="sect2" title="V7.0-005"><div class="titlepage"><div><div><h3 class="title"><a name="GTMtaV70-005ble"></a>V7.0-005</h3></div></div></div><p>Fixes and enhancements specific to V7.0-005:</p><p></p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>                <p><span class="bold"><strong>Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Prior Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Category</strong></span></p>              </th><th>                <p><span class="bold"><strong>Summary</strong></span></p>              </th></tr></thead><tbody><tr><td><p><a class="link" href="#GTM-DE309281">GTM-DE309281</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Protect getaddrinfo and freeaddrinfo calls from interrupts</p></td></tr><tr><td><p><a class="link" href="#GTM-DE326986">GTM-DE326986</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Improved management of shared memory associated with MUPIP INTEG -ONLINE</p></td></tr><tr><td><p><a class="link" href="#GTM-DE327593">GTM-DE327593</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Fix name-level $ORDER(gvn,-1)</p></td></tr><tr><td><p><a class="link" href="#GTM-DE340860">GTM-DE340860</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Clean up temporary backup files following multi-region backup copy errors</p></td></tr><tr><td><p><a class="link" href="#GTM-DE345399">GTM-DE345399</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Prevent inappropriate TPFAIL with forth retry code of X</p></td></tr><tr><td><p><a class="link" href="#GTM-F134396">GTM-F134396</a></p></td><td><p>GTM-7577</p></td><td><p>DB</p></td><td><p>More context for TPFAIL errors <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-F135278">GTM-F135278</a></p></td><td><p>GTM-9129</p></td><td><p>Language</p></td><td><p>GT.M performs certain cases of string concatenation more efficiently</p></td></tr><tr><td><p><a class="link" href="#GTM-F135288">GTM-F135288</a></p></td><td><p>GTM-9140</p></td><td><p>Admin</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> Environment variables for huge pages and shared memory pinning <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-F135319">GTM-F135319</a></p></td><td><p>GTM-9208</p></td><td><p>Other</p></td><td><p>Improve handling of stack limit detection and reporting <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-F135355">GTM-F135355</a></p></td><td><p>GTM-9297</p></td><td><p>Other</p></td><td><p>GT.M Internal signal DRVLONGJMP no longer exposed</p></td></tr><tr><td><p><a class="link" href="#GTM-F135370">GTM-F135370</a></p></td><td><p>GTM-9345</p></td><td><p>Admin</p></td><td><p>Audit LKE facility  <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-F135376">GTM-F135376</a></p></td><td><p>GTM-9365</p></td><td><p>Admin</p></td><td><p>Automatically reestablish replication connection on detecting various network errors</p></td></tr><tr><td><p><a class="link" href="#GTM-F135382">GTM-F135382</a></p></td><td><p>GTM-9376</p></td><td><p>Admin</p></td><td><p>Audit GDE facility <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-F135383">GTM-F135383</a></p></td><td><p>GTM-9377</p></td><td><p>Admin</p></td><td><p>Audit DSE facility <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-F135406">GTM-F135406</a></p></td><td><p>GTM-9413</p></td><td><p>DB</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> Trigger statistics for ZSHOW and ^%YGBLSTAT <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-F135418">GTM-F135418</a></p></td><td><p>GTM-9435</p></td><td><p>Admin</p></td><td><p>Extend restriction facility to ZLINK, ZRUPDATE &amp; SET $ZROUTINES <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-F170998">GTM-F170998</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>$ZAUDITLOG() function for possible application audit logging and audit GDE facility <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-F171004">GTM-F171004</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> GT.M audit logging puts standard input labeled with "tty=" and reports more error information <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-F188829">GTM-F188829</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP shell works with MUPIP Audit facility <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-F188844">GTM-F188844</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Auto-Relink performance Improvement</p></td></tr></tbody></table></div></div></div><div class="sect1" title="Database"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm45984052192016"></a>Database </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-DE327593"></a> GT.M handles name-level $ORDER(gvn,-1)/$ZPREVIOUS(gvn) correctly when searching across subscript-level mappings in the global directory. In V7.0-004, $ORDER(gvn,-1), where gvn is an unsubscripted global, could return the same gvn instead of a previous global name or the null string. The workaround was to add global data to otherwise empty global maps between the specified gvn and its previous gvn, and optionally KILLing it afterwards, which leaves around sufficient residual information in the database to avoid the issue. (GTM-DE327593)</p></li><li class="listitem"><p><a name="GTM-DE345399"></a> TP transactions allocating blocks do not encounter TPFAIL errors with a fourth restart code of "X" due to a large number of such actions within a region. In V7.0 versions it would take a lifetime to encounter the issue but it has been completely eliminated. While customer update patterns vary and we do not have the means to replicate them, our limited testing indicates the revision may result in a modest reduction in bit map related TPRESTARTs with code: a. In V6.3-005 through V6.3-014, such a TPFAIL  could arise in a region with a high rate of TP induced block allocations and a long period of up time. The workaround was to monitor tp_hint and restart or reset the monitored value; contact your GT.M support channel for additional information. (GTM-DE345399)</p></li><li class="listitem"><p><a name="GTM-F134396"></a> TPFAIL errors include context similar to that provided for GVXXXFAIL errors. Previously such errors did not supply context beyond the retry codes. (GTM-F134396) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-F135406"></a> GT.M reports the STG, KTG and ZTG statistics as part of the ZSHOW and YGBLSTAT outputs. These accumulators provide additional details on invoked SET KILL and ZTRIGGER and triggers. Due to the nature of some statistics, their order of appearance in ZSHOW output may change. Previously, GT.M did not record these statistics in ZSHOW and YGBLSTAT. (GTM-F135406) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span> <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li></ul></div></div><div class="sect1" title="Language"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm45984052082160"></a>Language </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-F135278"></a> GT.M avoids copying strings in some cases involving the concatenation operator. Certain concatenation patterns can see significant performance improvements. Previously, GT.M sometimes unnecessarily recopied concatenation operands to the end of the heap (stringpool). (GTM-F135278)</p></li><li class="listitem"><p><a name="GTM-F170998"></a> The $ZAUDITLOG() function establishes a connection via a socket and sends its argument to a logger/listener process. It requires setting the AZA_ENABLE audit logging facility in the $gtm_dist/restrict.txt file. The format for the $ZAUDITLOG() function is:</p><pre class="programlisting">ZAUDITLOG(expr)</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>expr specifies the string to send for audit logging</p></li><li class="listitem"><p>$ZAUDITLOG() identifies its message with src=4, and like other GT.M logging facilities, records the location of GT.M distribution, uid, euid, pid, tty, and the command / argument(s). </p></li><li class="listitem"><p>A return of: TRUE (1) indicates successful logging, FALSE (0) indicates logging is not enabled; a trappable RESTRICTEDOP error indicates logging is enabled but not working.</p></li><li class="listitem"><p>If LGDE is specified as an option for the AZA_ENABLE facility, GDE logs all commands. GT.M ignores this option if specified with other A*_ENABLE audit logging facilities. When it fails to log a command, GDE issues a GDELOGFAIL error. The following table characterizes $ZAUDITLOG() and GDE audit logging behavior:</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col><col></colgroup><thead><tr><th colspan="5"><p>$ZAUDITLOG() / GDE logging Characteristics</p></th></tr><tr><th><p>AZA_ENABLE</p></th><th><p>LGDE</p></th><th><p>Logging success</p></th><th><p>GDE audit logging</p></th><th><p>$ZAUDITLOG() result</p></th></tr></thead><tbody><tr><td><p>Yes</p></td><td><p>Yes</p></td><td><p>Yes</p></td><td><p>Yes</p></td><td><p>1</p></td></tr><tr><td><p>Yes</p></td><td><p>No</p></td><td><p>Yes</p></td><td><p>No</p></td><td><p>1</p></td></tr><tr><td><p>Yes</p></td><td><p>Yes</p></td><td><p>No</p></td><td><p>GDELOGFAIL error</p></td><td><p>RESTRICTEDOP error</p></td></tr><tr><td><p>Yes</p></td><td><p>No</p></td><td><p>No</p></td><td><p>No</p></td><td><p>RESTRICTEDOP error</p></td></tr><tr><td><p>No</p></td><td><p>N/A</p></td><td><p>N/A</p></td><td><p>No</p></td><td><p>0</p></td></tr></tbody></table></div></li></ul></div><p>Previously, GT.M did not support the $ZAUDITLOG() function. (GTM-F170998) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li></ul></div></div><div class="sect1" title="System Administration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm45984051989968"></a>System Administration </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-DE326986"></a> GT.M processes detach from shared memory associated with MUPIP INTEG snapshots correctly. Previously, relatively idle GT.M processes could remain attached to such shared memory segments on unjournaled regions or when the journal file switched while the snapshot was active, which prevented GT.M process rundown from removing shared memory. The workaround was to use MUPIP RUNDOWN. (GTM-DE326986)</p></li><li class="listitem"><p><a name="GTM-DE340860"></a> MUPIP BACKUP does not leave temporary files when there in an error during the copy phase for a multi-region backup. Previously, MUPIP BACKUP incorrectly left temporary files when there was an error during the copy phase for any region except the first. (GTM-DE340860)</p></li><li class="listitem"><p><a name="GTM-F135288"></a> When the gtm_pinshm environment variable is defined and evaluates to a non-zero integer or any case-independent string or leading substring of TRUE or YES in a process creating shared memory, GT.M attempts to pin such memory used for database global buffers, replication buffers, and routine buffers into physical memory. Huge pages are implicitly locked in physical memory, so GT.M does not attempt to pin shared memory buffers backed by huge pages. gtm_pinshm does not pin memory used by online INTEG (integ snapshot). Pinning may not succeed due to insufficient physical memory and/or OS configuration. When the gtm_hugetlb_shm environment variable is defined and evaluates to a non-zero integer or any case-independent string or leading substring of TRUE or YES in a process creating shared memory, GT.M attempts to back all such shared memory segments with huge pages, using the default huge page size. If huge pages cannot be used, GT.M tries to back the shared memory with base pages instead, and attempts to pin the shared memory if requested with gtm_pinshm. GT.M issues a SHMHUGETLB or SHMLOCK warning message to the system log when the system is unable to back shared memory with huge pages or is unable to pin shared memory to physical memory, respectively. Previously, GT.M did not support the gtm_pinshm option to pin memory, and gtm_hugetlb_shm replaces the use of libhugetlbfs for huge page functions, so GT.M no longer evaluates libhugetlbfs environment variables, e.g. HUGETLB_SHM, HUGETLB_VERBOSE, etc.  [Linux] (GTM-F135288) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span> <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-F135370"></a> When the restriction file contains a line specifying AL_ENABLE, LKE establishes a connection, a via socket, to a logger/listener process, and sends all commands, designating src=5, and using the socket to the listener for audit logging. If sending succeeds, LKE executes the command. If the connection or the send fail, LKE issues a RESTRICTEDOP error and does not execute the command. AL_ENABLE supports TCP, TLS or UNIX socket types. By default, LKE commands execute without logging. Previously, LKE did not provide an audit logging option. (GTM-F135370) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-F135376"></a> GT.M Replication resets replication connection and attempts to automatically reestablish connection on detecting      various network errors. Previously, GT.M replication server processes could shut down on encountering some network errors. (GTM-F135376)</p></li><li class="listitem"><p><a name="GTM-F135382"></a> When LGDE is specified as an option for the AZA_ENABLE facility, GDE logs all commands. For example, an entry like the following in $gtm_dist/restrict.txt enables GDE logging via a local socket:</p><pre class="programlisting">AZA_ENABLE:LGDE:/path/to/sock/file/audit.sock</pre><p>The AZA_ENABLE facility enables the use of the $ZAUDITLOG() function which GDE uses for logging commands. Refer to <a class="link" href="#GTM-F170998">GTM-F170998</a> for information on the $ZAUDITLOG() function and for other possible use in application audit logging. Previously, GDE did not provide an audit logging option. (GTM-F135382) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-F135383"></a> When the restriction file specifies AD_ENABLE, DSE establishes a connection via a socket, to a logger/listener process, and sends all commands, designating src=6, and using the socket to the listener for audit logging. If sending succeeds, DSE executes the command. If the connection or the send fail, DSE issues a RESTRICTEDOP error and does not execute the command. AD_ENABLE supports TCP, TLS or UNIX socket types. By default, DSE commands execute without logging. Previously, DSE did not provide an audit logging option.  (GTM-F135383) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-F135418"></a> The GT.M restrictions facility recognizes ZLINK, ZRUPDATE and SET $ZROUTINES. When an explicit ZLINK(not auto-zlink), ZRUPDATE, or SET $ZROUTINES restriction conditions are configured, the restricted command issues a RESTRICTEDOP error message. Previously, the restrictions facility did not support ZLINK, ZRUPDATE, or SET $ZROUTINES. (GTM-F135418) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-F171004"></a> GT.M audit logging facilities use tty to label the standard input of the process. GT.M places tty=ttyname before the command field in all audit log messages. If the standard input at process startup is not terminal device, GT.M logs tty=0. In addition, the audit facilities check for errors at the time of closing a socket / terminating a connection and report them with a GTM-E-SOCKCLOSE message to the operator log. The audit logger/listener sample programs (downloadable from the A&amp;O Guide) switch their log files after receiving a SIGHUP signal. The switched log file has a suffix "_%Y%j%H%M%S" (yearjuliendayhoursminutesseconds) and the naming convention is similar to what GT.M uses for switching journal files. FIS recommends periodically switching logger files. Deleting an active audit log file makes it lost to new processes, while existing processes continue to use it, so FIS recommends taking such a step. The sample programs have a Makefile. Previously, the audit log facilities did not provide tty information, did not check and report on errors during socket close, the logger/listener programs did not implement a log file switching mechanism, and those programs had no Makefile. (GTM-F171004) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span> <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-F188829"></a>  When the restriction file contains a line specifying AM_ENABLE, commands typed at the MUPIP prompt (MUPIP&gt;) are audit logged and executed the same as MUPIP shell commands. Note that MUPIP returns to the shell after each command. Previously, when this facility was enabled, all commands typed at the MUPIP prompt (MUPIP&gt;) produced the RESTRICTEDOP error. (GTM-F188829) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li></ul></div></div><div class="sect1" title="Other"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm45984052119312"></a>Other </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-DE309281"></a> GT.M handles the interruption of certain socket operations correctly.  Previously, asynchronous events like MUPIP STOP while creating a socket connection could cause a segmentation violation (SIG-11).  This was only seen in development and not reported by a customer. (GTM-DE309281)</p></li><li class="listitem"><p><a name="GTM-F135319"></a> When a single operation exceeds both the STACKCRIT and STACKOFLOW limits, GT.M issues a STACKCRIT message to the operator log, and exits with a STACKOFLOW error. Note this condition is fatal and not trappable. If this occurs, look into the gtm_mstack_crit and gtm_mstack_size environment variables. Previously, when this occurred, the process failed with a segmentation violation (SIG-11). (GTM-F135319) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-F135355"></a> GTM prevents internal error ERR_DRVLONGJMP from becoming user visible after failure to open a statsDB. Previously, there were cases in which the error's mnemonic could be found in $ZSTATUS following attempts to open statsDBs in nonexistent directories. (GTM-F135355)</p></li><li class="listitem"><p><a name="GTM-F188844"></a> When configured for auto-relink, GT.M uses a lightweight operation to validate an existing relinkctl file. Previously, every GT.M process using a relinkctl file would use a heavyweight operation to validate it, which added to routine ZLINK latency on the process' first lookup in the auto-relink directory. In particular, this may have resulted in visible latency when starting a large number of JOB processes if the JOB routine search included one or more auto-relink directories. (GTM-F188844)</p></li></ul></div></div><div class="sect1" title="Error and Other Messages"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm45984051941744"></a>Error and Other Messages</h2></div></div></div><div class="sect2" title="GDELOGFAIL  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMGDELOGFAIL"></a>GDELOGFAIL <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>GDELOGFAIL, </strong></span>
GDE failed to log command. Check operator log for more information</p><p>GDE Error: This message appears when LGDE is specified with the AZA_ENABLE facility and there is a problem with logging the GDE commands. This message also prevents the execution of the GDE command.</p><p>Action: Review the operator log for the exact reason of the failure to log the GDE command</p></div><div class="sect2" title="SOCKCLOSE  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMSOCKCLOSE"></a>SOCKCLOSE <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>SOCKCLOSE, </strong></span>
Error closing socket: (errno = aaaa) xxxx</p><p>Operator log/All GT.M Components Error: aaaa contains the OS error code and xxx indicates information about the error that occured while closing a socket connection for the process attempting to log a command to the audit logging facility.</p><p>Action: Review the message to determine whether the logger programs are running or whether a change is required in the configuration of your audit logging facility.</p></div><div class="sect2" title="STACKCRIT  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMSTACKCRIT"></a>STACKCRIT <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>STACKCRIT, </strong></span>
Stack space critical</p><p>Run Time Error: This indicates that the process has consumed almost all of the available stack space.</p><p>Action: Look for infinite recursion. If you do not take immediate action to reduce your stack, GT.M is likely to produce a STACKOFLOW error, which terminates the process. Examine the stack with ZSHOW. Trim the stack using QUIT, ZGOTO, HALT or ZHALT. Note that if a single application call generates a stack frame larger than the stack space between the STACKCRIT and STACKOFLOW boundaries, the process puts a STACKCRIT message in the operator log, but processes the STACKOFLOW and terminates, so the application gets no chance to intervene and handle the error. Look into the gtm_mstack_crit_threshold and gtm_mstack_size environment variables.</p></div><div class="sect2" title="STACKOFLOW  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMSTACKOFLOW"></a>STACKOFLOW <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>STACKOFLOW, </strong></span>
Stack overflow</p><p>Run Time Fatal: This indicates that the process required more stack space than was available in memory.</p><p>Action: Reduce the stack when you get a STACKCRIT error. This error terminates the process. Note that if a single application call generates a stack frame larger than the stack space between the STACKCRIT and STACKOFLOW boundaries, the process puts a STACKCRIT message in the operator log, but processes the STACKOFLOW and terminates, so the application gets no chance to intervene and handle the error. Look into the gtm_mstack_crit_threshold and gtm_mstack_size environment variables.</p></div><div class="sect2" title="TPFAIL  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMTPFAIL"></a>TPFAIL <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>TPFAIL, </strong></span>
Transaction COMMIT failed.</p><p>Run Time Error: This indicates that GT.M attempted to process this transaction four times, but encountered an error every time. Additional accompanying messages indicate details of the failure.</p><p>Action: Report this database error to the group responsible for database integrity at your operation.</p></div></div></div></body></html>
