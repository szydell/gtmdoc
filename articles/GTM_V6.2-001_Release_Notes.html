<html>
<!-- Mirrored [from host tinco.pair.com [file /bhaskar/gtm/doc/articles/GTM_V6.2-001_Release_Notes.html]] -->
<head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>GT.M V6.2-001 Release Notes</title><link rel="stylesheet" href="gtm.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><meta name="description" content="Contact Information GT.M Group Fidelity National Information Services, Inc. 200 Campus Drive Collegeville, PA 19426 United States of America GT.M Support for customers: gtmsupport@fisglobal.com Automated attendant for 24 hour support: +1 (484) 302-3248 Switchboard: +1 (484) 302-3160 Website: http://fis-gtm.com"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" title="GT.M V6.2-001 Release Notes"><div class="titlepage"><div><div><div class="mediaobject"><img src="images/FIS_RGB_logo.jpg"></div></div><div><h2 class="title"><a name="idp155545808"></a>GT.M V6.2-001 Release Notes</h2></div><div><h3 class="subtitle"><i>Release Notes: GT.M V6.2-001</i></h3></div><div><p class="copyright">Copyright (C) 2014, 2019 Fidelity National Information Services, Inc.</p></div><div><div class="legalnotice" title="Legal Notice"><a name="idp155741936"></a><p class="legalnotice-title"><b>Legal Notice</b></p><p>Copyright (C)2014, 2019 Fidelity National Information Services, Inc. and/or its subsidiaries. All Rights Reserved.</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the <a class="ulink" href="http://www.gnu.org/licenses/fdl.txt" target="_blank">GNU Free Documentation License</a>, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts and no Back-Cover Texts. </p><p>GT.M&#8482; is a trademark of Fidelity National Information Services, Inc. Other trademarks are the property of their respective owners. </p><p>This document contains a description of GT.M and the operating instructions pertaining to the various functions that comprise the system. This document does not contain any commitment of FIS. FIS believes the information in this publication is accurate as of its publication date; such information is subject to change without notice. FIS is not responsible for any errors or defects. </p></div></div><div><p class="pubdate">5 February 2019</p></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><b>Revision History</b></th></tr><tr><td align="left">Revision 1.2</td><td align="left">5 February 2019</td><td align="left">Updated the <a class="link" href="#platforms" title="Platforms">Platforms</a> section to add AIX 7.1 TL 4 and AIX 7.2 as supported versions; Correct the maximum V6 database size.</td></tr><tr><td align="left">Revision 1.1</td><td align="left">11 June 2015</td><td align="left">Added the release note for <a class="link" href="#GTM-8181">GTM-8181</a>.</td></tr><tr><td align="left">Revision 1.0</td><td align="left">27 December 2014</td><td align="left">V6.2-001. First published revision.</td></tr></table></div></div><div><div class="abstract" title="Contact Information"><p class="title"><b>Contact Information</b></p><div class="informaltable"><table border="0" width="100%"><colgroup><col><col></colgroup><tbody><tr><td>
                  <p>
</p><div class="address"><p>GT.M Group<br>
Fidelity National Information Services, Inc.<br>
<span class="street">200 Campus Drive</span><br>
<span class="city">Collegeville, </span><span class="state">PA </span><span class="postcode">19426</span><br>
<span class="country">United States of America</span></p></div><p>
</p>
                </td><td>
                  <p>
</p><div class="address"><p><br>
<span class="phone">GT.M Support for customers: gtmsupport@fisglobal.com </span><br>
<span class="phone">Automated attendant for 24 hour support: +1 (484) 302-3248</span><br>
<span class="phone">Switchboard: +1 (484) 302-3160</span><br>
<span class="otheraddr">Website: <a class="ulink" href="http://fis-gtm.com/" target="_blank">http://fis-gtm.com</a></span><br>
</p></div><p>
</p>
                </td></tr></tbody></table></div><p>
</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#GTMrel_overview">V6.2-001</a></span></dt><dd><dl><dt><span class="sect2"><a href="#overview"> Overview </a></span></dt><dt><span class="sect2"><a href="#conventions">Conventions</a></span></dt><dt><span class="sect2"><a href="#platforms"> Platforms </a></span></dt><dt><span class="sect2"><a href="#manage64"> Migrating to 64-bit platforms</a></span></dt><dt><span class="sect2"><a href="#recompile">
 Recompile </a></span></dt><dt><span class="sect2"><a href="#rebuild">Rebuild Shared Libraries or Images</a></span></dt><dt><span class="sect2"><a href="#addn_instr">Additional Installation Instructions</a></span></dt><dt><span class="sect2"><a href="#upgrade"> Upgrading to GT.M V6.2-001</a></span></dt><dt><span class="sect2"><a href="#mng_mode">Managing M mode and UTF-8 mode</a></span></dt><dt><span class="sect2"><a href="#setterm">Setting the environment variable TERM</a></span></dt><dt><span class="sect2"><a href="#install_comp_lib"> Installing Compression Libraries</a></span></dt></dl></dd><dt><span class="sect1"><a href="#GTMchng_hist"> Change History</a></span></dt><dd><dl><dt><span class="sect2"><a href="#GTMV55000">V6.2-001</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp156016496">M-Database Access</a></span></dt><dt><span class="sect1"><a href="#idp156014704">M-Other Than Database Access</a></span></dt><dt><span class="sect1"><a href="#idp156262960">Utilities-MUPIP</a></span></dt><dt><span class="sect1"><a href="#idp156270592">Utilities-Other Than MUPIP</a></span></dt><dt><span class="sect1"><a href="#idp156034864">Error and Other Messages</a></span></dt><dd><dl></dl></dd></dl></div><div class="sect1" title="V6.2-001"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GTMrel_overview"></a>V6.2-001</h2></div></div></div><div class="sect2" title="Overview"><div class="titlepage"><div><div><h3 class="title"><a name="overview"></a> Overview </h3></div></div></div><p>V6.2-001 brings important enhancements to GT.M: a production grade implementation of auto-relink, triggers for global variables that span regions, SOCKET devices that support Transport Layer Security (TLS), and several other enhancements and fixes.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Introduced as field-test grade functionality in V6.2-000, auto-relink is production grade in V6.2-001.  While the API for programs that use auto-relink is upward compatible, the underlying implementation is more robust &amp; scalable.  Whereas in V6.2-000, processes mapped object files directly, in V6.2-001 GT.M dynamically loads object code into shared memory for execution.  Instead of each process mapping each object file - potentially hundreds to thousands of object files by each of hundreds to thousands of processes - processes only need to map shared memory segments (as they do for database files) within which the GT.M run-time system dynamically manages object code.  As Linux on x86 permits shared memory segments to be mapped using hugepages, V6.2-001 provides the opportunity for further scalability enhancements resulting from smaller page tables, and a greater probability of successful memory accesses directly from on-chip translation lookaside buffers.  See <a class="link" href="#GTM-8160">GTM-8160</a> below.</p></li><li class="listitem"><p>GT.M supports triggers independent of global directory and for global variables that span multiple regions.  Previously trigger maintenance required careful choice of a default region and GT.M only supported global variables whose span was limited to a single region.  See <a class="link" href="#GTM-6901">GTM-6901</a> and <a class="link" href="#GTM-7877">GTM-7877</a> below. In addition trigger maintenance is more more robust and user-friendly.</p></li><li class="listitem"><p>SOCKET devices support encrypted communication using TLS (formerly known as SSL).   Because this functionality has a wide variety of user stories (use cases) and has substantial complexity, although the code appears robust, we are not confident that we have exercised a sufficient breadth of use cases in testing. Also we may make changes in future releases that are not entirely backwards compatible. We encourage you to use with this facility in development and testing, and to provide us with feedback. If you are an FIS customer and wish to use this in production, please contact us beforehand to discuss your use case(s).  As with all cryptographic functionality, GT.M includes no code that performs cryptographic calculations, uses a plugin architecture, and ships with a reference implementation of a plugin that FIS tests against selected, widely used, cryptographic libraries. See <a class="link" href="#GTM-7418">GTM-7418</a> below.</p></li></ul></div><p>V6.2-001 also has numerous smaller enhancements and fixes.</p><p>The online help facilities provided through the ZHELP command in GT.M, and the HELP commands in the utilities, provide current, hierarchically organized information current. These, as well as robustness improvements, fixes to issues, and performance enhancements, are described below.</p></div><div class="sect2" title="Conventions"><div class="titlepage"><div><div><h3 class="title"><a name="conventions"></a>Conventions</h3></div></div></div><p>This document uses the following conventions:</p><div class="informaltable"><table border="1" width="70%"><colgroup><col><col><col></colgroup><thead><tr><th>
</th><th>

<p>UNIX</p>
 </th><th>

<p>OpenVMS</p>
 </th></tr></thead><tbody><tr><td>

<p><span class="bold"><strong>Flag/Qualifiers</strong></span></p>
 </td><td>

<p>-</p>
 </td><td>

<p>/</p>
 </td></tr><tr><td>

<p><span class="bold"><strong>Program Names or Functions</strong></span></p>
 </td><td colspan="2">
<p>upper case. For example, MUPIP BACKUP</p>
 </td></tr><tr><td>

<p><span class="bold"><strong>Examples</strong></span></p>
 </td><td colspan="2">
<p>lower case. For example: <br> mupip backup -database ACN,HIST /backup</p>
 </td></tr><tr><td>

<p><span class="bold"><strong>Reference Number</strong></span></p>
 </td><td colspan="2">
<p> A reference number is used to track software <br> enhancements and support requests. <br> It is enclosed between parentheses (). </p>
 </td></tr><tr><td rowspan="2" valign="middle">
<p><span class="bold"><strong>Platform Identifier</strong></span></p>
 </td><td>

<p>[UNIX]</p>
 </td><td>

<p>[OpenVMS]</p>
 </td></tr><tr><td colspan="2">
<p>The platform identifier does not appear <br> for those new features or <br> enhancements that apply to all platforms. </p>
 </td></tr></tbody></table></div><p></p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The term UNIX refers to the general sense of all platforms on which GT.M uses a POSIX API. As of this date, this includes: AIX, HP-UX, GNU/Linux, and Solaris.</p></td></tr></table></div><p>The following table summarizes the new and revised replication terminology and qualifiers. </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>

<p>Pre V5.5-000 terminology</p>
 </th><th>

<p>Pre V5.5-000 qualifier</p>
 </th><th>

<p>Current terminology</p>
 </th><th>

<p>Current qualifiers </p>
 </th></tr></thead><tbody><tr><td>

<p>originating instance or primary instance </p>
 </td><td>

<p>-rootprimary</p>
 </td><td>

<p>originating instance or originating primary instance. </p>

<p>Within the context of a replication connection between two instances, an originating instance is referred to as source instance or source side. For example, in an B&lt;-A-&gt;C replication configuration, A is the source instance for B and C. </p>
 </td><td>

<p>-updok (recommended)</p>

<p>-rootprimary (still accepted)</p>
 </td></tr><tr><td>

<p>replicating instance (or secondary instance) and propagating instance </p>
 </td><td>

<p>N/A for replicating instance or secondary instance. </p>

<p>-propagateprimary for propagating instance </p>
 </td><td>

<p>replicating instance. </p>

<p>Within the context of a replication connection between two instances, a replicating instance that receives updates from a source instance is referred to as receiving instance or receiver side. For example, in an B&lt;-A-&gt;C replication configuration, both B and C can be referred to as a receiving instance. </p>
 </td><td>

<p>-updnotok </p>
 </td></tr><tr><td>

<p>N/A</p>
 </td><td>

<p>N/A</p>
 </td><td>

<p>supplementary instance. </p>

<p>For example, in an A-&gt;P-&gt;Q replication configuration, P is the supplementary instance. Both A and P are originating instances. </p>
 </td><td>

<p>-updok</p>
 </td></tr></tbody></table></div><p>Effective V6.0-000, GT.M documentation adopted IEC standard <a class="ulink" href="http://physics.nist.gov/cuu/Units/binary.html" target="_blank">Prefixes for binary multiples</a>. This document therefore uses prefixes Ki, Mi and Ti (e.g., 1MiB for 1,048,576 bytes). All GT.M documentation will over time be updated to this standard.</p><p><span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="New Feature"></span>
 denotes a new feature that requires updating the manuals. </p><p><span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="New Feature"></span>
 denotes a new feature or an enhancement that may not be upward compatible and may affect an existing application. </p><p><span class="inlinemediaobject"><img src="images/deprecated.png" alt="-Deprecated Message-"></span>
 denotes deprecated messages.</p><p><span class="inlinemediaobject"><img src="images/revised.png" alt="-Revised Message-"></span>
 denotes revised messages.</p><p><span class="inlinemediaobject"><img src="images/new.png" alt="-New Message-"></span>
 denotes added messages.</p></div><div class="sect2" title="Platforms"><div class="titlepage"><div><div><h3 class="title"><a name="platforms"></a> Platforms </h3></div></div></div><p> Over time, computing platforms evolve. Vendors obsolete hardware architectures. New versions of operating systems replace old ones. We at FIS continually evaluate platforms and versions of platforms that should be Supported for GT.M. In the table below, we document not only the ones that are currently Supported for this release, but also alert you to our future plans given the evolution of computing platforms. If you are an FIS customer, and these plans would cause you hardship, please contact your FIS account executive promptly to discuss your needs. </p><p> GT.M runs on a wide variety of UNIX/Linux implementations as well as OpenVMS. Consult FIS for currently supported versions. Each GT.M release is extensively tested by FIS on a set of specific versions of operating systems on specific hardware architectures (the combination of operating system and hardware architecture is referred to as a platform). This set of specific versions is considered Supported. There will be other versions of the same operating systems on which a GT.M release may not have been tested, but on which the FIS GT.M support team knows of no reason why GT.M would not work. This larger set of versions is considered Supportable. There is an even larger set of platforms on which GT.M may well run satisfactorily, but where the FIS GT.M team lacks the knowledge to determine whether GT.M is Supportable. These are considered Unsupported. Contact FIS GT.M Support with inquiries about your preferred platform.</p><p>As of the publication date, FIS supports this release on the hardware and operating system versions below. Contact FIS for a current list of Supported platforms. The reference implementation of the encryption plugin has its own additional requirements, should you opt to use it as included with GT.M.</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>
 <p class="bold"> Platform </p>
 </th><th>
 <p class="bold"> Supported Versions </p>
 </th><th>
 <p class="bold"> Notes </p>
 </th></tr></thead><tbody><tr><td>

<p> Hewlett-Packard Integrity IA64 </p>

<p>HP-UX </p>
 </td><td>

<p> 11V3 (11.31) </p>
 </td><td>

<p><span class="emphasis"><em>FIS intends to no longer support this platform after October 1, 2015. Contact your FIS support channel if you wish to use GT.M on this platform.</em></span></p>
 </td></tr><tr><td>

<p> Hewlett-Packard Alpha/AXP OpenVMS </p>
 </td><td>

<p> 7.2-1 / 8.2 / 8.3 </p>
 </td><td>

<p><span class="emphasis"><em>V6.2-001 is the last GT.M release for this platform. Please contact your FIS account manager if you need ongoing support for GT.M on this platform.</em></span></p>

<p> GT.M supports M mode but not UTF-8 mode on this platform. GT.M does not support several recent enhancements on this platform, including but not limited to database encryption, on-line backup, multi-site replication, PIPE devices and triggers. </p>

<p> If you need to work with external calls written in C with Version 6.x of the C compiler on Alpha OpenVMS, then you must carefully review all the provided kits for that product and apply them appropriately. </p>

<p> Although this platform remains at present fully supported with respect to bug fixes, new functionality is supported on this platform only for FIS' convenience.</p>
 </td></tr><tr><td>

<p> IBM System p AIX </p>
 </td><td>

<p> 6.1, 7.1 TL 4, 7.2 </p>
 </td><td>

<p>Only 64-bit versions of AIX are Supported.</p>

<p> While GT.M supports both UTF-8 mode and M mode on this platform, there are problems with the AIX ICU utilities that prevent FIS from testing 4-byte UTF-8 characters as comprehensively on this platform as we do on others. </p>
<p>AIX 7.1 TL 5 is Supportable.</p>

<p> Running GT.M on AIX 7.1 requires APAR IZ87564, a fix for the POW() function, to be applied. To verify that this fix has been installed, execute <code class="code"> instfix -ik IZ87564. </code> </p>
 </td></tr><tr><td>

<p> Oracle (Sun) SPARC Solaris </p>
 </td><td>

<p> 10 (Update 6 and above) </p>
 </td><td>

<p><span class="emphasis"><em>FIS intends to no longer support this platform after December 5, 2015. Contact your FIS support channel if you wish to use GT.M on this platform.</em></span></p>
 </td></tr><tr><td>

<p> x86_64 GNU/Linux </p>
 </td><td>

<p> Red Hat Enterprise Linux 6; Ubuntu 12.04 LTS; SuSE Linux Enterprise Server 11 </p>
 </td><td>

<p> To run 64-bit GT.M processes requires both a 64-bit kernel as well as 64-bit hardware. </p>

<p> GT.M should also run on recent releases of other major Linux distributions with a contemporary Linux kernel (2.6 or later), glibc (version 2.12 or later) and ncurses (version 5.7 or later). </p>

<p> To install GT.M with Unicode (UTF-8) support on RHEL 6, in response to the installation question <code class="code"> Should an ICU version other than the default be used? (y or n) </code> please respond <code class="code"><span class="bold"><strong> y </strong></span></code> and then specify the ICU version (for example, respond 4.2) to the subsequent prompt <code class="code"> Enter ICU version (ICU version 3.6 or later required. Enter as major-ver.minor-ver): </code> </p>

<p> GT.M requires the libtinfo library. If it is not already installed on your system, and is available using the package manager, install it using the package manager. If a libtinfo package is not available (for example on SuSE 11):</p>
 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Find the directory where libncurses.so is installed on your system.</p></li><li class="listitem"><p> Change to that directory and make a symbolic link to libncurses.so.&lt;ver&gt; from libtinfo.so.&lt;ver&gt;. Note that some of the libncurses.so entries may themselves be symbolic links, for example, libncurses.so.5 may itself be a symbolic link to libncurses.so.5.9.</p></li></ul></div>
 </td></tr><tr><td>

<p> x86 GNU/Linux </p>
 </td><td>

<p> Red Hat Enterprise Linux 6 </p>
 </td><td>

<p> This 32-bit version of GT.M runs on either 32- or 64-bit x86 platforms; we expect the X86_64 GNU/Linux version of GT.M to be preferable on 64-bit hardware. The CPU must have an instruction set equivalent to 586 (Pentium) or better. Also, refer to the notes above on the 64-bit version.</p>
   </td></tr></tbody></table></div><div class="sect3" title="Platform support lifecycle"><div class="titlepage"><div><div><h4 class="title"><a name="GTMplatform_lifecycle"></a> Platform support lifecycle </h4></div></div></div><p> FIS usually supports new operating system versions six months or so after stable releases are available and we usually support each version for a two year window. GT.M releases are also normally supported for two years after release. While FIS will attempt to provide support to customers in good standing for any GT.M release and operating system version, our ability to provide support diminishes after the two year window. </p><p> GT.M cannot be patched, and bugs are only fixed in new releases of software.</p></div></div><div class="sect2" title="Migrating to 64-bit platforms"><div class="titlepage"><div><div><h3 class="title"><a name="manage64"></a> Migrating to 64-bit platforms</h3></div></div></div><p> The same application code runs on both 32-bit and 64-bit platforms. Please note that:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> You must compile the application code separately for each platform. Even though the M source code is exactly the same, the generated object modules are different even on the same hardware architecture - the object code differs between x86 and x86_64.</p></li><li class="listitem"><p> Parameter-types that interface GT.M with non-M code using C calling conventions must match the data-types on their target platforms. Mostly, these parameters are for call-ins, external calls, internationalization (collation) and environment translation, and are listed in the tables below. Note that most addresses on 64-bit platforms are 8 bytes long and require 8 byte alignment in structures whereas all addresses on 32-bit platforms are 4 bytes long and require 4-byte alignment in structures.</p></li></ul></div><div class="sect3" title="Call-ins and External Calls"><div class="titlepage"><div><div><h4 class="title"><a name="GTMcallext"></a>Call-ins and External Calls</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
 <p class="bold">Parameter type</p>
 </th><th>
 <p class="bold">32-Bit</p>
 </th><th>
 <p class="bold">64-bit</p>
 </th><th>
 <p class="bold">Remarks</p>
 </th></tr></thead><tbody><tr><td>

<p> gtm_long_t</p>
 </td><td>

<p> 4-byte (32-bit)</p>
 </td><td>

<p> 8-byte (64-bit)</p>
 </td><td>

<p> gtm_long_t is much the same as the C language long type.</p>
 </td></tr><tr><td>

<p> gtm_ulong_t</p>
 </td><td>

<p> 4-byte</p>
 </td><td>

<p> 8-byte</p>
 </td><td>

<p> gtm_ulong_t is much the same as the C language unsigned long type.</p>
 </td></tr><tr><td>

<p> gtm_int_t</p>
 </td><td>

<p> 4-byte</p>
 </td><td>

<p> 4-byte</p>
 </td><td>

<p> gtm_int_t has 32-bit length on all platforms.</p>
 </td></tr><tr><td>

<p> gtm_uint_t</p>
 </td><td>

<p> 4-byte</p>
 </td><td>

<p> 4-byte</p>
 </td><td>

<p> gtm_uint_t has 32-bit length on all platforms</p>
 </td></tr></tbody></table></div><p></p><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution:  Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.jpg"></td><th align="left"> Caution</th></tr><tr><td align="left" valign="top"><p> If your interface uses gtm_long_t or gtm_ulong_t types but your interface code uses int or signed int types, failure to revise the types so they match on a 64-bit platform will cause the code to fail in unpleasant, potentially dangerous and hard to diagnose ways.</p></td></tr></table></div></div><div class="sect3" title="Internationalization (Collation)"><div class="titlepage"><div><div><h4 class="title"><a name="GTMinternationalization"></a> Internationalization (Collation)</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
 <p class="bold">Parameter type</p>
 </th><th>
 <p class="bold">32-Bit</p>
 </th><th>
 <p class="bold">64-bit</p>
 </th><th>
 <p class="bold">Remarks</p>
 </th></tr></thead><tbody><tr><td>

<p> gtm_descriptor in gtm_descript.h</p>
 </td><td>

<p> 4-byte</p>
 </td><td>

<p> 8-byte</p>
 </td><td>

<p> Although it is only the address within these types that changes, the structures may grow by up to 8 bytes as a result of compiler padding to meet platform alignment requirements.</p>
 </td></tr></tbody></table></div><p></p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> Assuming other aspects of code are 64-bit capable, collation routines should require only recompilation. </p></td></tr></table></div></div><div class="sect3" title="Environment Translation"><div class="titlepage"><div><div><h4 class="title"><a name="GTMenv_trans"></a> Environment Translation</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
 <p class="bold">Parameter type</p>
 </th><th>
 <p class="bold">32-Bit</p>
 </th><th>
 <p class="bold">64-bit</p>
 </th><th>
 <p class="bold">Remarks</p>
 </th></tr></thead><tbody><tr><td>

<p> gtm_string_t type in gtmxc_types.h</p>
 </td><td>

<p> 4-byte</p>
 </td><td>

<p> 8-byte</p>
 </td><td>

<p> Although it is only the address within these types that changes, the structures may grow by up to 8 bytes as a result of compiler padding to meet platform alignment requirements.</p>
 </td></tr></tbody></table></div><p></p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>Assuming other aspects of code are 64-bit capable, environment translation routines should require only recompilation.</p></td></tr></table></div></div></div><div class="sect2" title="Recompile"><div class="titlepage"><div><div><h3 class="title"><a name="recompile"></a>
 Recompile </h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
 Recompile all M and C source files.</p></li></ul></div></div><div class="sect2" title="Rebuild Shared Libraries or Images"><div class="titlepage"><div><div><h3 class="title"><a name="rebuild"></a>Rebuild Shared Libraries or Images</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Rebuild all Shared Libraries (UNIX) or Shareable Executable Images (OpenVMS) after recompiling all M and C source files..</p></li></ul></div></div><div class="sect2" title="Additional Installation Instructions"><div class="titlepage"><div><div><h3 class="title"><a name="addn_instr"></a>Additional Installation Instructions</h3></div></div></div><p>To install GT.M, see the "Installing GT.M" section in the GT.M Administration and Operations Guide. For minimal down time, upgrade a current replicating instance and restart replication. Once that replicating instance is current, switch it to become the originating instance. Upgrade the prior originating instance to become a replicating instance, and perform a switchover when you want it again to resume an originating primary role.</p><p></p><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution: Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.jpg"></td><th align="left">Caution</th></tr><tr><td align="left" valign="top"><p>Never replace the binary image on disk of any executable file while it is in use by an active process. It may lead to unpredictable results. Depending on the operating system, these results include but are not limited to denial of service (that is, system lockup) and damage to files that these processes have open (that is, database structural damage). </p></td></tr></table></div><div class="sect3" title="UNIX"><div class="titlepage"><div><div><h4 class="title"><a name="idp155856816"></a>UNIX</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>FIS strongly recommends installing each version of GT.M in a separate (new) directory, rather than overwriting a previously installed version. If you have a legitimate need to overwrite an existing GT.M installation with a new version, you must first shut down all processes using the old version. FIS suggests installing GT.M V6.2-001 in a Filesystem Hierarchy Standard compliant location such as /usr/lib/fis-gtm/V6.2-001_arch (for example, /usr/lib/fis-gtm/V6.2-001_x86 on 32-bit Linux systems). A location such as /opt/fis-gtm/V6.2-001_arch would also be appropriate. Note that the <em class="replaceable"><code>arch</code></em> suffix is especially important if you plan to install 32- and 64-bit versions of the same release of GT.M on the same system.</p></li><li class="listitem"><p>Use the MUPIP RUNDOWN command of the old GT.M version to ensure all database files are cleanly closed.</p></li><li class="listitem"><p>In UNIX editions, make sure gtmsecshr is not running. If gtmsecshr is running, first stop all GT.M processes including the DSE, LKE and MUPIP utilities and then perform a <code class="code">MUPIP STOP</code> <em class="replaceable"><code>pid_of_gtmsecshr</code></em>.</p></li><li class="listitem"><p>Starting with V6.2-000, GT.M no longer supports the use of the deprecated $gtm_dbkeys and the master key file it points to for database encryption. To convert master files to the libconfig format, please click <a class="ulink" href="downloadables/CONVDBKEYS.html" target="_blank"><span class="inlinemediaobject"><img src="images/download.png" alt="Download CONVDBKEYS.m"></span>
</a> to download the CONVDBKEYS.m program and follow instructions in the comments near the top of the program file. You can also download CONVDBKEYS.m from http://tinco.pair.com/bhaskar/gtm/doc/articles/downloadables/CONVDBKEYS.m. If you are using $gtm_dbkeys for database encryption, please convert master key files to libconfig format immediately after upgrading to V6.2-000. Also, modify your environment scripts to include the use of gtmcrypt_config environment variable. </p></li></ul></div><div class="sect4" title="Reference Implementation Plugin - Shared Library Dependencies"><div class="titlepage"><div><div><h5 class="title"><a name="idp155866896"></a>Reference Implementation Plugin - Shared Library Dependencies</h5></div></div></div><p>The database encryption and TLS reference implementation plugin binaries requires libgcrypt11, libgpgme11, libconfig 1.4.x, and libssl1.0.0 runtime libraries. Immediately after installing GT.M, install these libraries using the package manager of your operating system. If these runtime libraries are not available, the plugin may produce errors like the following (for example on Ubuntu x86_64):</p><pre class="programlisting">%GTM-I-TEXT, libxxxxxx.so.&lt;ver&gt;: cannot open shared object file: No such file or directory</pre><p>..where <code class="code">libxxxxxx</code> is either libgcrypt, liggpgme, libconfig, libgcrypt, or libssl and <code class="code">&lt;ver&gt;</code> is the version number of the libxxxxxx shared library. To locate missing share library dependencies in your reference implementation plugin, execute the following command: </p><pre class="programlisting">$ ldd $gtm_dist/plugin/libgtm* | awk '/^.usr/{libname=$0}/not found/{print libname;print}'</pre><p>This command produces an output like:</p><pre class="programlisting">/usr/lib/fis-gtm/V6.1-000_x86_64/plugin/libgtmcrypt_openssl_AES256CFB.so:
        libcrypto.so.10 =&gt; not found
/usr/lib/fis-gtm/V6.1-000_x86_64/plugin/libgtmcrypt_openssl_BLOWFISHCFB.so:
        libcrypto.so.10 =&gt; not found
/usr/lib/fis-gtm/V6.1-000_x86_64/plugin/libgtmtls.so:
        libssl.so.10 =&gt; not found </pre><p>...which means that libcrypto.so.10 and libssl.so.10 shared libraries are missing from the system and the reference implementation plugin will produce a libxxxxxx.so.&lt;ver&gt;: cannot open shared object file: No such file or directory error during runtime. Note down the missing shared libraries and proceed as follows for each missing library:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>If libxxxxxx.so.&lt;ver&gt; is already installed:</strong></span> Execute the following command to create a symlink from <span class="bold"><strong>libxxxxxx.so.&lt;ver&gt;</strong></span> to $gtm_dist/plugin:</p><pre class="programlisting">ln -s /path/to/installed/libxxxxxx.so.&lt;ver&gt; $gtm_dist/plugin</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The reference implementation plugin libraries are linked using the RPATH directive $ORIGIN which means that these libraries always start looking for library dependencies from the current directory. Therefore, it is safe to create symlinks for the missing libraries in $gtm_dist/plugin directory. Do not create symlinks to shared libraries in directories managed by package managers and never symlink incompatible library versions as it may not always lead to predictable results.</p></td></tr></table></div></li><li class="listitem"><p><span class="bold"><strong>If libxxxxxx is not installed</strong></span>: Install the runtime libxxxxxx library using the package manager; check whether the pre-packaged distribution of your operating system contains the library having version specified with &lt;ver&gt;. On older Linux systems, these libraries may not be available so you have to build the missing libraries from source. After installing/building the missing library, create a symlink from <span class="bold"><strong>libxxxxxx.so.&lt;ver&gt;</strong></span> to $gtm_dist/plugin:</p><pre class="programlisting">ln -s /path/to/installed/libxxxxxx.so.&lt;ver&gt; $gtm_dist/plugin</pre></li><li class="listitem"><p>As a special case, some systems may have libssl.so.1.0.x and libcrypto.so.1.0.x instead of libssl.so.10 and libcrypto.so.1.0.x. In this case it is safe to link them using:</p><pre class="programlisting">ln -s /path/to/installed/libxxxxxx.so.1.0.x $gtm_dist/plugin/libxxxxxx.so.10</pre></li><li class="listitem"><p>Alternatively, you can recompile the reference implementation plugin. The instructions are as follows:</p></li></ul></div></div><div class="sect4" title="Recompiling the Reference Implementation Plugin"><div class="titlepage"><div><div><h5 class="title"><a name="idp155917664"></a>Recompiling the Reference Implementation Plugin</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Install the development libraries for libgcrypt11, libgpgme11, libconfig 1.4.x or 1.3.x, libssl1.0.0. The package name of development libraries usually have the -dev or -devel suffix and are available through the package manager. For example, on Ubuntu_x86_64 a command like the following installs the required development libraries:</p><pre class="programlisting">sudo apt-get install libgcrypt11-dev libgpgme11-dev libconfig-dev libssl-dev</pre></li><li class="listitem"><p>Login as root and set the gtm_dist environment variable to point to the location of the GT.M distribution.</p></li><li class="listitem"><p>Note down the file permissions of the *.so files in $gtm_dist/plugin directory.</p></li><li class="listitem"><p>Unpack $gtm_dist/plugin/gtmcrypt/source.tar to a temporary directory. </p><pre class="programlisting">mkdir /tmp/plugin-build
cd /tmp/plugin-build
cp $gtm_dist/plugin/gtmcrypt/source.tar .  
tar -xvf source.tar</pre></li><li class="listitem"><p>Recompile the reference implementation plugin and install it in the $gtm_dist/plugin directory. </p><pre class="programlisting">make uninstall
make 
make install 
make clean</pre></li><li class="listitem"><p>Assign permissions noted in step 3 to the newly installed .so files in $gtm_dist/plugin.</p></li></ol></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>If you are running the V6.1-000 or V6.2-000 reference implementation plugin (database encryption and TLS replication) on a UNIX platform other than RedHat, please create a symlinks (<code class="code">ln -s /path/to/installed/lib{ssl,crypto}.so.1.0.x  $gtm_dist/plugin/lib{ssl,crypto}.so.10</code>) for the missing libcrypto.so.10 and libssl.so.10 shared libraries. GT.M UNIX distributions are compiled and linked on a RedHat platform where libcrypto.so.10 and libssl.so.10 version libraries are available from package managers. On UNIX platforms other than RedHat or older Linux systems, these library versions may not be available from package managers. Alternatively, you can recompile the reference implementation plugin.</p></td></tr></table></div></div><div class="sect4" title="Additional Information for JFS1 on AIX"><div class="titlepage"><div><div><h5 class="title"><a name="idp155881424"></a> Additional Information for JFS1 on AIX</h5></div></div></div><p>If you expect a database file or journal file to exceed 2GB with older versions of the JFS file system, then you must configure its file system to permit files larger than 2GB. Furthermore, should you choose to place journal files on file systems with a 2GB limit, since GT.M journal files can grow to a maximum size of 4GB, you must then set the journal auto switch limit to less than 2 GB.</p></div></div><div class="sect3" title="OpenVMS"><div class="titlepage"><div><div><h4 class="title"><a name="idp155861328"></a>OpenVMS</h4></div></div></div><p>To upgrade from a GT.M version prior to V4.3-001, you must update any customized copy of <code class="code">GTM$DEFAULTS</code> to include a definition for <code class="code">GTM$ZDATE_FORM</code>.</p><p>You can ignore the following section if you choose the standard GT.M configuration or answer yes to the following question:</p><pre class="programlisting">Do you want to define GT.M commands to the system</pre><p>If you define GT.M commands locally with <code class="code">SET COMMAND GTM$DIST:GTMCOMMANDS.CLD</code> in <code class="code">GTMLOGIN.COM</code> or other command file for each process which uses GT.M, you must execute the same command after installing the new version of GT.M and before using it. If you define the GT.M commands to the system other than during the installation of GT.M, you must update the system DCLTABLES with the new GTMCOMMANDS.CLD provided with this version of GT.M. See the OpenVMS "Command Definition, Librarian, and Message Utilities Manual" section on "Adding a system command." In both cases, all GT.M processes must match the proper <code class="code">GTMCOMMANDS.CLD</code> with the version of GT.M they run..</p></div></div><div class="sect2" title="Upgrading to GT.M V6.2-001"><div class="titlepage"><div><div><h3 class="title"><a name="upgrade"></a> Upgrading to GT.M V6.2-001</h3></div></div></div><p> The GT.M database consists of four types of components- database files, journal files, global directories, and replication instance files. The format of some database components is different for 32-bit and 64-bit GT.M releases for the x86 GNU/Linux platform.</p><p> GT.M upgrade procedure for V6.2-001 consists of 5 stages:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> <a class="link" href="#GTMstage_1" title="Stage 1: Global Directory Upgrade">Stage 1: Global Directory Upgrade</a></p></li><li class="listitem"><p> <a class="link" href="#GTMstage_2" title="Stage 2: Database Files Upgrade">Stage 2: Database Files Upgrade</a></p></li><li class="listitem"><p> <a class="link" href="#GTMstage_3" title="Stage 3: Replication Instance File Upgrade">Stage 3: Replication Instance File Upgrade</a></p></li><li class="listitem"><p> <a class="link" href="#GTMstage_4" title="Stage 4: Journal Files Upgrade">Stage 4: Journal Files Upgrade</a></p></li><li class="listitem"><p> <a class="link" href="#GTMstage_5" title="Stage 5: Trigger Definitions Upgrade">Stage 5: Trigger Definitions Upgrade</a></p></li></ul></div><p> Read the upgrade instructions of each stage carefully. Your upgrade procedure for GT.M V6.2-001 depends on your GT.M upgrade history and your current version.</p><div class="sect3" title="Stage 1: Global Directory Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_1"></a> Stage 1: Global Directory Upgrade</h4></div></div></div><p> FIS strongly recommends you back up your Global Directory before upgrading. There is no single-step method for downgrading a Global Directory to an older format.</p><p> <span class="bold"><strong>To upgrade from any previous version of GT.M:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Open your Global Directory with the GDE utility program of GT.M V6.2-001.</p></li><li class="listitem"><p> Execute the EXIT command. This command automatically upgrades the Global Directory.</p></li></ul></div><p> <span class="bold"><strong>To switch between 32- and 64-bit global directories on the x86 GNU/Linux platform:</strong></span></p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Open your Global Directory with the GDE utility program on the 32-bit platform.</p></li><li class="listitem"><p> On GT.M versions that support SHOW -COMMAND, execute SHOW -COMMAND -FILE=file-name. This command stores the current Global Directory settings in file-name.</p></li><li class="listitem"><p> On GT.M versions that do not support GDE SHOW -COMMAND, execute the SHOW -ALL command. Use the information from the output to create an appropriate command file or use it as a guide to manually enter commands in GDE.</p></li><li class="listitem"><p> Open GDE on the 64-bit platform. If you have a command file from 2. or 3., execute @file-name and then run the EXIT command. These commands automatically create the Global Directory. Otherwise use the GDE output from the old Global Directory and apply the settings in the new environment.</p></li></ol></div><p> An analogous procedure applies in the reverse direction. </p><p> If you inadvertently open a Global Directory of an old format with no intention of upgrading it, execute the QUIT command rather than the EXIT command.</p><p> If you inadvertently upgrade a global directory, perform the following steps to downgrade to an old GT.M release:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Open the global directory with the GDE utility program of V6.2-001.</p></li><li class="listitem"><p> Execute the SHOW -COMMAND -FILE=file-name command. This command stores the current Global Directory settings in the file-name command file. If the old version is significantly out of date, edit the command file to remove the commands that do not apply to the old format. Alternatively, you can use the output from SHOW -ALL or SHOW -COMMAND as a guide to manually enter equivalent GDE commands for the old version.</p></li></ul></div></div><div class="sect3" title="Stage 2: Database Files Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_2"></a> Stage 2: Database Files Upgrade</h4></div></div></div><p> <span class="bold"><strong>To upgrade from GT.M V5.0*/V5.1*/V5.2*/V5.3*/V5.4*/V5.5:</strong></span></p><p>A V6 database file is a superset of a V5 database file and has potentially longer keys and records. Therefore, upgrading a database file requires no explicit procedure. After upgrading the Global Directory, opening a V5 database with a V6 process automatically upgrades fields in the database fileheader.</p><p>A database created with V6 supports up to 992Mi blocks and is not backward compatible. V6 databases that take advantage of V6 limits on key size and records size cannot be downgraded. Use MUPIP DOWNGRADE -VERSION=V5 to downgrade a V6 database back to V5 format provided it meets the database downgrade requirements. For more information on downgrading a database, refer to <a class="link" href="#GTMdown_v54" title="Downgrading to V5 or V4"> Downgrading to V5 or V4</a>.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> A V5 database that has been automatically upgraded to V6 can perform all GT.M V6.2-001 operations. However, that database can only grow to the maximum size of the version in which it was originally created. If the database is V5.0-000 through V5.3-003, the maximum size is 128Mi blocks. If the database is V5.4-000 through V5.5-000, the maximum size is 224Mi blocks. A database file created with V6.0-000 (or above) can grow up to a maximum of 992Mi blocks. This means that, for example, the maximum size of a V6 database file having 8KiB block size is 7936GiB (8KiB*992Mi).</p></td></tr></table></div><p> If your database has any previously used but free blocks from an earlier upgrade cycle (V4 to V5), you may need to execute the MUPIP REORG -UPGRADE command. If you have already executed the MUPIP REORG -UPGRADE command in a version prior to V5.3-003 and if subsequent versions cannot determine whether MUPIP REORG -UPGRADE performed all required actions, it sends warnings to the operator log requesting another run of MUPIP REORG -UPGRADE. In that case, perform any one of the following steps: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Execute the MUPIP REORG -UPGRADE command again, or</p></li><li class="listitem"><p> Execute the DSE CHANGE -FILEHEADER -FULLY_UPGRADED=1 command to stop the warnings.</p></li></ul></div><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution:  Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.jpg"></td><th align="left"> Caution</th></tr><tr><td align="left" valign="top"><p> Do not run the DSE CHANGE -FILEHEADER -FULLY_UPGRADED=1 command unless you are absolutely sure of having previously run a MUPIP REORG -UPGRADE from V5.3-003 or later. An inappropriate DSE CHANGE -FILEHEADE -FULLY_UPGRADED=1 may lead to database integrity issues.</p></td></tr></table></div><p> You do not need to run MUPIP REORG -UPGRADE on:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> A database that was created by a V5 MUPIP CREATE</p></li><li class="listitem"><p> A database that has been completely processed by a MUPIP REORG -UPGRADE from V5.3-003 or later.</p></li></ul></div><p> For additional upgrade considerations, refer to Database Compatibility Notes.</p><p> <span class="bold"><strong>To upgrade from a GT.M version prior to V5.000:</strong></span></p><p> You need to upgrade your database files only when there is a block format upgrade from V4 to V5. However, some versions, for example, database files which have been initially been created with V4 (and subsequently upgraded to a V5 format) may additionally need a MUPIP REORG -UPGRADE operation to upgrade previously used but free blocks that may have been missed by earlier upgrade tools.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Upgrade your database files using in-place or traditional database upgrade procedure depending on your situation. For more information on in-place/traditional database upgrade, see <a class="ulink" href="GTM_Database_Migration.html" target="_blank">Database Migration Technical Bulletin</a>.</p></li><li class="listitem"><p> Run the MUPIP REORG -UPGRADE command. This command upgrades all V4 blocks to V5 format. </p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note:  Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left"> Note</th></tr><tr><td align="left" valign="top"><p> Databases created with GT.M releases prior to V5.0-000 and upgraded to a V5 format retain the maximum size limit of 64Mi (67,108,864) blocks.</p></td></tr></table></div><div class="sect4" title="Database Compatibility Notes"><div class="titlepage"><div><div><h5 class="title"><a name="GTMdatabase_comp"></a> Database Compatibility Notes</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Changes to the database file header may occur in any release. GT.M automatically upgrades database file headers as needed. Any changes to database file headers are upward and downward compatible within a major database release number, that is, although processes from only one GT.M release can access a database file at any given time, processes running different GT.M releases with the same major release number can access a database file at different times.</p></li><li class="listitem"><p> Databases created with V5.3-004 through V5.5-000 can grow to a maximum size of 224Mi (234,881,024) blocks. This means, for example, that with an 8KiB block size, the maximum database file size is 1,792GiB; this is effectively the size of a single global variable that has a region to itself; a database consists of any number of global variables. A database created with GT.M versions V5.0-000 through V5.3-003 can be upgraded with MUPIP UPGRADE to increase the limit on database file size from 128Mi to 224Mi blocks.</p></li><li class="listitem"><p> Databases created with V5.0-000 through V5.3-003 have a maximum size of 128Mi (134, 217,728) blocks. GT.M versions V5.0-000 through V5.3-003 can access databases created with V5.3-004 and later as long as they remain within a 128Mi block limit.</p></li><li class="listitem"><p> Database created with V6.0-000 or above have a maximum size of 1,040,187,392(992Mi) blocks.</p></li><li class="listitem"><p>For information on downgrading a database upgraded from V6 to V5, refer to: <a class="link" href="#GTMstage_1" title="Stage 1: Global Directory Upgrade">Downgrading to V5 or V4</a>.</p></li></ul></div></div></div><div class="sect3" title="Stage 3: Replication Instance File Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_3"></a> Stage 3: Replication Instance File Upgrade</h4></div></div></div><p> V6.2-001 does not require new replication instance files if you are upgrading from V5.5-000. However, V6.2-001 requires new replication instance files if you are upgrading from any version prior to V5.5-000. Instructions for creating new replication instance files are in the <a class="ulink" href="../books/ao/UNIX_manual/ch07.html" target="_blank">Database Replication</a> chapter of the UNIX Administration and Operations Guide. Shut down all Receiver Servers on other instances that are to receive updates from this instance, shut down this instance Source Server(s), recreate the instance file, restart the Source Server(s) and then restart any Receiver Server for this instance with the -UPDATERESYNC qualifier.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note:  Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left"> Note</th></tr><tr><td align="left" valign="top"><p> Without the UPDATERESYNC qualifier, the replicating instance synchronizes with the originating instance using state information from both instances and potentially rolling back information on the replicating instance. The UPDATERESYNC qualifier declares the replicating instance to be in a wholesome state matching some prior (or current) state of the originating instance; it causes MUPIP to update the information in the replication instance file of the originating instance and not modify information currently in the database on the replicating instance. After this command, the replicating instance catches up to the originating instance starting from its own current state. Use UPDATERESYNC only when you are absolutely certain that the replicating instance database was shut down normally with no errors, or appropriately copied from another instance with no errors.</p></td></tr></table></div><p> </p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> You must always follow the steps described in the <a class="ulink" href="../books/ao/UNIX_manual/ch07.html" target="_blank">Database Replication</a> chapter of the UNIX Administration and Operations Guide when migrating from a logical dual site (LDS) configuration to an LMS configuration, even if you are not changing GT.M releases.</p></td></tr></table></div></div><div class="sect3" title="Stage 4: Journal Files Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_4"></a> Stage 4: Journal Files Upgrade</h4></div></div></div><p> On every GT.M upgrade:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Create a fresh backup of your database.</p></li><li class="listitem"><p> Generate new journal files (without back-links).</p></li></ul></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> This is necessary because MUPIP JOURNAL cannot use journal files from a release other than its own for RECOVER, ROLLBACK, or EXTRACT. </p></td></tr></table></div></div><div class="sect3" title="Stage 5: Trigger Definitions Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_5"></a> Stage 5: Trigger Definitions Upgrade</h4></div></div></div><p> If you are upgrading from V5.4-002A/V5.4-002B/V5.5-000 to V6.2-001 and you have database triggers defined in V6.2-000 or earlier, you need to ensure that your trigger definitions are wholesome in the older version and then run MUPIP TRIGGER -UPGRADE. If you have doubts about the wholesomeness of the trigger definitions in the old version use the instructions below to capture the definitions delete them in the old version (-*), run MUPIP TRIGGER -UPGRADE in V6.2-001 and then reload them as described below.</p><p> You need to extract and reload your trigger definitions only if you are upgrading from V5.4-000/V5.4-000A/V5.4-001 to V6.2-001 or if you find your prior version trigger definitions have problems. For versions V5.4-000/V5.4-000A/V5.4-001 this is necessary because multi-line XECUTEs for triggers require a different internal storage format for triggers which makes triggers created in V5.4-000/V5.4-000A/V5.4-001 incompatible with V5.4-002/V5.4-002A/V5.4-002B/V5.5-000/V6.0-000/V6.0-001/V6.2-001.</p><p> To extract and reapply the trigger definitions on V6.2-001 using MUPIP TRIGGER:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Using the old version, execute a command like <code class="code">mupip trigger -select="*" trigger_defs.trg</code>. Now, the output file trigger_defs.trg contains all trigger definitions.</p></li><li class="listitem"><p> Place -* at the beginning of the trigger_defs.trg file to remove the old trigger definitions.</p></li><li class="listitem"><p> Using V6.2-001, run <code class="code">mupip trigger -triggerfile=trigger_defs.trg </code> to reload your trigger definitions.</p></li></ol></div><p> To extract and reload trigger definitions on a V6.2-001 replicating instance using $ZTRIGGER():</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Shut down the instance using the old version of GT.M. </p></li><li class="listitem"><p> Execute a command like <code class="code">mumps -run %XCMD 'i $ztrigger("select")' &gt; trigger_defs.trg</code> . Now, the output file trigger_defs.trg contains all trigger definitions.</p></li><li class="listitem"><p> Turn off replication on all regions. </p></li><li class="listitem"><p> Run <code class="code">mumps -run %XCMD 'i $ztrigger("item","-*") </code> to remove the old trigger definitions. </p></li><li class="listitem"><p> Perform the upgrade procedure applicable for V6.2-001.</p></li><li class="listitem"><p> Run <code class="code"> mumps -run %XCMD 'if $ztrigger("file","trigger_defs.trg")'</code> to reapply your trigger definitions.</p></li><li class="listitem"><p> Turn replication on. </p></li><li class="listitem"><p> Connect to the originating instance. </p></li></ol></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note:  Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left"> Note</th></tr><tr><td align="left" valign="top"><p> Reloading triggers renumbers automatically generated trigger names. </p></td></tr></table></div></div><div class="sect3" title="Downgrading to V5 or V4"><div class="titlepage"><div><div><h4 class="title"><a name="GTMdown_v54"></a> Downgrading to V5 or V4 </h4></div></div></div><p> You can downgrade a GT.M V6 database to V5 or V4 format using MUPIP DOWNGRADE.</p><p> Starting with V6.0-000, MUPIP DOWNGRADE supports the -VERSION qualifier with the following format: </p><pre class="programlisting">MUPIP DOWNGRADE -VERSION=[V5|V4] </pre><p> -VERSION specifies the desired version for the database header. </p><p> <span class="bold"><strong> To qualify for a downgrade from V6 to V5, your database must meet the following requirements: </strong></span></p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> The database was created with a major version no greater than the target version. </p></li><li class="listitem"><p> The database does not contain any records that exceed the block size (spanning nodes). </p></li><li class="listitem"><p> The sizes of all the keys in database are less than 256 bytes. </p></li><li class="listitem"><p> There are no keys present in database with size greater than the Maximum-Key-Size specification the database header, that is, Maximum-Key-Size is assured. </p></li><li class="listitem"><p> The maximum Record size is small enough to accommodate key, overhead, and value within a block. </p></li></ol></div><p> If your database meets all the above requirements, MUPIP DOWNGRADE -VERSION=V5 resets the database header to V5 elements which makes it compatible with V5 versions. </p><p>To qualify for a downgrade from V6 to V4, your database must meet the same downgrade requirements that are there for downgrading from V6 to V5.</p><p> If your database meets the downgrade requirements, perform the following steps to downgrade to V4: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> In a GT.M V6.2-001 environment: </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p> Execute MUPIP SET -VERSION=v4 so that GT.M writes updates blocks in V4 format. </p></li><li class="listitem"><p> Execute MUPIP REORG -DOWNGRADE to convert all blocks from V6 format to V4 format. </p></li></ol></div></li><li class="listitem"><p> Bring down all V6 GT.M processes and execute MUPIP RUNDOWN -FILE on each database file to ensure that there are no processes accessing the database files.</p></li><li class="listitem"><p> Execute MUPIP DOWNGRADE -VERSION=V4 to change the database file header from V6 to V4. </p></li><li class="listitem"><p> Restore or recreate all the V4 global directory files. </p></li><li class="listitem"><p> Your database is now successfully downgraded to V4. </p></li></ol></div></div></div><div class="sect2" title="Managing M mode and UTF-8 mode"><div class="titlepage"><div><div><h3 class="title"><a name="mng_mode"></a>Managing M mode and UTF-8 mode</h3></div></div></div><p>On selected platforms, with <a class="ulink" href="http://icu-project.org/" target="_blank">International Components for Unicode</a> (ICU) version 3.6 or later installed, GT.M's UTF-8 mode provides support for Unicode (ISO/IEC-10646) character strings. On other platforms, or on a system that does not have ICU 3.6 or later installed, GT.M only supports M mode.</p><p>On a system that has ICU installed, GT.M optionally installs support for both M mode and UTF-8 mode, including a utf8 subdirectory of the directory where GT.M is installed. From the same source file, depending upon the value of the environment variable gtm_chset, the GT.M compiler generates an object file either for M mode or UTF-8 mode. GT.M generates a new object file when it finds both a source and an object file, and the object predates the source file and was generated with the same setting of $gtm_chset/$ZCHset. A GT.M process generates an error if it encounters an object file generated with a different setting of $gtm_chset/$ZCHset than that processes' current value.</p><p>Always generate an M object module with a value of $gtm_chset/$ZCHset matching the value processes executing that module will have. As the GT.M installation itself contains utility programs written in M, their object files also conform to this rule. In order to use utility programs in both M mode and UTF-8 mode, the GT.M installation ensures that both M and UTF-8 versions of object modules exist, the latter in the utf8 subdirectory. This technique of segregating the object modules by their compilation mode prevents both frequent recompiles and errors in installations where both modes are in use. If your installation uses both modes, consider a similar pattern for structuring application object code repositories.</p><p>GT.M is installed in a parent directory and a utf8 subdirectory as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Actual files for GT.M executable programs (mumps, mupip, dse, lke, and so on) are in the parent directory, that is, the location specified for installation.</p></li><li class="listitem"><p>Object files for programs written in M (GDE, utilities) have two versions - one compiled with support for Unicode in the utf8 subdirectory, and one compiled without support for Unicode in the parent directory. Installing GT.M generates both versions of object files, as long as ICU 3.6 or greater is installed and visible to GT.M when GT.M is installed, and you choose the option to install Unicode support.</p></li><li class="listitem"><p>The utf8 subdirectory has files called mumps, mupip, dse, lke, and so on, which are relative symbolic links to the executables in the parent directory (for example, mumps is the symbolic link ../mumps).</p></li><li class="listitem"><p>When a shell process sources the file gtmprofile, the behavior is as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>If $gtm_chset is "m", "M" or undefined, there is no change from the previous GT.M versions to the value of the environment variable $gtmroutines.</p></li><li class="listitem"><p>If $gtm_chset is "UTF-8" (the check is case-insensitive),</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>$gtm_dist is set to the utf8 subdirectory (that is, if GT.M is installed in /usr/lib/fis-gtm/gtm_V6.2-001_i686, then gtmprofile and gtmcshrc set $gtm_dist to /usr/lib/fis-gtm/gtm_V6.2-001_i686/utf8).</p></li><li class="listitem"><p>On platforms where the object files have not been placed in a libgtmutil.so shared library, the last element of $gtmroutines is $gtm_dist($gtm_dist/..) so that the source files in the parent directory for utility programs are matched with object files in the utf8 subdirectory. On platforms where the object files are in libgtmutil.so, that shared library is the one with the object files compiled in the mode for the process.</p></li></ul></div></li></ul></div></li></ul></div><p>For more information on gtmprofile and gtmcshrc, refer to the <a class="ulink" href="../books/ao/UNIX_manual/ch03.html" target="_blank">Basic Operations</a> chapter of UNIX Administration and Operations Guide.</p><div class="sect3" title="Compiling ICU"><div class="titlepage"><div><div><h4 class="title"><a name="GTMcompil_icu"></a>Compiling ICU</h4></div></div></div><p>GT.M versions prior to V5.3-004 require exactly ICU 3.6, however, V5.3-004 (or later) accept ICU 3.6 or later. For sample instructions to download ICU, configure it not to use multi-threading, and compile it for various platforms, refer to <a class="ulink" href="../books/ao/UNIX_manual/compiling_icu.html" target="_blank">Appendix C: Compiling ICU on GT.M supported platforms</a> of the UNIX Administration and Operations Guide.</p><p>Although GT.M uses ICU, ICU is not FIS software and FIS does not support ICU. The sample instructions for installing and configuring ICU are merely provided as a convenience to you.</p><p>Also, note that download sites, versions of compilers, and milli and micro releases of ICU may have changed since the dates when these instructions were tested rendering them out-of-date. Therefore, these instructions must be considered examples, not a cookbook. In particular, ICU changed its numbering scheme, such that after version 4.8, the next version of ICU was 49.  As GT.M continues to use the original numbering scheme, you must convert the new version number to the old in the environment variable gtm_chset. For example, if <code class="code">icu-config --version</code> reports 52.1, you should set gtm_icu_version to 5.2.</p></div></div><div class="sect2" title="Setting the environment variable TERM"><div class="titlepage"><div><div><h3 class="title"><a name="setterm"></a>Setting the environment variable TERM</h3></div></div></div><p>The environment variable TERM must specify a terminfo entry that accurately matches the terminal (or terminal emulator) settings. Refer to the terminfo man pages for more information on the terminal settings of the platform where GT.M needs to run.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Some terminfo entries may seem to work properly but fail to recognize function key sequences or fail to position the cursor properly in response to escape sequences from GT.M. GT.M itself does not have any knowledge of specific terminal control characteristics. Therefore, it is important to specify the right terminfo entry to let GT.M communicate correctly with the terminal. You may need to add new terminfo entries depending on your specific platform and implementation. The terminal (emulator) vendor may also be able to help.</p></li><li class="listitem"><p>GT.M uses the following terminfo capabilities. The full variable name is followed by the capname in parenthesis:</p><pre class="programlisting">auto_right_margin(am), clr_eos(ed), clr_eol(el), columns(cols), cursor_address(cup), cursor_down(cud1), cursor_left(cub1), cursor_right(cuf1), cursor_up(cuu1), eat_newline_glitch(xenl), key_backspace(kbs), key_dc(kdch1),key_down(kcud1), key_left(kcub1), key_right(kcuf1), key_up(kcuu1), key_insert(kich1), keypad_local(rmkx),keypad_xmit(smkx), lines(lines).</pre></li></ul></div><p>GT.M sends keypad_xmit before terminal reads for direct mode and READs (other than READ *) if EDITING is enabled. GT.M sends keypad_local after these terminal reads.</p></div><div class="sect2" title="Installing Compression Libraries"><div class="titlepage"><div><div><h3 class="title"><a name="install_comp_lib"></a> Installing Compression Libraries</h3></div></div></div><p> If you plan to use the optional compression facility for replication, you must provide the compression library. The GT.M interface for compression libraries accepts the zlib compression libraries without any need for adaptation. These libraries are included in many UNIX distributions and are downloadable from the <a class="ulink" href="http://www.zlib.net/" target="_blank">zlib home page</a>. If you prefer to use other compression libraries, you need to configure or adapt them to provide the same API provided by zlib. Simple instructions for compiling zlib on a number of platforms follow. Although GT.M can use zlib, zlib is not FIS software and FIS does not support zlib. These instructions are merely provided as a convenience to you.</p><p> If a package for zlib is available with your operating system, FIS suggests that you use it rather than building your own.</p><p> <code class="code"> Solaris/cc </code> compiler from Sun Studio:</p><pre class="programlisting">./configure --sharedmake CFLAGS="-KPIC -m64"</pre><p> HP-UX(IA64)/HP C compiler:</p><pre class="programlisting">./configure --sharedmake CFLAGS="+DD64"</pre><p> AIX/XL compiler:</p><pre class="programlisting">./configure --sharedAdd -q64 to the LDFLAGS line of the Makefilemake CFLAGS="-q64"</pre><p> Linux/gcc:</p><pre class="programlisting">./configure --sharedmake CFLAGS="-m64"</pre><p> By default, GT.M searches for the libz.so shared library in the standard system library directories (for example, /usr/lib, /usr/local/lib, /usr/local/lib64). If the shared library is installed in a non-standard location, before starting replication, you must ensure that the environment variable LIBPATH (AIX) or LD_LIBRARY_PATH (other UNIX platforms) includes the directory containing the library. The Source and Receiver Server link the shared library at runtime. If this fails for any reason (such as file not found, or insufficient authorization), the replication logic logs a DLLNOOPEN error and continues with no compression.</p></div></div><div class="sect1" title="Change History"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GTMchng_hist"></a> Change History</h2></div></div></div><div class="sect2" title="V6.2-001"><div class="titlepage"><div><div><h3 class="title"><a name="GTMV55000"></a>V6.2-001</h3></div></div></div><p>Fixes and enhancements specific to V6.2-001 are:</p><p></p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
                <p><span class="bold"><strong>Id</strong></span></p>
              </th><th>
                <p><span class="bold"><strong>Prior Id</strong></span></p>
              </th><th>
                <p><span class="bold"><strong>Category</strong></span></p>
              </th><th>
                <p><span class="bold"><strong>Summary</strong></span></p>
              </th></tr></thead><tbody><tr><td><p><a class="link" href="#GTM-227">GTM-227</a></p></td><td><p>C9605-000064</p></td><td><p>MUPIP</p></td><td><p>In UNIX, automatically detects file format for MUPIP LOAD <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-4414">GTM-4414</a></p></td><td><p>C9C06-002043</p></td><td><p>MUMPS</p></td><td><p>Jobparameter PASSCURLVN on UNIX provides the current local variable context to the process create by the JOB command <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-5022">GTM-5022</a></p></td><td><p>C9D07-002344</p></td><td><p>MUMPS</p></td><td><p>ZWRITE and ZSHOW "V" no longer insert spaces in their output</p></td></tr><tr><td><p><a class="link" href="#GTM-6597">GTM-6597</a></p></td><td><p>C9K04-003267</p></td><td><p>MUPIP</p></td><td><p>See <a class="link" href="#GTM-227">GTM-227</a></p></td></tr><tr><td><p><a class="link" href="#GTM-6900">GTM-6900</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Improved error messages from $ZTRIGGER() and MUPIP TRIGGER <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-6901">GTM-6901</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Eliminate trigger definition dependency on the global directory and address some edge cases <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-7076">GTM-7076</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Trigger deletes specified with a wild-card (*) that do not match any existing trigger are not an error</p></td></tr><tr><td><p><a class="link" href="#GTM-7083">GTM-7083</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>MUPIP TRIGGER -UPGRADE revises trigger formats from prior to current releases <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-7418">GTM-7418</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>SOCKET devices support TLS connections <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-7522">GTM-7522</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>$ZTRIGGER() and MUPIP TRIGGER always use TP and defer output on stdout until transaction commit <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-7641">GTM-7641</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>See <a class="link" href="#GTM-6901">GTM-6901</a></p></td></tr><tr><td><p><a class="link" href="#GTM-7678">GTM-7678</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Better handling of trigger definitions containing multiple command specifications</p></td></tr><tr><td><p><a class="link" href="#GTM-7779">GTM-7779</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Additional GVSTATS items and $VIEW(PROBECRIT,&lt;region&gt;) facility <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-7843">GTM-7843</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Minimal MUTEXLCKALERT messages due to an Instance Freeze</p></td></tr><tr><td><p><a class="link" href="#GTM-7862">GTM-7862</a></p></td><td><p>-</p></td><td><p>MUPIP</p></td><td><p>Replicate solely from Journal Files <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-7868">GTM-7868</a></p></td><td><p>-</p></td><td><p>MUPIP</p></td><td><p>See <a class="link" href="#GTM-227">GTM-227</a></p></td></tr><tr><td><p><a class="link" href="#GTM-7877">GTM-7877</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Triggers can now apply to spanning regions <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-7914">GTM-7914</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>Better handling of environment veriable manipulation prevents very unusual hangs</p></td></tr><tr><td><p><a class="link" href="#GTM-7927">GTM-7927</a></p></td><td><p>-</p></td><td><p>Other Utilities</p></td><td><p>The CMake driver supports builds for all the reference implmentation encryption libraries</p></td></tr><tr><td><p><a class="link" href="#GTM-7929">GTM-7929</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>The CMake driver supports builds for all the reference implmentation encryption libraries</p></td></tr><tr><td><p><a class="link" href="#GTM-7947">GTM-7947</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Fix to trigger deletion using a wild-card when triggers have long names</p></td></tr><tr><td><p><a class="link" href="#GTM-7964">GTM-7964</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>Fix for PARSE on a PIPE device with a missing PATH</p></td></tr><tr><td><p><a class="link" href="#GTM-7974">GTM-7974</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Trigger select operations with a wild-card work across multiple regions</p></td></tr><tr><td><p><a class="link" href="#GTM-7985">GTM-7985</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Enforced limits on line length and total length for a trigger XECUTE action</p></td></tr><tr><td><p><a class="link" href="#GTM-8068">GTM-8068</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>Better error for mumps -run of a routine whose object file name does not match its routine name </p></td></tr><tr><td><p><a class="link" href="#GTM-8081">GTM-8081</a></p></td><td><p>-</p></td><td><p>MUPIP</p></td><td><p>Replication Fix for Large Compressed Messages</p></td></tr><tr><td><p><a class="link" href="#GTM-8093">GTM-8093</a></p></td><td><p>-</p></td><td><p>Other Utilities</p></td><td><p>Appropriate message from a failure to start gtmsecshr</p></td></tr><tr><td><p><a class="link" href="#GTM-8094">GTM-8094</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>Better handling of errors creating an additional process such as with the JOB command</p></td></tr><tr><td><p><a class="link" href="#GTM-8101">GTM-8101</a></p></td><td><p>-</p></td><td><p>Other Utilities</p></td><td><p>Better handling of &lt;CTRL-C&gt; and other signals in the maskpass utility</p></td></tr><tr><td><p><a class="link" href="#GTM-8106">GTM-8106</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>VIEW "GVSRESET" resets more database-related tracking <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8132">GTM-8132</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>In UNIX, REWIND support for $PRINCIPAL <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8134">GTM-8134</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>ZSHOW "D" shows both input and output for $PRINPCIPAL with separate devices <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8146">GTM-8146</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>$ZSEARCH()  checks its stream argument to be within 0-255</p></td></tr><tr><td><p><a class="link" href="#GTM-8153">GTM-8153</a></p></td><td><p>-</p></td><td><p>Other Utilities</p></td><td><p>More robust error handling and compilation for the Makefile of the reference implementation plugin. <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8160">GTM-8160</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>Performance and scalability modifications to the auto-relink mechanism and add additional controls <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8168">GTM-8168</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>Improved accuracy on timed actions</p></td></tr><tr><td><p><a class="link" href="#GTM-8172">GTM-8172</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>Better cleanup after exit from recursively linked routines</p></td></tr><tr><td><p><a class="link" href="#GTM-8174">GTM-8174</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>Raising zero to a negative power (0**-x) produces a DIVZERO error</p></td></tr><tr><td><p><a class="link" href="#GTM-8175">GTM-8175</a></p></td><td><p>-</p></td><td><p>MUPIP</p></td><td><p>MUPIP LOAD correctly reports key counts above 2**32-1 </p></td></tr><tr><td><p><a class="link" href="#GTM-8181">GTM-8181</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>Follow GT.M error handling protocol for errors in creating object files </p></td></tr><tr><td><p><a class="link" href="#GTM-8182">GTM-8182</a></p></td><td><p>-</p></td><td><p>MUPIP</p></td><td><p>See <a class="link" href="#GTM-227">GTM-227</a></p></td></tr><tr><td><p><a class="link" href="#GTM-8185">GTM-8185</a></p></td><td><p>-</p></td><td><p>MUPIP</p></td><td><p>Correctly issue a REC2BIG error for replicated transactions</p></td></tr><tr><td><p><a class="link" href="#GTM-8191">GTM-8191</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Available as field test grade functionality, VIEW "POOLLIMIT":&lt;region&gt;:expr restricts a process to a subset of a region's global buffer pool, a technique used by MUPIP REORG <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8194">GTM-8194</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>Source Hash Change to improve performance <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8195">GTM-8195</a></p></td><td><p>-</p></td><td><p>MUPIP</p></td><td><p>Better handling of errors on database file open</p></td></tr><tr><td><p><a class="link" href="#GTM-8196">GTM-8196</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>Fixes for WRITE /WAIT for SOCKET devices</p></td></tr><tr><td><p><a class="link" href="#GTM-8204">GTM-8204</a></p></td><td><p>-</p></td><td><p>MUMPS</p></td><td><p>$ZPEEK() mnemonics to access the jnl_private_control &amp; jnl_buffer structures and to format time fields in $HOROLOG format <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8205">GTM-8205</a></p></td><td><p>-</p></td><td><p>MUPIP</p></td><td><p>Fix cross-endian replication broken in V6.2-000</p></td></tr><tr><td><p><a class="link" href="#GTM-8207">GTM-8207</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>$ZTWORMHOLE always replicates properly when originating and replicating instances have differing null collation</p></td></tr><tr><td><p><a class="link" href="#GTM-8209">GTM-8209</a></p></td><td><p>-</p></td><td><p>MUPIP</p></td><td><p>Fix off by a day error in MUPIP JOURNAL -EXTRACT -DETAIL reporting UNIX Epoch time (0) in $HOROLOG format</p></td></tr><tr><td><p><a class="link" href="#GTM-8210">GTM-8210</a></p></td><td><p>-</p></td><td><p>MUPIP</p></td><td><p>Prevent looping in replication Update Process dealing with triggers and contending updates</p></td></tr></tbody></table></div></div></div><div class="sect1" title="M-Database Access"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp156016496"></a>M-Database Access</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-6900"></a> MUPIP TRIGGER limits trigger expression source lines to 80 characters including a trailing ellipsis to indicate there was more text, and they also replace any non-graphic characters with a dot (.) Previously, such messages had non-graphic characters represented by OS or terminal [emulator] conventions and no embedded indication of the truncation. [UNIX](GTM-6900) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-6901"></a> GT.M maps trigger definitions to the region to which they apply. Previously, it mapped them partially to the default region of the global directory in use at the time of their definition, which caused documented limitations and pitfalls when using multiple global directories or spanning regions. A $ZTRIGGER() or MUPIP TRIGGER action (delete or select) applies to all triggers in all regions matching the specified signature. If the argument specifies an incomplete trigger signature, for example, only the name, the specification may match multiple triggers and apply the delete or select to all of them. FIS recommends you run a select and analyze the scope of the signature before any signature limited delete. GT.M allows defining triggers with the same name and signature in different regions, but does not allow defining triggers with the same name in different regions within the same global directory if they have different signatures; previously it allowed neither. When loading a trigger definition, if a user-defined name conflicts with a name in any region to which the trigger applies, $ZTRIGGER() and MUPIP TRIGGER report an error. However, when the name is auto-generated, they generate a name in every region, so if there are multiple (spanning) regions, the same trigger might have a differing auto-generated name in each region.</p><p>Trigger definitions are subject to the same maximum record length checks as documented for other GT.M components; when GTM-6341 changed the definition changed in V6.0-000, trigger definitions retained the prior convention. A trigger deletion attempt on a read-only database fails with a TRIGMODREGNOTRW error, but only if the attempt specifies existing triggers; previously it failed even if there were no matching triggers to delete.</p><p>GT.M manages concurrent trigger definition updates appropriately. Previously, in the unlikely circumstance of conflicting trigger definition updates, a process could get a segmentation violation (SIG-11). ZPRINT of a trigger concurrently being deleted produces the trigger source; previously it caused a GTMASSERT.</p><p>$ZTRIGGER() and MUPIP TRIGGER skip regions with a GT.CM (client) access method; previously, using these facilities with a global directory caused a segmentation violation (SIG-11) on the client if the corresponding server was active..</p><p>ZPRINT/$TEXT()/ZBREAK recognize both a runtime-disambiguator, delimited with a hash-sign (#), and a region-disambiguator, delimited by a slash(/); previously they supported only the runtime-disambiguator. ZPRINT and ZBREAK treat a trigger-not-found case as a TRIGNAMENF error, while $TEXT() returns the empty string. When their argument contains a region-disambiguator, these features ignore a null runtime-disambiguator. When their argument does not contain a region-disambiguator, these features act as if runtime-disambiguator is specified, even if it has an empty value. When an argument specifies both runtime-disambiguator and region-disambiguator and the runtime-disambiguator identifies a trigger loaded from a region different from the specified region, or the region-disambiguator identifies a region which holds a trigger that is not mapped by $ZGBLDIR, these features treat the trigger as not found. Here are some examples of disambiguator combinations:</p><pre class="programlisting">
ZPRINT ^x#/BREG      : Print           trigger routine user-named "x" in region BREG
ZPRINT ^x#1#/BREG    : Print           trigger routine auto-named "x#1" in region BREG
ZPRINT ^x#1#A/BREG   : Print           trigger routine auto-named "x#1", runtime disambiguated by "#A", AND in region BREG
ZPRINT +1^x#1#A/BREG : Print line 1 of trigger routine auto-named "x#1", runtime disambiguated by "#A", AND in region BREG
</pre><p>DSE accepts ^#t as a valid global name when specifying a key; previously it treated ^#t as invalid. Also, DSE uses the same maximum record length checks as documented for other GT.M components; when GTM-6341 changed the definition changed in V6.0-000, DSE retained the prior convention.  [UNIX]( GTM-7641)(GTM-6901) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-7076"></a> $ZTRIGGER() and MUPIP TRIGGER do not require a delete specified with a wild-card (*) to find any matching triggers, but rather report this in the action summary. Previously they treated this as an error. [UNIX](GTM-7076)</p></li><li class="listitem"><p><a name="GTM-7083"></a> MUPIP TRIGGER -UPGRADE upgrades older trigger definitions into current format. If GT.M encounters an old trigger definition it produces a NEEDTRIGUPGRD message. To preserve the possibility of a straightforward downgrade to an earlier version, perform a select "*" action with MUPIP TRIGGER (or $ZTRIGGER() and save the result. Note that TRIGGER -UPGRADE assumes that the existing trigger definitions are properly defined; if the prior release has produced defective triggers delete them with a wild-card ("*") and redefine them in the new release. In the event of a downgrade, delete "*" all triggers before the downgrade and insert the saved version from before the upgrade. Attempting to perform a MUPIP TRIGGER -UPGRADE on a database without write authorization to the database produces a TRIGMODREGNOTRW error. [UNIX] (GTM-7083) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-7522"></a> $ZTRIGGER()and MUPIP TRIGGER always operate within a TP transaction even if they need to implicitly create one to encapsulate their work. These trigger maintenance operations reserve their output until the transaction commits (TCOMMIT where $TLEVEL goes to zero) at which time they deliver the entire output consistent, including that for all $ZTRIGGER() invocations in the successful processing of a larger transaction, to the $IO current at that ultimate TCOMMIT. If an explicit transaction ends with a TROLLBACK, it does not produce any $ZTRIGGER() output. Previously, $ZTRIGGER() produced potentially inappropriate error reports indicating name collisions where none existed, and also incorrect, differing, and in cases of RESTARTs, multiple, outputs. Trigger definition reporting operations, $ZTRIGGER("SELECT",) and MUPIP TRIGGER -SELECT, return a non-zero exit status when their selection criteria encounter an error in the middle of the select. Previously, under a variety of conditions, these operations returned a success indicator even though the operation actually failed. MUPIP TRIGGER -SELECT now displays all output on stdout. Previously it displayed valid output on stdout and error output on stderr. [UNIX](GTM-7522) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-7641"></a> See <a class="link" href="#GTM-6901">GTM-6901</a>. (GTM-7641)</p></li><li class="listitem"><p><a name="GTM-7678"></a> In cases where a KILL trigger shared some common characteristics (e.g. global name, XECUTE string etc.) with one or more SET triggers, $ZTRIGGER() and MUPIP TRIGGER appropriately establish the KILL trigger. Previously, they could set up an inappropriate KILL trigger, corrupt the trigger database or issue an incorrect TRIGDEFBAD error. In addition, if a specified trigger signature otherwise exactly matches an existing trigger, any -options specified in the specification replace any -options in the existing trigger. However, if the command portion of the input definition only partially matches an existing trigger, $ZTRIGGER() and MUPIP TRIGGER issues an error. Previously the trigger update facilities added the specified -options to any existing options. Similar to the trigger update -options handling, the trigger update facilities allow changing the name of an existing trigger only if the every other element of the definition signature matches an existing trigger. Previously the specified -name replaced the existing trigger name even when the command portion of the input definition only partially matched an existing trigger. Also, the error handling, output and error messages for trigger loads, selects and deletes changed to improve clarity, completeness and consistency. Finally, the trigger update facilities ignore -options specified for trigger deletes; previously if a delete included a -options specification, the delete inappropriately removed the options from definitions of similar remaining triggers with differing command characteristics. [UNIX](GTM-7678)</p></li><li class="listitem"><p><a name="GTM-7779"></a> Access statistics for global variables include the following items:</p><pre class="programlisting">
CAT - total of critical section acquisitions successes
CFE - total attempts in CFT caused by epochs
CFS - sum of squares of blocked critical section acquisitions
CFT - total of blocked critical section acquisitions
CQS - sum of squares of critical section acquisition queued sleeps
CQT - total of critical section acquisition queued sleeps
CYS - sum of squares of critical section acquisition processor yields
CYT - total of critical section acquisition processor yields
</pre><p>Note that statistics reported by $VIEW() or DSE output are those for the database region, while those reported by ZSHOW "G" output are process-specific.</p><p>$VIEW("PROBECRIT",&lt;region&gt;) acquires and releases a critical section for the region (the "probe"), returning a string with the following fields:</p><pre class="programlisting">
CPT - nanoseconds for the probe to get the critical section
CFN - number of failures of the probe to get the critical section
CQN - number of queue sleeps by the probe
CYN - number of process yields by the probe
CQF - number of queue fulls encountered by the probe
CQE - number of empty queue slots found by the probe
CAT - total of critical section acquisitions successes
</pre><p>[UNIX](GTM-7779) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-7843"></a> When Instance Freeze is in effect, GT.M seldom produces MUTEXLCKALERT messages in the operator log; previously it frequently produced such messages. [UNIX](GTM-7843)</p></li><li class="listitem"><p><a name="GTM-7877"></a> GT.M triggers now apply to spanning regions (which means the TRIGNOSPANGBL error is obsolete). When $ZTRIGGER() or MUPIP TRIGGER define triggers that apply to globals spanning multiple regions, each of the spanned regions install a definition. In the example below, ^example is a non-spanning global and ^example2 spans AREG, BREG and DEFAULT:</p><pre class="programlisting">
File tmp4.trg, Line 1: All existing triggers (count = 2) deleted
File tmp4.trg, Line 5: Added Non-SET trigger on ^example named example#1
File tmp4.trg, Line 6: Added Non-SET trigger on ^example2 (region AREG) named example2#1
File tmp4.trg, Line 6: Added Non-SET trigger on ^example2 (region BREG) named example2#1
File tmp4.trg, Line 6: Added Non-SET trigger on ^example2 (region DEFAULT) named example2#1
File tmp4.trg, Line 11: Modified SET and/or Non-SET trigger on ^example named example#1
</pre><p>note unlike the output for the spanning region global ^example2, the output for the single-region global ^example does not include the region. The "select" and "delete-by-trigger-name" operations report the region for the trigger, regardless of whether the global name corresponding to this trigger spans regions or not. [UNIX](GTM-7877) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-7947"></a> Deletion of a trigger with wildcards using $ZTRIGGER() or MUPIP TRIGGER works correctly. Previously if more than one trigger matched the specified wild-card and corresponded to the same global name which was also greater than 21 characters, it caused a segmentation violation (SIG-11). [UNIX](GTM-7947)</p></li><li class="listitem"><p><a name="GTM-7974"></a> Specifying a trigger name with a trailing wild-card in $ZTRIGGER() and MUPIP TRIGGER selects all triggers that start with the prefix before the asterisk (*); previously it only selected triggers matching the prefix that were mapped to the same region as the first name that matches. Specifying a trigger name more than once in a list of names selects the trigger just once; previously this caused a segmentation violation. [UNIX](GTM-7974)</p></li><li class="listitem"><p><a name="GTM-7985"></a> $ZTRIGGER() and MUPIP TRIGGER update operations enforce a limit of 8KiB bytes per line and a total of 1MiB bytes for a multi-line trigger XECUTE string. Previously, exceeding the limits could cause a segmentation violation (SIG-11) [UNIX](GTM-7985)</p></li><li class="listitem"><p><a name="GTM-8106"></a> VIEW "GVSRESET"[:"&lt;region&gt;"] resets the process-specific fields that are part of the ZSHOW "G" result and database file header fields holding records reported by: GVSTAT, BG trace, buffer pool accounting and the TP block modification details. Note a VIEW "GVSRESET" performed by a process with read-only database access changes only the process-specific information and has no effect on the database file header. DSE CHANGE -FILEHEADER -GVSTATSRESET clears the same database file header fields as VIEW "GVRESET"; previously it only cleared the records for GVSTAT. In addition, regions for VIEW and $VIEW() arguments with region elements treat region names as case insensitive, and, in VIEW command cases where a missing region element means all regions, accept a region name of "*" as meaning all regions. Previously region name elements in VIEW command arguments did accept "*" and required upper-case, as did $VIEW() region arguments. (GTM-8106) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8191"></a> Available as field test grade functionality in a production release, VIEW "POOLLIMIT":&lt;region&gt;:expr, where expr is of the form n[%] provides a mechanism for a process that has the potential to "churn" global buffers to limit the potential impact on other processes by restricting the number of global buffers it uses. If the expression ends with a per-cent sign (%), the number is taken as an as a percentage of the configured global buffers and otherwise as an ordinal number of preferred buffers; standard M parsing and integer conversions apply. Preferred buffer values are limited to between 32 and one less than half the buffer pool inclusive; with the exception of zero (0) or 100 per cent, which turn off the limitation; specifications exceeding those limits provide the value of the nearer limit. If the argument specifies "*" for the region, the command applies to all regions. $VIEW("POOLLIMIT",&lt;region&gt;) returns the current value for the region as an ordinal number - zero (0) when there is no limit in place. Note that this facility is designed for use by a relatively small subset of processes. In addition, MUPIP REORG uses this facility to limit its buffers to a value established by the UNIX environment variable (or OpenVMS logical name) gtm_poollimit using the syntax described for VIEW "POOLLIMIT" with a default of 64 if gtm_poollimit is not specified. Note that this may slightly slow a standalone REORG but can be overridden by defining gtm_poollimit as 0 or "100%". Previously REORG used all of the available buffer pool and thus could have a larger impact on concurrent processing. (GTM-8191) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8207"></a> GT.M replicates $ZTWOrmhole correctly when the originating and replicating instance do not use the same null collation; previously, in an especially rare case, which required using $ZTWOrmhole, it could be modified during replication. [UNIX](GTM-8207)</p></li></ul></div></div><div class="sect1" title="M-Other Than Database Access"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp156014704"></a>M-Other Than Database Access</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-4414"></a>When a JOB command specifies the PASSCURLVN jobparameter, the new process inherits the current collation, all locals, aliases, and alias containers from the JOB'ng process' current stack level. As a result of this, a ZWRITE issued in the JOB'd process has the same output, except for any out of scope aliases, as a ZWRITE in the context of the JOB command. If the JOB command finds a ZWRITE representation of any lvn, consisting of a its full name, its subscripts, corresponding value, quotes and the "=" sign, exceeding 1MiB, it produces an JOBLVN2LONG error both in the JOB'ng process and in the JOB'd processes error output stream. If a JOB command does not specify PASSCURLVN, the JOB'd process(es) inherits no local variables from the parent. While not an inexpensive command, you can use the "exclusive" NEW command to control the context passed to the JOB'd process; for example, adding "NEW (LOCALA, LOCALB)" before the JOB command would pass only LOCALA and LOCALB. [UNIX](GTM-4414) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-5022"></a> ZWRITE and ZSHOW "V" do not add spaces within a given local variable's corresponding value. Previously, both of the commands could insert spaces at the beginning of every line after the first. (GTM-5022)</p></li><li class="listitem"><p><a name="GTM-7418"></a>SOCKET devices support encrypt connections with TLS using an encryption plugin.  GT.M ships with a reference implementation of the plugin which uses OpenSSL and also supports TLS of replication stream. OpenSSL options are controlled by a configuration file. The WRITE /TLS command activates this feature for connected sockets. Because this functionality has a wide variety of user stories (use cases) and has substantial complexity, although the code appears robust, we are not confident that we have exercised a sufficient breadth of use cases in testing. Also we may make changes in future releases that are not entirely backwards compatible. We encourage you to use with this facility in development and testing, and to provide us with feedback. If you are an FIS customer and wish to use this in production, please contact us beforehand to discuss your use case(s).</p><p>The WRITE /TLS command has the form:</p><pre class="programlisting">WRITE /TLS(option[,[timeout][,tlsid]])</pre><p>where option is "server" or "client" indicating which TLS role to assume or "renegotiate" which is used by a server to request a new handshake to reevaluate the client credentials.  The server role requires a certificate specified in the configuration file section with the label matching tlsid.  The client role may require a certificate depending on the OpenSSL options.  If the argument specifies a timeout, GT.M sets $TEST to 1 if the command successfully completed or to 0 if it timed out.  $DEVICE provides status information in case of an error.  ZSHOW "D" includes "TLS" in the second line of the output for an encrypted socket.</p><p>Note that SOCKET device actions may produce the following previously documented errors (all with a TLS prefix and previously only issued by MUPIP for a TLS replication stream): TLSDLLOPEN, TLSINIT, TLSCONVSOCK, TLSHANDSHAKE, TLSCONNINFO, TLSIOERROR, and TLSRENEGOTIATE.</p><p>The TLS plugin uses OpenSSL options in the configuration file specified under the tls: label as the default for all TLS connections and under the specific labels to override the defaults for corresponding connections.  Previously, GT.M recognized a more limited set of OpenSSL options under the tls: label and only certificate related items under the lower level labeled sections.  In addition to the previous items allowed in the tls: section of the configuration file for TLS replication, GT.M recognizes the following for both sockets and TLS replication:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">The cipher-list option specifies which cryptographic algorithms to use.  The format of this option is described by the OpenSSL ciphers man page.  An empty string uses a default value of "ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH" for replication connections and the OpenSSL default cipher list for socket connections.</li><li class="listitem">The ssl_options, documented in the man page for SSL_set_options, modify the default behavior of OpenSSL. When specifying multiple options, separate them with acolons (:) delimiter.  The ssl-options specified in a labeled section add to, or override, those specified at the "tls" level. An exclamation mark ("!") preceding an option in a labeled section disables any default for that option specified at the tls: level; for example:<pre class="programlisting">
        tls: {
                ssl-options: "SSL_OP_CIPHER_SERVER_PREFERENCE";
                mylabel: {
                        ssl-options: "!SSL_OP_CIPHER_SERVER_PREFERENCE";
                };
             }
</pre></li><li class="listitem">The verify-mode option specifies how OpenSSL verifies certificates. If no verify-mode is specified, a socket connection defaults to SSL_VERIFY_NONE. We have tested with SSL_VERIFY_PEER and SSL_VERIFY_NONE See the man page for SSL_set_verify for details. SSL_VERIFY_PEER has two additional flags which modify verification only for the server role; when adding them to the option string, use the colon (:) delimiter.</li><li class="listitem">A verify-depth option specified in a labeled section applies to connections associated with that section.</li></ul></div><p>When placing the private key for a certificate at the beginning of the certificate file, you may omit the "key" item from the configuration file.  The format of the combined file is:</p><pre class="programlisting">
             -----BEGIN RSA PRIVATE KEY-----
             [encoded key]
             -----END RSA PRIVATE KEY-----
             [empty line]
             -----BEGIN CERTIFICATE-----
             [encoded certificate]
             -----END CERTIFICATE-----
             [empty line]
</pre><p>GT.M buffers WRITEs to TLS enabled sockets until a subsequent USE :FLUSH, WRITE !, WRITE #,  or an internal 400 millisecond timer expires.</p><p>Owing to the range of OpenSSL versions in use across the breadth of platforms and versions supported by GT.M, on all platforms, but especially on non-Linux UNIX platforms, FIS recommends rebuilding the plugin from sources included with the GT.M binary distribution with the specific version of OpenSSL installed on your systems for any production or production staging environments that use TLS.  Please also review &amp; edit the following common header and library paths in the Makefile to reflect those on your systems when you rebuild the plugin.</p><pre class="programlisting">
# Common header and library paths
IFLAGS += -I /usr/local/ssl/include -I /usr/local/include -I /usr/include -I $(gtm_dist) -I $(CURDIR)
ifeq ($(BIT64),0)
 LIBFLAGS += -L /usr/local/ssl/lib -L /usr/lib/x86_64-linux-gnu -L /usr/local/lib64
 LIBFLAGS += -L /usr/local/lib -L /usr/lib64 -L /usr/lib -L /lib64 -L /lib -L `pwd`
else
 LIBFLAGS += -L /usr/local/ssl/lib -L /usr/lib/x86-linux-gnu -L /usr/local/lib32
 LIBFLAGS += -L /usr/local/lib -L /usr/lib32 -L /usr/lib -L /lib32 -L /lib -L `pwd`
endif
</pre><p>  [UNIX](GTM-7418) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-7914"></a> On the rare occasions GT.M or its utilities add or change an environment variable, they protect the operation against interruption by a signal (such as SIGTERM). Previously, there was a very small chance a signal could interrupt a GT.M process in the middle of adding or changing an environment variable, causing the process to hang indefinitely. This issue was discovered in the GT.M development environment and was never reported by any user. [UNIX] (GTM-7914)</p></li><li class="listitem"><p><a name="GTM-7929"></a> CMakeLists.txt now builds all three of the reference implementation encryption libraries. Previously it built only the reference implementation that worked with libgcrypt. [UNIX](GTM-7929)</p></li><li class="listitem"><p><a name="GTM-7964"></a> If an OPEN command argument for a PIPE device specifies the PARSE deviceparameter and a COMMAND that GT.M cannot locate and the PATH environment variable has not been defined for the process, the DEVOPENFAIL message contains these circumstances. Previously, this combination of conditions caused a segmentation violation (SIG-11). [UNIX](GTM-7964)</p></li><li class="listitem"><p><a name="GTM-8068"></a> GT.M reports ZLINKFILE/ZLMODULE errors when a routine name in the corresponding object file does not match the routine name specified with $gtm_dist/mumps -run &lt;routine-name&gt;. The mismatch can arise from moving an object file to a different name or compiling with the  -NAMEOFRTN option on the mumps command. This matches the report produced by direct mode in response to the same circumstance. Previously this raised a GTMASSERT2 referencing job_addr.c. [UNIX](GTM-8068)</p></li><li class="listitem"><p><a name="GTM-8094"></a> A GT.M process (including utilities) that cannot start a child process handles and reports the error appropriately; previously such an error could cause a failure in the parent process and/or produce misleading error messages. This issue was discovered in the GT.M development environment and was never reported by any user. [UNIX](GTM-8094)</p></li><li class="listitem"><p><a name="GTM-8132"></a> When $PRINCIPAL identifies a device that supports REWIND, the REWIND or INREWIND device parameters perform a REWIND of the input and OUTREWIND performs a REWIND of the output.  Previously, no REWIND of the output side of $PRINCIPAL was possible. [UNIX](GTM-8132) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8134"></a> When $PRINCIPAL input and output are different devices, ZSHOW "D" shows them as separate items identified as 0 for input and 0-out for output. Note: algorithms processing ZSHOW "D" output may need adjustment. If they process output saved to a variable the additional output line[s] must be accounted for by $ORDER() or an integer iteration. Previously, ZSHOW "D" only provided the input side of the device. [UNIX](GTM-8134) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8146"></a> $ZSEARCH() range (0-255) checks its stream argument; previously it silently used a stream matching stream#256. This was fixed in V6.2-000, but not documented in the original release notes. (GTM-8146)</p></li><li class="listitem"><p><a name="GTM-8160"></a> GT.M loads an object file linked from an object directory (in $ZROUTINES) with a *-suffix (i.e. auto-relink-enabled) into a shared memory segment (referred to henceforth as a Rtnobj shared memory segment). In V6.2-000 this was in mmap() memory which could increase the number of file descriptors required.</p><p>For each auto-relink enabled directory which a GT.M process accesses while searching through $ZROUTINES, GT.M creates a small control file (Relinkctl) in the directory identified by $gtm_linktmpdir (defaulting to $gtm_tmp, which in turn defaults to /tmp, if unspecified). The names of these files are of the form gtm-relinkctl-&lt;murmur&gt; where &lt;murmur&gt; is a hash of the realpath() to an auto-relink directory; for example: /tmp/gtm-relinkctl-f0938d18ab001a7ef09c2bfba946f002). With each Relinkctl file, GT.M creates and associates a block of shared memory that contains associated control structures. Among the structures is a cycle number corresponding to each routine found in the routine directory; a change in the cycle number informs a process that it may need to determine whether there is a new version of a routine.  Although GT.M only creates relinkctl records for routines that actually exist on disk, it may increment cycle numbers for existing relinkctl records even if they no longer exist on disk.</p><p>GT.M creates both the Relinkctl file and shared memory with permissions based on the logic described in the "IPC Permissions" column of the "Shared Resource Authorization Permissions" section in the Administration and Operations Guide, except that the object directory, rather than the database file, provides the base permissions.</p><p>An auto-relink-enabled directory uses one or more Rtnobj shared memory segments to store the object (.o) files, creating the first one when linking the first object file from an auto-relink-enabled directory. By default, GT.M creates an initial Rtnobj shared memory segment of 1 MiB. You can control this size by defining an environment variable gtm_autorelink_shm to an integer value in MiB. If the value of gtm_autorelink_shm is not a power of two, GT.M rounds the value to the next higher integer power of two. If the first object (.o) file does not fit in a new Rtnobj segment, GT.M rounds the allocation up to the smallest integer power of two required to make it fit. When GT.M needs room for object files, and existing  Rtnobj segments have insufficient free space, it creates an additional shared memory segment, double the size of the last. Note that when hugepages are enabled, the actual Rtnobj shared memory size might be more than requested implicitly or explicitly through $gtm_autorelink_shm.</p><p>GT.M creates Rtnobj shared memory with the same permissions as Relinkctl shared memory, as described above, but with execute permissions enabled to correspond with read permissions.</p><p>The MUPIP RCTLDUMP command reports information related to relinkctl files and their associated shared memory segments. The syntax is MUPIP RCTLDUMP [dir1]. If the optional parameter dir1 is not specified, MUPIP RCTLDUMP dumps information on all its active auto-relink-enabled directories (those with with a *-suffix) identified by $gtmroutines. With a directory path specified for dir1, MUPIP RCTLDUMP reports information on the one directory. An example output follows. It lists the full path of the Object directory; its corresponding relinkctl file name; the number of routines currently loaded in this relinkctl file; the number of processes including the reporting MUPIP process that have this Relinkctl file open; the shared memory id and length of the Relinkctl shared memory segment; one or more Rtnobj shared memory segment(s); and a listing of all the routine names loaded in this file (lines starting with rec#...).</p><pre class="programlisting">
&gt; mupip rctldump .
Object Directory         : /obj
Relinkctl filename       : /tmp/gtm-relinkctl-f0938d18ab001a7ef09c2bfba946f002
# of routines            : 1
# of attached processes  : 2
Relinkctl shared memory  : shmid: 11534344  shmlen: 0x57c6000
Rtnobj shared memory # 1 : shmid: 11567113  shmlen: 0x100000  shmused: 0x200  shmfree: 0xffe00  objlen: 0x1c0
    rec#1: rtnname: abcd  cycle: 1  objhash: 0xedbfac8c7f7ca357  numvers: 1  objlen: 0x1c0  shmlen: 0x200
</pre><p>Two lines need more explanation.</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">The Rtnobj shared memory line : All the length fields are displayed in hexadecimal. shmlen is the length of the allocated shared memory segment in bytes. shmused is the length that is currently used. shmfree is the length available for use. objlen is the total length of all the objects currently loaded in this shared memory. As GT.M allocates blocks of memory with sizes rounded-up to an integer power of two bytes,  shmused is always greater than objlen; for example with an objlen of 0x1c0, the shmused is 0x200.</li><li class="listitem">Lines of the form rec#... indicate the record # in the relinkctl file. Each relinkctl file can store a maximum of 1,000,000 records, i.e., the maximum number of routines in a directory with auto-relink enabled is one million. Each record stores a routine name (rtnname:), the current cycle # for this object file record entry (cycle:) which gets bumped on every ZLINK or ZRUPDATE command, the hash of the object file last loaded for this routine name (objhash:), the # of different versions of object files loaded in the Rtnobj shared memory segments with this routine name (numvers:), the total byte-length of the one or more versions of object files currently loaded with this routine name (objlen:), the total length used up in shared memory for these object files where GT.M allocates each object file a rounded-up perfect 2-power block of memory (shmlen:). In V6.2-000, reports and error messages gave a file name rather then a routine name.</li></ul></div><p>Given a relinkctl file name, one can find the corresponding directory path using the Unix "strings" command on the Relinkctl file. For example, "strings /tmp/gtm-relinkctl-f0938d18ab001a7ef09c2bfba946f002", corresponding to the above MUPIP RCTLDUMP output example, would output "/obj" the corresponding directory name.</p><p>The environment variable gtm_autorelink_keeprtn if set to 1, t[rue], or y[es] causes exiting processes to leave auto-relinked object code in the shared memory repositories, while if undefined, 0, f[alse] or n[o] causes exiting processes to purge any routines currently use by no processes. All values are case-independent.  When gtm_autorelink_keeprtn is defined and TRUE:</p><p> </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">Process exit is simplified, with the performance gain - faster process termination - likely to be observable only when a large number of processes exit concurrently.</li><li class="listitem">Where routines are likely to be repeatedly used by other processes, such as in a production environment, leaving a routine in shared memory even when no longer used by existing processes, will result in slightly faster linking of that routine by future processes, although the effect may not be observable except when an application frequently uses short-lived processes, such as GT.M routines invoked by web servers using a CGI interface.</li></ul></div><p>ZSHOW "A" (A code to mean Autorelink) provides output in the same format as MUPIP RCTLDUMP, but restricted to the routines linked by the process issuing the command. ZSHOW "*" does not include ZSHOW "A" because of an expectation that the typical volume of the information does not provide a good return for its value. If you wish your error handling or INTRPT routines to dump this information, ask for it explicitly, possibly by doing a ZSHOW "A" into a local variable before doing a ZSHOW "*".</p><p>GT.M does not support VIEW "RCTLDUMP" as it has been supplanted by ZSHOW "A" and MUPIP RCTLDUMP.</p><p>The MUPIP RUNDOWN -RELINKCTL command cleans up orphaned Relinkctl files. FIS strongly recommends avoiding actions that tend to make such cleanup necessary - for example, kill -9 of GT.M processes or ipcrm -m of active Relinkctl and/or Rtnobj shared memory segments. The syntax is MUPIP RUNDOWN -RELINKCTL [dir1]. If the optional parameter dir1 is not specified, MUPIP RUNDOWN -RELINKCTL examines the env var $gtmroutines, attempts to verify and correct their attach counts and runs down all its inactive auto-relink-enabled directories (those with with a *-suffix). Alternatively, one can specify a directory path for the parameter dir1 and MUPIP RUNDOWN -RELINKCTL treats it as an auto-relink-enabled directory and runs down the resources associated with this one directory. It prints a RLNKCTLRNDWNSUC message on a successful rundown and a RLNKCTLRNDWNFL message on a failure (usually because live processes are still accessing the Relinkctl file).</p><p>GTM issues a REQRLNKCTLRNDWN message if it finds evidence of need for a rundown of the Relinkctl file (e.g. processes killed using kill -9 or relinkctl/rtnobj shared memory segments removed using ipcrm -m).</p><p>FIS recommends that a directory in the $zroutines of a process be either auto-relink-enabled or auto-relink-disabled for the life of the process. Changing the auto-relink mode of the directory within a process is likely to result in counter-intuitive results. </p><p>As arguments, ZRUPDATE takes object file names, including wild-cards of the form accepted by $ZSEARCH(). If ZRUPDATE fails to find at least one file to match an argument with a wild card, it issues an INFO message (seen only if $PRINCIPAL has CENABLE). When an explicit name without a wild card is specified, but there is no file in the directory or a corresponding entry in the Relinkctl, ZRUPDATE produces an error. ZRUPDATE issues most errors as FILEPARSE errors with a secondary error describing the actual issue although some errors, depending on the reason and path by which ZRUPDATE detects them, can be rather cryptic. In V6.2-000, some wild card handling was incorrect.</p><p>An explicit ZLINK or an auto-relink check the hash of an object and its replacement. If they are identical, GT.M takes no action to replace the current object, saving both memory and time.</p><p>An explicit ZLINK from an auto-relink directory acts as an implicit ZRUPDATE.</p><p>Any ZBREAK in a routine disables that routine from auto-relinking by a process until all ZBREAKs are removed.</p><p>The $gtmroutines value set by the gtmprofile file enables auto-relink by default for object files in the $gtmdir/$gtmver/o directory in M mode, and $gtmdir/$gtmver/o/utf8 in UTF-8 mode.[UNIX](GTM-8160) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8168"></a> GT.M schedules and delivers user-initiated timed events, such as HANGs and gtm_start_timer() call-in invocations, with the highest accuracy available to GT.M via standard operating system calls. Note that GT.M ensures that the HANG or other operation waits for at least as long as the specified time; the actual time depends on when the process gets resources to allow it to resume execution depends on the operating system. Previously, GT.M scheduled such events with both an extended duration and highest accuracy of 10ms. [UNIX] (GTM-8168)</p></li><li class="listitem"><p><a name="GTM-8172"></a> GT.M appropriately manages old copies of recursively linked routines when they retire from use. Previously, GT.M did not release the parts of a recursively linked routine when the last instance of the old (replaced) routine left the M virtual-machine stack due to a QUIT or ZGOTO. ZBREAKs in the replaced routine increased the size of the memory leak. [UNIX] (GTM-8172)</p></li><li class="listitem"><p><a name="GTM-8174"></a> Raising zero to a negative power (0**-x) produces a DIVZERO error; previously it returned 0, which was inconsistent with the result of dividing by zero: i.e. 1/(0**x). (GTM-8174)</p></li><li class="listitem"><p><a name="GTM-8181"></a> When GT.M encounters problems creating object files it follows GT.M error handling protocol; in V6.2-000 such errors sent text of the form: " tmp_object_file_name: ..."  to $PRINCIPAL. [UNIX] (GTM-8181)</p></li><li class="listitem"><p><a name="GTM-8194"></a> GT.M uses a 128 bit hash based on the MurmurHash3 algorithm, for source file text identification as visible in the output of ZSHOW "R" and $VIEW("RTNCHECKSUM",rtn). MUPIP HASH &lt;file-names&gt; provides the hash of source files from the command line. Previously GT.M used an MD5 hash. [UNIX](GTM-8194) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8196"></a> WRITE /WAIT with no timeout appropriately resumes waiting for a socket event after processing an INTRPT; previously it could return prematurely with no socket selected. In UNIX, WRITE /WAIT on a socket which has an error condition appropriately defers reporting the error until the next command that accesses the socket; starting with V6.1-000 WRITE /WAIT on a socket with an error condition could result in a GTMASSERT. (GTM-8196)</p></li><li class="listitem"><p><a name="GTM-8204"></a> $ZPEEK() accepts the following keyword first arguments:</p><pre class="programlisting"> 
JNL[REG]:region - to obtain fields in the jnl_private_control structure.
JBF[REG]:region - can obtain fields in shared jnl_buffer structure
</pre><p>The associated field mnemonics and characteristics are defined by the running the GTMDefinedTypesInit.m utility, which produces a cross-index in the form:</p><pre class="programlisting">gtmtypfldindx(&lt;structure-name&gt;.&lt;field-mnemonic&gt;)=&lt;n&gt;
</pre><p>where gtmtypes(&lt;structure-name&gt;,&lt;n&gt;,*) nodes contain the field characteristics.$ZPEEK recognizes the "T" format code as selecting a $HOROLOG format for a field of 4 or 8 bytes which is intended for use on fields in UNIX time format (seconds since 01/01/1970).[UNIX](GTM-8204) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li></ul></div></div><div class="sect1" title="Utilities-MUPIP"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp156262960"></a>Utilities-MUPIP</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-227"></a> MUPIP LOAD detects file format (BINARY/ZWR/GO) based on the file header of extract files from MUPIP EXTRACT, ^%GO and DSE. If it cannot recognize the header, or if the detected format does not match that selected by the user supplied -FORMAT=(BINARY/ZWR/GO) qualifier, LOAD produces a LDBINFMT error. For example, MUPIP LOAD -STDIN of a BNIARY file using shell redirection for STDIN works with or without the -FORMAT=BINARY. Previously LOAD required the -FORMAT qualifier to recognize the BIN format, ignored the qualifier for GO and ZWR, and, when it did not recognize the header, it tried to skip the first two records and treat the file as GO format and could cause a segmentation violation (SIG-11) if the selection was -FORMAT=BIN, but the file was in GO format. [UNIX](GTM-6597)(GTM-7868)(GTM-8182)(GTM-227) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-6597"></a> See <a class="link" href="#GTM-227">GTM-227</a>. (GTM-6597)</p></li><li class="listitem"><p><a name="GTM-7862"></a> MUPIP REPLICATE -SOURCE -START accepts the -[NO]JNLF[ILEONLY] qualifier. Specifying -JNLFILEONLY forces the source server to read transactions from journal files instead of journal pool shared memory. When combined with the SYNC_IO journal option, this feature delays replication of transactions until their journal records are hardened to disk. This may be useful when replicating to a supplementary instance, as a crash and rollback on the primary could otherwise necessitate a rollback of local updates on the receiving instance. The default is -NOJNLFILEONLY. [UNIX] (GTM-7862) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-7868"></a> See <a class="link" href="#GTM-227">GTM-227</a>. (GTM-7868)</p></li><li class="listitem"><p><a name="GTM-8081"></a> The receiver process correctly handles large compressed messages (&gt; 16 MiB before compression) which are partially read. Such messages can occur when there is a large backlog of journal records for this receiver on the source, though the particular circumstances required to encounter this issue are rare. Previously the messages could be handled incorrectly, resulting in a corrupt message, causing a zlib message to be written to the receiver log and compression to be disabled; otherwise, replication was unaffected. This issue was introduced with GTM-7743 in V6.1-000. [UNIX] (GTM-8081)</p></li><li class="listitem"><p><a name="GTM-8175"></a> MUPIP LOAD reports an accurate key count; in prior releases, key counts above 2**32-1 wrapped to inappropriately smaller values. [UNIX](GTM-8175)</p></li><li class="listitem"><p><a name="GTM-8182"></a> See <a class="link" href="#GTM-227">GTM-227</a>. (GTM-8182)</p></li><li class="listitem"><p><a name="GTM-8185"></a> The Update Process correctly issues a REC2BIG error message when handling updates that exceed the configured maximum. Previously, the Update Process terminated with a segmentation violation (UNIX SIG-11, or OpenVMS ACCVIO) while issuing the REC2BIG error for a TP fenced update. This fixes a regression introduced in V6.0-003. (GTM-8185)</p></li><li class="listitem"><p><a name="GTM-8195"></a> GT.M handles failures it encounters while opening database files correctly, issuing the appropriate error messages. Previously, on rare occasions, when it attempted to report such errors, it could produce a bus error (SIG-7) or segmentation fault (SIG-11). [UNIX] (GTM-8195)</p></li><li class="listitem"><p><a name="GTM-8205"></a> The replication receiver server works correctly when connecting to a cross-endian source server running an older version of GT.M. In V62000 if the receiver connected to a source server running any version of GT.M from V55000 through V61000, it inappropriately exited with an INSNOTJOINED error . [UNIX](GTM-8205)</p></li><li class="listitem"><p><a name="GTM-8209"></a> The MUINFOUINT6 message reports used in MUPIP JOURNAL -EXTRACT -DETAIL show $HOROLOG representations of times close, or prior, to UNIX Epoch (0 seconds on 1-Jan-1970) accurately; previously such times (typically 0), appeared to be a day too close to the current day. [UNIX] (GTM-8209)</p></li><li class="listitem"><p><a name="GTM-8210"></a> The Update Process appropriately handles restarts that occur within trigger logic due to concurrent database activity (from MUPIP REORG or local updates on a Supplementary Instance). Previously in rare instances, the Update Process might get into an indefinite repetition of implicit TPRESTARTs recognizable by repeating TPRETRY messages in its log file. [UNIX](GTM-8210)</p></li></ul></div></div><div class="sect1" title="Utilities-Other Than MUPIP"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp156270592"></a>Utilities-Other Than MUPIP</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-7927"></a> CMakeLists.txt now builds all three of the reference implementation encryption libraries (libgtcrypt: AES256, OpenSSL: AES256 and BLOWFISH). Previously it built only one reference implementation that used libgcrypt with AES256. [UNIX](GTM-7927)</p></li><li class="listitem"><p><a name="GTM-8093"></a> A GT.M process (including utilities) that cannot start gtmsecshr puts a UNABLETOEXECGTMSECSHR  message in the operator log; previously it used an inappropriate INVTRANSGTMSECSHR message. [UNIX](GTM-8093)</p></li><li class="listitem"><p><a name="GTM-8101"></a> The maskpass utility restores terminal settings when terminated with a Ctrl-C or a TERM signal. Additionally, all other signals except SEGV, ABRT, BUS, FPE, TRAP, KILL, and STOP are ignored. Previously, it could leave the terminal in a state where an "stty sane" command would be required to restore terminal settings to a usable state. [UNIX] (GTM-8101) </p></li><li class="listitem"><p><a name="GTM-8153"></a> Makefile shipped with the reference implementation of the GT.M encryption plug-in consolidates a number of related simplistic targets into more functional ones (such as 'maskpass', 'maskpass.o', and 'gtmcrypt_util_syslib.o' into 'maskpass'; 'gtmtls' and 'gtm_tls_impl.o' into 'libgtmtls.so'; and so on). Compilation and linking of shared libraries and executables occur in one step rather than individually. Each target announces the actions it is going to perform. The 'install' target copies the maskpass executable to the plugin's gtmcrypt subdirectory and safely overwrites the existing libgtmcrypt.so softlink rather than erroring out if it is present. AIX installations no longer print warnings about duplicate symbols. Targets correctly specify and resolve internal dependencies to minimize the risk of errors or redundant operations. [UNIX] (GTM-8153) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li></ul></div></div><div class="sect1" title="Error and Other Messages"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp156034864"></a>Error and Other Messages</h2></div></div></div><div class="sect2" title="ACTIVATEFAIL "><div class="titlepage"><div><div><h3 class="title"><a name="GTMACTIVATEFAIL"></a>ACTIVATEFAIL <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>ACTIVATEFAIL, </strong></span>
Cannot activate passive source server on instance iiii while a receiver server and/or update process is running</p><p>MUPIP Error: MUPIP REPLIC -SOURCE -ACTIVATE -ROOTPRIMARY (or -UPDOK) issues this error when the command attempts to activate a passive source server (and switch the instance from being a replicating secondary instance to an originating primary) while a receiver server and/or update process is already running</p><p>Action: Shutdown the receiver and/or update process and reissue the MUPIP REPLIC -SOURCE -ACTIVATE -ROOTPRIMARY (or -UPDOK) command. Note that any other GT.M or MUPIP process that was running before the activation does not need to be shut down for the activation to succeed.</p></div><div class="sect2" title="DBCOLLREQ "><div class="titlepage"><div><div><h3 class="title"><a name="GTMDBCOLLREQ"></a>DBCOLLREQ <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>DBCOLLREQ, </strong></span>
JOURNAL EXTRACT proceeding without collation information for globals in database. eeee ffff .</p><p>MUPIP Warning: This is MUPIP JOURNAL EXTRACT Warning. This indicates that MUPIP process uses the default collation as it is not able to read the database file ffff because of error eeee</p><p>Action: Be aware that if the EXTRACT contains variables with alternative collation that this extract represents them as GT.M stores them, rather than as they are used by the application. Attempting to LOAD such an EXTRACT will produce incorrect results.</p></div><div class="sect2" title="HLPPROC "><div class="titlepage"><div><div><h3 class="title"><a name="GTMHLPPROC"></a>HLPPROC <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span></h3></div></div></div><p><span class="bold"><strong>HLPPROC, </strong></span>
Helper Process error</p><p>MUPIP Error: GT.M replication was not able to start a helper process.</p><p>Action: Ensure that the gtm_dist environment variable points to a valid GT.M distribution that is executable by the user.</p></div><div class="sect2" title="INSNOTJOINED "><div class="titlepage"><div><div><h3 class="title"><a name="GTMINSNOTJOINED"></a>INSNOTJOINED <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>INSNOTJOINED, </strong></span>
Replicating Instance RRRR is not a member of the same Group as Instance IIII</p><p>Receiver Server log/MUPIP Error: A Receiver Server or a MUPIP JOURNAL -ROLLBACK -FETCHRESYNC on instance RRRR produces this error when it attempts to establish a replication connection with an instance that belongs to a different replication configuration or Group. MUPIP performs this safety check at the time it establishes a replication connection between two instances.</p><p>Action: Use the Remote IP Address in the Receiver / Source Server log files or the primary instance name field from MUPIP REPLICATE -JNLPOOL -SHOW command to identify the Source Server that may have inadvertently attempted to establish a replication connection with your Source Server. Shut down the Source Server if the Source Server does not belong to your replication configuration. If you are attempting to move a Source Server from a different Group, reinitialize the Source Server.Note that only supplementary instances started with -UPDOK can accept updates from a different Group.</p></div><div class="sect2" title="KEYWRDBAD "><div class="titlepage"><div><div><h3 class="title"><a name="GTMKEYWRDBAD"></a>KEYWRDBAD <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>KEYWRDBAD, </strong></span>
xxxx is not a valid yyyy in this context</p><p>GDE Error: This indicates that GDE did not encounter a valid syntax element. xxxx is the invalid element. yyyy designates whether the element in context is a verb (command), object, or qualifier.</p><p>Action: Look for and correct typographical errors.</p></div><div class="sect2" title="LDBINFMT "><div class="titlepage"><div><div><h3 class="title"><a name="GTMLDBINFMT"></a>LDBINFMT <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>LDBINFMT, </strong></span>
Unrecognized header for load file </p><p>MUPIP Error: This message identifies a MUPIP load file that is not having the correct header format in either BINARY, ZWR or GO format.</p><p>Action: Examine the file with a text editor for possible correction to format header. If fixing the header does not resolve the error, attempt MUPIP EXTRACT with a different file format.</p></div><div class="sect2" title="LDSPANGLOINCMP "><div class="titlepage"><div><div><h3 class="title"><a name="GTMLDSPANGLOINCMP"></a>LDSPANGLOINCMP <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>LDSPANGLOINCMP, </strong></span>
Incomplete spanning node found during load!/!_!_at File offset : oooo</p><p>MUPIP Error: This error indicates that MUPIP LOAD encountered an issue with a spanning node in the input file at offset oooo. MUPIP LOAD produces the following LDSPANGLOINCMP errors: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="code">Expected chunk number : ccccc but found a non-spanning node</code></li><li class="listitem"><code class="code">Expected chunk number : ccccc but found chunk number : ddddd</code></li><li class="listitem"><code class="code">Not expecting a spanning node chunk but found chunk : ccccc</code></li><li class="listitem"><code class="code">Global value too large: expected size : sssss actual size : tttttt chunk number : ccccc</code></li><li class="listitem"><code class="code">Expected size : sssss actual size : ttttt</code></li></ul></div><p>Action: Refer to the LDSPANGLOINCMP Errors section in the Maintaining Database Integrity chapter of the <a class="ulink" href="http://tinco.pair.com/bhaskar/gtm/ao/index.html" target="_blank">Administration and Operations Guide</a></p></div><div class="sect2" title="LITNONGRAPH "><div class="titlepage"><div><div><h3 class="title"><a name="GTMLITNONGRAPH"></a>LITNONGRAPH <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>LITNONGRAPH, </strong></span>
standard requires graphics in string literals; found non-printable: $ZCHAR(cccc)</p><p>Compile Time Warning: flags a standard violation. The generated code will accept the string, even though it contains cccc, which is not a visible character.</p><p>Action: Consider revising the literal to use $[Z]CHAR() and possibly concatenation to make the code more maintainable.</p></div><div class="sect2" title="MAXBTLEVEL "><div class="titlepage"><div><div><h3 class="title"><a name="GTMMAXBTLEVEL"></a>MAXBTLEVEL <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>MAXBTLEVEL, </strong></span>
Global ^gggg in region rrrr reached maximum level</p><p>Run Time/MUPIP Error: This indicates that the global-variable-tree for global xxxx reached the maximum level permissible. Very likely, MUPIP REORG was specified with a fill-factor much less than 100. Small fill-factors can cause REORG to revise existing GDS-blocks (in order to accommodate the fill-factor requirement), in turn causing block-splits, which might lead to an increase of the tree height. Alternatively a SET or MERGE has made the global really too large for the current block size, which is most likely to happen with large (spanning) database nodes. Note that if this message does not specify the global name, it means the directory tree for the region hit the limit - FIS believes the directory tree full condition is almost impossible to create in practice.</p><p>Action: If MUPIP reorg was specified with a small fill-factor, try higher number (close to 100) to reduce tree-height. Other techniques include increasing GDS-block-size, reducing reserved bytes, killing unwanted portions of the tree or moving some nodes in the global to a different database region.</p></div><div class="sect2" title="NOEDITOR "><div class="titlepage"><div><div><h3 class="title"><a name="GTMNOEDITOR"></a>NOEDITOR <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span></h3></div></div></div><p><span class="bold"><strong>NOEDITOR, </strong></span>
Can't find an executable editor: eeee</p><p>Run Time Error: The ZEDIT command cannot find an executable editor.</p><p>Action: Ensure that the EDITOR environment variable points to an editor that is executable by the user.</p></div><div class="sect2" title="NOTGBL "><div class="titlepage"><div><div><h3 class="title"><a name="GTMNOTGBL"></a>NOTGBL <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>NOTGBL, </strong></span>
Expected a global variable name starting with an up-arrow (^): xxxx</p><p>Run Time/MUPIP Error: This indicates that the VIEW argument expression for tracing specifies xxxx which is not a valid global name. In case of MUPIP error, it indicates that LOAD aborted because it encountered xxxx in its input stream, which is not a valid global name.</p><p>Action: Correct the argument of the VIEW command to point to a valid global name. For MUPIP error, refer to the topic MUPIP LOAD Errors in About This Manual section of this manual.  </p></div><div class="sect2" title="REORGINC "><div class="titlepage"><div><div><h3 class="title"><a name="GTMREORGINC"></a>REORGINC <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>REORGINC, </strong></span>
Reorg was incomplete. Not all globals were reorged.</p><p>MUPIP Warning: This indicates that MUPIP did not reorg all the globals because of some resource constraint errors.</p><p>Action: Review the accompanying message(s) for more information.</p></div><div class="sect2" title="REPLINSTNOSHM "><div class="titlepage"><div><div><h3 class="title"><a name="GTMREPLINSTNOSHM"></a>REPLINSTNOSHM <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>REPLINSTNOSHM, </strong></span>
Database dddd has no active connection to a replication journal pool</p><p>Run Time Error: The Source server was started with a repication instance that had this database file listed but later the source server and this particular database file were shut down while other database files in this instance file were still active.</p><p>Action: Restart the source server.</p></div><div class="sect2" title="TPRESTART "><div class="titlepage"><div><div><h3 class="title"><a name="GTMTPRESTART"></a>TPRESTART <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>TPRESTART, </strong></span>
Database mmmm; code: xxxx; blk: yyyy in glbl: zzzz; pvtmods: aaaa, blkmods: bbbb, blklvl: cccc, type: dddd, readset: eeee, writeset: ffff, local_tn: gggg</p><p>Run Time Information: The UNIX environment variables or OpenVMS logical names GTM_TPRESTART_LOG_FIRST and GTM_TPRESTART_LOG_DELTA control the logging of TPRESTART messages. GTM_TPRESTART_LOG_FIRST indicates the number of TP restarts to log from GT.M invocation. Once that many have been logged, every GTM_TPRESTART_LOG_DELTA TP restarts, GT.M logs a restart message. If GTM_TPRESTART_LOG_DELTA is undefined, GT.M performs no operator logging. The default value for GTM_TPRESTART_LOG_FIRST is 0 (zero), which leaves the control completely with GTM_TPRESTART_LOG_DELTA. The facility that produces this message can serve as a diagnostic tool in developmental environments for investigating contention due to global updates. A zzzz of "*BITMAP" indicates contention in block allocation which might involve multiple globals.</p><p>Action: Disable, or adjust the frequency of, these messages with the mechanism described above. To reduce the number of restarts, consider changes to the global structure, varying the time when work is scheduled. Consider whether the business and program logic permits the use of NOISOLATION.</p></div><div class="sect2" title="TRESTNOT "><div class="titlepage"><div><div><h3 class="title"><a name="GTMTRESTNOT"></a>TRESTNOT <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>TRESTNOT, </strong></span>
Cannot TRESTART, transaction is not restartable</p><p>Run Time Error: This indicates that a TRESTART command attempted to RESTART a transaction that did not enable RESTART; the error occurs at the point of the initial TSTART, so all global updates within the transaction are rolled back and any local variables specified have their values as of the TSTART.</p><p>Action: Enable RESTART with the initial TSTART command argument, add external LOCKs to serialize the transaction, or eliminate the TRESTART command.</p></div><div class="sect2" title="TRIGZBREAKREM "><div class="titlepage"><div><div><h3 class="title"><a name="GTMTRIGZBREAKREM"></a>TRIGZBREAKREM <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span></h3></div></div></div><p><span class="bold"><strong>TRIGZBREAKREM, </strong></span>
ZBREAK in trigger tttt removed due to trigger being reloaded</p><p>Run Time Warning: This indicates your process had a ZBREAK defined within the XECUTE code for trigger tttt, but some action replaced the definition for trigger tttt so GT.M removed the ZBREAK.</p><p>Action: If appropriate examine the trigger with ZPRINT and reestablish the ZBREAK. The message is tied to BREAKMSG mask 16 (See VIEW BREAKMSG). The default message mask is 31, which includes masks 1, 2, 4, 8, and 16. Using the VIEW command to set the BREAKMSG mask to 7 or any other pattern that excludes 16, disables this message.</p></div><div class="sect2" title="UPDPROC "><div class="titlepage"><div><div><h3 class="title"><a name="GTMUPDPROC"></a>UPDPROC <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span></h3></div></div></div><p><span class="bold"><strong>UPDPROC, </strong></span>
Update Process error</p><p>MUPIP Error: GT.M replication was not able to start the update process.</p><p>Action: Ensure that the gtm_dist environment variable points to a valid GT.M distribution that is executable by the user.</p></div></div></div></body>
<!-- Mirrored [from host tinco.pair.com [file /bhaskar/gtm/doc/articles/GTM_V6.2-001_Release_Notes.html]] -->
</html>
