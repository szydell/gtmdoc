<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html>
<!-- Mirrored from tinco.pair.com/bhaskar/gtm/doc/articles/GTM_V5_4_001_Release_Notes.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 14 Mar 2019 11:25:04 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><base target="_top"><style type="text/css">  /* default css */table {  font-size: 1em;  line-height: inherit;  border-collapse: collapse;}tr {    text-align: left;  }div, address, ol, ul, li, option, select {  margin-top: 0px;  margin-bottom: 0px;}p {  margin: 0px;}pre {  font-family: Courier New;  white-space: pre-wrap;  margin:0;}body {  margin: 6px;  padding: 0px;  font-family: Verdana, sans-serif;  font-size: 10pt;  background-color: #ffffff;  color: #000;}img {  -moz-force-broken-image-icon: 1;}@media screen {  html.pageview {    background-color: #f3f3f3 !important;    overflow-x: hidden;    overflow-y: scroll;  }    body {    min-height: 1100px;        counter-reset: __goog_page__;  }    * html body {    height: 1100px;  }  /* Prevent repaint errors when scrolling in Safari. This "Star-7" css hack     targets Safari 3.1, but not WebKit nightlies and presumably Safari 4.     That's OK because this bug is fixed in WebKit nightlies/Safari 4 :-). */  html*#wys_frame::before {    content: '\A0';    position: fixed;    overflow: hidden;    width: 0;    height: 0;    top: 0;    left: 0;  }    .pageview body {    border-top: 1px solid #ccc;    border-left: 1px solid #ccc;    border-right: 2px solid #bbb;    border-bottom: 2px solid #bbb;    width: 648px !important;    margin: 15px auto 25px;    padding: 40px 50px;  }  /* IE6 */  * html {    overflow-y: scroll;  }  * html.pageview body {    overflow-x: auto;  }            .writely-callout-data {      display: none;    }        .writely-footnote-marker {      background-image: url('MISSING.html');      background-color: transparent;      background-repeat: no-repeat;      width: 7px;      overflow: hidden;      height: 16px;      vertical-align: top;            -moz-user-select: none;    }    .editor .writely-footnote-marker {      cursor: move;    }    .writely-footnote-marker-highlight {      background-position: -15px 0;      -moz-user-select: text;    }    .writely-footnote-hide-selection ::-moz-selection, .writely-footnote-hide-selection::-moz-selection {      background: transparent;    }    .writely-footnote-hide-selection ::selection, .writely-footnote-hide-selection::selection {      background: transparent;    }    .writely-footnote-hide-selection {      cursor: move;    }    /* Comments */    .writely-comment-yellow {      background-color: #ffffd7;    }    .writely-comment-orange {      background-color: #ffe3c0;    }    .writely-comment-pink {      background-color: #ffd7ff;    }    .writely-comment-green {      background-color: #d7ffd7;    }    .writely-comment-blue {      background-color: #d7ffff;    }    .writely-comment-purple {      background-color: #eed7ff;    }      .br_fix span+br:not(:-moz-last-node) {        position:relative;        left: -1ex      }    #cb-p-tgt {    font-size: 8pt;    padding: .4em;    background-color: #ddd;    color: #333;  }  #cb-p-tgt-can {    text-decoration: underline;    color: #36c;    font-weight: bold;    margin-left: 2em;  }  #cb-p-tgt .spin {    width: 16px;    height: 16px;    background: url(http://ssl.gstatic.com/docs/clipboard/spin_16o.gif) no-repeat;  }}h6 { font-size: 8pt }h5 { font-size: 8pt }h4 { font-size: 10pt }h3 { font-size: 12pt }h2 { font-size: 14pt }h1 { font-size: 18pt }blockquote {padding: 10px; border: 1px #DDD dashed }.webkit-indent-blockquote { border: none; }a img {border: 0}.pb {  border-width: 0;  page-break-after: always;  /* We don't want this to be resizeable, so enforce a width and height     using !important */  height: 1px !important;  width: 100% !important;}.editor .pb {  border-top: 1px dashed #C0C0C0;  border-bottom: 1px dashed #C0C0C0;}div.google_header, div.google_footer {  position: relative;  margin-top: 1em;  margin-bottom: 1em;}/* Table of contents */.editor div.writely-toc {  background-color: #f3f3f3;  border: 1px solid #ccc;}.writely-toc > ol {  padding-left: 3em;  font-weight: bold;}ol.writely-toc-subheading {  padding-left: 1em;  font-weight: normal;}/* IE6 only */* html writely-toc ol {  list-style-position: inside;}.writely-toc-none {  list-style-type: none;}.writely-toc-decimal {  list-style-type: decimal;}.writely-toc-upper-alpha {  list-style-type: upper-alpha;}.writely-toc-lower-alpha {  list-style-type: lower-alpha;}.writely-toc-upper-roman {  list-style-type: upper-roman;}.writely-toc-lower-roman {  list-style-type: lower-roman;}.writely-toc-disc {  list-style-type: disc;}/* Ordered lists converted to numbered lists can preserve ordered types, and   vice versa. This is confusing, so disallow it */ul[type="i"], ul[type="I"], ul[type="1"], ul[type="a"], ul[type="A"] {  list-style-type: disc;}ol[type="disc"], ol[type="circle"], ol[type="square"] {  list-style-type: decimal;}/* end default css */  /* default print css */  @media print {    body {      padding: 0;      margin: 0;    }    div.google_header, div.google_footer {      display: block;      min-height: 0;      border: none;    }    div.google_header {      flow: static(header);    }    /* used to insert page numbers */    div.google_header::before, div.google_footer::before {      position: absolute;      top: 0;    }    div.google_footer {      flow: static(footer);    }    /* always consider this element at the start of the doc */    div#google_footer {      flow: static(footer, start);    }    span.google_pagenumber {      content: counter(page);    }    span.google_pagecount {      content: counter(pages);    }    .endnotes {      page: endnote;    }    /* MLA specifies that endnotes title should be 1" margin from the top of the page. */    @page endnote {      margin-top: 1in;    }    callout.google_footnote {            display: prince-footnote;      footnote-style-position: inside;      /* These styles keep the footnote from taking on the style of the text         surrounding the footnote marker. They can be overridden in the         document CSS. */      color: #000;      font-family: Verdana;      font-size: 10.0pt;      font-weight: normal;    }    /* Table of contents */    #WritelyTableOfContents a::after {      content: leader('.') target-counter(attr(href), page);    }    #WritelyTableOfContents a {      text-decoration: none;      color: black;    }    /* Comments */    .writely-comment-yellow {      background-color: #ffffd7;    }    .writely-comment-orange {      background-color: #ffe3c0;    }    .writely-comment-pink {      background-color: #ffd7ff;    }    .writely-comment-green {      background-color: #d7ffd7;    }    .writely-comment-blue {      background-color: #d7ffff;    }    .writely-comment-purple {      background-color: #eed7ff;    }  }  @page {    @top {      content: flow(header);    }    @bottom {      content: flow(footer);    }    @footnotes {      border-top: solid black thin;      padding-top: 8pt;    }  }  /* end default print css *//* custom css *//* end custom css *//* ui edited css */body {  font-family: Verdana;    font-size: 10.0pt;  line-height: normal;  background-color: #ffffff;}/* end ui edited css *//* editor CSS */.editor a:visited {color: #551A8B}.editor table.zeroBorder {border: 1px dotted gray}.editor table.zeroBorder td {border: 1px dotted gray}.editor table.zeroBorder th {border: 1px dotted gray}.editor div.google_header, .editor div.google_footer {  border: 2px #DDDDDD dashed;  position: static;  width: 100%;  min-height: 2em;}.editor .misspell {background-color: yellow}.editor .writely-comment {  font-size: 9pt;  line-height: 1.4;  padding: 1px;  border: 1px dashed #C0C0C0}/* end editor CSS */</style>    <title>Technical Bulletin - GT.M V5.4-001 Release Notes</title></head><body         >            <h1>  <a id=Technical_Bulletin_GT_M_V5_4_0_9375480252610363 name=Technical_Bulletin_GT_M_V5_4_0_9375480252610363></a>Technical Bulletin - GT.M V5.4-001 Release Notes</h1><div align=left class=titlepage>  <div class=titlepage>    <div class=legalnotice>      Copyright © 2010 Fidelity Information Services, Inc.&nbsp; All Rights Reserved.&nbsp;    </div>    <div class=legalnotice>      <div>        &nbsp;      </div>      <p>        Permission is granted to copy, distribute and/or modify this document under the terms of the <a href=http://www.gnu.org/licenses/fdl.txt id=lpr- target=_blank title="Click here to read the GNU Free Documentation License"><font color=#810081>GNU Free Documentation License</font></a>, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts and no Back-Cover Texts.      </p>      <div>        &nbsp;      </div>      <p>        <span class=trademark>GT.M</span>™ is a trademark of Fidelity Information Services, Inc.&nbsp; Other trademarks are the property of their respective owners.&nbsp;&nbsp;      </p>      <div>        &nbsp;      </div>      <p>        This document contains a description of GT.M and the operating instructions pertaining to the various functions that comprise the system. This document does not contain any commitment of FIS.&nbsp; FIS believes the information in this publication is accurate as of its publication date; such information is subject to change without notice.&nbsp; FIS is not responsible for any errors or defects.&nbsp;      </p>    </div>    <h2 class=pubdate>      <a id=Revision_History_5170783765732 name=Revision_History_5170783765732></a>Revision History    </h2>    <p class=pubdate>    </p>    <table border=1 bordercolor=#000000 cellpadding=3 cellspacing=0 id=vt_h>      <tbody>      <tr>        <td align=middle valign=top>          <b>Version</b>        </td>        <td>          <b>Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>          </b>        </td>        <td align=left valign=top>          <b>Summary</b>        </td>      </tr> <tr>        <td align=middle valign=top>          1.8        </td>        <td>July 1, 2011</td>        <td align=left valign=top>Improved the writeup of <font color=#000000><a href=#C9K06-003286 target=_self title=C9K06-003286>C9K06-003286</a></font>.</td></tr> <tr>        <td align=middle valign=top>          1.7        </td>        <td>February 18, 2011</td>        <td align=left valign=top>In <a href="#Compiling_ICU">Compiling ICU</a>,  corrected the link to Appendix C: Compiling ICU on GT.M supported platforms of the UNIX GT.M Administration and Operations Guide. </td></tr> <tr>        <td align=middle valign=top>          1.6        </td>        <td>February 8, 2011</td>        <td align=left valign=top>Added an entry for <a href="#S9K05-002770">S9K05-002770</a>. </td></tr> <tr>        <td align=middle valign=top>          1.5        </td>        <td>November 15, 2010</td>        <td align=left valign=top>In <a href="#Table_of_Contents_510593612128">Table of Contents</a>, fixed a broken link to the Change History section.</td>      </tr> <tr> <tr>        <td align=middle valign=top>          1.4        </td>        <td>August 16, 2010</td>        <td align=left valign=top>In the <a href="#_Platforms_2151380940233626_61">Platforms</a> section, added a note about the unsupported NFS mounted database and journal files. </td>      </tr> <tr>        <td align=middle valign=top>          1.3        </td>        <td>August 10, 2010</td>        <td align=left valign=top>In the <a href="#_Platforms_2151380940233626_61">Platforms</a> section, corrected the minimum supported library versions of <font face="Courier New">glibc</font> and <font face="Courier New">ncurses</font> for RHEL 5.5. </td>      </tr>     <tr>        <td align=middle valign=top>          1.2        </td>        <td>July 30, 2010</td>        <td align=left valign=top>In the <a href="#_Platforms_2151380940233626_61">Platforms</a> section, changed the SuSE supported version for IBM System zLinux and added an accompanying note. </td>      </tr>      <tr>        <td align=middle valign=top>          1.1<br>        </td>        <td valign=top>          July 12, 2010<br>        </td>        <td>          Miscellaneous cleanup of vocabulary and grammar.<br>          <br>          Improved the writeup of <font color=#000000><a href=#C9K03-003248 id=ylc5 target=_self title=C9K03-003248>C9K03-003248</a></font>.<br>          <br>          Removed the following gtmprofile fix in <a href=#C9K06-003276 id=keos target=_self title=C9K06-003276>C9K06-003276</a> that did not make it to the build of GT.M V5.4-001 due to a packaging error. It will now be made available in the next GT.M release.<br>          &nbsp;<br>          <i>The environment variable $LC_CTYPE is not specified when the $gtm_chset environment variable specifies that GT.M is to run in UTF-8 mode, the gtmprofile script now defaults $LC_CTYPE to the first UTF-8 locale.&nbsp; Previously, any upper case U, T, and F characters in that first UTF-8 locale name were incorrectly converted to lower case.<br>          </i><br>          This fix has no impact on M mode operations of the gtmprofile script. If you are an FIS GT.M support customer and use gtmprofile in UTF-8 mode, please contact your GT.M support channel to obtain this fix.<br>          <br>        </td>      </tr>      <tr>        <td align=middle valign=top>          1.0        </td>        <td>          July 6, 2010        </td>        <td align=left valign=top>          First published version.        </td>      </tr>      </tbody>    </table>    <p class=pubdate>    </p>    <div>      &nbsp;    </div>    <div class=abstract>      <p class=title>      </p>      <p>      </p>      <div class=informaltable>        <table border=0 cellpadding=1 cellspacing=2 class=zeroBorder width=100%>          <tbody>          <tr>            <td align=left valign=top width=50%>              <p>              </p>              <div class=address>                <p>                </p>                <p>                  GT.M Group                </p>                <p>                  Fidelity Information Services, Inc.                </p>                <p>                  2 West Liberty Boulevard, Suite 300                </p>                <p>                  Malvern, Pennsylvania 19355                </p>                <p>                  United States of America                </p>                <p>                  &nbsp;                </p>              </div>            </td>            <td align=left valign=top width=50%>              <p>              </p>              <div class=address>                <p>                </p>                <p>                  GT.M Support for customers: +1 (610) 578-4226 / <a href=mailto:gtmsupport@fnis.com title="If you have GT.M support, click here to send e-mail and request support">gtmsupport@fnis.com</a>                </p>                <p>                </p>                <div>                  &nbsp;                </div>                <p>                  Switchboard: +1 (610) 296-8877                </p>                Website: <a href=http://fis-gtm.com/ id=j47- target=_blank title="Click here to visit the GT.M home page"><font color=#810081>http://fis-gtm.com</font></a>                <p>                  &nbsp;                </p>              </div>            </td>          </tr>          </tbody>        </table>      </div>      <a id=toc></a>    </div>  </div>  <div class=toc>    <p>    </p>    <h2>      <a id=Table_of_Contents_510593612128 name=Table_of_Contents_510593612128></a><b>Table of Contents</b>    </h2>    <a href=#Change_History_905621674941811 id=z.zu target=_self title="Click here to go directly to the Change History section">Click here to go directly to the Change History section</a>.    <div>      &nbsp;    </div>    <div>      &nbsp;    </div>    <div class=writely-toc id=WritelyTableOfContents toctype=none+none>      <ol class=writely-toc-none>        <li>          <a href=#Technical_Bulletin_GT_M_V5_4_0_9375480252610363 target=_self>Technical Bulletin - GT.M V5.4-001 Release Notes</a>        </li>        <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>          <li>            <a href=#Revision_History_5170783765732 target=_self>Revision History</a>          </li>          <li>            <a href=#Table_of_Contents_510593612128 target=_self>Table of Contents</a>          </li>          <li>            <a href=#Typographical_Conventions_8537 target=_self>Conventions</a>          </li>          <li>            <a href=#_Bulletin_Overview_62528978250 target=_self>Bulletin Overview</a>          </li>          <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>            <li>              <a href=#_Platforms_2151380940233626_61 target=_self>Platforms</a>            </li>            <li>              <a href=#_Migrating_to_64_bit_platforms target=_self>Migrating to 64-bit platforms</a>            </li>            <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>              <li>                <a href=#_Call_ins_and_External_Calls_0 target=_self>Call-ins and External Calls</a>              </li>              <li>                <a href=#_Internationalization_Collatio target=_self>Internationalization (Collation)</a>              </li>              <li>                <a href=#_Environment_Translation_61573 target=_self>Environment Translation</a>              </li>            </ol>            <li>              <a href=#_Recompile_7524501020454256_50 target=_self>Recompile</a>            </li>            <li>              <a href=#_Rebuild_Shared_Libraries_or_I target=_self>Rebuild Shared Libraries or Images</a>            </li>            <li>              <a href=#_Additional_Installation_Instr target=_self>Additional Installation Instructions</a>            </li>            <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>              <li>                <a href=#_UNIX_2470193629452917_4777089 target=_self>UNIX</a>              </li>              <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>                <li>                  <a href=#_Additional_Information_for_AI target=_self>Additional Information for AIX</a>                </li>              </ol>              <li>                <a href=#_OpenVMS_6976338280179322_1641 target=_self>OpenVMS</a>              </li>            </ol>            <li>              <a href=#_Database_Compatibility_for_GT_15427074396132867 target=_self>Upgrading to GT.M V5.4-001</a>            </li>            <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>              <li>                <a href=#Stage1 target=_self>Stage 1: Upgrading your Global Directory</a>              </li>              <li>                <a href=#Stage2 target=_self>Stage 2: Upgrading your Database Files</a>              </li>              <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>                <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>                  <li>                    <a href=#dcn target=_self>Database Compatibility Notes</a>                  </li>                </ol>              </ol>              <li>                <a href=#Stage3 target=_self>Stage 3: Upgrading your Replication Instance File</a>              </li>              <li>                <a href=#Stage4 target=_self>Stage 4: Upgrading your Journal Files</a>              </li>            </ol>            <li>              <a href=#_Managing_M_mode_and_UTF_8_mod target=_self>Managing M mode and UTF-8 mode</a>            </li>            <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>              <li>                <a href=#Compiling_ICU target=_self>Compiling ICU</a>              </li>            </ol>            <li>              <a href=#_Setting_the_environment_varia target=_self>Setting the environment variable TERM</a>            </li>            <li>              <a href=#_Installing_Compression_Librar target=_self>Installing Compression Libraries</a>            </li>          </ol>        </ol>        <li>          <a href=#Change_History_905621674941811 target=_self>Change History</a>        </li>        <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>          <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>            <li>              <a href=#V5_4_000_3320129335714417_6306_8439401756619074 target=_self>V5.4-001</a>            </li>          </ol>          <li>            <a href=#M_Database_Access_122941628389_06001373874842497 target=_self>M-Database Access</a>          </li>          <li>            <a href=#M_Other_Than_Database_Access_9 target=_self>M-Other Than Database Access</a>          </li>          <li>            <a href=#Utilities_MUPIP_88043024385500 target=_self>Utilities-MUPIP</a>          </li>          <li>            <a href=#Utilities_Other_Than_MUPIP_455 target=_self>Utilities-Other Than MUPIP</a>          </li>          <li>            <a href=#C9K02_003240_Trigger_Fixes_for target=_self>C9K02-003240 - Fixes for GT.M Triggers on UNIX</a>          </li>          <li>            <a href=#Error_Messages_780887249505602 target=_self>Error Messages</a>          </li>          <ol class="writely-toc-none writely-toc-subheading" style=MARGIN-LEFT:0pt>            <li>              <a href=#SSATTACHSHM_3953059915466456_7 target=_self>SSATTACHSHM</a>            </li>            <li>              <a href=#TCOMMITDISALLOW_ target=_self>TCOMMITDISALLOW</a>            </li>            <li>              <a href=#TRIGDEFBAD target=_self>TRIGDEFBAD</a>            </li>            <li>              <a href=#TRIGDEFNOSYNC target=_self>TRIGDEFNOSYNC</a>            </li>            <li>              <a href=#TRIGSUBSCRANGE_11074027181363721 target=_self>TRIGSUBSCRANGE</a>            </li>            <li>              <a href=#TRIGDATAIGNORE_7317819963377477 target=_self>TRIGDATAIGNORE</a>            </li>            <li>              <a href=#JNLVSIZE_5615399636877878_4632 target=_self>JNLVSIZE</a>            </li>            <li>              <a href=#PREVJNLLINKCUT target=_self>PREVJNLLINKCUT</a>            </li>            <li>              <a href=#SRCSRVNOTEXIST_288808789105467_7866404162431354 target=_self>SRCSRVNOTEXIST</a>            </li>            <li>              <a href=#REPLINSTSECNONE_ target=_self>REPLINSTSECNONE</a>            </li>            <li>              <a href=#REGSSFAIL_8982927284330495_604 target=_self>REGSSFAIL</a>            </li>          </ol>        </ol>      </ol>    </div>    <p>    </p>    <a href=http://docs.google.com/Doc?docid=0AbNlqcYfBNbiZGhwcjR6bXBfMjloczc2OHNjYw&amp;hl=en#id1030206></a>  </div>  <div class=sect1>    <div class=titlepage>      <h2 class=title>        <a id=Typographical_Conventions_8537 name=Typographical_Conventions_8537></a>Conventions      </h2>    </div>    <p>      <span class=italic>&nbsp;&nbsp;&nbsp;&nbsp;</span>    </p>    <div>      &nbsp;    </div>    <p>      <span class=italic><u>Command Syntax</u>: </span>UNIX syntax (that is, lowercase text and "-" for flags/qualifiers) is used throughout this document.&nbsp; OpenVMS accepts both lowercase and uppercase text; flags/qualifiers on OpenVMS should be preceded with "/".    </p>    <p>    </p>    <br>    <span class=italic><u>Program Names</u>: When referring to a GT.M program or function, the reference is in upper case, e.g, MUPIP BACKUP.&nbsp; When a specific example is provided, the lower case UNIX command names are used, e.g., <font face="courier new">mupip backup -database ACN,HIST /backup</font></span>  </div>  <p>  </p>  <br>  <p>    <span class=italic><u>Reference Number</u>:</span> Reference numbers used to track software enhancements and customer support requests appear in parentheses ().  </p>  <br>  <p>    <span class=italic><u>Platform Identifier</u>:</span> If a new feature or software enhancement does not apply to all platforms, the relevant platform or platforms appear in brackets [].  </p>  <p>    <br>  </p>  <p>    In GT.M documentation, we're adopting the terms "originating instance" where we previously used "primary instance" or "originating primary instance," and the term "replicating instance" where we previously used "secondary instance" and "originating secondary instance."&nbsp; Since it is easier to change documentation than it is to change software, and given our tradition of maintaining compatibility especially for existing programs and scripts, the former terms will remain in the software for a long time to come, even as they are supplemented with the new terms in the code, and replaced in the documentation.  </p>  <p>    <br>  </p>  <div class=titlepage>    <p class=returntotop>      <a href=#toc id=k-oz target=_self title="Return to Table of Contents">Return to Table of Contents</a>    </p>    <h2 class=title>      <a id=_Bulletin_Overview_62528978250 name=_Bulletin_Overview_62528978250></a><a id=id1031015></a>Bulletin Overview    </h2>  </div>  <p class=sect1>    <a id=ch.hi.id.0Z></a>  </p>  <p class=sect1>    GT.M V5.4-001 introduces support for Linux on the IBM System z platform.  </p>  <p class=sect1>    <br>  </p>  <p class=sect1>    <font style=BACKGROUND-COLOR:#ffffff>With this release, the GT.M trigger facility is suitable for production use.</font> For trigger-related changes, see <a href=#C9K02_003240_Trigger_Fixes_for_992911846874506 id=xy6s target=_self title="Trigger Fixes to make the trigger facility production grade.">C9K02 Trigger Fixes</a>.  </p>  <p>    &nbsp;  </p>  There are of course numerous bug fixes, remedied mis-features and smaller enhancements.&nbsp; For a comprehensive list, see <a href=#Change_History_905621674941811_4250374164922399 id=qrsa target=_self title="Change History">Changes</a>.&nbsp;&nbsp;&nbsp;  <p class=article>  </p>  <div>    &nbsp;  </div>  <div class=sect2>    <div class=titlepage>      <p class=returntotop>        <a href=#toc id=ey8v target=_self title="Return to Table of Contents">Return to Table of Contents</a><a href=#Table_of_Contents id=ojsr target=_self title="Return to Table of Contents"></a>      </p>      <h3 class=title>        <a id=_Platforms_2151380940233626_61 name=_Platforms_2151380940233626_61></a><a id=id1030186></a>Platforms      </h3>    </div>    <p>      As of the publication date, FIS supports this release on the following hardware and operating system versions.&nbsp; Contact FIS for a current list of supported platforms.    </p>    <div>      &nbsp;    </div>    <p>    </p>    <div>      &nbsp;    </div>    <p>    </p>    <div class=informaltable>      <table border=1 width=95%>        <tbody>        <tr>          <td align=left valign=top>            <p>              <span class=bold><b>Platform</b></span>            </p>          </td>          <td align=middle valign=top>            <p>              <span class=bold><b>Supported Versions</b></span>            </p>          </td>          <td align=middle valign=top>            <p>              <span class=bold><b>Notes</b></span>            </p>          </td>        </tr>        <tr>          <td align=left valign=top>            <p>              Hewlett-Packard Integrity IA64 HP-UX            </p>          </td>          <td align=middle valign=top>            <p>              11V3 (11.31)            </p>          </td>          <td align=left valign=top>            <div>              <font style=BACKGROUND-COLOR:#f3f3f3>&nbsp;</font>            </div>          </td>        </tr>        <tr>          <td align=left valign=top>            <p>              IA64 GNU/Linux - Red Hat Enterprise Linux            </p>          </td>          <td align=middle valign=top>            <p>              Red Hat Enterprise Linux 5.3            </p>          </td>          <td align=left valign=top>            <p>              GT.M should also run on recent releases of other major Linux distributions with a contemporary 2.6 Linux kernel, glibc (version 2.5-24 or later) and ncurses (version 5.5-24 or later).&nbsp; We have verified that GT.M passes comprehensive testing on RHEL 5.x on machines that have single cells (no more than 8 CPUs).&nbsp; Multi-cell machines are not considered suitable for production use until they are certified.            </p>            <p>            </p>          </td>        </tr>        <tr>          <td align=left valign=top>            <p>              Hewlett-Packard PA-RISC HP-UX            </p>          </td>          <td align=middle valign=top>            <p>              11.11            </p>          </td>          <td align=left valign=top>            <p>              GT.M supports UTF-8 mode and M mode on this platform subject to the following:            </p>            <p>            </p>            <div>              &nbsp;            </div>            <ul>              <li>                Problems with HP-UX 11.11 prevent FIS from testing 4 byte UTF-8 characters.&nbsp; FIS understands that the issue is resolved in HP-UX 11.31.&nbsp; At this time, HP-UX 11.31 is still untested and not formally supported for GT.M; however, we are aware of nothing that would prevent this GT.M release from working correctly on that newer version.              </li>            </ul>            <p>            </p>            <br>            <p>              Running GT.M on HP-UX 11i requires that patch PHKL_28475 be applied to the system.&nbsp; This patch fixes a problem with the <font face="courier new">lseek64()</font> C library call that GT.M uses.&nbsp; A system without this patch gives fairly consistent database errors of varying types, structural damage, and in general does not work correctly for any but the most simplistic usage.&nbsp; The <span class=emphasis><font face="courier new">swlist -p</font></span> command (executed as root) can be used to determine if this patch has been applied.&nbsp; Since recent "BATCH" and "GOLDEN" patches may contain this patch, your system may already have this patch applied but may not list it separately. Contact your HP support channel for more information.            </p>            <p>            </p>            <br>            <p>              GT.M does not support database encryption on this platform.            </p>            <p>              &nbsp;            </p>            <p>              <font style=BACKGROUND-COLOR:#ffffff>GT.M does not support the Memory Mapped (MM) Access Method on this platform.</font>            </p>            <p>              <br>            </p>            <p>              Although this platform remains at present fully supported with respect to bug fixes, owing to its looming sunset by the vendor, new functionality is supported on this platform only for FIS' convenience. &nbsp;Please contact your FIS account manager regarding future support.            </p>            <p>            </p>          </td>        </tr>        <tr>          <td align=left valign=top>            <p>              Hewlett-Packard Alpha/AXP Tru64 UNIX            </p>          </td>          <td align=middle valign=top>            <p>              5.1B            </p>          </td>          <td align=left valign=top>            <p>              GT.M supports M mode but not UTF-8 mode on this platform.&nbsp; GT.M does not support database encryption on this platform.            </p>            <p>              <br>            </p>            <p>              <font style=BACKGROUND-COLOR:#ffffff>Although this platform remains at present fully supported with respect to bug fixes, owing to its looming sunset by the vendor, new functionality is supported on this platform only for FIS' convenience. &nbsp;Please contact your FIS account manager regarding future support.</font>            </p>          </td>        </tr>        <tr>          <td align=left valign=top>            <p>              Hewlett-Packard Alpha/AXP OpenVMS            </p>          </td>          <td align=middle valign=top>            <p>              7.3-1/7.3-2/8.2/8.3            </p>          </td>          <td align=left valign=top>            <p>              GT.M supports M mode but not UTF-8 mode on this platform.&nbsp; GT.M does not support several recent enhancements on this platform, including but not limited to database encryption, on-line backup, multi-site replication, PIPE devices and triggers.            </p>            <p>            </p>            <br>            <p>              If you need to work with external calls written in C with Version 6.x of the Compaq C compiler on Alpha OpenVMS, then you must carefully review all the provided kits for that product and apply them appropriately.            </p>            <p>              <br>            </p>            <p>              <font style=BACKGROUND-COLOR:#ffffff>Although this platform remains at present fully supported with respect to bug fixes, owing to its looming sunset by the vendor, new functionality is supported on this platform only for FIS' convenience. &nbsp;Please contact your FIS account manager regarding future support.</font>            </p>            <p>            </p>          </td>        </tr>        <tr>          <td align=left valign=top>            <p>              IBM System p AIX            </p>          </td>          <td align=middle valign=top>            <p>              5.3, 6.1            </p>          </td>          <td align=left valign=top>            <p>              Since GT.M processes are 64-bit, FIS expects 64-bit AIX configurations to be preferable.            </p>            <p>            </p>            <br>            <ul>              <li>                While GT.M supports both UTF-8 mode and M mode on this platform, there are problems with the AIX ICU utilities that prevent FIS from testing 4-byte UTF-8 characters as comprehensively on this platform as we do on others.&nbsp;&nbsp;              </li>            </ul>          </td>        </tr>        <tr>          <td align=left valign=top>            IBM System z<br>            Linux<br>          </td>          <td align=middle valign=top>            SuSE Linux Enterprise Server 10.3 and 11 or later<br>          </td>          <td>GT.M supports starts at SuSE Linux Enterprise Server 10 Service Pack 3.  On SuSE Linux Enterprise Server 11 or later, we require the installation of the SuSE provided <font face="Courier New">libelf0-0.8.10-37.10</font>, or later, package.<br>          </td>        </tr>        <tr>          <td align=left valign=top>            IBM System z z/OS          </td>          <td align=middle valign=top>            V1R10          </td>          <td align=left valign=top>            At this time, FIS is not providing a general distribution of GT.M for this platform. &nbsp;Contact your FIS account executive if you need such a distribution.          </td>        </tr>        <tr>          <td align=left valign=top>            <p>              Sun SPARC Solaris            </p>          </td>          <td align=middle valign=top>            <p>              9 (Update 3 and above) and 10 (Update 6 and above)<br>            </p>          </td>          <td align=left valign=top>            <p>              GT.M supports the deprecated DAL calls in M mode but not in UTF-8 mode.&nbsp; Please refer to the Integrating External Routines chapter in the Programmer’s Guide for appropriate alternative solutions.            </p>            <p>            </p>          </td>        </tr>        <tr>          <td align=left valign=top>            <p>              x86_64 GNU/Linux            </p>          </td>          <td align=middle valign=top>            <p>              Red Hat Enterprise Linux 5.4; Ubuntu 8.04 LTS through 10.04 LTS; SuSE Linux Enterprise Server 11<br>            </p>          </td>          <td align=left valign=top>            <p>              To run 64-bit GT.M processes requires both a 64-bit kernel as well as 64-bit hardware.            </p>            <p>            </p>            <div>              &nbsp;            </div>            <p>              GT.M should also run on recent releases of other major Linux distributions with a contemporary 2.6 Linux kernel, glibc (version 2.5-24 or later) and ncurses (version 5.5 or later).            </p>            <p>            </p>            <div>              &nbsp;            </div>            <p>              To install GT.M with Unicode (UTF-8) support on RHEL 5.4, in response to the installation question <font face="courier new">Should an ICU version other than the default be used? (y or n)</font> please respond <font face="courier new">y</font> and then specify the ICU version (e.g., respond <font face="courier new">3.6</font>) to the subsequent prompt <font face="courier new">Enter ICU version (at least ICU version 3.6 is required. Enter as &lt;major-ver&gt;.&lt;minor-ver&gt;):</font>            </p>            <p>            </p>          </td>        </tr>        <tr>          <td align=left valign=top>            <p>              x86 GNU/Linux            </p>          </td>          <td align=middle valign=top>            <p>              Red Hat Enterprise Linux 5.5            </p>          </td>          <td align=left valign=top>            <p>              This 32-bit version of GT.M runs on either 32- or 64-bit x86 platforms; we expect the X86_64 GNU/Linux version of GT.M to be preferable on 64-bit hardware.            </p>            <p>            </p>            <div>              &nbsp;            </div>            <p>              GT.M should also run on recent releases of other major Linux distributions with a contemporary 2.6 Linux kernel, glibc (version 2.5-49 or later) and ncurses (version 5.5-24 or later).&nbsp; The minimum CPU must have the instruction set of a 686 (Pentium Pro) or equivalent. Contact FIS for support of older CPUs.            </p>            <p>            </p>          </td>        </tr>        </tbody>      </table><br><p>Note: GT.M does not support database and journal files which reside on an NFS mounted filesystem. However, you can use an NFS mounted filesystem for keeping source and object code modules and performing sequential file IO.</p>    </div>  </div>  <div class=sect2>    <div class=titlepage>      <p class=returntotop>      </p>      <div>        &nbsp;      </div>      <p class=returntotop>        <a href=http://docs.google.com/Doc?id=dhpr4zmp_29hs768scc&amp;hl=en#Table_of_Contents_510593612128 target=_blank title="Click here to move to the Table of Contents"></a><a href=#toc id=b9kr target=_self title="Return to Table of Contents">Return to Table of Contents</a><a href=#Table_of_Contents id=kzhb target=_self title="Return to Table of Contents"></a>      </p>      <h3 class=title>        <a id=_Migrating_to_64_bit_platforms name=_Migrating_to_64_bit_platforms></a><a id=manage64></a>Migrating to 64-bit platforms      </h3>    </div>    <p>      The same application code runs on both 32-bit and 64-bit platforms. Please note that:    </p>    <p>    </p>    <div>      &nbsp;    </div>    <div class=itemizedlist>      <ul>        <li>          <p>            You must compile the application code separately for each platform.&nbsp; Even though the M source code is exactly the same, the generated object modules are different even on the same hardware architecture - the object code for x86 and x86_64 is different.          </p>        </li>        <li>          <p>            Parameter-types that interface GT.M with non-M code using C calling conventions must match the data-types on their target platforms.&nbsp; Mostly, these parameters are for call-ins, external calls, internationalization (collation), and environment translation and are listed in the tables below.&nbsp; Note that most addresses on 64-bit platforms are 8 bytes long and require 8 byte alignment in structures whereas all addresses on 32-bit platforms are 4 bytes long and require 4-byte alignment in structures.          </p>        </li>      </ul>    </div>    <div class=sect3>      <div class=titlepage>        <h4 class=title>          <a id=_Call_ins_and_External_Calls_0 name=_Call_ins_and_External_Calls_0></a>Call-ins and External Calls        </h4>      </div>      <div class=informaltable>        <table border=1>          <tbody>          <tr>            <td>              <p>                <span class=bold><b>Parameter type</b></span>              </p>            </td>            <td>              <p>                <span class=bold><b>32-Bit</b></span>              </p>            </td>            <td>              <p>                <span class=bold><b>64-bit</b></span>              </p>            </td>            <td>              <p>                <span class=bold><b>Remarks</b></span>              </p>            </td>          </tr>          <tr>            <td>              <p>                gtm_long_t              </p>            </td>            <td>              <p>                4-byte (32-bit)              </p>            </td>            <td>              <p>                8-byte (64-bit)              </p>            </td>            <td>              <p>                gtm_long_t is much the same as the C language long type, except on Tru64 UNIX, where GT.M remains a 32-bit application.              </p>            </td>          </tr>          <tr>            <td>              <p>                gtm_ulong_t              </p>            </td>            <td>              <p>                4-byte              </p>            </td>            <td>              <p>                8-byte              </p>            </td>            <td>              <p>                gtm_ulong_t is much the same as the C language unsigned long type.              </p>            </td>          </tr>          <tr>            <td>              <p>                gtm_int_t              </p>            </td>            <td>              <p>                4-byte              </p>            </td>            <td>              <p>                4-byte              </p>            </td>            <td>              <p>                gtm_int_t has 32-bit length on all platforms.              </p>            </td>          </tr>          <tr>            <td>              <p>                gtm_uint_t              </p>            </td>            <td>              <p>                4-byte              </p>            </td>            <td>              <p>                4-byte              </p>            </td>            <td>              <p>                gtm_uint_t has 32-bit length on all platforms              </p>            </td>          </tr>          </tbody>        </table>      </div>    </div>    <div class=sect3>      <div class=titlepage>        <p class=title>        </p>        <div>          &nbsp;        </div>        <ul>          <li>            If your interface uses gtm_long_t or gtm_ulong_t types but your interface code uses int or signed int types, failure to revise the types so they match on a 64-bit platform will cause the code to fail in unpleasant, potentially dangerous and hard to diagnose ways.          </li>        </ul>        <h4 class=title>          <a id=_Internationalization_Collatio name=_Internationalization_Collatio></a>Internationalization (Collation)        </h4>      </div>      <div class=informaltable>        <table border=1>          <tbody>          <tr>            <td>              <p>                <span class=bold><b>Parameter type</b></span>              </p>            </td>            <td>              <p>                <span class=bold><b>32-Bit </b></span>              </p>            </td>            <td>              <p>                <span class=bold><b>64-bit</b></span>              </p>            </td>            <td>              <p>                <span class=bold><b>Remarks</b></span>              </p>            </td>          </tr>          <tr>            <td>              <p>                gtm_descriptor in gtm_descript.h              </p>            </td>            <td>              <p>                4-byte              </p>            </td>            <td>              <p>                8-byte              </p>            </td>            <td>              <p>                Although it is only the address within these types that changes, the structures may grow by up to 8 bytes as a result of compiler padding to meet platform alignment requirements.              </p>            </td>          </tr>          </tbody>        </table>      </div>    </div>    <div class=sect3>      <div class=titlepage>        <p class=title>        </p>        <div>          &nbsp;        </div>        <ul>          <li>            Assuming other aspects of their code are 64-bit capable, collation routines should require only recompilation. &nbsp;          </li>        </ul>        <h4 class=title>          <a id=_Environment_Translation_61573 name=_Environment_Translation_61573></a>Environment Translation&nbsp;        </h4>      </div>      <div class=informaltable>        <table border=1>          <tbody>          <tr>            <td>              <p>                <span class=bold><b>Parameter type</b></span>              </p>            </td>            <td>              <p>                <span class=bold><b>32-Bit</b></span>              </p>            </td>            <td>              <p>                <span class=bold><b>64-bit</b></span>              </p>            </td>            <td>              <p>                <span class=bold><b>Remarks</b></span>              </p>            </td>          </tr>          <tr>            <td>              <p>                gtm_string_t type in gtmxc_types.h              </p>            </td>            <td>              <p>                4-byte              </p>            </td>            <td>              <p>                8-byte              </p>            </td>            <td>              <p>                Although it is only the address within these types that changes, the structures may grow by up to 8 bytes as a result of compiler padding to meet platform alignment requirements.              </p>            </td>          </tr>          </tbody>        </table>      </div>    </div>  </div>  <div class=sect2>    <div class=titlepage>      <p class=returntotop>      </p>      <div>        &nbsp;      </div>      <ul>        <li>          Any environment translation routines require only a recompile, assuming other aspects of their code are 64-bit capable.        </li>      </ul>      <p class=returntotop>      </p>      <div>        &nbsp;      </div>      <p class=returntotop>        <a href=http://docs.google.com/Doc?docid=0AbNlqcYfBNbiZGhwcjR6bXBfMjloczc2OHNjYw&amp;hl=en#Table_of_Contents_510593612128_7471010945331905 target=_blank title="Click here to move to the Table of Contents"></a><a href=#toc id=p:lc target=_self title="Return to Table of Contents">Return to Table of Contents</a><a href=http://docs.google.com/Doc?docid=0AcenITK__xu5ZHBxcTZoNl80NWdkejg3YmRi&amp;hl=en#TOC id=m.nh target=_self title="Return to Table of Contents"></a>      </p>      <h3 class=title>        <a id=_Recompile_7524501020454256_50 name=_Recompile_7524501020454256_50></a><a id=id1030600></a>Recompile      </h3>    </div>    <div class=itemizedlist>      <ul>        <li>          <p>            Recompile all M and C source files.          </p>        </li>      </ul>    </div>  </div>  <div class=sect2>    <div class=titlepage>      <p class=returntotop>        <a href=http://docs.google.com/Doc?docid=0AbNlqcYfBNbiZGhwcjR6bXBfMjloczc2OHNjYw&amp;hl=en#id1030164></a>      </p>      <a href=http://docs.google.com/Doc?docid=0AbNlqcYfBNbiZGhwcjR6bXBfMjloczc2OHNjYw&amp;hl=en#id1030164></a><br>      <div>        &nbsp;      </div>      <p class=returntotop>        <a href=http://docs.google.com/Doc?docid=0AbNlqcYfBNbiZGhwcjR6bXBfMjloczc2OHNjYw&amp;hl=en#Table_of_Contents_510593612128_7471010945331905 target=_blank title="Click here to move to the Table of Contents"></a><a href=#toc id=r03q target=_self title="Return to Table of Contents">Return to Table of Contents</a><a href=http://docs.google.com/Doc?docid=0AcenITK__xu5ZHBxcTZoNl80NWdkejg3YmRi&amp;hl=en#TOC id=l64g target=_self title="Return to Table of Contents"></a>      </p>      <h3 class=title>        <a id=_Rebuild_Shared_Libraries_or_I name=_Rebuild_Shared_Libraries_or_I></a><a id=id1031496></a>Rebuild Shared Libraries or Images      </h3>    </div>    <div class=itemizedlist>      <ul>        <li>          <p>            Rebuild all Shared Libraries (UNIX) or Shareable Executable Images (OpenVMS) after recompiling all M and C source files.          </p>        </li>      </ul>    </div>  </div>  <div class=sect2>    <div class=titlepage>      <p class=returntotop>        <a href=http://docs.google.com/Doc?docid=0AbNlqcYfBNbiZGhwcjR6bXBfMjloczc2OHNjYw&amp;hl=en#id1030164></a>      </p>      <a href=http://docs.google.com/Doc?docid=0AbNlqcYfBNbiZGhwcjR6bXBfMjloczc2OHNjYw&amp;hl=en#id1030164></a><br>      <div>        &nbsp;      </div>      <p class=returntotop>        <a href=#toc id=y8nu target=_self title="Return to Table of Contents">Return to Table of Contents</a>      </p>      <h3 class=title>        <a id=_Additional_Installation_Instr name=_Additional_Installation_Instr></a>Additional Installation Instructions&nbsp;      </h3>    </div>    <p>      To install GT.M, see the "Installing GT.M" section in the GT.M Administration and Operations Guide.    </p>    <div class=sect3>      <div class=titlepage>        <h4 class=title>          <a id=_UNIX_2470193629452917_4777089 name=_UNIX_2470193629452917_4777089></a><a id=id1033081></a>UNIX        </h4>      </div>      <div class=orderedlist>        <ol type=1>          <li>            Fidelity strongly recommends installing each version of GT.M in a separate (new) directory, rather than overwriting a previously installed version.&nbsp; If you must overwrite an existing GT.M installation with a new version you <i>must</i> first shut down all processes using the old version.&nbsp; FIS suggests installing GT.M V5.4-001 in a <a href=http://www.pathname.com/fhs/ id=fsyy title="Click here to visit the Filesystem Hierarchy Standard home page">Filesystem Hierarchy Standard</a> compliant location such as&nbsp;<font face="courier new">/usr/lib/fis-gtm/V5.4-001_</font><font face="arial narrow">arch</font> (for example, <font face="courier new">/usr/lib/fis-gtm/V5.4-001_x86</font>) on 32-bit Linux systems.&nbsp; A location such as <font face="courier new">/opt/fis-gtm/V5.4-001</font>_<font face="'Arial Narrow'">&lt;arch&gt;</font> would also be appropriate. &nbsp;Note that the <font face="'Arial Narrow'">arch</font> suffix is especially important if you plan to install 32- and 64-bit versions of the same release of GT.M on the same system.          </li>          <li>            <p>              Use the MUPIP RUNDOWN command of the old GT.M version to ensure all database files are cleanly closed.            </p>          </li>          <li>            <p>              In UNIX editions, make sure gtmsecshr is not running. If gtmsecshr is running, first stop all GT.M processes including the DSE, LKE and MUPIP utilities and then perform <font face="courier new">a MUPIP STOP </font><font face="arial narrow">&lt;pid_of_gtmsecshr&gt;</font>.            </p>          </li>        </ol>        <br>        <ul style=MARGIN-LEFT:40px>          <li>            <u><i>Never</i></u> replace the binary image on disk of any executable file while it is in use by an active process.&nbsp; It may lead to unpredictable results. Depending on the operating system, these results include but are not limited to the denial of service (that is, system lockup) and damage to files that these processes open (that is, database structural damage).          </li>        </ul>        <ol type=1>        </ol>      </div>      <div class=sect4>        <div class=titlepage>          <h5 class=title>            <a id=_Additional_Information_for_AI name=_Additional_Information_for_AI></a><a id=id1033125></a>Additional Information for AIX          </h5>        </div>        <p>          GT.M for IBM pSeries AIX requires the Asynchronous IO facility to be available and configured. AIX 6 manages AIO dynamically (as requested). Before installing GT.M on IBM pSeries AIX of versions prior to AIX 6, run the following command to check the filesets of this facility: <span class=emphasis><font face="courier new">lslpp -l bos.rte.aio</font></span>        </p>        <p>        </p>        <br>        <p>          If there are no filesets, then install them from AIX installation media.&nbsp; Then, use SMIT to configure the Asynchronous IO facility.&nbsp; Use SMIT as follows:        </p>        <br>        <div class=itemizedlist>          <ul>            <li>              <p>                <span class=emphasis><font face="courier new">smit aio</font> (for gui mode) or</span>              </p>            </li>            <li>              <p>                <span class=emphasis><font face="courier new">smitty aio</font> (for text mode)</span>              </p>            </li>          </ul>        </div>        <p>        </p>        <div>          &nbsp;        </div>        <p>          For a system that has the <span class=emphasis>"posixaio"</span> option instead of <span class=emphasis>"aio"</span> (also called "legacy aio"), use SMIT as follows:        </p>        <br>        <div class=itemizedlist>          <ul>            <li>              <p>                <span class=emphasis><font face="courier new">smit posixaio</font> (for gui mode) or</span>              </p>            </li>            <li>              <p>                <span class=emphasis><font face="courier new">smitty posixaio</font> (for text mode)</span>              </p>            </li>          </ul>          <div>            Select <span class=emphasis>"Configure AIO now"</span><i><span class=emphasis>.</span>&nbsp; </i>If you see a message such as <span class=emphasis>"aio0 has been created"</span>, it means that there is no further need of setup at this time.          </div>          <br>        </div>        <p>          In addition to configuring the aio0 device, select <span class=emphasis>"Change/Show characteristics of Asynchronous I/O"</span> change the value of <span class=emphasis>"State to be configured at system restart" </span>from <span class=emphasis>"defined" </span>to <span class=emphasis>"available"</span>.&nbsp; This ensures that the aio0 device will be available when you next reboot the system.        </p>        <p>        </p>        <br>        <p>          If you expect a database file or journal file to exceed 2GB with older versions of the JFS file system, then you <i>must</i> configure its file system to permit files larger than 2GB.&nbsp; Furthermore, should you choose to place journal files on file systems with a 2GB limit, since GT.M journal files can grow to a maximum size of 4GB, you <i>must</i> then set the journal auto switch limit to less than 2 GB.        </p>      </div>    </div>    <div class=sect3>      <div class=titlepage>        <h4 class=title>          <a id=_OpenVMS_6976338280179322_1641 name=_OpenVMS_6976338280179322_1641></a><a id=id1032899></a>OpenVMS        </h4>      </div>      <p>        To upgrade from a GT.M version prior to V4.3-001, you must update any customized copy of <span class=emphasis><i><font face="courier new">GTM$DEFAULTS</font> </i></span>to include a definition for <span class=emphasis><font face="courier new">GTM$ZDATE_FORM</font></span><font face="courier new">.</font>      </p>      <p>      </p>      <br>      <p>        You can ignore the following section if you choose the standard GT.M configuration or answer <span class=emphasis><i>yes </i></span>to the following question:      </p>      <p style="FONT-FAMILY:Courier New">        <span class=emphasis>Do you want to define GT.M commands to the system</span>      </p>    </div>    <p>    </p>    <br>    <p>      If you define GT.M commands locally with <span class=emphasis><font face="courier new">SET COMMAND GTM$DIST:GTMCOMMANDS.CLD</font></span> in <font face="courier new">GTMLOGIN.COM</font> or other command file for each process which uses GT.M, you must execute the same command after installing the new version of GT.M before using it.&nbsp; If you define the GT.M commands to the system other than during the installation of GT.M, you must update the system <font face="courier new">DCLTABLES</font> with the new <span class=emphasis><font face="courier new">GTMCOMMANDS.CLD</font> </span>provided with this version of GT.M.&nbsp; See the OpenVMS "Command Definition, Librarian, and Message Utilities Manual" section on "Adding a system command."&nbsp; In both cases, it is important for each process to match the proper <font face="courier new">GTMCOMMANDS.CLD</font> with the version of GT.M it runs.    </p>    <p>      <br>    </p>  </div>  <p class=returntotop>    <a href=http://docs.google.com/Doc?docid=0AbNlqcYfBNbiZGhwcjR6bXBfMjloczc2OHNjYw&amp;hl=en#Table_of_Contents_510593612128_7471010945331905 target=_blank title="Click here to move to the Table of Contents"></a><a href=#toc id=nc_t target=_self title="Return to Table of Contents">Return to Table of Contents</a><a href=http://docs.google.com/Doc?docid=0AcenITK__xu5ZHBxcTZoNl80NWdkejg3YmRi&amp;hl=en#TOC id=g9xk target=_self title="Return to Table of Contents"></a>  </p>  <a id=xj_5 name=_Database_Compatibility_for_GT></a>  <h3 class=title>    <a id=_Database_Compatibility_for_GT_15427074396132867 name=_Database_Compatibility_for_GT_15427074396132867></a>Upgrading to GT.M V5.4-001  </h3>  <p class=title>    <a id=x4_7 name=_Database_Compatibility_for_GT></a>The GT.M database consists of four types of components— database files, journal files, global directories, and replication instance files. The format of each database component may differ for each GT.M version and even for 32-bit/64-bit GT.M platforms on the same hardware architecture.  </p>  <p class=titlepage>    <br>  </p>  <div class=titlepage>    <a id=rcue name=_Database_Compatibility_for_GT></a>GT.M upgrade procedure for V5.4-001 consists of 4 stages:&nbsp;&nbsp;  </div>  <div class=titlepage>    <a id=g2ze name=_Database_Compatibility_for_GT></a>&nbsp;  </div>  <ul>    <li>      <font size=2><a href=#Stage1 id=h0lz target=_self title="Stage 1">Stage 1: Upgrading your Global Directory</a></font>    </li>    <li>      <font size=2><a href=#Stage2 id=t.0a target=_self title="Stage 2">Stage 2: Upgrading your Database Files</a></font>    </li>    <li>      <a href=#Stage3 id=ltuh name=_Database_Compatibility_for_GT></a><font size=2><a href=#Stage3 id=r.8. target=_self title="Stage 3">Stage 3: Upgrading your Replication Instance File</a></font>    </li>    <li>      <font size=2><a href=#Stage4 id=p3ri target=_self title="Stage 4">Stage 4: Upgrading your Journal Files</a></font><a id=qaw: name=_Database_Compatibility_for_GT></a>    </li>  </ul>  <a id=a:rf name=_Database_Compatibility_for_GT></a><a id=k7fs name=_Database_Compatibility_for_GT></a><a id=l_es name=_Database_Compatibility_for_GT></a>  <p class=titlepage>    <a id=mf9. name=_Database_Compatibility_for_GT></a>&nbsp;  </p>  <p class=titlepage>    <a id=e1:3 name=_Database_Compatibility_for_GT></a>Read the upgrade instructions of each stage carefully. Your upgrade procedure for GT.M V5.4-000A depends on your GT.M upgrade history and your current version.&nbsp;  </p>  <h4 class=titlepage>    <a id=Stage1 name=_Database_Compatibility_for_GT_7530883967180794></a>Stage 1: Upgrading your Global Directory  </h4>  <a id=q5vm name=_Database_Compatibility_for_GT></a>  <div class=titlepage>    <a id=orqa name=_Database_Compatibility_for_GT></a>FIS strongly recommends you make a copy of your Global Directory before upgrading it. There is no way to downgrade a Global Directory to an earlier format.&nbsp;&nbsp;<br>    <div>      &nbsp;    </div>  </div>  <p class=titlepage>    <a id=_Database_Compatibility_for_GT_7473127083642803 name=_Database_Compatibility_for_GT_7473127083642803></a><b>To upgrade from any prior GT.M version: </b>  </p>  <div>    &nbsp;<br>  </div>  <div class=titlepage>    <ol>      <li>        <a id=o0ue name=_Database_Compatibility_for_GT></a>Open your Global Directory with the GDE utility program from GT.M V5.4-001.      </li>      <li>        <a id=f.7. name=_Database_Compatibility_for_GT></a>Run the <font face="Courier New">EXIT</font> command. This command automatically, even with no other intervening commands, upgrades the global directory.      </li>    </ol>  </div>  <p class=sect2>    <a id=oul1 name=_Database_Compatibility_for_GT></a>&nbsp;  </p>  <p class=sect2>    <a id=c.bd name=_Database_Compatibility_for_GT></a>If you inadvertently open a global directory in an earlier format, with no intention of upgrading it, execute the <font face="Courier New">QUIT</font> command rather than the <font face="Courier New">EXIT</font> command.  </p>  <p class=sect2>    <a id=jtnp name=_Database_Compatibility_for_GT></a>&nbsp;  </p>  <div class=sect2>    <a id=n_ix name=_Database_Compatibility_for_GT></a>If you inadvertently upgrade a global directory, perform the following steps:  </div>  <div class=sect2>    <a id=kuba name=_Database_Compatibility_for_GT></a>&nbsp;  </div>  <div class=sect2>    <ol>      <li>        <a id=dykd name=_Database_Compatibility_for_GT></a>Open the global directory with GDE from V5.4-001.      </li>      <li>        <a id=wf6i name=_Database_Compatibility_for_GT></a>Execute the <font face="Courier New">SHOW ALL</font> command.      </li>    </ol>  </div>  <div class=article>    <a id=lbvj name=_Database_Compatibility_for_GT></a>&nbsp;  </div>  <div class=article>    <a id=a89l name=_Database_Compatibility_for_GT></a>Note: Create a GDE command script, or manually enter the GDE commands corresponding to the output, into GDE from the prior GT.M version.  </div>  <p class=article>    <a id=x94- name=_Database_Compatibility_for_GT></a>&nbsp;  </p>  <div class=article>    <a id=n:x6 name=_Database_Compatibility_for_GT></a>Note: As global directories are binary files, analogous to object files, FIS recommends that you use a GDE command script to create your global directories.  </div>  <h4 class=article>    <a id=Stage2 name=Stage_2_5293352739190076_47865_8686616912554527></a>Stage 2: Upgrading your Database Files&nbsp;&nbsp;  </h4>  <a id=rk72 name=_Database_Compatibility_for_GT></a>  <p class=article>    <a id=nf0v name=_Database_Compatibility_for_GT></a>You need to upgrade your database files only when there is a block format upgrade (such as V4-&gt;V5). However, some versions, for example, the ones which have been initially been created with V4 (and subsequently upgraded to a V5 format) may additionally need a <font face="Courier New">MUPIP REORG -UPGRADE</font> operation to upgrade previously used but free blocks that may have been missed by earlier upgrade tools.&nbsp;  </p>  <a id=cvys name=_Database_Compatibility_for_GT></a><br>  <p class=article>    <a id=wxfo name=_Database_Compatibility_for_GT></a>  </p>  <a id=hd68 name=_Database_Compatibility_for_GT></a>  <div>    &nbsp;  </div>  <p class=article>    <a id=_Database_Compatibility_for_GT_5392545428059027 name=_Database_Compatibility_for_GT_5392545428059027></a><b>To upgrade from a GT.M version prior to V5.000: </b>  </p>  <p class=article>  </p>  <div>    &nbsp;  </div>  <p class=article>  </p>  <ol>    <li>      <div>        <a id=mhjo name=_Database_Compatibility_for_GT></a>Upgrade your database files using in-place or traditional database upgrade procedure depending on your situation. For more information on in-place/traditional database upgrade, see <a href=GTM_Database_Migration.html id=h8db title="Database Migration Technical Bulletin"><font color=#810081>Database Migration Technical Bulletin</font></a><a id=dabk name=_Database_Compatibility_for_GT></a>.      </div>    </li>  </ol>  <ol start=2>    <li>      <div>        <a id=bqud name=_Database_Compatibility_for_GT></a>Run the <font face="Courier New">MUPIP REORG –UPGRADE</font> command. This command upgrades all V4 block to V5 format.      </div>      <a id=ojuc name=_Database_Compatibility_for_GT></a>    </li>  </ol>  <p>  </p>  <a id=l5do name=_Database_Compatibility_for_GT></a><a id=qlfj name=_Database_Compatibility_for_GT></a>  <p>    <a id=wd5y name=_Database_Compatibility_for_GT></a>&nbsp;  </p>  <div>    <a id=y5au name=_Database_Compatibility_for_GT></a>Note: Databases created with GT.M releases prior to V5.0-000 and upgraded to a V5 format retain a maximum size limit of 64M (67,108,864) blocks.    <div>      <a id=cpk4 name=_Database_Compatibility_for_GT></a>    </div>    <a id=or:q name=_Database_Compatibility_for_GT></a>    <div>      &nbsp;    </div>  </div>  <p>    <a id=_Database_Compatibility_for_GT_9275914313641255 name=_Database_Compatibility_for_GT_9275914313641255></a><b><a id=to_up name=to_up></a>To upgrade from GT.M V5.0*/V5.1*/V5.2*/V5.3*/V5.4*: </b>  </p>  <p>  </p>  <div>    &nbsp;  </div>  <div>    <a id=sg7o name=_Database_Compatibility_for_GT></a><a id=bmnc name=_Database_Compatibility_for_GT></a>No database file upgrade procedure is necessary if you upgrade from GT.M V5.0-000 or later to V5.3-000 or later. However, you may need to run the <font face="Courier New">MUPIP REORG –UPGRADE</font> command to upgrade any previously used but free block that may have been missed during earlier upgrade cycles.&nbsp; You do not need to run <font face="Courier New">MUPIP REORG –UPGRADE</font> in either of the following situations:  </div>  <div>    <a id=mg7- name=_Database_Compatibility_for_GT></a>&nbsp;  </div>  <ul>    <li>      <a id=u5eo name=_Database_Compatibility_for_GT></a>A database was created by a V5 <font face="Courier New">MUPIP CREATE</font>    </li>    <li>      <div>        <a id=g:lu name=_Database_Compatibility_for_GT></a>A database has previously been completely processed by a <font face="Courier New">MUPIP REORG –UPGRADE</font> from V5.3-003 or later      </div>    </li>  </ul>  <div>    <a id=a0p: name=_Database_Compatibility_for_GT></a>&nbsp;  </div>  <div>    <a id=u577 name=_Database_Compatibility_for_GT></a>If you have already run the <font face="Courier New">MUPIP REORG –UPGRADE</font> command in a version prior to V5.3-003, subsequent versions cannot determine whether or not it was done correctly and will record warnings in the operator log for running <font face="Courier New">MUPIP REORG -UPGRADE</font>. Therefore, you must either:  </div>  <div>    <a id=f7vm name=_Database_Compatibility_for_GT></a>&nbsp;  </div>  <ul>    <li>      <div>        <a id=svqm name=_Database_Compatibility_for_GT></a>Run the <font face="Courier New">MUPIP REORG –UPGRADE</font> command again      </div>    </li>    <li>      <div>        <a id=f-6t name=_Database_Compatibility_for_GT></a>Run the <font face="Courier New">DSE CHANGE –FULLY_UPGRADED=1 </font>command to stop the warnings        <div>          <a id=tghn name=_Database_Compatibility_for_GT></a>&nbsp;        </div>        <div>          <a id=xe0t name=_Database_Compatibility_for_GT></a>Caution: Do not run the <font face="Courier New">DSE CHANGE -FILEHEADER –FULLY_UPGRADED=1</font> command unless you are absolutely certain you have previously successfully run to completion <a id=nr_v name=_Database_Compatibility_for_GT></a><font face="Courier New">MUPIP REORG –UPGRADE</font> from V5.3-003 or later. Using this command when inappropriately may lead to database integrity issues.        </div>      </div>    </li>  </ul>  <p>    <a id=yps5 name=_Database_Compatibility_for_GT></a>&nbsp;  </p>  <div>    <a id=pz90 name=_Database_Compatibility_for_GT></a>For additional upgrade considerations, see "<a href=#dcn id=u8:q target=_self title="Database Compatibility Notes">Database Compatibility Notes</a><a id=lewt name=_Database_Compatibility_for_GT></a>".&nbsp;&nbsp;<a id=f-ib name=_Database_Compatibility_for_GT></a>  </div>  <h6>    <a id=dcn name=Upgrade_notes_Database_Files_0_8945727311563727></a>Database Compatibility Notes  </h6>  <a id=g5qa name=_Database_Compatibility_for_GT></a>  <ul>    <li>      <div>        <a id=qdzk name=_Database_Compatibility_for_GT></a>Changes to the database file header may occur in any release.&nbsp; GT.M automatically upgrades database file headers as needed.&nbsp; Any changes to database file headers are upward and downward compatible within a major database release number, that is, although processes from only one GT.M release can access a database file at any given time, processes running different GT.M releases with the same major release number can access a database file at different times.      </div>    </li>    <li>      <div>        <a id=lx_3 name=_Database_Compatibility_for_GT></a>Databases created with V5.3-004 and later can grow to a maximum size of 224M (234,881,024) blocks.&nbsp; This means, for example, that with an 8KB block size, the maximum database file size is 1,792GB; this is effectively the size of a single global variable that has a region to itself; a database consists of any number of global variables.&nbsp; A database created with GT.M versions V5.0-000 through V5.3-003 can be upgraded with MUPIP UPGRADE to increase the limit on database file size from 128M to 224M blocks.      </div>    </li>    <li>      <div>        <a id=zu5i name=_Database_Compatibility_for_GT></a>Databases created with V5.0-000 through V5.3-003 have a maximum size of 128M (134,217,728) blocks.&nbsp; Until and unless a database created with V5.3-004 (or later), or created in V5.0-000 through V5.3-003, exceeds the 128M block limit of earlier V5 GT.M releases, it can be accessed by releases V5.0-000 through V5.3-003.&nbsp;      </div>    </li>  </ul>  <h4>    <a id=Stage3 name=Stage_3_20156017953353456_4337_5165339902444269></a>Stage 3: Upgrading your Replication Instance File  </h4>  <a id=j9nh name=_Database_Compatibility_for_GT></a>  <div>    <a id=hkt4 name=_Database_Compatibility_for_GT></a>If you are running a logical multi-site (LMS) application configuration on a UNIX platform, then you need to recreate the replication instance file using the <font face="Courier New">MUPIP REPLICATE -INSTANCE_CREATE</font> command whenever your upgrade changes GT.M from a 32-bit implementation to a 64-bit implementation (or potentially vice versa on the x86 platform).&nbsp; If your upgrade does not include a change between a 32- and 64-bit implementation then you do not need to recreate the replication instance file.&nbsp; For example, on Linux systems, you do not have to recreate the replication instance file if you upgrade from 32-bit pre V5.3-001 to 32-bit V5.3-001 or later. You have to recreate the replication instance file only for the upgrade scenarios below.  </div>  <p>    <a id=fqvj name=_Database_Compatibility_for_GT></a>&nbsp;  </p>  <p>    <a id=lcdk name=_Database_Compatibility_for_GT></a>Note: When upgrading from a 32-bit GT.M version to a 64-bit GT.M version you always need to recreate the replication instance files.&nbsp; This includes upgrades from V5.3-000 or prior versions to GT.M V5.3-001 or later on AIX or 64-bit Linux and upgrades from V5.3-001 or prior versions to GT.M V5.3-002 or later on Solaris.&nbsp; After creating new replication instance files, always start it with the <font face="Courier New">-UPDATERESYNC</font> qualifier.&nbsp; Using pre-existing instance files (as opposed to creating new instance files) could cause any process that reads the instance file (which includes the Source Server, receiver server, update process and GT.M processes on an originating instance) to abnormally terminate with errors ranging from REPLINSTSECMTCH to a SIG-11 (which would create a corefile).<br>  </p>  <p>    <a id=fqte name=_Database_Compatibility_for_GT></a>  </p>  <p>    <a id=dzeu name=_Database_Compatibility_for_GT></a>  </p>  <p>    <a id=ttmi name=_Database_Compatibility_for_GT></a><br>  </p>  <p>    <a id=pihi name=_Database_Compatibility_for_GT></a>In the following three scenarios, your Source Server process terminates abnormally if you do not recreate the replication instance file:  </p>  <p>    <a id=p8uq name=_Database_Compatibility_for_GT></a><a id=q4n- name=_Database_Compatibility_for_GT></a><br>  </p>  <ul>    <li>      <a id=aoes name=_Database_Compatibility_for_GT></a>On AIX systems, if you upgrade from 32-bit pre-V5.3-001 to 64-bit V5.3-001 or later    </li>    <li>      <a id=d7nk name=_Database_Compatibility_for_GT></a>On Linux systems, if you upgrade from a 32-bit pre-V5.3-001 to 64-bit V5.3-001 or later or from a 64-bit release to a newer 32-bit release    </li>    <li>      <a id=f3_e name=_Database_Compatibility_for_GT></a>On Sun SPARC Solaris, if you upgrade from 32-bit pre-V5.3-003 to 64-bit V5.3-003 or later<br>    </li>  </ul>  <p>    <a id=i:95 name=_Database_Compatibility_for_GT></a>&nbsp;  </p>  <p>    <a id=uvha name=_Database_Compatibility_for_GT></a>In these cases, shut down all receiver servers on other instances looking for updates from this instance, shut down this instance, recreate the instance file and then restart the receiver server on this instance with the <font face="Courier New">-UPDATERESYNC</font> qualifier.&nbsp;  </p>  <p>    <a id=hkyb name=_Database_Compatibility_for_GT></a>&nbsp;  </p>  <p>    <a id=b-_i name=_Database_Compatibility_for_GT></a>Note: Without the UPDATERESYNC qualifier, the replicating instance synchronizes with the originating instance using state information from both instances and potentially rolling back information on the replicating instance. The <font face="Courier New">UPDATERESYNC</font> qualifier declares the replicating instance to be in a wholesome state matching some prior (or current) state of the originating instance; it causes MUPIP to update the information in the replication instance file of the originating instance and not modify information currently in the database on the replicating instance.&nbsp; After this command, the replicating instance catches up to the originating instance starting from its own current state. Use <a id=lb.l name=_Database_Compatibility_for_GT></a><font face="Courier New">UPDATERESYNC</font> only when you are absolutely certain that the replicating instance database was shut down normally<a id=wmqs name=_Database_Compatibility_for_GT></a>&nbsp;with no errors<a id=zp0n name=_Database_Compatibility_for_GT></a>, or <a id=ht4u name=_Database_Compatibility_for_GT></a>appropriately<a id=o78: name=_Database_Compatibility_for_GT></a> copied from another instance with no errors<a id=sbza name=_Database_Compatibility_for_GT></a>.<br>  </p>  <p>    <a id=noxx name=_Database_Compatibility_for_GT></a>&nbsp;  </p>  <div>    <a id=aogb name=_Database_Compatibility_for_GT></a>You must always follow the steps in the Multi-Site Replication technical bulletin when migrating from a logical dual site (LDS) configuration to an LMS configuration, even if you are not changing GT.M releases.  </div>  <h4>    <a id=Stage4 name=Stage_4_5038444195635015_20776_386436313357971></a>Stage 4: Upgrading your Journal Files  </h4>  <a id=kac4 name=_Database_Compatibility_for_GT></a>  <p>    <a id=_Database_Compatibility_for_GT_6645986153670779 name=_Database_Compatibility_for_GT_6645986153670779></a><b>To upgrade from any prior GT.M version:</b>&nbsp;  </p>  <p>  </p>  <div>    &nbsp;  </div>  <ul>    <li>      <a id=xg:e name=_Database_Compatibility_for_GT></a>Create a fresh backup of your database.    </li>    <li>      <a id=rcph name=_Database_Compatibility_for_GT></a>Generate new journal files (without back-links).    </li>  </ul>  <p>    <a id=n:.a name=_Database_Compatibility_for_GT></a>&nbsp;  </p>  <div>    <a id=ok.e name=_Database_Compatibility_for_GT></a>Important: This is necessary because MUPIP cannot use journal files from a release other than its own for RECOVER or ROLLBACK.&nbsp;  </div>  <div>    &nbsp;  </div>  <div class=sect2>    <div class=titlepage>      <p class=returntotop>        <a href=http://docs.google.com/Doc?docid=0AbNlqcYfBNbiZGhwcjR6bXBfMjloczc2OHNjYw&amp;hl=en#Table_of_Contents_510593612128_7471010945331905 target=_blank title="Click here to move to the Table of Contents"></a><a href=#toc id=awj8 target=_self title="Return to Table of Contents">Return to Table of Contents</a>      </p>      <h3 class=title>        <a id=_Managing_M_mode_and_UTF_8_mod name=_Managing_M_mode_and_UTF_8_mod></a><a id=id1033517></a>Managing M mode and UTF-8 mode      </h3>    </div>    <p>      On selected platforms, with <a href=http://icu-project.org/ id=cg4w target=_blank title="Click here to visit the International Components for Unicode home page">International Components for Unicode</a> (ICU) version 3.6 or later installed, GT.M's UTF-8 mode provides support for <a href=http://unicode.org/ id=oqah target=_blank title="Click here to visit the home page of the Unicode Consortium">Unicode</a> (ISO/IEC-10646) character strings.&nbsp; On other platforms, or on a system that does not have ICU 3.6 or later installed, GT.M only supports M mode.    </p>    <p>    </p>    <div>      &nbsp;    </div>    <p>      On a system that has ICU installed, GT.M installs support for both M mode and UTF-8 mode, including a <font face="courier new">utf8</font> subdirectory of the directory where GT.M is installed.&nbsp; From the same source file, depending upon the value of the environment variable <font face="courier new">$gtm_chset</font>, the GT.M compiler generates an object file either for M mode or UTF-8 mode.&nbsp; GT.M generates a new object file when an object file is older than the source file and was generated with the same setting of <font face="courier new">$gtm_chset</font>/<font face="courier new">$ZCHset</font>.&nbsp; A GT.M process triggers an error if it encounters an object file generated with a different setting of <font face="courier new">$gtm_chset</font>/<font face="courier new">$ZCHset</font> than that processes' current value.&nbsp;&nbsp;    </p>    <p>    </p>    <div>      &nbsp;    </div>    <p>      Always generate an M object module with a value of <font face="courier new">$gtm_chset</font>/<font face="courier new">$ZCHset</font> matching the value processes executing that module will have.&nbsp; As the GT.M installation itself contains utility programs written in M, their object files also conform to this rule.&nbsp; In order to use utility programs in both M mode and UTF-8 mode, the GT.M installation ensures that both M and UTF-8 versions of object modules exist, the latter in the <font face="courier new">utf8</font> subdirectory.&nbsp; This technique of segregating the object modules by their compilation mode prevents both frequent recompiles and errors in installations where both modes are in use.&nbsp; If your installation uses both modes, consider a similar pattern for structuring application object code repositories.    </p>    <p>      &nbsp;    </p>    <p>      GT.M is installed in a parent directory and a <font face="courier new">utf8</font> subdirectory as follows:&nbsp;&nbsp;    </p>    <div>      &nbsp;    </div>    <div class=itemizedlist>      <ul>        <li>          <p>            Actual files for GT.M executable programs (<font face="courier new">mumps</font>, <font face="courier new">mupip</font>, <font face="courier new">dse</font>, <font face="courier new">lke</font>, and so on) are in the parent directory, that is, the location specified for installation.          </p>        </li>        <li>          <p>            Object files for programs written in M (GDE, utilities) have two versions - one compiled with support for <span class=trademark>Unicode</span> in the <font face="courier new">utf8</font> subdirectory, and one compiled without support for <span class=trademark>Unicode</span> in the parent directory.&nbsp; Installing GT.M generates both the versions of object files, as long as ICU 3.6 or greater is installed and visible to GT.M when GT.M is installed.          </p>        </li>        <li>          <p>            The <font face="courier new">utf8</font> subdirectory has files called <font face="courier new">mumps</font>, <font face="courier new">mupip</font>, <font face="courier new">dse</font>, <font face="courier new">lke</font>, and so on, which are relative symbolic links to the executables in the parent directory (for example, <font face="courier new">mumps</font> is the symbolic link <font face="courier new">../mumps</font>).          </p>        </li>        <li>          <p>            When a shell process sources the shell scripts <span class=emphasis><i>gtmprofile</i></span> or <span class=emphasis><i>gtmcshrc</i></span>, the behavior is as follows:&nbsp; &nbsp;&nbsp;          </p>        </li>        <div class=itemizedlist>          <ul>            <li>              <p>                If <font face="courier new">$gtm_chset</font> is <font face="courier new">"m"</font>, <font face="courier new">"M"</font> or undefined, there is no change from the previous GT.M versions to the value of the environment variable <font face="courier new">$gtmroutines</font>.              </p>            </li>            <li>              <p>                If <font face="courier new">$gtm_chset</font> is <font face="courier new">"UTF-8"</font> (the check is case-insensitive),              </p>              <div>                &nbsp;              </div>            </li>            <div class=itemizedlist>              <ul>                <li>                  <p>                    <font face="courier new">$gtm_dist</font> is set to the <font face="courier new">utf8</font> subdirectory (that is, if GT.M is installed in <font face="courier new">/usr/lib/fis-gtm/gtm_V5.4-001_i686</font>, then <font face="courier new">gtmprofile</font> and <font face="courier new">gtmcshrc</font> set <font face="courier new">$gtm_dist</font> to <font face="courier new">/usr/lib/fis-gtm/gtm_V5.4-001_i686/utf8</font>).                  </p>                </li>                <li>                  <p>                    The last element of <font face="courier new">$gtmroutines</font> is <font face="courier new">$gtm_dist($gtm_dist/..)</font> so that the source files in the parent directory for utility programs are matched with object files in the <font face="courier new">utf8</font> subdirectory.                  </p>                </li>              </ul>              <div>                &nbsp;              </div>            </div>          </ul>        </div>      </ul>    </div>    <p>      For more information on <i>gtmprofile</i> and <i>gtmcshrc</i>, refer to the "<a href=../books/ao/UNIX_manual/ch03.html id=ac51 title="UNIX Administration and Operations Guide">Basic Operations</a>" chapter of UNIX Administration and Operations Guide.<br>    </p>    <h4>      <a id=Compiling_ICU name=Compiling_ICU></a>Compiling ICU&nbsp;    </h4>    GT.M versions prior to V5.3-004 require exactly ICU 3.6, however, V5.3-004 (or later) accept ICU 3.6 or later. For sample instructions to download ICU, configure it not to use multi-threading, and compiling it for various platforms, refer to "<a href=../books/ao/UNIX_manual/apc.html id=r113 title="UNIX Administration and Operations Guide">Appendix C: Compiling ICU on GT.M supported platforms</a>" of UNIX Administration and Operations Guide.<br>    <br>    Although GT.M uses ICU, ICU is not FIS software and FIS does not support ICU. The sample instructions for installing and configuring ICU are merely provided as a convenience to you.<br>    <br>    Also, note that download sites, versions of compilers, and milli and micro releases of ICU may have changed ICU since the embedded dates when these instructions were tested making them out-of-date. Therefore, these instructions must be considered examples, not a cookbook.  </div>  <div class=sect2>    <div class=titlepage>      <br>      <p class=returntotop>      </p>      <div>        &nbsp;      </div>      <p class=returntotop>        <a href=http://docs.google.com/Doc?docid=0AbNlqcYfBNbiZGhwcjR6bXBfMjloczc2OHNjYw&amp;hl=en#Table_of_Contents_510593612128_7471010945331905 target=_blank title="Click here to move to the Table of Contents"></a><a href=#toc id=tfqy target=_self title="Return to Table of Contents">Return to Table of Contents</a>      </p>      <h3 class=title>        <a id=_Setting_the_environment_varia name=_Setting_the_environment_varia></a><a id=id1032999></a>Setting the environment variable TERM      </h3>    </div>    <p>      The environment variable <font face="courier new">$TERM</font> must specify a terminfo entry that accurately matches the terminal (or terminal emulator) settings. Refer to the terminfo man pages for more information on the terminal settings of the platform where GT.M needs to run.    </p>    <p>    </p>    <div>      &nbsp;    </div>    <ul>      <li>        Some terminfo entries may seem to work properly but fail to recognize function key sequences or position the cursor properly in response to escape sequences from GT.M.&nbsp; GT.M itself does not have any knowledge of specific terminal control characteristics.&nbsp; Therefore, it is important to specify the right terminfo entry to let GT.M communicate correctly with the terminal.&nbsp; You may need to add new terminfo entries depending on their specific platform and implementation.&nbsp; The terminal (emulator) vendor may also be able to help.      </li>      <li>        GT.M uses the following terminfo capabilities.&nbsp; The full variable name is followed by the capname in parenthesis:        <div>          <span class=emphasis><i>auto_right_margin(am), clr_eos(ed), clr_eol(el), columns(cols), cursor_address(cup), cursor_down(cud1), cursor_left(cub1), cursor_right(cuf1), cursor_up(cuu1), eat_newline_glitch(xenl), key_backspace(kbs), key_dc(kdch1), key_down(kcud1), key_left(kcub1), key_right(kcuf1), key_up(kcuu1), key_insert(kich1), keypad_local(rmkx), keypad_xmit(smkx), lines(lines).</i></span>        </div>      </li>    </ul>    <p>    </p>    <div>      &nbsp;    </div>    <p>      GT.M sends <span class=emphasis><i>keypad_xmit </i></span>before terminal reads for direct mode and READs (other than READ *) if EDITING is enabled. GT.M sends <span class=emphasis><i>keypad_local </i></span>after these terminal reads.    </p>  </div>  <div class=sect2>    <div class=titlepage>      <p class=returntotop>      </p>      <div>        &nbsp;      </div>      <p class=returntotop>        <a href=http://docs.google.com/Doc?docid=0AbNlqcYfBNbiZGhwcjR6bXBfMjloczc2OHNjYw&amp;hl=en#Table_of_Contents_510593612128_7471010945331905 target=_blank title="Click here to move to the Table of Contents"></a><a href=#toc id=bgtx target=_self title="Return to Table of Contents">Return to Table of Contents</a>      </p>      <h3 class=title>        <a id=_Installing_Compression_Librar name=_Installing_Compression_Librar></a><a id=id1033781></a>Installing Compression Libraries      </h3>    </div>    <p>      If you plan to use the optional compression facility for replication, you must provide the compression library.&nbsp; The GT.M interface for compression libraries accepts the <a href=http://zlib.net/ target=_blank title="Click here to visit the zlib home page">zlib</a> compression libraries without any need for adaptation.&nbsp; These libraries are included in many UNIX distributions and are downloadable from the <a href=http://zlib.net/ target=_blank title="Click here to visit the zlib home page">zlib home page</a>.&nbsp; If you prefer to use other compression libraries, you need to configure or adapt them to provide the same API provided by zlib.&nbsp; Simple instructions for compiling zlib on a number of platforms follow.&nbsp; Although GT.M uses zlib, zlib is not FIS software and FIS does not support zlib.&nbsp; These instructions are merely provided as a convenience to you.    </p>    <br>    <p>    </p>    <div>      If a package for zlib is available with your operating system, FIS suggests that you use it rather than building your own.    </div>    <p style=MARGIN-LEFT:0px;MARGIN-RIGHT:0px>    </p>    <br>    <p>      <span class=emphasis><i>Solaris/cc compiler from Sun Studio:</i></span>    </p>    <div style=MARGIN-LEFT:40px>      <font face="courier new">./configure --shared </font>      <div style="FONT-FAMILY:Courier New">        <font face="courier new">make CFLAGS="-KPIC -m64"</font>      </div>      <div>        &nbsp;      </div>    </div>    <p>      <span class=emphasis><i>HP-UX(IA64)/HP C compiler:</i></span>    </p>    <div style="FONT-FAMILY:Courier New;MARGIN-LEFT:40px">      ./configure --shared      <div>        make CFLAGS="+DD64"      </div>      <div>        &nbsp;      </div>    </div>    <p>      <span class=emphasis><i>AIX/XL compiler: </i></span>    </p>    <div style="FONT-FAMILY:Courier New;MARGIN-LEFT:40px">      ./configure --shared      <div>        Add -q64 to the LDFLAGS line of the Makefile      </div>      <div>        make CFLAGS="-q64"      </div>      <div>        &nbsp;      </div>    </div>    <p>      <span class=emphasis><i>Linux/gcc: </i></span>    </p>    <div style="FONT-FAMILY:Courier New;MARGIN-LEFT:40px">      ./configure --shared      <div>        make CFLAGS="-m64"      </div>      <div>        &nbsp;      </div>    </div>    <div>      <span class=emphasis><font face=verdana><i>z/OS</i></font></span><font face=verdana>:</font>    </div>    <div>      &nbsp;    </div>    <div style=MARGIN-LEFT:40px>      Refer to the <a href=GTM_on_z_OS.html id=nn2b title="Read the section on steps we used to install zlib on z/OS">steps we used to install zlib on z/OS in the GT.M for z/OS technical bulletin</a>.<br>      <br>    </div>    <p>      By default, GT.M searches for the <font face="courier new">libz.so</font> shared library (<font face="courier new">libz.sl</font> on HPUX PA-RISC) in the standard system library directories (for example, <font face="courier new">/usr/lib</font>, <font face="courier new">/usr/local/lib</font>, <font face="courier new">/usr/local/lib64</font>).&nbsp; If the shared library is installed in a non-standard location, before starting replication, you must ensure that the environment variable <font face="courier new">$LIBPATH</font> (AIX and z/OS) or <font face="courier new">$LD_LIBRARY_PATH</font> (other UNIX platforms) includes the directory containung the library.&nbsp; The source and receiver server link the shared library at runtime.&nbsp; If this fails for any reason (such as file not found, or insufficient authorization), the replication logic logs a DLLNOOPEN error and continues with no compression.    </p>  </div>  <br>  <h1 class=title>    <a id=Change_History_905621674941811 name=Change_History_905621674941811></a>Change History&nbsp;  </h1>  <div class=titlepage>    <h3 class=title>      <a id=V5_4_000_3320129335714417_6306_8439401756619074 name=V5_4_000_3320129335714417_6306_8439401756619074></a><a id=lzv1></a>V5.4-001    </h3>  </div>  <p class=sect2>    Fixes and enhancements specific to <font style=BACKGROUND-COLOR:#ffffff>V5.4-001</font> are:&nbsp;&nbsp;&nbsp;  </p>  <p class=sect2>    <br>  </p>  <p class=sect2>  </p>  <table border=1 bordercolor=#000000 cellpadding=3 cellspacing=0 width=100%>    <tbody>    <tr>      <td height=17 width=15%>        <a href=#S9A09-001678 id=ojij target=_self title=S9A09-001678>S9A09-001678</a>      </td>      <td>        GT.M now supports the z/Linux platform      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#S9C05-002098 id=z7c2 target=_self title=S9C05-002098>S9C05-002098</a>      </td>      <td align=left valign=top>        The JOB command accepts empty parameters      </td>    </tr>    <tr>      <td height=17 width=15%>        <a href=#S9C10-002234 id=w05e target=_self title=S9C10-002234>S9C10-002234</a>      </td>      <td>        $QLENGTH() and $QSUBSCRIPT() now deal with $[Z]CHAR() representations      </td>    </tr>    <tr>      <td height=17 width=15%>        <a href=#S9E12-002513 id=znj6 target=_self title=S9E12-002513>S9E12-002513</a>      </td>      <td>        ZHELP is now more robust      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#S9J07-002730 id=q1z6 target=_self title=S9J07-002730>S9J07-002730</a>      </td>      <td align=left valign=top>        Better status summary report from MUPIP RUNDOWN      </td>    </tr>    <tr>      <td height=17 width=15%>        <a href=#S9F03-002532 id=lfnm target=_self title=S9F03-002532>S9F03-002532</a>      </td>      <td>        The JOB command accepts&nbsp; an empty actuallist      </td>    </tr>    <tr>      <td height=17 width=15%>        <a href=#S9K03-002762 id=iskd target=_self title=S9K03-002762>S9K03-002762</a>      </td>      <td>        New environment variable <font face="'Courier New'">gtm_snaptmpdir</font> on UNIX      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#S9K04-002765 id=wb1_ target=_self title=S9K04-002765>S9K04-002765</a>      </td>      <td align=left valign=top>        Two new options for V5CBSU on VMS      </td>    </tr>    <tr>      <td height=17 width=15%>        <a href=#S9K04-002769 id=d3ei target=_self title=S9K04-002769>S9K04-002769</a>      </td>      <td>        Improve M profiling resolution on UNIX      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#S9K05-002769 id=ctz- target=_self title=S9K05-002769>S9K05-002769</a>      </td>      <td align=left valign=top>        No SIG-11 on recovery of critical section lock on the journal pool after forcibly killing its UNIX holding process      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#S9K05-002770 id=ctz- target=_self title=S9K05-002770>S9K05-002770</a>      </td>      <td align=left valign=top>The SOCKET device read is now better protected from SEGV (SIG-11 in UNIX or ACCVIO in OpenVMS) errors that may occur from INTRPT during READs.       </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#S9K05-002772 id=f1oq target=_self title=S9K05-002772>S9K05-002772</a>      </td>      <td align=left valign=top>        Protect alias containers with multiple subscripts from inappropriate garbage collection      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9C08-002102 id=a.ia target=_self title=C9C08-002102>C9C08-002102</a>      </td>      <td align=left valign=top>        Improved handling of TCP connect() system calls for the source server and the GT.CM UNIX GNP server      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9E12-002681 id=o:zf target=_self title=C9E12-002681>C9E12-002681</a>      </td>      <td align=left valign=top>        GT.M call-in and call-out accepts names starting with percent (%)      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9I03-002965 id=jsko target=_self title=C9I03-002965>C9I03-002965</a>      </td>      <td align=left valign=top>        Attempts to update a database which shares journals with another active database causes an error      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9J03-003105 id=kzph target=_self title=C9J03-003105>C9J03-003105</a>      </td>      <td align=left valign=top>        On UNIX platforms, GT.M journal file header size is now 64K      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9J04-003116 id=ju25 target=_self title=C9J04-003116>C9J04-003116</a>      </td>      <td align=left valign=top>        MUPIP SET -JOURNAL=ON resumes journaling even if the current generation journal file is damaged or moved      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K02-003237 id=h-d4 target=_self title=C9K02-003237>C9K02-003237</a>      </td>      <td align=left valign=top>        On UNIX platforms, GT.M extends the gtm_procstuckexec facility to SEMWT2LONG and COMMITWAITPID errors      </td>    </tr>    <tr>      <td height=17 width=15%>        <a href=#C9K02-003240 id=m35i target=_self title=C9K02-003240>C9K02-003240</a>      </td>      <td>        The UNIX trigger facility is now production grade      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K03-003246 id=r8rd target=_self title=C9K03-003246>C9K03-003246</a>      </td>      <td align=left valign=top>        Improved snapshot error-handling and temporary file cleanup with MUPIP INTEG      </td>    </tr>    <tr>      <td height=17 width=15%>        <a href=#C9K03-003247 id=afur target=_self title=C9K03-003247>C9K03-003247</a>      </td>      <td>        No more "libgcrypt warning: Missing initialization" in UNIX operator log      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K03-003248 id=kjsf target=_self title=C9K03-003248>C9K03-003248</a>      </td>      <td align=left valign=top>        New <font face="'Courier New'">gtm_lvscale</font> UNIX environment variable and GTM_LVSCALE VMS logical to enhance performance with large numbers of local variables      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K04-003253 id=rv:8 target=_self title=C9K04-003253>C9K04-003253</a>      </td>      <td align=left valign=top>        GETPASS (source and object files) stored in the distribution directories      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K04-003254 id=o392 target=_self title=C9K04-003254>C9K04-003254</a>      </td>      <td align=left valign=top>        GT.M handles VIEW "JNLFLUSH" more appropriately inside a TP transaction      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K04-003258 id=mtnz target=_self title=C9K04-003258>C9K04-003258</a>      </td>      <td align=left valign=top>        Encryption plugin reference implementation scripts more robust than their predecessors      </td>    </tr>    <tr>      <td height=17 width=15%>        <a href=#C9K04-003259 id=nxwb target=_self title=C9K04-003259>C9K04-003259</a>      </td>      <td>        <font color=#000000><font face=verdana>MUPIP INTEG correctly calculates the total number of blocks when it initiates a snapshot. </font></font>      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K04-003260 id=yutx target=_self title=C9K04-003260>C9K04-003260</a>      </td>      <td align=left valign=top>        MUPIP JOURNAL ROLLBACK or RECOVER BACKWARD work even they are interrupted and reissued      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K04-003261 id=b9lt target=_self title=C9K04-003261>C9K04-003261</a>      </td>      <td align=left valign=top>        DSE appropriately manages the database critical section and returns to the prompt under all known conditions      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K04-003262 id=lvr0 target=_self title=C9K04-003262>C9K04-003262</a>      </td>      <td align=left valign=top>        GT.M on AIX no longer causes process death when other sofware brings in threading&nbsp;      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K04-003263 id=az2y target=_self title=C9K04-003263>C9K04-003263</a>      </td>      <td align=left valign=top>        On UNIX platforms in M mode, GT.M returns the correct value for $X for non-fixed READs from sequential disk, FIFO, and PIPE      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K04-003264 id=p1so target=_self title=C9K04-003264>C9K04-003264</a>      </td>      <td align=left valign=top>        Most UTF-8 compatible functions are now available in M-mode on OpenVMS      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K04-003265 id=hqj4 target=_self title=C9K04-003265>C9K04-003265</a>      </td>      <td align=left valign=top>        GT.M can concurrently update more than 64 databases      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K05-003240 id=s9x6 target=_self title="C9K05-003240 collection"></a><a href=#C9K03-003270 id=q_tu target=_self title=C9K03-003270>C9K03-003270</a>      </td>      <td align=left valign=top>        On UNIX platforms, MUPIP INTEG stops for a snapshot file error and reports snapshot file authorization issues      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K05-003272 id=j.x6 target=_self title=C9K05-003272>C9K05-003272</a>      </td>      <td align=left valign=top>        MUPIP REPLIC -SOURCE -SHOWBACKLOG -INST shows the backlog even if the Source Server is not alive      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K05-003273 id=tha_ target=_self title=C9K05-003273>C9K05-003273</a>      </td>      <td align=left valign=top>        MUPIP JOURNAL RECOVER and ROLLBACK exit cleanly even if stopped prematurely by a MUPIP STOP      </td>    </tr>    <tr>      <td height=17 width=15%>        <a href=#C9K06-003276 id=vzl6 target=_self title=C9K06-003276>C9K06-003276</a>      </td>      <td>        <p>          Corrections to the UNIX gtmprofile script        </p>      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K06-003278 id=idg5 target=_self title=C9K06-003278></a><a href=#MUPIP_C9K06-003278 id=xm8y target=_self title="MUPIP C9K06-003278">C9K06-003278</a>      </td>      <td align=left valign=top>        On UNIX platforms, issuing a <font face="Courier New">MUPIP STOP</font> on a Receiver Server now also shuts down the Update Process      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K06-003279 id=ev7e target=_self title=C9K06-003279>C9K06-003279</a>      </td>      <td align=left valign=top>        <p>          Alias container appropriately maintained when a MERGE replaces it        </p>      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K06-003281 id=yt30 target=_self title=C9K06-003281>C9K06-003281</a>      </td>      <td align=left valign=top>        UNIX MUPIP ENDIANCVT now normalizes some fields in files copied using a non-GT.M method      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K06-003283 id=z2n0 target=_self title=C9K06-003283>C9K06-003283</a>      </td>      <td align=left valign=top>        <p>          UNIX gtmsecshr displays more detailed error messages        </p>      </td>    </tr>    <tr>      <td align=left height=17 valign=top width=15%>        <a href=#C9K06-003284 id=qd4x target=_self title=C9K06-003284>C9K06-003284</a>      </td>      <td align=left valign=top>        GT.M prevents possible deadlocks when using MUPIP STOP on source and receiver servers      </td>    </tr>    <tr>      <td align=left height=17 style=FONT-FAMILY:Verdana valign=top width=15%>        <font color=#000000 size=2><a href=#C9K06-003286 id=jci: target=_self title=C9K06-003286>C9K06-003286</a></font>      </td>      <td align=left valign=top>        <p style="MARGIN:0pt 0pt 0pt">          <font color=#000000>GT.M now accepts only ASCII characters where the standard (or GT.M) specify ASCII characters for language elements, such as global variable names.</font>        </p>      </td>    </tr>    <tr>      <td height=17 style=FONT-FAMILY:Verdana width=15%>        <a href=#C9K06-003290 id=r9kn target=_self title=C9K06-003290>C9K06-003290</a><br>      </td>      <td>        MUPIP RESTORE and MUPIP BACKUP using TCP handle errors more robustly.<br>      </td>    </tr>    </tbody>  </table>  <br>  <p>  </p></div><div class=titlepage>  <p class=returntotop>    <a href=#toc id=v_f- target=_self title="Return to Table of Contents">Return to Table of Contents</a><a href=http://docs.google.com/Doc?docid=0AcenITK__xu5ZHBxcTZoNl80NWdkejg3YmRi&amp;hl=en#TOC id=e5gn target=_self title="Return to Table of Contents"></a>  </p>  <h2 class=title>    <a id=M_Database_Access_122941628389_06001373874842497 name=M_Database_Access_122941628389_06001373874842497></a>M-Database Access  </h2></div><div class=itemizedlist>  <ul>  </ul>  <ul>  </ul>  <ul>    <li>      G<a id=S9K05-002769 name=S9K05-002769></a>T.M now properly recovers the critical section lock for the journal pool from a process that was holding it but was terminated forcibly (by a kill -9). Previously, the recovering process would end abnormally with a SIG-11. Note that FIS strongly recommends using MUPIP STOP&nbsp; to terminate GT.M processes; resort to kill -9 only when you have exhausted all other alternatives. [UNIX] (S9K05-002769)<br>      <br>    </li>    <li>      <a id=C9I03-002965 name=C9I03-002965></a>GT.M now gives an error if a process attempts to update a journaled database region which shares its journal files with another active database, for example, updates to database backup taken without specifying -BKUPDBJNL=OFF. Previously, such updates caused creation of new journals in a way that interfered with journaling in the active database environment, because of improper back-links and confused journal file switching. (C9I03-002965)<br>      <br>    </li>    <li>      T<a id=C9J03-003105 name=C9J03-003105></a>he journal file header size is now 64KB. This ensures that the start of journal data is aligned at a filesystem block boundary, which makes aligned writes to the journal file possible, in turn improving journal file write performance. The revised defaults and minimums are in line with current hardware capabilities and better suited to production environments.<br>      <br>      In addition to changing the journal file format, this also necessitated a change in few journaling feature limits.<br>      <br>      The change is tabulated below.<br>      <br>      Values that do not have a KB or MB at the end represent 512-byte blocks.<br>      <table border=1 bordercolor=#000000 cellpadding=3 cellspacing=0 id=x_0a>        <tbody>        <tr>          <td style=FONT-FAMILY:Verdana width=25%>            <b>Journal Characteristic</b>          </td>          <td style=FONT-FAMILY:Verdana width=25%>            <b>New</b>          </td>          <td style=FONT-FAMILY:Verdana width=25%>            <b>Old</b>          </td>        </tr>        <tr>          <td style=FONT-FAMILY:Verdana width=25%>            Journal format          </td>          <td style=FONT-FAMILY:Verdana width=25%>            V20          </td>          <td style=FONT-FAMILY:Verdana width=25%>            V19          </td>        </tr>        <tr>          <td style=FONT-FAMILY:Verdana width=25%>            Allocation minimum          </td>          <td style=FONT-FAMILY:Verdana width=25%>            200          </td>          <td style=FONT-FAMILY:Verdana width=25%>            10          </td>        </tr>        <tr>          <td style=FONT-FAMILY:Verdana width=25%>            Allocation default          </td>          <td style=FONT-FAMILY:Verdana width=25%>            2048          </td>          <td style=FONT-FAMILY:Verdana width=25%>            100          </td>        </tr>        <tr>          <td style=FONT-FAMILY:Verdana width=25%>            Extension default          </td>          <td style=FONT-FAMILY:Verdana width=25%>            2048          </td>          <td style=FONT-FAMILY:Verdana width=25%>            100          </td>        </tr>        <tr>          <td style=FONT-FAMILY:Verdana width=25%>            Alignsize minimum          </td>          <td style=FONT-FAMILY:Verdana width=25%>            256 &nbsp;/* i.e. 16KB -&gt; 128KB */          </td>          <td style=FONT-FAMILY:Verdana width=25%>            32          </td>        </tr>        <tr>          <td style=FONT-FAMILY:Verdana width=25%>            Alignsize default          </td>          <td style=FONT-FAMILY:Verdana width=25%>            2048 &nbsp;/* i.e. 64KB -&gt;&nbsp;&nbsp; 1MB */          </td>          <td style=FONT-FAMILY:Verdana width=25%>            128          </td>        </tr>        <tr>          <td style=FONT-FAMILY:Verdana width=25%>            Autoswitchlimit minimum          </td>          <td style=FONT-FAMILY:Verdana width=25%>            16*128KB &nbsp;/* new autoswitchlimit minimum = 16 * alignsize-minimum */          </td>          <td style=FONT-FAMILY:Verdana width=25%>            128*16KB          </td>        </tr>        </tbody>      </table>      <br>      It is possible that a global directory file created by a previous version of GDE might have journal settings which are less than the new minimums. In this case, a GDE EXIT using the new GT.M version automatically updates those values to the new minimums.<br>      <br>      Similarly, the first MUPIP SET JOURNAL run using the new version of GT.M automatically updates a database that has journal settings which are less than the new minimums. [UNIX] (C9J03-003105)<br>      <br>    </li>  </ul></div><div class=itemizedlist>  <ul>    <li>      <a id=C9K02-003240 name=C9K02-003240></a>The trigger facility is now considered suitable for production use. For more information, see the separate section on "<a href=#C9K02_003240_Trigger_Fixes_for_992911846874506 id=rum4 target=_self title="C9K05-003240 - Fixes for GT.M Triggers on UNIX">C9K02-003240 - Fixes for GT.M Triggers on UNIX</a>". (C9K02-003240)<br>      <br>    </li>    <li>      <a id=C9K03-003247 name=C9K03-003247></a>Encryption initialization no longer issues "libgcrypt warning: Missing initialization" in the operator log. In V5.3-004 and V5.4-004A, GT.M put such inappropriate warnings in the operator log. [UNIX]( C9K03-003247)<br>      <br>    </li>  </ul>  <ul>    <li>      <font color=#000000><a id=C9K04-003258 name=C9K04-003258></a>There are several enhancements to the encryption plugin reference implementation.<br>      <br>      </font>The scripts of the reference implementation of the encryption plugin have significant improvments and the database encryption technical bulletin has been reworked to reflect the changes. Since the interface between GT.M and the plugin has not changed, and the changes affect only the reference implementation included with GT.M, if you have your own custom plugin, you can ignore changes to the encryption plugin reference implementation.<br>      <br>      The scripts of the previous reference implementation use the Korn shell (hence their *.ksh file names). Their replacements need only the standard POSIX shell <font face="'Courier New'">/bin/sh</font> and have *.sh file names.<br>      <br>      <font color=#000000>The new encryption scripts are more robust than their predecessors, for example, <font face="Courier New">gen_keypair.sh</font> asks for the passphrase to be re-entered for validation; its predecessor did not.</font><br>      <br>      The encryption reference implementation now supports GnuPG version 1 and version 2. Previously, it only supported version 1.<br>      <br>      When GT.M uses GnuPG version 2, GnuPG uses an agent to obtain the passphrase. The gen_keypair.sh script now creates an agent configuration file (gpg-agent.conf) needed by GnuPG when using the agent. If your implementation does not use the gen_keypair.sh script to generate the public/private key pair, then it should setup the agent configuration file. Please see the “Database Encryption Technical Bulletin” section “Special note – Gnu Privacy Guard version 2” for more details.<br>      <br>      The new <font face="'Courier New'">gen_sym_key.sh</font> script places the generated key in a file encrypted with the private key of the user creating the key. The new <font face="'Courier New'">encrypt_sign_db_key.sh</font> script, which replaces the <font face="'Courier New'">encrypt_db_key.ksh</font> script, obtains the key from the file. While the previous scripts displayed the key to the user generating key and required him/her to save it securely, the current scripts never display the key to the user and require no additional action on his/her part to save it securely.<br>      <br>      Because our testing showed entropy generation via the <font face="'Courier New'">gen_entropy.ksh</font> and <font face="'Courier New'">kill_entropy.ksh</font> scripts&nbsp; to be ineffective, those scripts have been removed without a replacement. If your computer needs additional entropy during the operation of <font face="'Courier New'">gen_keypair.sh</font> or <font face="'Courier New'">gen_sym_key.sh</font>, please consider implementing an entropy gathering daemon such as EGD (<a href=http://egd.sourceforge.net/ id=i3c: title=http://egd.sourceforge.net>http://egd.sourceforge.net</a>) or using entropy generating hardware such as the Entropy Key (<a href=http://www.entropykey.co.uk/ id=dktm title=http://www.entropykey.co.uk>http://www.entropykey.co.uk</a>).<br>      <br>      <font color=#000000>GT.M now maintains GETPASS (source and object files) only in the distribution directories (<font face="'Courier New'">$gtm_dist</font> and <font face="'Courier New'">$gtm_dist/utf8</font>). Prior versions (V5.3-004 to V5.4-000A) maintained GETPASS (source and object files) in the encryption plugin subdirectories (<font face="'Courier New'">$gtm_dist/plugin/gtmcrypt</font> and <font face="'Courier New'">$gtm_dist/plugin/gtmcrypt/utf8</font>).<br>      </font>    </li>  </ul></div><div style=MARGIN-LEFT:40px>  <div class=itemizedlist>    <br>  </div>  The encryption reference plugin build script (<font face="'Courier New'">build.sh</font>) now uses a more optimized set of compiler and linker options for building plugin. Prior versions used minimal options required to build the plugin.<font color=#000000>[UNIX] (C9K04-003253, <font color=#000000>C9K04-003258</font>)<br>  <br>  </font></div><div class=itemizedlist>  <ul>    <li>      <font color=#000000>G<a id=C9K04-003254 name=C9K04-003254></a>T.M now handles VIEW "JNLFLUSH" appropriately inside a TP transaction. Previously in unusual cases where the database had heavy contention from multiple processes, this combination could inappropriately cause a fatal GTMASSERT error, and create core files. (C9K04-003254)<br>      <br>      </font>    </li>    <li>      <a id=C9K04-003265 name=C9K04-003265></a>GT.M can now concurrently update more than 64 databases without issues. Previously, it was possible in rare scenarios for such a process to terminate abnormally with a GTMASSERT error. [UNIX] (C9K04-003265)<br>      <br>    </li>    <li>      G<a id=C9K06-003284 name=C9K06-003284></a>T.M replication now defers the handling of signals like MUPIP STOP during compression and decompression. In previous versions, the Source Server or Receiver Server could end up in a deadlock caused by nested system calls waiting for each other. [UNIX] (C9K06-003284)    </li>  </ul>  <br></div><p class=sect1>  <a href=#toc id=mk1e target=_self title="Return to Table of Contents">Return to Table of Contents</a><a href=http://docs.google.com/Doc?docid=0AcenITK__xu5ZHBxcTZoNl80NWdkejg3YmRi&amp;hl=en#TOC id=heel target=_self title="Return to Table of Contents"></a></p><div class=sect1>  <div class=titlepage>    <h2 class=title>      <a id=M_Other_Than_Database_Access_9 name=M_Other_Than_Database_Access_9></a><a id=id2487547></a>M-Other Than Database Access    </h2>  </div>  <div class=itemizedlist>    <ul>      <li>        <a id=S9A09-001678 name=S9A09-001678></a>GT.M now supports Linux on IBM System z. FIS validated this using SLES 10 and SLES 11. [z/Linux] (S9A09-001678)<br>        <br>      </li>      <li>        <font color=#000000><a id=S9F03-002532 name=S9F03-002532></a>T<a id=S9C05-002098 name=S9C05-002098></a>he JOB command now accepts empty parameters or an empty actuallist. Previously, the JOB command produced an error with any empty parameters including an empty actuallist. OpenVMS editions still do not accept empty parameters, but they now give a JOBARGMISSING error at run-time, where they used to give an</font><font color=#000000> EXPR </font><font color=#000000>error at </font><font color=#000000>compile-time. Also in OpenVMS, certain JOB setup errors such as DMLLSTMISSING no longer produce inappropriate process dump files. (S9C05-002098, S9F03-002532)<br>        <br>        </font>      </li>    </ul>  </div>  <ul>    <li>      <a id=S9C10-002234 name=S9C10-002234></a>$QLENGTH() and $QSUBSCRIPT() now accept $CHAR() and $ZCHAR() as part of strings in variable names. In UTF-8 mode, they also do character validation if BADCHAR checking is enabled. Because it's not canonic, they no longer accept -0 as a valid numeric. They do accept a two component environment with the standard (vertical-bar) delimiter. Because GT.M ignores any second environment component, as before, $QSUBSCRIPT() does not return it. Previously, These functions did not accept the forms used by $QUERY() to represent non-graphic characters, did no character validation in UTF-8 mode, accepted two component environments only with the non-standard (square-bracket) delimiters and accepted -0 as a number. (S9C10-002234)<br>      <br>    </li>    <li>      <a id=S9E12-002513 name=S9E12-002513></a>Invoking ZHELP while M profiling is on no longer triggers a GTMASSERT in Linux on x86. In addition, ZHELP on UNIX no longer attempts to read past EOF when driven from a script and restores the original device at completion. In prior versions, ZHELP failed and produced a dump file when driven from a script and inappropriately changed the current device to $PRINCIPAL. [UNIX] (S9E12-002513)<br>      <br>    </li>    <li>      <a id=S9K04-002769 name=S9K04-002769></a>The M profiling facility on UNIX now reports time in microseconds. Note that different systems may provide differing resolutions. Previously it reported time in seconds. Any programs used to analyze M profile output should be revised to take this change into account. Thanks to Grigoriy Sitkarev for the basis of this change. [UNIX] (S9K04-002769)<br>      <br>    </li>    <li>      T<a id=S9K05-002770 name=S9K05-002770></a>he SOCKET device read now has improved protection against INTRPT during READs. In prior releases, we have had reports of SEGV (SIG-11 in UNIX or ACCVIO in OpenVMS). Since we have not been able to recreate these problems in our own environment, we are not sure they are entirely corrected. (S9K05-002770)<br>      <br>    <li>      G<a id=S9K05-002772 name=S9K05-002772></a>T.M now correctly garbage collects alias container structures. Previously GT.M did not fully scan nested subscripted variables causing alias containers in any subscript level greater than 1 to be discarded during an explicit or automated garbage collection. (S9K05-002772)<br>      <br>    </li>    <li>      Both t<a id=C9C08-002102 name=C9C08-002102></a>he replication Source Server and opens of a database served via GT.CM GNP for UNIX now properly handle more status values returned from the TCP connect() system call. Previously, in some rare situations, connection attempts could inappropriately report errors such as EISCONN (Already connected) or EADDRINUSE (Address already in use). [UNIX] (C9C08-002102)<br>      <br>    </li>    <li>      G<a id=C9E12-002681 name=C9E12-002681></a>T.M now translates external function names starting with percent (%) in M to start with under-bar (_) in the external code and accepts an M name (label or routinename) starting with % as valid in the call-in definition file. In previous versions, such names caused errors. [UNIX] (C9E12-002681)<br>      <br>    </li>    <li>      G<a id=C9K02-003237 name=C9K02-003237></a>T.M now provides the $gtm_procstuckexec facility for SEMWT2LONG and COMMITWAITPID errors. In V5.4-000 &amp; V5.4-000A <font face="'Courier New'">$gtm_procstuckexec</font> did not cover these conditions. [UNIX] (C9K02-003237)<br>      <br>    </li>    <li>      <p>        <font color=#000000>G<a id=C9K03-003248 name=C9K03-003248></a>T.M now supports the <font face="'Courier New'">$gtm_lvscale</font> UNIX environment variable or GTM_LVSCALE VMS logical name which cause GT.M to "scale up" </font>performance when local variables have large numbers of subscripts<font color=#000000>. Previously, GT.M used a fixed set of of algorithms/structures to implement local variables.&nbsp;</font>While scaling increases the sizes of internal structures, resulting in increased memory usage, it may also sign<font color=#000000>ificantly increase the performance of arrays with more than a few hundred nodes at a subscript level. FIS suggests testing applications with large local variable useage first with <font face="'Courier New'">$gtm_lvscale</font> set to two (2), then increase by one (1) until performance levels off or until the memory requirements become problematic. (C9K03-003248).<br>        <br>        </font>      </p>    </li>    <li>      <font color=#000000><a id=C9K04-003262 name=C9K04-003262></a>GT.M on AIX no longer violates the design of known operations in the </font><font color=#000000>libpthread </font><font color=#000000>system threading library. GT.M is still not thread safe, but operations involving thread locks no longer fail as they did in prior releases after other software initiated threading in a process using GT.M (typically with a SIG-11 address exception). [AIX] (C9K04-003262)<br>      <br>      </font>    </li>    <li>      In M mode, G<a id=C9K04-003263 name=C9K04-003263></a>T.M now returns the correct value for $X for non-fixed READs for sequential disk (SD), FIFO, and PIPE devices.&nbsp; Previously $X returned zero (0) for non-fixed reads in M mode; it was maintained correctly prior to V52000. [UNIX] (C9K04-003263)<br>      <br>    </li>    <li>      O<a id=C9K04-003264 name=C9K04-003264></a>penVMS editions now accept $Z*() byte-oriented analogs to character-based functions as valid syntax with the same semantic as their standard analogs. $ZSUBSTR() and $ZWIDTH() also work as they do for M-mode in UNIX. Since GT.M on OpenVMS only supports M mode operation, this is appropriate and permits code written to support both M mode and UTF-8 mode on UNIX to also run on OpenVMS. In prior versions these functions gave FNOTONSYS errors. This leaves $ZCONVERT() as the only UTF-8 related function unavailable on OpenVMS. Note: this change eliminates the undocumented $ZECHAR() function on all platforms. [OpenVMS] (C9K04-003264)<br>      <br>    </li>    <li>      G<a id=C9K06-003279 name=C9K06-003279></a>T.M now properly maintains alias container state information when a MERGE into a local variable array replaces a container variable. Previously, this resulted in a (generally slow) storage leak. (C9K06-003279).<br>      <br>    </li>    <li>      <font color=#000000 face=Verdana><a id=C9K06-003286 name=C9K06-003286></a>GT.M now accepts only ASCII characters where the standard (or GT.M) specify ASCII characters for language elements, such as global variable names. In prior versions, in </font>M mode with certain locale settings, <font color=#000000 face=Verdana>some platforms treated some non-ASCII characters as valid where they should have caused an error.&nbsp; [UNIX] (C9K06-003286)</font>    </li>  </ul>  <p>    &nbsp;  </p>  <p>    <a href=#toc id=j:t1 target=_self title="Return to Table of Contents">Return to Table of Contents</a><a href=http://docs.google.com/Doc?docid=0AcenITK__xu5ZHBxcTZoNl80NWdkejg3YmRi&amp;hl=en#TOC id=u9db target=_self title="Return to Table of Contents"></a>  </p></div><div class=titlepage>  <h2 class=title>    <a id=Utilities_MUPIP_88043024385500 name=Utilities_MUPIP_88043024385500></a>Utilities-MUPIP  </h2></div><div class=itemizedlist>  <ul>    <li>      <p>        <font color=#000000>M<a id=S9J07-002730 name=S9J07-002730></a>UPIP RUNDOWN now returns a status indicating not all regions or shared memory were run down. In prior versions some cases returned a success status even when there were issues with rundown actions on </font><font color=#000000>some regions</font><font color=#000000>. (S9J07-002730)<br>        <br>        </font>      </p>    </li>    <li>      <p>        <font color=#000000><a id=S9K03-002762 name=S9K03-002762></a>GT.M now supports the <font face="Courier New">$gtm_snaptmpdir</font> environment variable to specify where to place the temporary "snapshot" file created by online mupip integ. If <font face="'Courier New'">$gtm_snaptmpdir</font> is not defined, GT.M reverts to its previous behavior of using the <font face="Courier New">$GTM_BAKTMPDIR</font> environment variable if defined, and otherwise using the current working directory. In addition, for MUPIP BACKUP, the <font face="Courier New">$GTM_BAKTMPDIR</font> environment variable is considered deprecated in favor of the new <font face="Courier New">$gtm_baktmpdir</font> environment variable and at a future date FIS may opt to remove support for $GTM_BAKTMPDIR. &nbsp;Please plan to edit your scripts accordingly within a convenient timeframe. [UNIX] (S9K03-002762)<br>        <br>        </font>      </p>    </li>  </ul></div><ul style=COLOR:#000000>  <li>    <div>      If<a id=C9J04-003116 name=C9J04-003116></a> MUPIP SET -JOURNAL=ON encounters an error while opening the current generation journal file, it implicitly performs the following operation:    </div>  </li></ul><blockquote style=COLOR:#000000;MARGIN-RIGHT:0px>  <ul>    <li>      <div>        Turns off journaling for the specified region      </div>    </li>    <li>      <div>        Creates a new journal file with no back pointers to the prior generation journal file      </div>    </li>    <li>      <div>        Turns journaling back on      </div>    </li>    <li>      <div>        If replication is enabled, MUPIP SET -JOURNAL=ON temporarily switches the replication state to WAS_ON in the time window when MUPIP SET command turns off journaling and returns normal as long as it operates out of the journal pool buffer and doesn't need to reference the damaged journal file(s).&nbsp;      </div>    </li>  </ul></blockquote><blockquote dir=ltr style=COLOR:#000000;MARGIN-RIGHT:0px>  During this operation, MUPIP SET –JOURNAL=ON also sends the PREJNLLINKCUT message for the region to the application and the operator log.<br>  <b><br>  Note</b>: While this operation ensures that journaling continues even if the current generation journal file is damaged/missing, creating a new journal file with no back pointers creates a discontinuity with the previous journal files. Therefore, FIS recommends taking a database backup at the earliest convenience because a MUPIP RECOVER/ROLLBACK will not be able to go back past this discontinuity. Also, consider switching the journal files on all regions in the instance (with REGION "*") to ensure the RECOVER/ROLLBACK for other regions remains unaffected.  <div>    &nbsp;  </div>  <div>    In prior versions, attempting MUPIP SET -JOURNAL=ON in such cases caused JNLOPNERR and JNLNOCREATE errors, requiring shutdown of the instance to restart journaling. (C9J04-003116)  </div></blockquote><ul>  <li>    <a id=C9K03-003246 name=C9K03-003246></a>ONLINE INTEG now correctly cleans up snapshot files if MUPIP STOP is issued to the INTEG process. In V5.4-000 (and V5.4-000A) online INTEG left snapshot files on disk if it was terminated with a MUPIP STOP during a small time window while its control information was in flux.<br>    <br>    Since ONLINE INTEG now does a better job of handling abnormal terminations, as a (small) performance optimization, GT.M no longer periodically checks for abandoned snapshot files. If you have abandoned snapshot files, use MUPIP RUNDOWN or shell commands to remove them. [UNIX] (C9K03-003246)<br>    <br>  </li></ul><ul>  <li>    <p style="MARGIN:0pt 0pt 0pt">      <font color=#000000><font face=verdana>MU<a id=C9K04-003259 name=C9K04-003259></a>PIP INTEG now correctly calculates the total number of blocks at the time it initiates a snapshot. In V5.4-000 and V5.4-000A, in rare cases, the number of blocks and the size of shared memory created by MUPIP INTEG could be less than what the database actually held at the time of snapshot initiation and could cause false integrity errors. [UNIX] (C9K04-003259)<br>      <br>      </font></font>    </p>  </li>  <li>    <p style="MARGIN:0pt 0pt 0pt">      <font color=#000000>M<a id=C9K04-003260 name=C9K04-003260></a>UPIP JOURNAL ROLLBACK or RECOVER BACKWARD now work even in the case where they are interrupted and reissued. Prior versions could, in rare cases, terminate abnormally with a GTMASSERT error if more than one previous recovery was interrupted. This issue was reported as fixed by C9D07-002357 in GT.M V5.3-000 but the fix did not handle one case. (C9K04-003260)<br>      <br>      </font>    </p>  </li>  <li>    <font color=#000000>G<a id=C9K03-003270 name=C9K03-003270></a>T.M now correctly detects permissions issues while opening snapshot file. In V5.4-000 and V5.4-000A, GT.M in such cases reported 'Bad file descriptor' error in operator log.<br>    <br>    Online INTEG now exits on encountering a snapshot related error even if there are regions on which integrity check is pending. In V5.4-000 &amp; V5.4-000A, MUPIP INTEG continued to completion after detecting a snapshot related error (which consumed resources but rendered the INTEG of that region untrustworthy). [UNIX] (C9K03-003270)<br>    <br>    </font>  </li>  <li>    M<a id=C9K05-003272 name=C9K05-003272></a>UPIP REPLIC -SOURCE -SHOWBACKLOG -INST now shows the backlog of the specified replicating (secondary) instance even if the Source Server corresponding to that replicating instance is not up. In previous versions of GT.M, this used to error out with a SRCSRVNOTEIST message making it difficult to determine the current backlog.<br>    <br>    An example of the difference in output is shown below:<br>    <br>    <font face="Courier New">Old behavior<br>    -------------<br>    $ mupip replic -source -showbacklog -inst=INSTB<br>    %GTM-E-SRCSRVNOTEXIST, Source server for secondary instance INSTB is not alive<br>    <br>    New behavior<br>    -------------<br>    $ mupip replic -source -showbacklog -inst=INSTB<br>    Wed May 19 18:58:29 2010 : Initiating SHOWBACKLOG operation on source server pid [0] for secondary instance [INSTB]<br>    101 : backlog number of transactions written to journal pool and yet to be sent by the source server<br>    102 : sequence number of last transaction written to journal pool<br>    1 : sequence number of last transaction sent by source server<br>    %GTM-E-SRCSRVNOTEXIST, Source server for secondary instance INSTB is not alive<br>    <br>    </font>Similarly, MUPIP REPLIC -SOURCE -CHECKHEALTH -INST now provides more consistent output when the Source Server isn't up as well as when it is. In previous versions of GT.M, this used to error out with a SRCSRVNOTEXIST message in case the Source Server was not alive and print a differently formatted alive message in case it was.<br>    <br>    An example of the difference in output is shown below&nbsp;<br>    <br>    <font face="Courier New">Old behavior in case source server is not alive<br>    ---------------------------------------------------<br>    $ mupip replic -source -checkhealth -inst=INSTB<br>    %GTM-E-SRCSRVNOTEXIST, Source server for secondary instance INSTB is not alive<br>    <br>    Old behavior in case source server is alive<br>    ---------------------------------------------------<br>    $ mupip replic -source -checkhealth -inst=INSTB<br>    <br>    Fri May 21 15:26:18 2010 : Initiating CHECKHEALTH operation on source server pid [15511] for secondary instance name [INSTB]<br>    PID 15511 Source server is alive in ACTIVE mode<br>    <br>    New behavior in case source server is not alive<br>    ---------------------------------------------------<br>    Fri May 21 15:29:52 2010 : Initiating CHECKHEALTH operation on source server pid [0] for secondary instance name [INSTB]<br>    PID 0 Source server is NOT alive<br>    %GTM-E-SRCSRVNOTEXIST, Source server for secondary instance INSTB is not alive<br>    <br>    New behavior in case source server is alive<br>    ---------------------------------------------------<br>    $ mupip replic -source -checkhealth -inst=INSTB<br>    <br>    Fri May 21 15:26:18 2010 : Initiating CHECKHEALTH operation on source server pid [15511] for secondary instance name [INSTB]<br>    PID 15511 Source server is alive in ACTIVE mode<br>    </font><br>    Note: The exit status of both the SHOWBACKLOG and CHECKHEALTH commands has not changed from what it used to be in the above cases. (C9K05-003272)<br>    <br>  </li>  <li>    M<a id=C9K05-003273 name=C9K05-003273></a>UPIP JOURNAL RECOVER and ROLLBACK now exit cleanly even if they are stopped prematurely by a MUPIP STOP. Previously, depending on how much the journal recovery had proceeded with database initialization at the time of the MUPIP STOP, it could terminate with SIG-11 errors and core dumps. (C9K05-003273)<br>    <br>  </li>  <li>    <a id=MUPIP_C9K06-003278 name=MUPIP_C9K06-003278></a>MUPIP STOP of the Receiver Server now implicitly shuts down the Update Process as well, and cleans up the receive pool shared memory segment as part of shutting down. Previously, only the Receiver Server would shut down in such cases leaving the Update Process running. [UNIX] (C9K06-003278)<br>    <br>  </li>  <li>    M<a id=C9K06-003281 name=C9K06-003281></a>UPIP ENDIANCVT now clears additional fields in the file header in case the file was copied by a non-GT.M method, thus making the endian converted database file useable. That said, copying an unfrozen and active database file will probably result in a corrupt copy, FIS recommends MUPIP BACKUP. Also, GT.M now provides a more helpful error message when attempting to access a database file which has not been properly run-down or frozen.&nbsp; In previous versions, attempting to access a file after copying it using a non-GT.M method and running it through MUPIP ENDIANCVT produced a GTMASSERT. [UNIX] (C9K06-003281)<br>    <br>  </li>  <li>    <p style="MARGIN:0pt 0pt 0pt">      MU<a id=C9K06-003290 name=C9K06-003290></a>PIP RESTORE and MUPIP BACKUP using TCP handle errors more robustly. Previously, invalid TCP address specifications could cause memory access violations (SEG-V/SIG-11 or ACCVIOs) and error messages for other conditions were cryptic and sometimes incorrect. (C9K06-003290)<br>      &nbsp;    </p>  </li></ul><p>  <a href=#toc id=fwew target=_self title="Return to Table of Contents">Return to Table of Contents</a><a href=http://docs.google.com/Doc?docid=0AcenITK__xu5ZHBxcTZoNl80NWdkejg3YmRi&amp;hl=en#TOC id=i4vl target=_self title="Return to Table of Contents"></a></p><div class=sect1>  <div class=titlepage>    <h2 class=title>      <a id=Utilities_Other_Than_MUPIP_455 name=Utilities_Other_Than_MUPIP_455></a>Utilities-Other Than MUPIP    </h2>  </div>  <div class=itemizedlist>    <ul>      <li>        <p>          <font color=#000000>V<a id=S9K04-002765 name=S9K04-002765></a>5CBSU on Open VMS now has two additional options. The FIX512 option takes in a DBCERTSCAN file from OpenVMS 7.3-1, which incorrectly pads a record type used by DBCERTIFY SCAN and produces a corrected file. The DUMP option produces a more diagnostic interpretation of the scan file. In addition, the distribution provides a LINK command for V5CBSU (<font size=2>in GTMDCBUILD.COM)</font> that does not need editing before use. Versions since V5.3-003 required you to add GTM$DIST:_DH and GTM$DIST:_EXP to the V5CBSU LINK.<br>          <br>          To remove the extra padding, define the logical GTM_V5CBSU with the value "FIX512" (that is, DEFINE GTM_V5CBSU FIX512.)&nbsp; This causes V5CBSU to create an output file with the same name as the input file but with "_FIX512" appended to the file extension (e.g.&nbsp; MUMPS.DBCERTSCAN as input will produce MUMPS.DBCERTSCAN_FIX512 as output.) This output file should be used as the input to V5CBSU (after DEASSIGNing GTM_V5CBSU) or to DBCERTIFY CERTIFY.&nbsp; It does not modify or require the database.<br>          <br>          </font><font color=#000000>To invoke the dump feature of V5CBSU on OpenVMS, define the logical GTM_V5CBSU with the value "DUMP" before using V5CBSU.&nbsp;&nbsp;&nbsp; If the value of the logical GTM_V5CBSU contains both "DUMP" and "FIX512", V5CBSU performs both functions. [OpenVMS] (S9K04-002765)<br>          <br>          </font>        </p>      </li>      <li>        <p>          D<a id=C9K04-003261 name=C9K04-003261></a>SE appropriately releases the database critical section (crit) returning to the DSE prompt in case of errors during the execution of the current command. In previous versions, DSE could inappropriately retain a hold on crit after errors in some commands. In addition, DSE CRIT SEIZE and CRIT RELEASE now work as documented. Any sequence of DSE commands run in the -seize window, whether they cause errors or complete successfully, leaves the database critical section (crit) untouched. In previous versions, a few DSE commands (DSE CHANGE -BLOCK -TN, DSE BUFF on an MM db, DSE WCINIT) unconditionally released crit even when it had previously been acquired with a CRIT -SEIZE. (C9K04-003261)<br>          <br>        </p>      </li>      <li>        <a id=When_$gtmver_is_part_of_$gtm_repl_instance,_the_gtmprofile_script_when_sourced_now_automatically_modifies_it_to_reflect_the_new_$gtmver,_as_it_does_for_other_environment_variables_of_which_$gtmver_might_legitimately_be_a_substring._In_prior_versions,_it_omitted_this_automatic_modification_of_$gtm_repl_instance.If_the_environment_variable_LC_CTYPE_is_not_specified_when_the_gtm_chset_environment_variable_specifies_that_GT.M_is_to_run_in_UTF-8_mode,_the_gtmprofile_script_now_correctly_defaults_LC_CTYPE_to_the_first_UTF-8_locale._Previously,_any_upper_case_U,_T,_and_F_characters_in_that_first_UTF-8_locale_name_were_incorrectly_converted_to_lower_case._[UNIX]_(C9K06-003276) name=When_$gtmver_is_part_of_$gtm_repl_instance,_the_gtmprofile_script_when_sourced_now_automatically_modifies_it_to_reflect_the_new_$gtmver,_as_it_does_for_other_environment_variables_of_which_$gtmver_might_legitimately_be_a_substring._In_prior_versions,_it_omitted_this_automatic_modification_of_$gtm_repl_instance.If_the_environment_variable_LC_CTYPE_is_not_specified_when_the_gtm_chset_environment_variable_specifies_that_GT.M_is_to_run_in_UTF-8_mode,_the_gtmprofile_script_now_correctly_defaults_LC_CTYPE_to_the_first_UTF-8_locale._Previously,_any_upper_case_U,_T,_and_F_characters_in_that_first_UTF-8_locale_name_were_incorrectly_converted_to_lower_case._[UNIX]_(C9K06-003276)></a><a id=C9K06-003276 name=C9K06-003276></a>When <font face="Courier New">$gtmver</font> is part of <font face="Courier New">$gtm_repl_instance</font>, the <font face="'Courier New'">gtmprofile</font> script when sourced now automatically modifies it to reflect the new $gtmver, as it does for other environment variables of which <font face="'Courier New'">$gtmver</font> might legitimately be a substring.&nbsp; In prior versions, it omitted this automatic modification of <font face="'Courier New'">$gtm_repl_instance</font>.<font style=BACKGROUND-COLOR:#ffffff> [UNIX] (C9K06-003276)</font><br>        <br>      </li>    </ul>  </div>  <div class=itemizedlist>    <ul>      <li>        <p>          <font style=BACKGROUND-COLOR:#ffffff>GT<a id=C9K06-003283 name=C9K06-003283></a>.M now displays an accurate error message in case it encountered an error while trying to start the gtmsecshr server. In previous versions, in cases where the gtmsecshr wrapper detected a situation that made it infeasible to start the real gtmsecshr server, GT.M used to display a GTMSECSHRSTART message followed by a misleading GTM-I-TEXT message [UNIX] (C9K06-003283).</font>        </p>        <p>          <br>          <font style=BACKGROUND-COLOR:#ffffff>Example old output:<br>          <font face="Courier New">-------------------<br>          %GTM-E-GTMSECSHRSTART, Client - 8079 : gtmsecshr failed to startup<br>          %GTM-I-TEXT, ess_id</font></font>        </p>        <p>          <br>          <font style=BACKGROUND-COLOR:#ffffff>Example new output:<br>          <font face="Courier New">-------------------<br>          %GTM-E-GTMSECSHRSTART, Client - 8079 : gtmsecshr failed to startup<br>          %GTM-I-TEXT, See syslog for cause of failure</font></font>        </p>        <br>        <p>        </p>      </li>    </ul>  </div></div><div class=titlepage>  <p class=returntotop>    &nbsp;  </p>  <p class=returntotop>  </p>  <h2>    <a id=C9K02_003240_Trigger_Fixes_for name=C9K02_003240_Trigger_Fixes_for></a>C9K02-003240 - Fixes for GT.M Triggers on UNIX&nbsp;  </h2>  <div>    In GT.M V5.4-000 (and V5.4-000A), the implementation of GT.M triggers was of field test grade, suitable for application development and testing but not for production use. &nbsp;Triggers are now ready for production use. &nbsp;Below are the changes to GT.M triggers in V5.4-001.<br>    <br>    <table border=1 bordercolor=#000000 cellpadding=4 cellspacing=0>      <tbody>      <tr>        <td style=TEXT-ALIGN:center width=50%>          <b>Revised behavior (V5.4-001)</b>        </td>        <td style=TEXT-ALIGN:center valign=top width=50%>          <b>Old behavior (V5.4-000 and V5.4-000A)</b>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M invokes the correct set of triggers in case of a SET update to a node that either did not exist or was set to the null string.        </td>        <td valign=top width=50%>          <p>            <font color=#000000>Trigger definitions that specified a piece list (using -piece=) might be inappropriately invoked even if no specified piece changed as a result of the update. </font>          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M wraps non-TP triggering updates in implicit TP transactions in such a way to avoid the possibility of "live lock" when some other process tries to concurrently update the trigger definition.        </td>        <td valign=top width=50%>          <p>            <font color=#000000>Non-TP triggering updates could enter in a "live lock" state when some other process tried to concurrently update the trigger definition. In the livelock state, a process consumes CPU without doing useful work. </font>          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          <font color=#000000>Since GT.M implicitly wraps trigger updates as M transactions, any routines used to process journal extract files should deal with type 8 and 9 (TSTART/TCOMMIT) record types in addition to new record types introduced with triggers. If the application includes triggers that do no updates (i.e., effectively No-ops), the update that initiated the trigger appears inside TStart/TCommit brackets in the journal file. A trigger that conditionally does no updates (for example, a trigger that forces the value of a node to only take on permissible values, or initiates other corrective action, but makes no updates of its own for permissible values) produces similar journal records. In addition, GT.M may change a non-TP update&nbsp; into a TP update if there are any trigger definitions associated with the named global.</font>        </td>        <td valign=top width=50%>          <p>            <font color=#000000>GT.M did not wrap triggers that performed conditional updates or no updates (that is, effectively No-ops) inside Tstart/TCommit in the journal records. </font>          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M handles $ZTRIGGER("item",&lt;item&gt;) more robustly.        </td>        <td valign=top width=50%>          <p>            Parsing of the item content in $ZTRIGGER("item",&lt;item&gt;) might cause erratic random damage with various symptoms.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M now correctly unwinds the M stack when the unwind, from a ZGOTO or an error, includes a trigger base-frame.        </td>        <td valign=top width=50%>          <p>            From a ZGOTO or an error, GT.M did not properly count the frames to be unwound when a trigger base frame was included resulting in a partial unwind of the M stack which could cause various types of improper execution paths or fatal errors.          </p>        </td>      </tr>      <tr valign=top>        <td style=TEXT-ALIGN:left width=50%>          GT.M more robustly handles the use of triggers in environments operating in UTF-8 mode.        </td>        <td style=TEXT-ALIGN:left valign=top width=50%>          In some cases, GT.M could generate a SIG-11 when using triggers in a UTF-8 environment, whether or not UTF-8 characters were used in the trigger.        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M now maintains the proper value for $REFERENCE during trigger operations.        </td>        <td valign=top width=50%>          <p>            $REFERENCE after $ZTRIGGER() operations incorrectly referred to a location in the internal global infrastructure associated with triggers.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M properly handles the situation where there is a very large number of triggers for the same global with autogenerated trigger names. SELECT lists a trigger only once.        </td>        <td valign=top width=50%>          <p>            GT.M displayed no message or statistics when the auto-generated trigger names for the same global exceeded the maximum number of unique trigger name. Additionally, a SELECT could list the same trigger more than once.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M now invokes the correct set of triggers for a given update.        </td>        <td valign=top width=50%>          <p>            For certain conditions when a global update invoked a trigger that updated the same global (potentially different nodes) that, in turn, invoked nested triggers, it was possible that the triggers defined for the initial global update might be skipped or invoked multiple times.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M now properly handles the case when the first argument passed to $ztrigger() starts with a non-alphabetic character.        </td>        <td valign=top width=50%>          <p>            An initial non-alphabetic character in the first $ztrigger() argument caused a SIG-11.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          $ZTWORMHOLE allows you to specify a string up to 128KB you want to make available during trigger execution.        </td>        <td valign=top width=50%>          <p>            $ZTWORMHOLE allowed you to specify a string up to 15KB to make available during trigger execution.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M now correctly gives errors in cases where globals corresponding to trigger metadata are either missing or corrupted.        </td>        <td valign=top width=50%>          <p>            GT.M ignored trigger metadata corruption and silently skipped the corresponding triggers.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          A MUPIP LOAD operation now issues a single warning on first encountering trigger metadata in GO/ZWR format files.        </td>        <td valign=top width=50%>          <p>            During a MUPIP LOAD operation with GO/ZWR format files, GT.M siltently ignored the trigger metadata.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M reclaims memory more aggressively for both $ZTWORMHOLE information and incremental rollbacks during transaction processing. It is likely that only processes that set $ZTWORMHOLE inside transactions, or processes that perform a large number of incremental rollbacks inside transactions might show the difference.        </td>        <td valign=top width=50%>          <p>            Memory structures used for incremental rollbacks and $ZTWORMHOLE could become inflated by repeated use in a single transaction to sizes unlikely to be used efficiently by subsequent transactions.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          $ZTRIGGER() now always opens a file or returns an error message if the second parameter&nbsp; is missing.        </td>        <td valign=top width=50%>          <p>            Under certain conditions, $ZTRIGGER() did not recognize a valid trigger file name and returned a failure status. Additionally, a file name of length 0 or containing only the &lt;NUL&gt; character could cause a SIG-11.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M trigger loading handles trigger definitions longer than 32K characters and also long values for the trigger qualifiers.        </td>        <td valign=top width=50%>          <p>            Long values for trigger qualifiers or trigger definitions longer than 32K characters could cause SIG-11 failures.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M now properly handles the situation while assembling trigger status messages for a load operation and simultaneously printing operator messages.        </td>        <td valign=top width=50%>          <p>            During a load operation and while assembling trigger status message and printing operator message, GT.M trigger processing could lose the initial part of the trigger status message containing the file and line number and print only actual status part of the message.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M properly prints trigger data (using select) when the data is longer than 2048 bytes.        </td>        <td valign=top width=50%>          <p>            GT.M truncated trigger data (using select) longer than 2048 bytes which resulted in an inaccurate representation of the trigger.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M produces a "duplicate name" error when adding a trigger with both SET and KILL commands and an identical user-supplied name when the KILL components of the trigger match an existing trigger but the SET components of the added definition do not match an existing trigger.        </td>        <td valign=top width=50%>          <p>            GT.M did not produce an error and incorrectly added the SET components of the definition in the following condition under the described circumstances<br>          </p>          <p>            <br>          </p>          <p>            <br>          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M properly adds a new SET trigger to the database when its pattern happens to match an existing KILL trigger.        </td>        <td valign=top width=50%>          <p>            If a new trigger definition had both SET and KILL commands with a user-defined trigger name and the matching trigger in the database had only a SET command and no name, GT.M could inappropriately merge the definition for the KILL command from the trigger definition file with the existing trigger's SET definition.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M now only allows trigger names that follow the same syntax rules as M names: either % or a letter followed by letters and/or numeric digits, but limited to 28 characters.        </td>        <td valign=top width=50%>          <p>            Trying to use a trigger name that did not satisfy the M name syntax resulted in a GTMASSERT.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          <p>            GT.M prints trigger parse error messages that contain non-printable characters using the $[Z]CHAR representation. For example, a trigger definition that had an embedded NULL character in the global name generates an error message like the following:          </p>          <p>            <br>          </p>          <p>            Invalid global name :          </p>          <p style="FONT-FAMILY:Courier New">            <br>          </p>          <p style="FONT-FAMILY:Courier New">            "^a"_$C(0)_"bc -commands=S -xecute=""write 123"""          </p>          <p>            <br>          </p>          <p>            where the NULL is plainly visible as $C(0). Note that the error message is now displayed in the form of an M string. As part of this change many of the trigger parse error messages are now printed as M strings.          </p>          <p>            <br>          </p>          <p>            As another example, the following trigger definition:          </p>          <p>            <br>          </p>          <p style="FONT-FAMILY:Courier New">            +^#t -command=SET -xecute="do ^twork"          </p>          <p>            <br>          </p>          <p>            Generates the following error message:          </p>          <p>            <br>          </p>          <p style="FONT-FAMILY:Courier New">            File t1.trg, Line 5: Invalid global name :          </p>          <font face="courier new">"^#t -command=SET -xecute=""do ^twork"""</font>        </td>        <td valign=top width=50%>          <p>            Embedded non-printing characters in the trigger definition did not produce an error. GT.M would would either skip the invalid characters or print different characters.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M properly handles maximum length trigger names.        </td>        <td valign=top width=50%>          <p>            In some cases, having a maximum length trigger name could cause corruption of the global reference in the trigger signature.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          The Update process now detects discrepancies in the existence of trigger definitions for a global between the originating and replicating instances and puts a warning message in the operator log at the first detection for every global with that difference. Note that because trigger definitions are replicated, this should be an unusual situation.        </td>        <td valign=top width=50%>          <p>            During replcation, GT.M did not warn about the discrepencies in a global's trigger definition in an originating and its replicating instances.          </p>          <br>          <p>            <br>          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M rejects invalid UTF-8 characters in the global name in a trigger definition or in a trigger name used to delete a trigger by name.        </td>        <td valign=top width=50%>          <p>            Contrary to the M standard, GT.M accepted non-ASCII UTF-8 characters in the global name in a trigger definition or in a trigger name used to delete a trigger by name.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M protects all calls to the print- and format-related service library routines against interrupts.        </td>        <td valign=top width=50%>          <p>            The interrupt of an unprotected call might on occasion cause faulty operation in a variety of ways that are not easily characterized. For example, a failure in a trigger compilation could be caused by a null routine name due to an interrupted formatting service. Note that these library functions are not used by core database logic, and data integrity was not in jeopardy.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          $ZTOLDVAL correctly holds the empty string at trigger routine entry in case of KILL commands that reference a node whose $data is 10 (that is, node does not exist but has a subtree underneath).        </td>        <td valign=top width=50%>          <p>            Accessing $ZTOLDVAL in a trigger routine entry incorrectly issued an UNDEF error in case a KILL command that referenced a node whose $DATA was 10 (that is, node did not exist but had a subtree underneath).<br>          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GTM now allows the trigger related ISV $ZTWORMHOLE to be NEW’d. Note that NEWing this ISV is slightly different from NEWing most other ISVs or variables in that when $ZTWOrmhole is NEW’d it retains its original value (like $ZGBLDIR), but like other NEWs, this value is restored when that stack level pops.<br>        </td>        <td valign=top width=50%>          <p>            GT.M did not allow ISV $ZTWORMHOLE to be NEW’d.          </p>        </td>      </tr>      <tr>        <td width=50%>          GT.M&nbsp; introduces a new trigger ISV called $ZTSLATE. It allows you to specify a string that you want to make available in parallel or nested triggers invoked for an outermost&nbsp; transaction (when a TSTART takes $TLEVEL from 0 to 1). You might use $ZTSLATE to accumulate transaction-related information, for example $ZTOLDVAL and $ZTVALUE,&nbsp; available within trigger context for use in a subsequent trigger later in the same transaction. For example, you can use $ZTSLATE to build up an application history or journal record to be written when a transaction is about to commit.<br>          <br>          You can SET $ZTSLATE only while a database trigger is active. GT.M clears $ZTSLATE for the outermost transaction or on a TRESTART. However, GT.M retains $ZTSLATE for all sub-transactions (where $TLEVEL&gt;1).<br>        </td>        <td valign=top width=50%>          GT.M did not provide the $ZTSLATE ISV.<br>        </td>      </tr>      <tr valign=top>        <td width=50%>          If an originating instance does not support triggers, GT.M does not invoke triggers on a replicating instance even if the replicating instance has triggers defined for a replicated node.        </td>        <td valign=top width=50%>          <p>            If an originating instance did not support triggers, GT.M incorrectly invoked triggers on a replicating instance even if the replicating instance had triggers defined for a replicated node. This could cause duplicate updates that might induce application level errors.          </p>        </td>      </tr>      <tr valign=top>        <td width=50%>          GT.M maintains $REFERENCE correctly when a Non-TP update, having triggers defined, encounters a runtime error.        </td>        <td valign=top width=50%>          <p>            GT.M incorrectly set $REFERENCE to the empty string when a Non-TP update, having triggers defined, encountered a runtime error.          </p>        </td>      </tr>      <tr>        <td width=50%>          The Update Processes in the replicating instance now correctly set up structures needed for naked references to work on the replicating instance.        </td>        <td valign=top width=50%>          The Update Process issued a GVNAKED error in the Update Process log if a global update invoked trigger code using a naked reference on the replicated global.        </td>      </tr>      <tr>        <td width=50%>          The Update Process in the replicating instance now correctly identifies empty-string ("null") subscripts in the global that is being replicated and issue a NULSUBSC error in the update process log if the region does not allow null subscripts.&nbsp;        </td>        <td valign=top width=50%>          The update Process continued with the update even though the global being replicated had empty subscripts.        </td>      </tr>      <tr>        <td width=50%>          GT.M writes the entire results of a $ZTRIGGER("SELECT")        </td>        <td width=50%>          $ZTRIGGER("SELECT") truncated its output at 32K bytes.        </td>      </tr>      </tbody>    </table>    <br>  </div></div><div class=titlepage>  <p>  </p>  <h2 class=title>    <a id=Error_Messages_780887249505602 name=Error_Messages_780887249505602></a><a id=id2487927></a>Error Messages  </h2>  <p class=title>    The new error message(s) introduced in V5.4-001 are as follows:  </p>  <p class=title>    &nbsp;  </p>  <h3>    <a id=SSATTACHSHM_3953059915466456_7 name=SSATTACHSHM_3953059915466456_7></a>SSATTACHSHM  </h3>  <div>    <b>SSATTACHSHM,</b> <i>Error while attaching to shared memory identifier iiii<br>    </i><br>    Runtime Error: A GT.M process encountered error while trying to attach to shared memory created to manage a snapshot and reports the above error in the operator log.<br>    <br>    Action: Examine the accompanying system error message and take appropriate action.&nbsp;  </div></div><h3>  <a id=TCOMMITDISALLOW_ name=TCOMMITDISALLOW_></a>TCOMMITDISALLOW</h3><div>  <b>TCOMMITDISALLOW</b><i>, TROLLBACK required after an unhandled error in trigger context</i></div><br><i>Runtime Error</i>: This transaction did an update that invoked a trigger which in turn encountered an error that was not handled by the application error trap inside the trigger context. Because of this, the exit from trigger context was abnormal. GT.M does not commit such transactions since they would not preserve the atomicity of trigger updates (triggering update + triggered updates).<br><br><i>Action</i>: Such transactions can only be rolled back. If this is a nested TSTART (subtransaction), it can optionally be rolled back incrementally, that is, only the nested TSTART needs to be rolled back while the parent TSTART can still be committed.<h3>  <a id=TRIGDEFBAD name=TRIGDEFBAD></a><font color=#000000>TRIGDEFBAD</font></h3><div style=COLOR:#000000>  <b>TRIGDEFBAD</b>, <i>Trigger initialization failed for global ^gggg. Error while processing ^#t("xxxx",yyyy[,zzzz])</i><br>  <br>  GT.M/MUPIP error: Missing or corrupted trigger metadata causes this error.<br>  <br>  Action: Delete and replace defective triggers. If possible analyze the cause of the trigger damage and report the incident to your GT.M support channel.</div><br style=COLOR:#000000><h3 style=COLOR:#000000>  <a id=TRIGDEFNOSYNC name=TRIGDEFNOSYNC></a>TRIGDEFNOSYNC</h3><div style=COLOR:#000000>  <b>TRIGDEFNOSYNC</b>, <i>Global ^gggg has triggers defined on the &lt;originating/replicating&gt; instance but none on the &lt;replicating/originating&gt; instance. Current journal sequence number is 0xjjjj<br>  </i><br>  Update Process Warning : The Update Process detected that there is a mismatch in trigger definitions for global gggg between originating and replicating instances and sent this warning to the operator log.<br>  <br>  Action : Differences in triggers between originating and replicating instances typically mean the replicating instance is not in a position to stand in as a system of record by becoming an originating instance. Unless the difference is intended because of a special use of the replicating instance, shutdown and resynchronize the replicating instance.</div><h3 style=COLOR:#000000>  <a id=TRIGSUBSCRANGE_11074027181363721 name=TRIGSUBSCRANGE_11074027181363721></a>TRIGSUBSCRANGE</h3><font color=#000000><b>TRIGSUBSCRANGE</b>, <i>Trigger definition for global ^gggg has one or more invalid subscript range(s) : ssss</i><br><br>GT.M/MUPIP error : This error indicates one or more subscript range(s) of of order given the current collation subscript ordering - for global gggg in tthe trigger definition files.<br><br>Action: Verify the validity of subscript ranges in trigger definition file for the particular global, taking its collation into account, and redefine the trigger with correct subscript ranges for the collation of the global in question.</font><br style=COLOR:#000000><br style=COLOR:#000000><h3 style=COLOR:#000000>  <a id=TRIGDATAIGNORE_7317819963377477 name=TRIGDATAIGNORE_7317819963377477></a>TRIGDATAIGNORE</h3><p style=COLOR:#000000>  <b>TRIGDATAIGNORE</b>,<i> Ignoring trigger data tttt. Use MUPIP TRIGGER to load trigger definitions</i><br>  <br>  MUPIP informational message : MUPIP LOAD displays this warning when it encounters trigger metadata during extract file processing (GO/ZWR extracts).<br>  <br>  Action: Identify and remove trigger metadata information from GO/ZWR extract files and, if appropriate, process it with MUPIP TRIGGER or $ZTRIGGER().</p><div>  <br>  Due to V5.4-001 enhancements, the following error messages have changed:</div><div>  &nbsp;</div><p></p><p></p><p></p><h3>  <a id=JNLVSIZE_5615399636877878_4632 name=JNLVSIZE_5615399636877878_4632></a>JNLVSIZE</h3><div>  The JNLVSIZE error message now displays the file system block size.</div><div>  &nbsp;</div><div>  <b>JNLVSIZE</b>, Journal File xxxx has incorrect virtual_filesize aaaa Allocation is bbbb extension is cccc filesize is dddd <font color=#000000>file_system_block_size is eeee<br>  </font></div><h3 style=COLOR:#000000>  <a id=PREVJNLLINKCUT name=PREVJNLLINKCUT></a>PREVJNLLINKCUT</h3><p style=COLOR:#000000>  <b>PREVJNLLINKCUT</b>,<i> Previous journal file name link set to NULL in new journal file xxxx created for database file yyyy</i></p><p style=COLOR:#000000>  &nbsp;</p><p style=COLOR:#000000>  Run Time/MUPIP Error: This indicates that GT.M or MUPIP has removed the link of previous journal file name and set it to NULL in the new xxxx journal files header. This could possibly be because journal state was ON for the database file yyyy and its corresponding journal file was inaccessible, this triggered MUPIP or GT.M to create new journal file xxxx clearing the previous generation journal file name(s).</p><p style=COLOR:#000000>  &nbsp;</p><p>  <font color=#000000>Action: If the error is issued by GT.M review the accompanying message(s) in the operator log.<br>  <br>  If a MUPIP SET –JOUNAL=ON command produces this message for the region in the operator log, it may indicate that one or more of the current generation journal files are damaged/missing and new journal files were created with no back pointers to the previous journal files. FIS recommends taking a database backup at the earliest convenience because a MUPIP RECOVER/ROLLBACK will not be able to go back past xxxx. If this message is for a specified region(s), consider switching the journal files for all regions (with REGION "*") that the process has opened (all journaled/replicated regions in the instance if replication is in use) to ensure that the RECOVER/ROLLBACK for other regions remains unaffected.</font><br style=COLOR:#000000>  <br style=COLOR:#000000>  <font color=#000000>No action is required if the MUPIP BACKUP -NEWJNLFILES=NOPREVLINK issues the error.</font>&nbsp;<br></p><p style="MARGIN:0pt 0pt 0pt"></p><p style="MARGIN:0pt 0pt 0pt"></p><h3>  <a id=SRCSRVNOTEXIST_288808789105467_7866404162431354 name=SRCSRVNOTEXIST_288808789105467_7866404162431354></a>SRCSRVNOTEXIST</h3><div>  <b>SRCSRVNOTEXIST</b>, <i>Source server for secondary instance xxxx is not alive<br>  <br>  </i>MUPIP Error: This error is issued by a mupip replic -source command that specifies any one of activate, changelog, checkhealth, deactivate, shutdown, showbacklog, statslog, stopsourcefilter if it finds no Source Server up and running for the replicating (secondary) instance name specified in the command.<br>  <br>  Action: Make sure the Source Server for the specified replicating instance name is up and running to provide working replication.<br></div><h3>  <a id=REPLINSTSECNONE_ name=REPLINSTSECNONE_></a>REPLINSTSECNONE</h3><div>  <b>REPLINSTSECNONE</b>, <i>No information found for secondary instance xxxx in instance file yyyy<br>  </i><br>  MUPIP Error: This error is issued by any mupip replic source command that specifies a replicating (secondary) instance name (except for the one which specifies -start) if no information on this name can be found in the instance file. This is possible if no Source Server was ever started since the initialization of this instance file for such a replicating instance.<br>  <br>  Action: Make sure the replicating instance name is correct. If it is, make sure a Source Server for that replicating instance has been started at least once in the life of the instance file even if it is currently not up and running.<br>  <br></div><h3>  <a id=REGSSFAIL_8982927284330495_604 name=REGSSFAIL_8982927284330495_604></a>REGSSFAIL</h3><div>  <b>REGSSFAIL</b>, <i>Process pppp encountered error contributing to the snapshot for region rrrr - the snapshot is no longer valid.<br>  </i><br>  Mupip error: A GT.M process encountered failure while opening snapshot file or attaching to shared memory or writing a block to the snapshot file, any of which invalidate the snapshot file. The original error should be in the operator log.<br>  <br>  Action: Examine the operator log for messages issued by process pppp to obtain details of the failure and take action, possibly by modifying file access characteristics or user roles, to address the problem.&nbsp;&nbsp;</div><p>  &nbsp;</p><div>  Starting with V5.4-001, the <b>SSTMPFILOPEN </b>message is deprecated in favor of <b>SSFILOPERR</b>.&nbsp;</div><div>  &nbsp;</div><div style=TEXT-ALIGN:left>  <a href=#toc id=bcyo target=_self title="Return to Table of Contents">Return to Table of Contents</a></div><div style=TEXT-ALIGN:center>  <br>  <font size=1>For more information, see the </font><a href=http://www.fis-gtm.com/ style=COLOR:#000000 title=GT.M><b><font size=1>GT.M</font></b></a><font size=1> web site.<br>  </font><br></div><br><br></body>
<!-- Mirrored from tinco.pair.com/bhaskar/gtm/doc/articles/GTM_V5_4_001_Release_Notes.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 14 Mar 2019 11:25:04 GMT -->
</html>