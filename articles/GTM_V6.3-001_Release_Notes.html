<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>GT.M V6.3-001A Release Notes</title><link rel="stylesheet" href="gtm.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><meta name="description" content="Contact Information GT.M Group Fidelity National Information Services, Inc. 200 Campus Drive Collegeville, PA 19426 United States of America GT.M Support for customers: gtmsupport@fisglobal.com Automated attendant for 24 hour support: +1 (484) 302-3248 Switchboard: +1 (484) 302-3160 Website: http://fis-gtm.com"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" title="GT.M V6.3-001A Release Notes"><div class="titlepage"><div><div><div class="mediaobject"><img src="images/FIS_RGB_logo.jpg"></div></div><div><h2 class="title"><a name="idm45342457176832"></a>GT.M V6.3-001A Release Notes</h2></div><div><h3 class="subtitle"><i>Release Notes: GT.M V6.3-001A</i></h3></div><div><p class="copyright">Copyright (C) 2017, 2019, 2020, 2022 Fidelity National Information Services, Inc.</p></div><div><div class="legalnotice" title="Legal Notice"><a name="idm45342457040592"></a><p class="legalnotice-title"><b>Legal Notice</b></p><p>Copyright (C)2017, 2019, 2020, 2022 Fidelity National Information Services, Inc. and/or its subsidiaries. All Rights Reserved.</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the <a class="ulink" href="http://www.gnu.org/licenses/fdl.txt" target="_blank">GNU Free Documentation License</a>, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts and no Back-Cover Texts. </p><p>GT.M&#8482; is a trademark of Fidelity National Information Services, Inc. Other trademarks are the property of their respective owners. </p><p>This document contains a description of GT.M and the operating instructions pertaining to the various functions that comprise the system. This document does not contain any commitment of FIS. FIS believes the information in this publication is accurate as of its publication date; such information is subject to change without notice. FIS is not responsible for any errors or defects. </p></div></div><div><p class="pubdate">04 July 2022</p></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><b>Revision History</b></th></tr><tr><td align="left">Revision 1.5</td><td align="left">04 July 2022</td><td align="left">Added <a class="link" href="#GTM-8669">GTM-8669</a>.</td></tr><tr><td align="left">Revision 1.4</td><td align="left">11 March 2020</td><td align="left">Add <a class="link" href="#GTM-8547">GTM-8547</a>.</td></tr><tr><td align="left">Revision 1.3</td><td align="left">5 February 2019</td><td align="left">Updated the <a class="link" href="#platforms" title="Platforms">Platforms</a> section to add AIX 7.1 TL 4 and AIX 7.2 as supported versions; Correct the maximum V6 database size.</td></tr><tr><td align="left">Revision 1.2</td><td align="left">25 September 2017</td><td align="left">Correct the description of <a class="link" href="#GTM-8362">GTM-8362</a> and add <a class="link" href="#GTM-8632">GTM-8632</a>. </td></tr><tr><td align="left">Revision 1.1</td><td align="left">06 April 2017</td><td align="left">V6.3-001A</td></tr><tr><td align="left">Revision 1.0</td><td align="left">15 March 2017</td><td align="left">V6.3-001 - First published version </td></tr></table></div></div><div><div class="abstract" title="Contact Information"><p class="title"><b>Contact Information</b></p><div class="informaltable"><table border="0" width="100%"><colgroup><col><col></colgroup><tbody><tr><td>
                  <p>
</p><div class="address"><p>GT.M Group<br>
Fidelity National Information Services, Inc.<br>
<span class="street">200 Campus Drive</span><br>
<span class="city">Collegeville, </span><span class="state">PA </span><span class="postcode">19426</span><br>
<span class="country">United States of America</span></p></div><p>
</p>
                </td><td>
                  <p>
</p><div class="address"><p><br>
<span class="phone">GT.M Support for customers: gtmsupport@fisglobal.com </span><br>
<span class="phone">Automated attendant for 24 hour support: +1 (484) 302-3248</span><br>
<span class="phone">Switchboard: +1 (484) 302-3160</span><br>
<span class="otheraddr">Website: <a class="ulink" href="http://fis-gtm.com" target="_blank">http://fis-gtm.com</a></span><br>
</p></div><p>
</p>
                </td></tr></tbody></table></div><p>
</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#GTMrel_overview">V6.3-001A</a></span></dt><dd><dl><dt><span class="sect2"><a href="#overview"> Overview </a></span></dt><dt><span class="sect2"><a href="#conventions">Conventions</a></span></dt><dt><span class="sect2"><a href="#platforms"> Platforms </a></span></dt><dt><span class="sect2"><a href="#manage64">32- vs. 64-bit platforms</a></span></dt><dt><span class="sect2"><a href="#recompile">
 Recompile </a></span></dt><dt><span class="sect2"><a href="#rebuild">Rebuild Shared Libraries or Images</a></span></dt><dt><span class="sect2"><a href="#addn_instr">Additional Installation Instructions</a></span></dt><dt><span class="sect2"><a href="#upgrade"> Upgrading to GT.M V6.3-001A</a></span></dt><dt><span class="sect2"><a href="#mng_mode">Managing M mode and UTF-8 mode</a></span></dt><dt><span class="sect2"><a href="#setterm">Setting the environment variable TERM</a></span></dt><dt><span class="sect2"><a href="#install_comp_lib"> Installing Compression Libraries</a></span></dt></dl></dd><dt><span class="sect1"><a href="#GTMchng_hist"> Change History</a></span></dt><dd><dl><dt><span class="sect2"><a href="#GTMtaV63-001Able">V6.3-001A</a></span></dt><dt><span class="sect2"><a href="#GTMtaV63-001ble">V6.3-001</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idm45342456796352">Database </a></span></dt><dt><span class="sect1"><a href="#idm45342456745168">Language </a></span></dt><dt><span class="sect1"><a href="#idm45342456521744">System Administration </a></span></dt><dt><span class="sect1"><a href="#idm45342456383664">Other </a></span></dt><dt><span class="sect1"><a href="#idm45342456321760">More Information</a></span></dt><dd><dl><dt><span class="sect2"><a href="#Additional_Information_GTM-6838">Additional information for GTM-6838 - Asynchronous database IO</a></span></dt><dt><span class="sect2"><a href="#Additional_Information_GTM-6699">Additional information for GTM-6699 - Monitoring of shared database statistics</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idm45342456398624">Error and Other Messages</a></span></dt><dd><dl></dl></dd></dl></div><div class="sect1" title="V6.3-001A"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GTMrel_overview"></a>V6.3-001A</h2></div></div></div><div class="sect2" title="Overview"><div class="titlepage"><div><div><h3 class="title"><a name="overview"></a> Overview </h3></div></div></div><p>GT.M V6.3-001A provides timely remediation for a flaw introduced with <a class="link" href="#GTM-8637">GTM-8637</a> in V6.3-001. This flaw was discovered during GT.M testing immediately after the release and was never reported by a user. V6.3-001A also includes bug fixes and one enhancement and is suitable for production use. For more information, refer to <a class="link" href="#GTMtaV63-001Able" title="V6.3-001A">Change History - V6.3-001A</a>.</p><p>V6.3-001 brings important and useful enhancements to GT.M.</p><p>GT.M provides a fast and efficient mechanism for processes to opt-in to share their database access statistics for other processes to monitor. The statistics are the same as those available to the process itself using the ZSHOW "G" command. With almost no impact on monitored processes, a monitoring process can rapidly identify, for example, which processes are performing the most global SETs, or which ones are encountering the most database access conflicts (<a class="link" href="#GTM-6699">GTM-6699</a>).</p><p>MUPIP FREEZE -ONLINE freezes database writes from global buffers to the file system, while allowing applications to continue database updates as long as they are able to, without requiring a write to the database file system. During this time, journal writes continue, ensuring database recoverability. A typical use is to freeze a file system to take a snapshot, or break a mirror, an operation which can take seconds to over a minute. MUPIP FREEZE without the -ONLINE enhancement freezes database updates by application processes (<a class="link" href="#GTM-8362">GTM-8362</a>).</p><p>V6.3-001 includes multiple optimizations for performance, some applicable to all platforms, and others specific to Linux on x86_64.</p><p>Introduced as field test grade functionality in a production release, asynchronous IO is an option for databases using the BG access method. Unlike traditional database IO, which performs synchronous IO through the file system cache, asynchronous IO bypasses the file system cache. The performance characteristics of asynchronous IO are likely to be quite different from traditional sequential IO. Although asynchronous IO in theory should be more efficient than synchronous IO by eliminating the need for the UNIX file buffer cache and thereby eliminating certain file system locks (e.g., file systems mounted with AIX's CIO mount option, in practice asynchronous IO is likely to emerge from the starting gate under-performing synchronous IO because of the years that synchronous IO has been the common IO model operating systems and file systems have had used by applications. Please anticipate extensive benchmarking and tuning for your application to achieve the best performance it can with asynchronous IO. (<a class="link" href="#GTM-6838">GTM-6838</a>).</p><p>GT.M accepts routines with &lt;CR&gt;&lt;LF&gt; line terminators. FIS thanks the participants of the 2016 "Hacking GT.M" workshop for this enhancement (<a class="link" href="#GTM-4283">GTM-4283</a>).</p><p>As always, the release bring numerous smaller enhancements, and fixes. See the <a class="link" href="#GTMchng_hist" title="Change History">Change History</a> below.</p><p>    <span class="emphasis"><em>Please note that messages are not part of the GT.M API whose stability we strive to maintain. The enhancements and fixes in this release bring more changes to messages, including in some cases the order of messages, than a typical GT.M release does. Make sure that you review any automated scripting that parses GT.M messages.</em></span>  </p></div><div class="sect2" title="Conventions"><div class="titlepage"><div><div><h3 class="title"><a name="conventions"></a>Conventions</h3></div></div></div><p>This document uses the following conventions:</p><div class="informaltable"><table border="1" width="70%"><colgroup><col><col><col></colgroup><tbody><tr><td>

<p>              <span class="bold"><strong>Flag/Qualifiers</strong></span>            </p>
          </td><td colspan="2">
<p>-</p>
          </td></tr><tr><td>

<p>              <span class="bold"><strong>Program Names or Functions</strong></span>            </p>
          </td><td colspan="2">
<p>upper case. For example, MUPIP BACKUP</p>
          </td></tr><tr><td>

<p>              <span class="bold"><strong>Examples</strong></span>            </p>
          </td><td colspan="2">
<p>lower case. For example: <br> mupip backup -database ACN,HIST /backup</p>
          </td></tr><tr><td>

<p>              <span class="bold"><strong>Reference Number</strong></span>            </p>
          </td><td colspan="2">
<p>A reference number is used to track software <br> enhancements and support requests. <br> It is enclosed between parentheses (). </p>
          </td></tr><tr><td>

<p>              <span class="bold"><strong>Platform Identifier</strong></span>            </p>
          </td><td colspan="2">
<p>Where an item affects only specific platforms, the platforms are listed in square brackets, e.g., [AIX]</p>
          </td></tr></tbody></table></div><p></p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The term UNIX refers to the general sense of all platforms on which GT.M uses a POSIX API. As of this date, this includes: AIX and GNU/Linux on x86 (32- and 64-bits).</p></td></tr></table></div><p>The following table summarizes the new and revised replication terminology and qualifiers. </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>

<p>Pre V5.5-000 terminology</p>
          </th><th>

<p>Pre V5.5-000 qualifier</p>
          </th><th>

<p>Current terminology</p>
          </th><th>

<p>Current qualifiers </p>
          </th></tr></thead><tbody><tr><td>

<p>originating instance or primary instance </p>
          </td><td>

<p>-rootprimary</p>
          </td><td>

<p>originating instance or originating primary instance. </p>

<p>Within the context of a replication connection between two instances, an originating instance is referred to as source instance or source side. For example, in an B&lt;-A-&gt;C replication configuration, A is the source instance for B and C. </p>
          </td><td>

<p>-updok (recommended)</p>

<p>-rootprimary (still accepted)</p>
          </td></tr><tr><td>

<p>replicating instance (or secondary instance) and propagating instance </p>
          </td><td>

<p>N/A for replicating instance or secondary instance. </p>

<p>-propagateprimary for propagating instance </p>
          </td><td>

<p>replicating instance. </p>

<p>Within the context of a replication connection between two instances, a replicating instance that receives updates from a source instance is referred to as receiving instance or receiver side. For example, in an B&lt;-A-&gt;C replication configuration, both B and C can be referred to as a receiving instance. </p>
          </td><td>

<p>-updnotok </p>
          </td></tr><tr><td>

<p>N/A</p>
          </td><td>

<p>N/A</p>
          </td><td>

<p>supplementary instance. </p>

<p>For example, in an A-&gt;P-&gt;Q replication configuration, P is the supplementary instance. Both A and P are originating instances. </p>
          </td><td>

<p>-updok</p>
          </td></tr></tbody></table></div><p>Effective V6.0-000, GT.M documentation adopted IEC standard <a class="ulink" href="http://physics.nist.gov/cuu/Units/binary.html" target="_blank">Prefixes for binary multiples</a>. This document therefore uses prefixes Ki, Mi and Ti (e.g., 1MiB for 1,048,576 bytes). Over time, we'll update all GT.M documentation to this standard.</p><p><span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="New Feature"></span>
 denotes a new feature that requires updating the manuals. </p><p><span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="New Feature"></span>
 denotes a new feature or an enhancement that may not be upward compatible and may affect an existing application. </p><p><span class="inlinemediaobject"><img src="images/deprecated.png" alt="-Deprecated Message-"></span>
 denotes deprecated messages.</p><p><span class="inlinemediaobject"><img src="images/revised.png" alt="-Revised Message-"></span>
 denotes revised messages.</p><p><span class="inlinemediaobject"><img src="images/new.png" alt="-New Message-"></span>
 denotes added messages.</p></div><div class="sect2" title="Platforms"><div class="titlepage"><div><div><h3 class="title"><a name="platforms"></a> Platforms </h3></div></div></div><p> Over time, computing platforms evolve. Vendors obsolete hardware architectures. New versions of operating systems replace old ones. We at FIS continually evaluate platforms and versions of platforms that should be Supported for GT.M. In the table below, we document not only the ones that are currently Supported for this release, but also alert you to our future plans given the evolution of computing platforms. If you are an FIS customer, and these plans would cause you hardship, please contact your FIS account executive promptly to discuss your needs. </p><p>Each GT.M release is extensively tested by FIS on a set of specific versions of operating systems on specific hardware architectures (the combination of operating system and hardware architecture is referred to as a platform). This set of specific versions is considered Supported. There may be other versions of the same operating systems on which a GT.M release may not have been tested, but on which the FIS GT.M Group knows of no reason why GT.M would not work. This larger set of versions is considered Supportable. There is an even larger set of platforms on which GT.M may well run satisfactorily, but where the FIS GT.M team lacks the knowledge to determine whether GT.M is Supportable. These are considered Unsupported. Contact FIS GT.M Support with inquiries about your preferred platform.</p><p>As of the publication date, FIS supports this release on the hardware and operating system versions below. Contact FIS for a current list of Supported platforms. The reference implementation of the encryption plugin has its own additional requirements, should you opt to use it as included with GT.M.</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>
            <p class="bold"> Platform </p>
          </th><th>
            <p class="bold"> Supported Versions </p>
          </th><th>
            <p class="bold"> Notes </p>
          </th></tr></thead><tbody><tr><td>

<p> IBM Power Systems AIX </p>
          </td><td>

<p> 6.1, 7.1 TL 4, 7.2 </p>
          </td><td>

<p>Only 64-bit versions of AIX with POWER6 as the minimum required CPU architecture level are Supported.</p>

<p> While GT.M supports both UTF-8 mode and M mode on this platform, there are problems with the AIX ICU utilities that prevent FIS from testing 4-byte UTF-8 characters as comprehensively on this platform as we do on others. </p>

<p> Running GT.M on AIX 7.1 requires APAR IZ87564, a fix for the POW() function, to be applied. To verify that this fix has been installed, execute <code class="code"> instfix -ik IZ87564. </code> </p>
<p>AIX 7.1 TL 5 is Supportable.</p>

<p>Only the AIX jfs2 filesystem is Supported. Other filesystems, such as jfs1 are Supportable, but not Supported. FIS strongly recommends use of the jfs2 filesystem on AIX; use jfs1 only for existing databases not yet migrated to a jfs2 filesystem.</p>

<p>Effective May 1, 2017, FIS intends to require 7.1 as the minimum level of AIX, and POWER7 as the minimum required CPU architecture level.</p>
          </td></tr><tr><td>

<p> x86_64 GNU/Linux </p>
          </td><td>

<p> Red Hat Enterprise Linux 6 and 7; Ubuntu 14.04 LTS and 16.04 LTS</p>
          </td><td>

<p> To run 64-bit GT.M processes requires both a 64-bit kernel as well as 64-bit hardware. </p>

<p> GT.M should also run on recent releases of other major Linux distributions with a contemporary Linux kernel (2.6.32 or later), glibc (version 2.12 or later) and ncurses (version 5.7 or later). </p>

<p> To install GT.M with Unicode (UTF-8) support on RHEL 6, in response to the installation question <code class="code"> Should an ICU version other than the default be used? (y or n) </code> please respond <code class="code"><span class="bold"><strong> y </strong></span></code> and then specify the ICU version (for example, respond 4.2) to the subsequent prompt <code class="code"> Enter ICU version (ICU version 3.6 or later required. Enter as major-ver.minor-ver): </code></p>

<p> GT.M requires the libtinfo library. If it is not already installed on your system, and is available using the package manager, install it using the package manager. If a libtinfo package is not available:</p>
            <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Find the directory where libncurses.so is installed on your system.</p></li><li class="listitem"><p> Change to that directory and make a symbolic link to libncurses.so.&lt;ver&gt; from libtinfo.so.&lt;ver&gt;. Note that some of the libncurses.so entries may themselves be symbolic links, for example, libncurses.so.5 may itself be a symbolic link to libncurses.so.5.9.</p></li></ul></div>

<p>To support the optional WRITE /TLS fifth argument (the ability to provide / override options in the tlsid section of the encryption configuration file), the reference implementation of the encryption plugin requires libconfig 1.4.x. As this is a higher level than that distributed with Red Hat Enterprise Linux 6, in order to use this feature of WRITE/TLS on that platform with the reference implementation, please install libconfig 1.4.x, including the header files, and recompile the reference implementation of the encryption plugin.</p>

<p>Although GT.M itself does not require libelf, the geteuid program used by the GT.M installation script requires libelf (packaged as libelf1 on current Debian/Ubuntu distributions and elfutils-libelf on RHEL 6 &amp; 7).</p>

<p>A bug in the Linux 3.13 kernels used in Ubuntu 14.04 LTS (<a class="ulink" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1502168" target="_blank">https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1502168</a>) affects GT.M operation. As newer kernels do not exhibit this misbehavior, FIS recommends that you follow the Ubuntu LTS Enablement Stack procedure (<a class="ulink" href="https://wiki.ubuntu.com/Kernel/LTSEnablementStack" target="_blank">https://wiki.ubuntu.com/Kernel/LTSEnablementStack</a>) and use newer kernels to avoid the behavior until such time as the bug is fixed in the 3.13 kernels.</p>

<p>Only the ext4 and xfs filesystems are Supported. Other filesystems are Supportable, but not Supported. Furthermore, if you use the NODEFER_ALLOCATE feature, FIS strongly recommends that you use xfs. If you must use NODEFER_ALLOCATE with ext4, you <span class="emphasis"><em>must</em></span> ensure that your kernel includes commit d2dc317d564a46dfc683978a2e5a4f91434e9711 (search for d2dc317d564a46dfc683978a2e5a4f91434e9711 at <a class="ulink" href="https://www.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.0.3" target="_blank">https://www.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.0.3</a>) is in your kernel. The Red Hat Bugzilla identifier for the bug is 1213487. With NODEFER_ALLOCATE, do not use any filesystem other than ext4 and a kernel with the fix, or xfs.</p>

<p>Effective July 1, 2017, FIS intends to require:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
the then current level of 7 (e.g, 7.3) as the minimum supported level of Red Hat Enterprise Linux; and</li><li class="listitem">
16.04 LTS, as the minimum supported level of Ubuntu Linux.</li></ul></div><p>
If these will cause you hardship, please contact your FIS account manager or your GT.M support channel.</p>
          </td></tr><tr><td>

<p> x86 GNU/Linux </p>
          </td><td>

<p> Red Hat Enterprise Linux 6 </p>
          </td><td>

<p> This 32-bit version of GT.M runs on either 32- or 64-bit x86 platforms; we expect the x86_64 GNU/Linux version of GT.M to be preferable on 64-bit hardware. Running a 32-bit GT.M on a 64-bit GNU/Linux requires 32-bit libraries to be installed. The CPU must have an instruction set equivalent to 586 (Pentium) or better.</p>

<p>Effective July 1, 2017, FIS intends to consider only Debian 8 (Jessie), or the then Debian Stable, as the sole Supported platform for the 32-bit version.</p>

<p>Please also refer to the notes above on x86_64 GNU/Linux.</p>
          </td></tr></tbody></table></div><div class="sect3" title="Platform support lifecycle"><div class="titlepage"><div><div><h4 class="title"><a name="GTMplatform_lifecycle"></a> Platform support lifecycle </h4></div></div></div><p> FIS usually supports new operating system versions six months or so after stable releases are available and we usually support each version for a two year window. GT.M releases are also normally supported for two years after release. While FIS will attempt to provide support to customers in good standing for any GT.M release and operating system version, our ability to provide support diminishes after the two year window. </p><p> GT.M cannot be patched, and bugs are only fixed in new releases of software.</p></div></div><div class="sect2" title="32- vs. 64-bit platforms"><div class="titlepage"><div><div><h3 class="title"><a name="manage64"></a>32- vs. 64-bit platforms</h3></div></div></div><p>The same application code runs on both 32-bit and 64-bit platforms; however there are operational differences between them (for example, auto-relink and the ability to use GT.M object code from shared libraries exist only on 64-bit platforms). Please note that:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> You must compile the application code separately for each platform. Even though the M source code is the same, the generated object modules are different - the object code differs between x86 and x86_64.</p></li><li class="listitem"><p> Parameter-types that interface GT.M with non-M code using C calling conventions must match the data-types on their target platforms. Mostly, these parameters are for call-ins, external calls, internationalization (collation) and environment translation, and are listed in the tables below. Note that most addresses on 64-bit platforms are 8 bytes long and require 8 byte alignment in structures whereas all addresses on 32-bit platforms are 4 bytes long and require 4-byte alignment in structures.</p></li></ul></div><div class="sect3" title="Call-ins and External Calls"><div class="titlepage"><div><div><h4 class="title"><a name="GTMcallext"></a>Call-ins and External Calls</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
<p class="bold">Parameter type</p>
</th><th>
<p class="bold">32-Bit</p>
</th><th>
<p class="bold">64-bit</p>
</th><th>
<p class="bold">Remarks</p>
</th></tr></thead><tbody><tr><td>

<p> gtm_long_t</p>
</td><td>

<p> 4-byte (32-bit)</p>
</td><td>

<p> 8-byte (64-bit)</p>
</td><td>

<p> gtm_long_t is much the same as the C language long type.</p>
</td></tr><tr><td>

<p> gtm_ulong_t</p>
</td><td>

<p> 4-byte</p>
</td><td>

<p> 8-byte</p>
</td><td>

<p> gtm_ulong_t is much the same as the C language unsigned long type.</p>
</td></tr><tr><td>

<p> gtm_int_t</p>
</td><td>

<p> 4-byte</p>
</td><td>

<p> 4-byte</p>
</td><td>

<p> gtm_int_t has 32-bit length on all platforms.</p>
</td></tr><tr><td>

<p> gtm_uint_t</p>
</td><td>

<p> 4-byte</p>
</td><td>

<p> 4-byte</p>
</td><td>

<p> gtm_uint_t has 32-bit length on all platforms</p>
</td></tr></tbody></table></div><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution:  Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.jpg"></td><th align="left"> Caution</th></tr><tr><td align="left" valign="top"><p> If your interface uses gtm_long_t or gtm_ulong_t types but your interface code uses int or signed int types, failure to revise the types so they match on a 64-bit platform will cause the code to fail in unpleasant, potentially dangerous, and hard to diagnose ways.</p></td></tr></table></div></div><div class="sect3" title="Internationalization (Collation)"><div class="titlepage"><div><div><h4 class="title"><a name="GTMinternationalization"></a> Internationalization (Collation)</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
<p class="bold">Parameter type</p>
</th><th>
<p class="bold">32-Bit</p>
</th><th>
<p class="bold">64-bit</p>
</th><th>
<p class="bold">Remarks</p>
</th></tr></thead><tbody><tr><td>

<p> gtm_descriptor in gtm_descript.h</p>
</td><td>

<p> 4-byte</p>
</td><td>

<p> 8-byte</p>
</td><td>

<p> Although it is only the address within these types that changes, the structures may grow by up to 8 bytes as a result of compiler padding to meet platform alignment requirements.</p>
</td></tr></tbody></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> Assuming other aspects of code are 64-bit capable, collation routines should require only recompilation. </p></td></tr></table></div></div><div class="sect3" title="Environment Translation"><div class="titlepage"><div><div><h4 class="title"><a name="GTMenv_trans"></a> Environment Translation</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
              <p class="bold">Parameter type</p>
            </th><th>
              <p class="bold">32-Bit</p>
            </th><th>
              <p class="bold">64-bit</p>
            </th><th>
              <p class="bold">Remarks</p>
            </th></tr></thead><tbody><tr><td>

<p> gtm_string_t type in gtmxc_types.h</p>
            </td><td>

<p> 4-byte</p>
            </td><td>

<p> 8-byte</p>
            </td><td>

<p> Although it is only the address within these types that changes, the structures may grow by up to 8 bytes as a result of compiler padding to meet platform alignment requirements.</p>
            </td></tr></tbody></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>Assuming other aspects of code are 64-bit capable, environment translation routines should require only recompilation.</p></td></tr></table></div></div></div><div class="sect2" title="Recompile"><div class="titlepage"><div><div><h3 class="title"><a name="recompile"></a>
 Recompile </h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
 Recompile all M and C source files.</p></li></ul></div></div><div class="sect2" title="Rebuild Shared Libraries or Images"><div class="titlepage"><div><div><h3 class="title"><a name="rebuild"></a>Rebuild Shared Libraries or Images</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Rebuild all Shared Libraries after recompiling all M and C source files.</p><p>If your application is not using object code shared using GT.M's auto-relink functionality, please consider using it.</p></li></ul></div></div><div class="sect2" title="Additional Installation Instructions"><div class="titlepage"><div><div><h3 class="title"><a name="addn_instr"></a>Additional Installation Instructions</h3></div></div></div><p>To install GT.M, see the "Installing GT.M" section in the GT.M Administration and Operations Guide. For minimal down time, upgrade a current replicating instance and restart replication. Once that replicating instance is current, switch it to become the originating instance. Upgrade the prior originating instance to become a replicating instance, and perform a switchover when you want it to resume an originating primary role.</p><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution: Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.jpg"></td><th align="left">Caution</th></tr><tr><td align="left" valign="top"><p>Never replace the binary image on disk of any executable file while it is in use by an active process. It may lead to unpredictable results. Depending on the operating system, these results include but are not limited to denial of service (that is, system lockup) and damage to files that these processes have open (that is, database structural damage). </p></td></tr></table></div><div class="sect3"><div class="titlepage"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>FIS strongly recommends installing each version of GT.M in a separate (new) directory, rather than overwriting a previously installed version. If you have a legitimate need to overwrite an existing GT.M installation with a new version, you must first shut down all processes using the old version. FIS suggests installing GT.M V6.3-001A in a Filesystem Hierarchy Standard compliant location such as /usr/lib/fis-gtm/V6.3-001A_arch (for example, /usr/lib/fis-gtm/V6.3-001A_x86 on 32-bit Linux systems). A location such as /opt/fis-gtm/V6.3-001A_arch would also be appropriate. Note that the <em class="replaceable"><code>arch</code></em> suffix is especially important if you plan to install 32- and 64-bit versions of the same release of GT.M on the same system.</p></li><li class="listitem"><p>Use the appropriate MUPIP RUNDOWN command (e.g. ROLLBACK, RECOVER, RUNDOWN) of the old GT.M version to ensure all database files are cleanly closed.</p></li><li class="listitem"><p>Make sure gtmsecshr is not running. If gtmsecshr is running, first stop all GT.M processes including the DSE, LKE and MUPIP utilities and then perform a <code class="code">MUPIP STOP</code> <em class="replaceable"><code>pid_of_gtmsecshr</code></em>.</p></li><li class="listitem"><p>Starting with V6.2-000, GT.M no longer supports the use of the deprecated $gtm_dbkeys and the master key file it points to for database encryption. To convert master files to the libconfig format, please click <a class="ulink" href="downloadables/CONVDBKEYS.m" target="_blank"><span class="inlinemediaobject"><img src="images/download.png" alt="Download CONVDBKEYS.m"></span>
</a> to download the CONVDBKEYS.m program and follow instructions in the comments near the top of the program file. You can also download CONVDBKEYS.m from http://tinco.pair.com/bhaskar/gtm/doc/articles/downloadables/CONVDBKEYS.m. If you are using $gtm_dbkeys for database encryption, please convert master key files to libconfig format immediately after upgrading to V6.2-000. Also, modify your environment scripts to include the use of gtmcrypt_config environment variable. </p></li></ul></div><div class="sect4" title="Compiling the Reference Implementation Plugin"><div class="titlepage"><div><div><h5 class="title"><a name="idm45342456886944"></a>Compiling the Reference Implementation Plugin </h5></div></div></div><p>If you plan to use database encryption and TLS replication, you must compile the reference implementation plugin to match the shared library dependencies unique to your platform. The instructions for compiling the Reference Implementation plugin are as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Install the development headers and libraries for libgcrypt, libgpgme, libconfig, and libssl. On Linux, the package names of development libraries usually have a suffix such as -dev or -devel and are available through the package manager. For example, on Ubuntu_x86_64 a command like the following installs the required development libraries:</p><pre class="programlisting">sudo apt-get install libgcrypt11-dev libgpgme11-dev libconfig-dev libssl-dev</pre><p>Note that the package names may vary by distribution / version. </p></li><li class="listitem"><p>Unpack $gtm_dist/plugin/gtmcrypt/source.tar to a temporary directory. </p><pre class="programlisting">mkdir /tmp/plugin-build
cd /tmp/plugin-build
cp $gtm_dist/plugin/gtmcrypt/source.tar . 
tar -xvf source.tar</pre></li><li class="listitem"><p>Follow the instructions in the README.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Open Makefile with your editor; review and edit the common header (IFLAGS) and library paths (LIBFLAGS) in the Makefile to reflect those on your system.</p></li><li class="listitem"><p>Define the gtm_dist environment variable to point to the absolute path for the directory where you have GT.M installed</p></li><li class="listitem"><p>Copy and paste the commands from the README to compile and install the encryption plugin with the permissions defined at install time</p></li></ul></div></li></ol></div></div></div></div><div class="sect2" title="Upgrading to GT.M V6.3-001A"><div class="titlepage"><div><div><h3 class="title"><a name="upgrade"></a> Upgrading to GT.M V6.3-001A</h3></div></div></div><p>The GT.M database consists of four types of components- database files, journal files, global directories, and replication instance files. The format of some database components differs for 32-bit and 64-bit GT.M releases for the x86 GNU/Linux platform.</p><p> GT.M upgrade procedure for V6.3-001A consists of 5 stages:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>        <a class="link" href="#GTMstage_1" title="Stage 1: Global Directory Upgrade">Stage 1: Global Directory Upgrade</a>      </p></li><li class="listitem"><p>        <a class="link" href="#GTMstage_2" title="Stage 2: Database Files Upgrade">Stage 2: Database Files Upgrade</a>      </p></li><li class="listitem"><p>        <a class="link" href="#GTMstage_3" title="Stage 3: Replication Instance File Upgrade">Stage 3: Replication Instance File Upgrade</a>      </p></li><li class="listitem"><p>        <a class="link" href="#GTMstage_4" title="Stage 4: Journal Files Upgrade">Stage 4: Journal Files Upgrade</a>      </p></li><li class="listitem"><p>        <a class="link" href="#GTMstage_5" title="Stage 5: Trigger Definitions Upgrade">Stage 5: Trigger Definitions Upgrade</a>      </p></li></ul></div><p> Read the upgrade instructions of each stage carefully. Your upgrade procedure for GT.M V6.3-001A depends on your GT.M upgrade history and your current version.</p><div class="sect3" title="Stage 1: Global Directory Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_1"></a> Stage 1: Global Directory Upgrade</h4></div></div></div><p> FIS strongly recommends you back up your Global Directory file before upgrading. There is no one-step method for downgrading a Global Directory file to an older format.</p><p>      <span class="bold"><strong>To upgrade from any previous version of GT.M:</strong></span>    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Open your Global Directory with the GDE utility program of GT.M V6.3-001A.</p></li><li class="listitem"><p> Execute the EXIT command. This command automatically upgrades the Global Directory.</p></li></ul></div><p>      <span class="bold"><strong>To switch between 32- and 64-bit global directories on the x86 GNU/Linux platform:</strong></span>    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Open your Global Directory with the GDE utility program on the 32-bit platform.</p></li><li class="listitem"><p> On GT.M versions that support SHOW -COMMAND, execute SHOW -COMMAND -FILE=file-name. This command stores the current Global Directory settings in the specified file. .</p></li><li class="listitem"><p> On GT.M versions that do not support GDE SHOW -COMMAND, execute the SHOW -ALL command. Use the information from the output to create an appropriate command file or use it as a guide to manually enter commands in GDE.</p></li><li class="listitem"><p> Open GDE on the 64-bit platform. If you have a command file from 2. or 3., execute @file-name and then run the EXIT command. These commands automatically create the Global Directory. Otherwise use the GDE output from the old Global Directory and apply the settings in the new environment.</p></li></ol></div><p> An analogous procedure applies in the reverse direction. </p><p> If you inadvertently open a Global Directory of an old format with no intention of upgrading it, execute the QUIT command rather than the EXIT command.</p><p> If you inadvertently upgrade a global directory, perform the following steps to downgrade to an old GT.M release:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Open the global directory with the GDE utility program of V6.3-001A.</p></li><li class="listitem"><p> Execute the SHOW -COMMAND -FILE=file-name command. This command stores the current Global Directory settings in the file-name command file. If the old version is significantly out of date, edit the command file to remove the commands that do not apply to the old format. Alternatively, you can use the output from SHOW -ALL or SHOW -COMMAND as a guide to manually enter equivalent GDE commands for the old version.</p></li></ul></div></div><div class="sect3" title="Stage 2: Database Files Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_2"></a> Stage 2: Database Files Upgrade</h4></div></div></div><p>      <span class="bold"><strong>To upgrade from GT.M V5.0*/V5.1*/V5.2*/V5.3*/V5.4*/V5.5:</strong></span>    </p><p>A V6 database file is a superset of a V5 database file and has potentially longer keys and records. Therefore, upgrading a database file requires no explicit procedure. After upgrading the Global Directory, opening a V5 database with a V6 process automatically upgrades fields in the database fileheader.</p><p>A database created with V6 supports up to 992Mi blocks and is not backward compatible. V6 databases that take advantage of V6 limits on key size and records size cannot be downgraded. Use MUPIP DOWNGRADE -VERSION=V5 to downgrade a V6 database back to V5 format provided it meets the database downgrade requirements. For more information on downgrading a database, refer to <a class="link" href="#GTMdown_v54" title="Downgrading to V5 or V4"> Downgrading to V5 or V4</a>.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> A V5 database that has been automatically upgraded to V6 can perform all GT.M V6.3-001A operations. However, that database can only grow to the maximum size of the version in which it was originally created. A database created on V5.0-000 through V5.3-003 has maximum size of 128Mi blocks. A database created on V5.4-000 through V5.5-000 has a maximum size of 224Mi blocks. A database file created with V6.0-000 (or above) can grow up to a maximum of 992Mi blocks. This means that, for example, the maximum size of a V6 database file having 8KiB block size is 7936GiB (8KiB*992Mi).</p></td></tr></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> In order to perform a database downgrade you must perform a MUPIP INTEG -NOONLINE. If the duration of the MUPIP INTEG exceeds the time allotted for an upgrade you should rely on a rolling upgrade scheme using replication.</p></td></tr></table></div><p> If your database has any previously used but free blocks from an earlier upgrade cycle (V4 to V5), you may need to execute the MUPIP REORG -UPGRADE command. If you have already executed the MUPIP REORG -UPGRADE command in a version prior to V5.3-003 and if subsequent versions cannot determine whether MUPIP REORG -UPGRADE performed all required actions, it sends warnings to the syslog requesting another run of MUPIP REORG -UPGRADE. In that case, perform any one of the following steps: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Execute the MUPIP REORG -UPGRADE command again, or</p></li><li class="listitem"><p> Execute the DSE CHANGE -FILEHEADER -FULLY_UPGRADED=1 command to stop the warnings.</p></li></ul></div><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution:  Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.jpg"></td><th align="left"> Caution</th></tr><tr><td align="left" valign="top"><p> Do not run the DSE CHANGE -FILEHEADER -FULLY_UPGRADED=1 command unless you are absolutely sure of having previously run a MUPIP REORG -UPGRADE from V5.3-003 or later. An inappropriate DSE CHANGE -FILEHEADE -FULLY_UPGRADED=1 may lead to database integrity issues.</p></td></tr></table></div><p> You do not need to run MUPIP REORG -UPGRADE on:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> A database that was created by a V5 MUPIP CREATE</p></li><li class="listitem"><p> A database that has been completely processed by a MUPIP REORG -UPGRADE from V5.3-003 or later.</p></li></ul></div><p> For additional upgrade considerations, refer to Database Compatibility Notes.</p><p>      <span class="bold"><strong>To upgrade from a GT.M version prior to V5.000:</strong></span>    </p><p> You need to upgrade your database files only when there is a block format upgrade from V4 to V5. However, some versions, for example, database files which have been initially been created with V4 (and subsequently upgraded to a V5 format) may additionally need a MUPIP REORG -UPGRADE operation to upgrade previously used but free blocks that may have been missed by earlier upgrade tools.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Upgrade your database files using in-place or traditional database upgrade procedure depending on your situation. For more information on in-place/traditional database upgrade, see <a class="ulink" href="GTM_Database_Migration.html" target="_blank">Database Migration Technical Bulletin</a>.</p></li><li class="listitem"><p> Run the MUPIP REORG -UPGRADE command. This command upgrades all V4 blocks to V5 format. </p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note:  Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left"> Note</th></tr><tr><td align="left" valign="top"><p> Databases created with GT.M releases prior to V5.0-000 and upgraded to a V5 format retain the maximum size limit of 64Mi (67,108,864) blocks.</p></td></tr></table></div><div class="sect4" title="Database Compatibility Notes"><div class="titlepage"><div><div><h5 class="title"><a name="GTMdatabase_comp"></a> Database Compatibility Notes</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Changes to the database file header may occur in any release. GT.M automatically upgrades database file headers as needed. Any changes to database file headers are upward and downward compatible within a major database release number, that is, although processes from only one GT.M release can access a database file at any given time, processes running different GT.M releases with the same major release number can access a database file at different times.</p></li><li class="listitem"><p> Databases created with V5.3-004 through V5.5-000 can grow to a maximum size of 224Mi (234,881,024) blocks. This means, for example, that with an 8KiB block size, the maximum database file size is 1,792GiB; this is effectively the size of a single global variable that has a region to itself and does not itself span regions; a database consists of any number of global variables. A database created with GT.M versions V5.0-000 through V5.3-003 can be upgraded with MUPIP UPGRADE to increase the limit on database file size from 128Mi to 224Mi blocks.</p></li><li class="listitem"><p> Databases created with V5.0-000 through V5.3-003 have a maximum size of 128Mi (134, 217,728) blocks. GT.M versions V5.0-000 through V5.3-003 can access databases created with V5.3-004 and later as long as they remain within a 128Mi block limit.</p></li><li class="listitem"><p> Database created with V6.0-000 or above have a maximum size of 1,040,187,392(992Mi) blocks.</p></li><li class="listitem"><p>For information on downgrading a database upgraded from V6 to V5, refer to: <a class="link" href="#GTMstage_1" title="Stage 1: Global Directory Upgrade">Downgrading to V5 or V4</a>.</p></li></ul></div></div></div><div class="sect3" title="Stage 3: Replication Instance File Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_3"></a> Stage 3: Replication Instance File Upgrade</h4></div></div></div><p> V6.3-001A does not require new replication instance files if you are upgrading from V5.5-000. However, V6.3-001A requires new replication instance files if you are upgrading from any version prior to V5.5-000. Instructions for creating new replication instance files are in the <a class="ulink" href="../books/ao/UNIX_manual/ch07.html" target="_blank">Database Replication</a> chapter of the GT.M Administration and Operations Guide. Shut down all Receiver Servers on other instances that are to receive updates from this instance, shut down this instance Source Server(s), recreate the instance file, restart the Source Server(s) and then restart any Receiver Server for this instance with the -UPDATERESYNC qualifier.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note:  Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left"> Note</th></tr><tr><td align="left" valign="top"><p> Without the -UPDATERESYNC qualifier, the replicating instance synchronizes with the originating instance using state information from both instances and potentially rolling back information on the replicating instance. The -UPDATERESYNC qualifier declares the replicating instance to be in a wholesome state matching some prior (or current) state of the originating instance; it causes MUPIP to update the information in the replication instance file of the originating instance and not modify information currently in the database on the replicating instance. After this command, the replicating instance catches up to the originating instance starting from its own current state. Use UPDATERESYNC only when you are absolutely certain that the replicating instance database was shut down normally with no errors, or appropriately copied from another instance with no errors.</p></td></tr></table></div><p> </p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> You must always follow the steps described in the <a class="ulink" href="../books/ao/UNIX_manual/ch07.html" target="_blank">Database Replication</a> chapter of the GT.M Administration and Operations Guide when migrating from a logical dual site (LDS) configuration to an LMS configuration, even if you are not changing GT.M releases.</p></td></tr></table></div></div><div class="sect3" title="Stage 4: Journal Files Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_4"></a> Stage 4: Journal Files Upgrade</h4></div></div></div><p> On every GT.M upgrade:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Create a fresh backup of your database.</p></li><li class="listitem"><p> Generate new journal files (without back-links).</p></li></ul></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.jpg"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> This is necessary because MUPIP JOURNAL cannot use journal files from a release other than its own for RECOVER, ROLLBACK, or EXTRACT. </p></td></tr></table></div></div><div class="sect3" title="Stage 5: Trigger Definitions Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_5"></a> Stage 5: Trigger Definitions Upgrade</h4></div></div></div><p> If you are upgrading from V5.4-002A/V5.4-002B/V5.5-000 to V6.3-001A and you have database triggers defined in V6.2-000 or earlier, you need to ensure that your trigger definitions are wholesome in the older version and then run MUPIP TRIGGER -UPGRADE. If you have doubts about the wholesomeness of the trigger definitions in the old version use the instructions below to capture the definitions delete them in the old version (-*), run MUPIP TRIGGER -UPGRADE in V6.3-001A and then reload them as described below.</p><p> You need to extract and reload your trigger definitions only if you are upgrading from V5.4-000/V5.4-000A/V5.4-001 to V6.3-001A or if you find your prior version trigger definitions have problems. For versions V5.4-000/V5.4-000A/V5.4-001 this is necessary because multi-line XECUTEs for triggers require a different internal storage format for triggers which makes triggers created in V5.4-000/V5.4-000A/V5.4-001 incompatible with V5.4-002/V5.4-002A/V5.4-002B/V5.5-000/V6.0-000/V6.0-001/V6.3-001A.</p><p> To extract and reapply the trigger definitions on V6.3-001A using MUPIP TRIGGER:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Using the old version, execute a command like <code class="code">mupip trigger -select="*" trigger_defs.trg</code>. Now, the output file trigger_defs.trg contains all trigger definitions.</p></li><li class="listitem"><p> Place -* at the beginning of the trigger_defs.trg file to remove the old trigger definitions.</p></li><li class="listitem"><p> Using V6.3-001A, run <code class="code">mupip trigger -triggerfile=trigger_defs.trg </code> to reload your trigger definitions.</p></li></ol></div><p> To extract and reload trigger definitions on a V6.3-001A replicating instance using $ZTRIGGER():</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Shut down the instance using the old version of GT.M. </p></li><li class="listitem"><p> Execute a command like <code class="code">mumps -run %XCMD 'i $ztrigger("select")' &gt; trigger_defs.trg</code> . Now, the output file trigger_defs.trg contains all trigger definitions.</p></li><li class="listitem"><p> Turn off replication on all regions. </p></li><li class="listitem"><p> Run <code class="code">mumps -run %XCMD 'i $ztrigger("item","-*") </code> to remove the old trigger definitions. </p></li><li class="listitem"><p> Perform the upgrade procedure applicable for V6.3-001A.</p></li><li class="listitem"><p> Run <code class="code"> mumps -run %XCMD 'if $ztrigger("file","trigger_defs.trg")'</code> to reapply your trigger definitions.</p></li><li class="listitem"><p> Turn replication on. </p></li><li class="listitem"><p> Connect to the originating instance. </p></li></ol></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note:  Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left"> Note</th></tr><tr><td align="left" valign="top"><p> Reloading triggers renumbers automatically generated trigger names. </p></td></tr></table></div></div><div class="sect3" title="Downgrading to V5 or V4"><div class="titlepage"><div><div><h4 class="title"><a name="GTMdown_v54"></a> Downgrading to V5 or V4 </h4></div></div></div><p> You can downgrade a GT.M V6 database to V5 or V4 format using MUPIP DOWNGRADE.</p><p> Starting with V6.0-000, MUPIP DOWNGRADE supports the -VERSION qualifier with the following format: </p><pre class="programlisting">MUPIP DOWNGRADE -VERSION=[V5|V4] </pre><p> -VERSION specifies the desired version for the database header. </p><p>      <span class="bold"><strong> To qualify for a downgrade from V6 to V5, your database must meet the following requirements: </strong></span>    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> The database was created with a major version no greater than the target version. </p></li><li class="listitem"><p> The database does not contain any records that exceed the block size (spanning nodes). </p></li><li class="listitem"><p> The sizes of all the keys in database are less than 256 bytes. </p></li><li class="listitem"><p> There are no keys present in database with size greater than the Maximum-Key-Size specification in the database header, that is, Maximum-Key-Size is assured. </p></li><li class="listitem"><p> The maximum Record size is small enough to accommodate key, overhead, and value within a block. </p></li></ol></div><p> To verify that your database meets all of the above requirements, execute MUPIP INTEG -NOONLINE. Note that the integrity check requires the use of -NOONLINE to ensure no concurrent updates invalidate the above requirements. Once assured that your database meets all the above requirements, MUPIP DOWNGRADE -VERSION=V5 resets the database header to V5 elements which makes it compatible with V5 versions. </p><p>To qualify for a downgrade from V6 to V4, your database must meet the same downgrade requirements that are there for downgrading from V6 to V5.</p><p> If your database meets the downgrade requirements, perform the following steps to downgrade to V4: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> In a GT.M V6.3-001A environment: </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p> Execute MUPIP SET -VERSION=v4 so that GT.M writes updates blocks in V4 format. </p></li><li class="listitem"><p> Execute MUPIP REORG -DOWNGRADE to convert all blocks from V6 format to V4 format. </p></li></ol></div></li><li class="listitem"><p> Bring down all V6 GT.M processes and execute MUPIP RUNDOWN -FILE on each database file to ensure that there are no processes accessing the database files.</p></li><li class="listitem"><p> Execute MUPIP DOWNGRADE -VERSION=V4 to change the database file header from V6 to V4. </p></li><li class="listitem"><p> Restore or recreate all the V4 global directory files. </p></li><li class="listitem"><p> Your database is now successfully downgraded to V4. </p></li></ol></div></div></div><div class="sect2" title="Managing M mode and UTF-8 mode"><div class="titlepage"><div><div><h3 class="title"><a name="mng_mode"></a>Managing M mode and UTF-8 mode</h3></div></div></div><p>With <a class="ulink" href="http://icu-project.org" target="_blank">International Components for Unicode</a> (ICU) version 3.6 or later installed, GT.M's UTF-8 mode provides support for <span class="trademark">Unicode</span>&#8482; (ISO/IEC-10646) character strings. On a system that does not have ICU 3.6 or later installed, GT.M only supports M mode.</p><p>On a system that has ICU installed, GT.M optionally installs support for both M mode and UTF-8 mode, including a utf8 subdirectory of the directory where GT.M is installed. From the same source file, depending upon the value of the environment variable gtm_chset, the GT.M compiler generates an object file either for M mode or UTF-8 mode. GT.M generates a new object file when it finds both a source and an object file, and the object predates the source file and was generated with the same setting of $gtm_chset/$ZCHset. A GT.M process generates an error if it encounters an object file generated with a different setting of $gtm_chset/$ZCHset than that processes' current value.</p><p>Always generate an M object module with a value of $gtm_chset/$ZCHset matching the value processes executing that module will have. As the GT.M installation itself contains utility programs written in M, their object files also conform to this rule. In order to use utility programs in both M mode and UTF-8 mode, the GT.M installation ensures that both M and UTF-8 versions of object modules exist, the latter in the utf8 subdirectory. This technique of segregating the object modules by their compilation mode prevents both frequent recompiles and errors in installations where both modes are in use. If your installation uses both modes, consider a similar pattern for structuring application object code repositories.</p><p>GT.M is installed in a parent directory and a utf8 subdirectory as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Actual files for GT.M executable programs (mumps, mupip, dse, lke, and so on) are in the parent directory, that is, the location specified for installation.</p></li><li class="listitem"><p>Object files for programs written in M (GDE, utilities) have two versions - one compiled with support for UTF-8 mode in the utf8 subdirectory, and one compiled without support for UTF-8 mode in the parent directory. Installing GT.M generates both versions of object files, as long as ICU 3.6 or greater is installed and visible to GT.M when GT.M is installed, and you choose the option to install Unicode support. Note that on 64-bit versions of GT.M, the object code is in shared libraries, rather than individual files in the directory.</p></li><li class="listitem"><p>The utf8 subdirectory has files called mumps, mupip, dse, lke, and so on, which are relative symbolic links to the executables in the parent directory (for example, mumps is the symbolic link ../mumps).</p></li><li class="listitem"><p>When a shell process sources the file gtmprofile, the behavior is as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>If $gtm_chset is "m", "M" or undefined, there is no change from the previous GT.M versions to the value of the environment variable $gtmroutines.</p></li><li class="listitem"><p>If $gtm_chset is "UTF-8" (the check is case-insensitive),</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>$gtm_dist is set to the utf8 subdirectory (that is, if GT.M is installed in /usr/lib/fis-gtm/gtm_V6.3-001A_i686, then gtmprofile sets $gtm_dist to /usr/lib/fis-gtm/gtm_V6.3-001A_i686/utf8).</p></li><li class="listitem"><p>On platforms where the object files have not been placed in a libgtmutil.so shared library, the last element of $gtmroutines is $gtm_dist($gtm_dist/..) so that the source files in the parent directory for utility programs are matched with object files in the utf8 subdirectory. On platforms where the object files are in libgtmutil.so, that shared library is the one with the object files compiled in the mode for the process.</p></li></ul></div></li></ul></div></li></ul></div><p>For more information on gtmprofile, refer to the <a class="ulink" href="../books/ao/UNIX_manual/ch03.html" target="_blank">Basic Operations</a> chapter of GT.M Administration and Operations Guide.</p><p>Although GT.M uses ICU for UTF-8 operation, ICU is not FIS software and FIS does not support ICU.</p></div><div class="sect2" title="Setting the environment variable TERM"><div class="titlepage"><div><div><h3 class="title"><a name="setterm"></a>Setting the environment variable TERM</h3></div></div></div><p>The environment variable TERM must specify a terminfo entry that accurately matches the terminal (or terminal emulator) settings. Refer to the terminfo man pages for more information on the terminal settings of the platform where GT.M needs to run.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Some terminfo entries may seem to work properly but fail to recognize function key sequences or fail to position the cursor properly in response to escape sequences from GT.M. GT.M itself does not have any knowledge of specific terminal control characteristics. Therefore, it is important to specify the right terminfo entry to let GT.M communicate correctly with the terminal. You may need to add new terminfo entries depending on your specific platform and implementation. The terminal (emulator) vendor may also be able to help.</p></li><li class="listitem"><p>GT.M uses the following terminfo capabilities. The full variable name is followed by the capname in parenthesis:</p><pre class="programlisting">auto_right_margin(am), clr_eos(ed), clr_eol(el), columns(cols), cursor_address(cup), cursor_down(cud1), cursor_left(cub1), cursor_right(cuf1), cursor_up(cuu1), eat_newline_glitch(xenl), key_backspace(kbs), key_dc(kdch1),key_down(kcud1), key_left(kcub1), key_right(kcuf1), key_up(kcuu1), key_insert(kich1), keypad_local(rmkx),keypad_xmit(smkx), lines(lines).</pre></li></ul></div><p>GT.M sends keypad_xmit before terminal reads for direct mode and READs (other than READ *) if EDITING is enabled. GT.M sends keypad_local after these terminal reads.</p></div><div class="sect2" title="Installing Compression Libraries"><div class="titlepage"><div><div><h3 class="title"><a name="install_comp_lib"></a> Installing Compression Libraries</h3></div></div></div><p> If you plan to use the optional compression facility for replication, you must provide the compression library. The GT.M interface for compression libraries accepts the zlib compression libraries without any need for adaptation. These libraries are included in many UNIX distributions and are downloadable from the <a class="ulink" href="http://www.zlib.net" target="_blank">zlib home page</a>. If you prefer to use other compression libraries, you need to configure or adapt them to provide the same API as that provided by zlib.</p><p> If a package for zlib is available with your operating system, FIS suggests that you use it rather than building your own.</p><p> By default, GT.M searches for the libz.so shared library in the standard system library directories (for example, /usr/lib, /usr/local/lib, /usr/local/lib64). If the shared library is installed in a non-standard location, before starting replication, you must ensure that the environment variable LIBPATH (AIX) or LD_LIBRARY_PATH (GNU/Linux) includes the directory containing the library. The Source and Receiver Server link the shared library at runtime. If this fails for any reason (such as file not found, or insufficient authorization), the replication logic logs a DLLNOOPEN error and continues with no compression.</p><p>Although GT.M uses a library such as zlib for compression, such libraries are not FIS software and FIS does not support any compression libraries.</p></div></div><div class="sect1" title="Change History"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GTMchng_hist"></a> Change History</h2></div></div></div><div class="sect2" title="V6.3-001A"><div class="titlepage"><div><div><h3 class="title"><a name="GTMtaV63-001Able"></a>V6.3-001A</h3></div></div></div><p>Fixes and enhancements specific to V6.3-001A:</p><p></p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>                <p><span class="bold"><strong>Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Prior Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Category</strong></span></p>              </th><th>                <p><span class="bold"><strong>Summary</strong></span></p>              </th></tr></thead><tbody><tr><td><p><a class="link" href="#GTM-8632">GTM-8632</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>On Linux, an environment variable to help manage core file generation <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8685">GTM-8685</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Forward Rollback Consistency with Journal Renaming</p></td></tr><tr><td><p><a class="link" href="#GTM-8700">GTM-8700</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Fixes to issues related to statistics sharing</p></td></tr><tr><td><p><a class="link" href="#GTM-8702">GTM-8702</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Always ensure before images when needed in TP allocations</p></td></tr><tr><td><p><a class="link" href="#GTM-8705">GTM-8705</a></p></td><td><p></p></td><td><p>Language</p></td><td><p>ZSHOW/ZWRITE work correctly even if they result in a garbage collection</p></td></tr></tbody></table></div></div><div class="sect2" title="V6.3-001"><div class="titlepage"><div><div><h3 class="title"><a name="GTMtaV63-001ble"></a>V6.3-001</h3></div></div></div><p>Fixes and enhancements specific to V6.3-001:</p><p></p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>                <p><span class="bold"><strong>Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Prior Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Category</strong></span></p>              </th><th>                <p><span class="bold"><strong>Summary</strong></span></p>              </th></tr></thead><tbody><tr><td><p><a class="link" href="#GTM-4283">GTM-4283</a></p></td><td><p>S9C04-002078</p></td><td><p>Other</p></td><td><p>GT.M accepts routines with "DOS-style" terminators  <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-5206">GTM-5206</a></p></td><td><p>S9D12-002397</p></td><td><p>DB</p></td><td><p>If possible, avoid journal file hardening when holding a database critical section</p></td></tr><tr><td><p><a class="link" href="#GTM-6037">GTM-6037</a></p></td><td><p>C9H07-002874</p></td><td><p>DB</p></td><td><p>Reporting of numeric subscripts in globals which should not use them</p></td></tr><tr><td><p><a class="link" href="#GTM-6085">GTM-6085</a></p></td><td><p>C9H10-002922</p></td><td><p>Other</p></td><td><p>Update Process Reader Helper avoids rare abnormal termination</p></td></tr><tr><td><p><a class="link" href="#GTM-6332">GTM-6332</a></p></td><td><p>C9J01-003085</p></td><td><p>Other</p></td><td><p>Code generation cleanup on Linux</p></td></tr><tr><td><p><a class="link" href="#GTM-6598">GTM-6598</a></p></td><td><p>C9K04-003268</p></td><td><p>Admin</p></td><td><p>Limit the time MUPIP BACKUP and INTEG wait for kill-in-progress to clear</p></td></tr><tr><td><p><a class="link" href="#GTM-6699">GTM-6699</a></p></td><td><p>D9K10-002792</p></td><td><p>DB</p></td><td><p>Opt-in facility for statistics sharing <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-6793">GTM-6793</a></p></td><td><p>C9L04-003395</p></td><td><p>Language</p></td><td><p>Limit MERGE into an lvn to 31 subscripts</p></td></tr><tr><td><p><a class="link" href="#GTM-6838">GTM-6838</a></p></td><td><p>C9L06-003425</p></td><td><p>DB</p></td><td><p>Asynchronous database IO <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-7593">GTM-7593</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>More reliable journal flushing in edge cases under replication </p></td></tr><tr><td><p><a class="link" href="#GTM-7729">GTM-7729</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>LOCKs have separate resource management by default, but you can select shared resource management <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-7778">GTM-7778</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>More consistent timestamps on AIX gtmsecshr messages</p></td></tr><tr><td><p><a class="link" href="#GTM-7837">GTM-7837</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP REPLICATE -CHANGELOG waits for up to 25 seconds to confirm a change log request</p></td></tr><tr><td><p><a class="link" href="#GTM-7857">GTM-7857</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Reporting of empty-string subscripts that conflict with database settings</p></td></tr><tr><td><p><a class="link" href="#GTM-7922">GTM-7922</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP EXTRACT protects against concurrent updates to region spanning updates</p></td></tr><tr><td><p><a class="link" href="#GTM-8254">GTM-8254</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>USE command accepts [I|O]CHSET for Sequential Disks, SOCKETs and terminals <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8357">GTM-8357</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>GT.M initializes the value of $ZSTEP from the environment variable $gtm_zstep if it is defined</p></td></tr><tr><td><p><a class="link" href="#GTM-8359">GTM-8359</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>More general support for indirect arguments to TSTART commands and an explicit error for TSTART in direct mode</p></td></tr><tr><td><p><a class="link" href="#GTM-8359">GTM-8362</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Allow updates during a MUPIP FREEZE</p></td></tr><tr><td><p><a class="link" href="#GTM-8366">GTM-8366</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Clear $REFERENCE after an error in a global reference</p></td></tr><tr><td><p><a class="link" href="#GTM-8373">GTM-8373</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Accept rapid changes to replication logs destination files</p></td></tr><tr><td><p><a class="link" href="#GTM-8385">GTM-8385</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Computations using literals largely performed at compile time <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8427">GTM-8427</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>$ZCOLLATE() converts a GVN and $ZATRANSLATE() an expression to a key representation and back <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8430">GTM-8430</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Improvement in critical section acquisition for x86_64 Linux</p></td></tr><tr><td><p><a class="link" href="#GTM-8447">GTM-8447</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP DUMPFHEAD provides lighter weight and less problematic access to database state information <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8542">GTM-8542</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP LOAD -FORMAT=Binary validates keys in the extract records</p></td></tr><tr><td><p><a class="link" href="#GTM-8544">GTM-8544</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Timer interrupt reduction</p></td></tr><tr><td><p><a class="link" href="#GTM-8547">GTM-8547</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Source Server handles reconnection errors more gracefully.</p></td></tr><tr><td><p><a class="link" href="#GTM-8553">GTM-8553</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Eliminate an interaction between poollimit and extended global references</p></td></tr><tr><td><p><a class="link" href="#GTM-8559">GTM-8559</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>$gtm_etrap and $gtm_trigger_etrap accept 8192 byte strings <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8561">GTM-8561</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Deal appropriately with M process data exceeding 2GiB </p></td></tr><tr><td><p><a class="link" href="#GTM-8562">GTM-8562</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>The configure install script creates routine directories even when reusing an existing directory</p></td></tr><tr><td><p><a class="link" href="#GTM-8564">GTM-8564</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Protect an interrupted MUPIP REORG -ENCRYPT from an intervening MUPIP REORG -TRUNCATE</p></td></tr><tr><td><p><a class="link" href="#GTM-8567">GTM-8567</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>configure script defaults locale to allow a UTF-8 installation to proceed</p></td></tr><tr><td><p><a class="link" href="#GTM-8568">GTM-8568</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Fix three rare trigger update issues</p></td></tr><tr><td><p><a class="link" href="#GTM-8569">GTM-8569</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Prevent rare duplicate messages when the number of processes in an instance exceeds 32ki</p></td></tr><tr><td><p><a class="link" href="#GTM-8570">GTM-8570</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Eliminate superfluous literals from object modules</p></td></tr><tr><td><p><a class="link" href="#GTM-8571">GTM-8571</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Fix regression in ^%GI for GO format containing any empty data values</p></td></tr><tr><td><p><a class="link" href="#GTM-8572">GTM-8572</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Prevent instances of pre-evaluation in $SELECT()</p></td></tr><tr><td><p><a class="link" href="#GTM-8573">GTM-8573</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Compiler optimization for IF &lt;literal&gt; and command postconditional literals <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8578">GTM-8578</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Correct handling of non-char arrays in %PEEKBYNAME()</p></td></tr><tr><td><p><a class="link" href="#GTM-8579">GTM-8579</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Operator optimizations at compile time <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8582">GTM-8582</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Appropriate Source Server startup with Sync I/O and 4KiB sector sizes on an XFS filesystem</p></td></tr><tr><td><p><a class="link" href="#GTM-8583">GTM-8583</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Prevent inappropriate MAXNRSUBSCRIPTS errors from MERGE</p></td></tr><tr><td><p><a class="link" href="#GTM-8584">GTM-8584</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Prevent GTMASSERT caused by a &lt;NUL&gt; character generating a NOCANONICNAME error message</p></td></tr><tr><td><p><a class="link" href="#GTM-8590">GTM-8590</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Certain timed operations deferred during $ZCONVERT()</p></td></tr><tr><td><p><a class="link" href="#GTM-8593">GTM-8593</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>OPEN of an existing SOCKET device can modify ZFF &amp; delimiters; also $KEY is always in UTF-8  <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8595">GTM-8595</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Fix to M mode handling of non-ASCII literals</p></td></tr><tr><td><p><a class="link" href="#GTM-8597">GTM-8597</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Better protection against one type of random error</p></td></tr><tr><td><p><a class="link" href="#GTM-8598">GTM-8598</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Certain operations deferred while processing character input</p></td></tr><tr><td><p><a class="link" href="#GTM-8599">GTM-8599</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Correct odd case for MUPIP JOURNAL -ROLLBACK -FORWARD </p></td></tr><tr><td><p><a class="link" href="#GTM-8602">GTM-8602</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>MUPIP JOURNAL accepts multiple EOF records</p></td></tr><tr><td><p><a class="link" href="#GTM-8609">GTM-8609</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Improved error messaging for errors that occur during the first access of a journal file</p></td></tr><tr><td><p><a class="link" href="#GTM-8610">GTM-8610</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>The Receiver Server avoids rare situations that could cause it to exit</p></td></tr><tr><td><p><a class="link" href="#GTM-8612">GTM-8612</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP LOAD handles minimal headers and long lines gracefully</p></td></tr><tr><td><p><a class="link" href="#GTM-8613">GTM-8613</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Protect against concurrent creation of global variable with differing collation characteristics</p></td></tr><tr><td><p><a class="link" href="#GTM-8614">GTM-8614</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>REQROLLBACK message indicates required -ROLLBACK also requires -NOONLINE</p></td></tr><tr><td><p><a class="link" href="#GTM-8615">GTM-8615</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Certain timed operations deferred during external calls</p></td></tr><tr><td><p><a class="link" href="#GTM-8629">GTM-8629</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP RESTORE treats truncated input as an error</p></td></tr><tr><td><p><a class="link" href="#GTM-8637">GTM-8637</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Prevent GTMASSERT2 from very long running jobs performing TP transactions</p></td></tr><tr><td><p><a class="link" href="#GTM-8639">GTM-8639</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>ZSHOW "G" provides Block Transition to Dirty (BTD) statistic for BG databases <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8640">GTM-8640</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Accept &lt;NUL&gt; characters in literals use for indirection and XECUTE</p></td></tr><tr><td><p><a class="link" href="#GTM-8641">GTM-8641</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>$ORDER(,-1) of global variables that span database blocks returns correct result</p></td></tr><tr><td><p><a class="link" href="#GTM-8642">GTM-8642</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Prevent rare inappropriate GTMASSERT2 from MUPIP STOP of a process while changing encryption keys</p></td></tr><tr><td><p><a class="link" href="#GTM-8645">GTM-8645</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Improved (but imperfect) tracking of database reference count</p></td></tr><tr><td><p><a class="link" href="#GTM-8654">GTM-8654</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Revised permission handling when determining group membership <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8655">GTM-8655</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Improved database structural integrity protection against kill -9</p></td></tr><tr><td><p><a class="link" href="#GTM-8656">GTM-8656</a></p></td><td><p></p></td><td><p>Admin</p></td><td><p>Support for OpenSSL 1.1.0</p></td></tr><tr><td><p><a class="link" href="#GTM-8657">GTM-8657</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Replication from BC to SI handles multiple connections with no intervening updates</p></td></tr><tr><td><p><a class="link" href="#GTM-8659">GTM-8659</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Better file cleanup in case of abnormal termination during file creation</p></td></tr><tr><td><p><a class="link" href="#GTM-8660">GTM-8660</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Improved System Profiling for x86_64 Linux editions</p></td></tr><tr><td><p><a class="link" href="#GTM-8664">GTM-8664</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Defer idle epoch while holding journal pool critical section lock.</p></td></tr><tr><td><p><a class="link" href="#GTM-8668">GTM-8668</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Simplify GPG Agent interaction with the encryption reference implementation</p></td></tr><tr><td><p><a class="link" href="#GTM-8669">GTM-8669</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Fix a rare buffer overrun when calling to external Java libraries and programs</p></td></tr><tr><td><p><a class="link" href="#GTM-8672">GTM-8672</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Adjustments to improve the memory utilization for heap space (primarily local variable storage)</p></td></tr><tr><td><p><a class="link" href="#GTM-8676">GTM-8676</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Fix to DSE FIND -KEY</p></td></tr><tr><td><p><a class="link" href="#GTM-8679">GTM-8679</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Global name-level $ORDER() maintains $REFERENCE</p></td></tr><tr><td><p><a class="link" href="#GTM-8686">GTM-8686</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>^%TI works as documented</p></td></tr><tr><td><p><a class="link" href="#GTM-8687">GTM-8687</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>GT.M properly handles loading successive global directories with increasing numbers of regions</p></td></tr><tr><td><p><a class="link" href="#GTM-8689">GTM-8689</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Protect OPEN command against external actions</p></td></tr></tbody></table></div></div></div><div class="sect1" title="Database"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm45342456796352"></a>Database </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-5206"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M defers the hardening (fsync) of a journaled database file (a potentially time consuming operation) to occur as much as possible outside the database critical section, particularly when it is time to write an EPOCH record in the journal file. Previously, this was done while holding the critical section which could affect database transaction throughput. (GTM-5206)</p></li><li class="listitem"><p><a name="GTM-6037"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span>MUPIP INTEG, DSE INTEG and in some instances VIEW "GDSCERT" produce a NONUMSUBS error if they encounter a numeric subscript in a global variable tree that has been defined to only use string subscripts; previously, they did not report this issue. (GTM-6037)</p></li><li class="listitem"><p><a name="GTM-6699"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M provides a fast and efficient mechanism for processes to share their database access statistics for other processes to monitor. In addition GT.M now supports implicit instantiation of a database file. Please refer to the <a class="link" href="#Additional_Information_GTM-6699" title="Additional information for GTM-6699 - Monitoring of shared database statistics">Additional_Information</a>  section for the details and implications of this feature. (GTM-6699) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-6838"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> Released as field test grade functionality in a production release, asynchronous IO is an option for database segments using the BG access method; previously GT.M performed only synchronous I/O through the file system cache. Also, when invoked from the shell, GDE returns a non-zero status in case it terminates with errors; previously it always returned a zero status, even if it encountered errors. Note: when invoked from GT.M, GDE does not return a status. MUPIP RUNDOWN appropriately manages the FTOK semaphore associated with a database to which it has read-only access; previously it inappropriately removed that semaphore if the database was quiescent but its attachment counter had ever exceeded 32Ki simultaneous processes. Please refer to the <a class="link" href="#Additional_Information_GTM-6838" title="Additional information for GTM-6838 - Asynchronous database IO">Additional Information</a> section for details. (GTM-6838) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-7857"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> When MUPIP INTEG, DSE INTEG -BLOCK, or VIEW "GDSCERT":1 processing encounter an empty-string ("null") subscript that does not match current file header settings for the null characteristic they issue a DBNULCOL or NULLSUBS error. If MUPIP LOAD-FORMAT=BINARY encounters empty-string subscripts in an extract it is loading on a database that does not permit such subscripts, it produces a NULLSUBS error. Previously, these functions did not report these errors (MUPIP LOAD did not load the offending data). Also, if MUPIP LOAD -FORMAT=BINARY encounters two keys that are the same except for their representations of empty string subscripts, it produces a warning message and discards the one whose representation does not match that of the database into which the data is being loaded. (GTM-7857)</p></li><li class="listitem"><p><a name="GTM-8553"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> Extended references work correctly when poollimit is enabled. Previously, such a combination could produce GTMASSERT failures. This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8553)</p></li><li class="listitem"><p><a name="GTM-8597"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M protects itself against one type of random error in a control field used for buffer management. Previously, recovery required shutting the database down. The error observed most likely resulted from some sort of hardware malfunction. Note that FIS recommmends the use of ECC RAM in production systems. (GTM-8597)</p></li><li class="listitem"><p><a name="GTM-8613"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M issues a ACTCOLLMISMTCH error in case multiple processes concurrently attempt to create the first global node of a global variable using differing collation characteristics (defined through the -GBLNAME section of their respective global directories). Previously, it was possible for processes to proceed to update with conflicting views of the global's collation, resulting in global nodes with misaligned collation sequences in the same global, creating an application level data integrity error. This issue was only observed in the GT.M development environment, and was never reported by a user.(GTM-8613)</p></li><li class="listitem"><p><a name="GTM-8641"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> $ORDER(gvn,-1) and $ZPREVIOUS(gvn) work correctly in case of spanning nodes. Since GT.M V6.2-002, due to a regression introduced in GTM-7917, it could return the same value as the last subscript in the input key in case the global corresponding to gvn contained spanning nodes. For example if ^X(3) existed and was a spanning node, $ORDER(^X(4),-1) would return 4 instead of 3, potentially leading to infinite loops. If ^X(3) was not a spanning node, $ORDER() would return the correct value. The return value was unaffected by the existence or non-existence of a subtree of ^X(3). (GTM-8641)</p></li><li class="listitem"><p><a name="GTM-8655"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M does better in maintaining database integrity in the face of a kill -9 of a process in the middle of a database commit. Previously, if a process trying to update a particular GDS block was killed in the middle of a commit, it was possible to lose prior updates to just that block within the same epoch, resulting in a database file with structural damage. Note that FIS continues to strongly recommend against kill -9 of processes that have opened a database file. (GTM-8655)</p></li><li class="listitem"><p><a name="GTM-8664"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M defers performing an idle epoch if it concurrently holds the journal pool critical section lock. Previously, under rare conditions, performing the idle epoch in this situation could result in database deadlock. This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8664)</p></li><li class="listitem"><p><a name="GTM-8685"></a> GT.M marks journal files as current or not current, which allows it to deal more appropriately with an operational situation in which an operator renamed an older journal file as current. Previously, GT.M MUPIP ROLLBACK -FORWARD could not detect this operational issue and consequently failed to deliver a consistent state at completion. (GTM-8685)</p></li><li class="listitem"><p><a name="GTM-8687"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M now properly handles loading multiple global directories with increasing numbers of regions. Previously, this could have resulted in memory corruption if a process first opened the first global directory with fewer regions AND both global directories had at least one global variable name that spanned multiple regions. This issue was never reported by users and was only seen in the GT.M development environment. (GTM-8687)</p></li><li class="listitem"><p><a name="GTM-8700"></a> Operations on statistics database files (e.g. VIEW "STATSHARE", VIEW "NOSTATSHARE", direct access to ^%YGS global nodes) work correctly even in the case a process accesses the same statistics database file through more than one global directory. In GT.M V6.3-001, this could cause the process to terminate abnormally with a segmentation violation (SIG-11). GT.M correctly creates statistics database files (which are always created dynamically) even in case of heavy database contention amongst processes. In GT.M V6.3-001, if a process in a TP transaction (TSTART/TCOMMIT fence) was in its final retry (due to restarts from other concurrently running processes), it was rare but possible to encounter a deadlock. $ZPEEK issues a BADZPEEKARG error when its argument specifies a non-existent lower-case region name. In GT.M V6.3-001, this terminated the process with a segmentation violation (SIG-11). MERGE, ZWRITE, $DATA(), $ORDER(), and $QUERY() involving ^%YGS open any implicitly associated statistics database files when run outside of a TP transaction. In GT.M V6.3-001, they could ignore ^%YGS nodes corresponding to regions previously unopened or untracked by the process. Note that these operations within an explicit TP transaction do not implicitly open any not-yet-open statistics database until after the transaction commits. GT.M correctly handles a MUPIP SET -REPLICATION=ON for a region which was still replicating after journaling turned off (in the "was_on" state). In GT.M V6.3-001, due to a regression introduced by GTM-7593, an exiting process executing in a small window of instructions in database rundown logic could, in rare, cases terminate with a segmentation violation (SIG-11). MUPIP SET JOURNAL and MUPIP REPLICATE -INSTANCE_CREATE issue appropriate errors when their input attempts to create journal and/or replication-instance file names whose absolute path is more than 255 bytes long. Previously, it was possible for these commands to abnormally terminate with a "stack smashing detected" error due to GT.M-internal buffer overflows. All these issues were only observed in the GT.M development environment, and were never reported by a user. (GTM-8700)</p></li><li class="listitem"><p><a name="GTM-8702"></a> Updates within explicit (TSTART/TCOMMIT) or implicit (spanning nodes or regions, or triggers) transactions requiring one or more additional blocks reliably write before images (if configured) to the journal file or to a MUPIP BACKUP -ONLINE. Missing before images could cause incorrect or damaged databases after a MUPIP JOURNAL -RECOVER or -ROLLBACK, or in a backup. In GT.M V6.3-001, due to a flaw in GTM-8637, in rare cases when choosing a previously freed block, GT.M failed to appropriately write a before image. This issue were only observed in the GT.M development environment, and was never reported by a user.(GTM-8702)</p></li></ul></div></div><div class="sect1" title="Language"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm45342456745168"></a>Language </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-6793"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MERGE into a local variable (lvn) target limits the number of target subscripts to the maximum number supported by GT.M (currently 31); previously, MERGE could produce variables with 32 subscripts which could cause subsequent problems. (GTM-6793)</p></li><li class="listitem"><p><a name="GTM-8254"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> The USE command accepts [I|O]CHSET as valid deviceparameters. It is possible to change the character set of an open device. In addition to USE, the OPEN command also changes the character set of an already opened device including Sequential Disk, SOCKET and terminal devices. It is useful to deal with binary data intermixed with character data. Previously, there was no documented way to change the character set of an open device. (GTM-8254) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8357"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M takes the initial value of $ZSTEP from the environment variable gtm_zstep, with a default value of "B" (a BREAK command) if gtm_zstep is not defined; previously, changing the default value required a SET command. (GTM-8357)</p></li><li class="listitem"><p><a name="GTM-8359"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> TSTART commands with indirect arguments work correctly in GT.M. Previously, they allowed only specification of a single local variable with no parentheses, SERIAL flag or transaction id parameter. Also, use of TSTART in direct mode is prohibited and generates a NODMTSTART error. Previously, TSTART/TCOMMIT sometimes worked when on the same direct mode command line but more often got strange errors and caused memory leaks at best. (GTM-8359)</p></li><li class="listitem"><p><a name="GTM-8366"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M assigns an empty string to $REFERENCE when there is an error while constructing a subscripted global variable. Previously, GT.M assigned the last successful subscripted global variable to $REFERENCE. (GTM-8366)</p></li><li class="listitem"><p><a name="GTM-8385"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span>  GT.M performs arithmetic operations involving only literals at compile time, with the exception of divide and integer divide (/ and \) by zero (0), which because of their use to intentionally produce an error is left to run time. Note that modulo (#) produces a compile time error. Previously, GT.M did all such calculations at run-time. (GTM-8385) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8427"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> $ZCOLLATE(glvn,intexpr[,{0|1}]) returns a transformed representation of a first argument glvn using the alternative transform specified by the second argument intexpr that, by default, or if the optional third argument is zero (0), represents a normalized form that can be used as an operand to the follows (]) or sorts-after operator ([[) such that, if both operands are in the normalized form, the result is independent of alternative collation. If the optional third argument is non-zero, $ZCOLLATE() returns a reverse transform of the first argument intended to restore the normalized form to the native M glvn representation. $ZCOLLATE() replaces the "YGVN2GDS" and "YGDS2GVN" arguments to $VIEW(), which are deprecated. $ZATRANSFORM(expr,intexpr[,{0|1}][,{0|1}]) returns a transformed representation of a first argument expr, treated as a subscripted or unsubscripted key, using the alternative transform specified by the second argument intexpr in a normalized form that can be used as an operand to the follows (]) or sorts-after (]]) operator such that, if both operands are in the normalized form, the result is independent of alternative collation. If the optional third argument is non-zero, $ZATRANSFORM() returns a reverse transform of the first argument intended to restore a normalized form to the native M expr representation. By default, or if the optional fourth argument is zero, $ZATRANSFORM()returns the transformation of expr using standard M collation of numbers before strings, causing numbers to sort like strings; if the optional third argument is non-zero, $ZATRANSFORM() treats all expressions as strings.(GTM-8427) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8559"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> $gtm_etrap and $gtm_trigger_etrap accept up to 8192 bytes and produce a LOGTOOLONG message in the syslog when ignoring a value longer than 8192. Previously, process initialization limited both environment variables to 4096 bytes and did not log any message for an over-length $gtm_trigger_etrap. This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8559) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8568"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> $ZTRIGGER() operations that affect triggers executed in the same transaction work as documented. Previously, in rare situations, transactions that performed $ZTRIGGER() operations in some, but not all, retries and invoked a trigger affected by the $ZTRIGGER() operation in some, but not all, retries could result in a TRIGDEFBAD or SIG-11. Also, trigger load operations in which an error occurred only perform a validity check on trigger delete by name operations. Previously, if an error occurred during a trigger load, a subsequent trigger delete by name operation resulted in a TRIGDEFBAD if the name targeted a trigger installed as part of the current load operation. In addition, concurrent MUPIP REORG works appropriately with GT.M triggers. Previously, in rare situations, a concurrent MUPIP REORG could cause GT.M trigger operations to issue TRIGDEFBAD errors. These issues were only observed in the GT.M development environment, and were never reported by a user. (GTM-8568)</p></li><li class="listitem"><p><a name="GTM-8572"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> $SELECT() does not pre-evaluate any expressions. A regression introduced in V6.2-002A related to GTM-8376 resulted in inappropriate pre-evaluation of arguments in some cases, especially when both FULL_BOOLEAN and gtm_side_effects modes were off. This caused inappropriate behavior such as errors in $SELECT() formulations intended to prevent execution of inappropriate indirection or $INCREMENT() acting on a global variable. (GTM-8572)</p></li><li class="listitem"><p><a name="GTM-8573"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> When the argument of an IF command is a literal value or expression, the GT.M compiler generates code to set $TEST appropriately and ignores the rest of the line. When the argument of a command postconditional is a literal value or expression, the GT.M compiler evaluates the postconditional and either generates code for an unconditional command or omits generation for the command. Previously, the computation was performed at run time. Note that literal postconditionals evaluating to 0 result in smaller object modules than literal postconditionals evaluating to non-zero values. (GTM-8573) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8579"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> As part of compilation, GT.M optimizes unary operations, and binary operations, where both operands are literals; cases where the first operand is an empty string, divide and integer divide (/ or \) by zero (0) are exceptions. In addition, it treats $ZCHSET and $ZVERSION as compile time constants. Please observe the following cautions: ensure you compile with the same GT.M version, $gtm_chset, $gtm_local_collate, $gtm_patnumeric, $gtm_pattern_file and $gtm_pattern_table  values (or lack thereof) as those used to run your application, and use variable operands, indirection or XECUTE for operands used with pattern match (?) or sorts-after (]]) if the application changes the run time values controlled by those environment variables. Note that the compiler detects a few errors at slightly different points which may change some messages, hopefully for the better. In addition, this change prevents a possible segmentation violation (SIG-11) in V6.3-000[A] when attempting to MUMPS -RUN of a routine with no current object module when the routine uses ZWRITE. (GTM-8579) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8583"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MERGE permits its target to hold the maximum number of subscripts supported by GT.M (currently 31). Beginning with V6.1-000 the change associated with GTM-7867 could cause inappropriate MAXNRSUBSCRIPTS errors when the source and the target were both global variables, most likely when the source had many subscripts. The workaround was to MERGE the source into a local variable and then MERGE from there to the actual target. (GTM-8583)</p></li><li class="listitem"><p><a name="GTM-8584"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> $QLENGTH(), $QSUBSCRIPT() and $ZCOLLATE() use ZWRITE format to report the namevalue in any NOCANONICNAME error. Previously, a &lt;NUL&gt; byte in the input resulted in a GTMASSERT. (GTM-8584)</p></li><li class="listitem"><p><a name="GTM-8590"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M defers certain timed operations while performing a $ZCONVERT(); previously, the function could hang if interrupted by an timed operation that invoked non-reentrantsystem memory management services. This issue was only observed in the GT.M development environment, and was never reported by a user.(GTM-8590)</p></li><li class="listitem"><p><a name="GTM-8593"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> Deviceparameters on the OPEN command for SOCKET device containing open sockets can modify the ZFF and delimiters of the current socket; previously, these could only be changed with a USE command. In addition, $KEY and $ZB for SOCKET devices appropriately return UTF-8 representations of the characters; previously, if the device character set was UTF-16[BE|LE], the terminator representations were inappropriately also encoded in UTF-16[BE|LE]. (GTM-8593) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8595"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> In M mode, $ASCII() of literal characters returns the correct value. In V6.3-000/-000A, this returned an incorrect value, typically -1 (it worked correctly for ASCII literal characters, for variable arguments, and in UTF-8 mode). Note that this is an edge case: instead of coding $ASCII() of a literal, one would normally just use the value, e.g., 65 instead of $ASCII("A"), and furthermore, the supported character set for literals in M programs is a subset of ASCII, whereas the issue affected literals corresponding to the non-ASCII characters $CHAR(128) through $CHAR(255). (GTM-8595)</p></li><li class="listitem"><p><a name="GTM-8639"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> ZSHOW "G" and $VIEW("GVSTAT") report a count BTD, which for database regions that use the BG access method is the number of times a global buffer has transitioned from an clean (unmodified) state to a dirty (modified) state. For database regions that use the MM access method, BTD is zero. (GTM-8639) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8640"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M accepts NUL characters ($CHAR(0)) within literals used in indirection and XECUTE; previously, it generated errors for that character. (GTM-8640)</p></li><li class="listitem"><p><a name="GTM-8672"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span>GT.M now reduces the active memory usage when a process uses a large amount of memory then subsequently uses a significantly reduced amount. Previously, active memory usage was distributed across the whole memory segment. In addition, $VIEW("SPSIZE") now returns three sizes (as comma separated values): the total amount of space allocated to the heap, amount of heap space in use, and amount of heap space reserved. The reserved space is used to reduce the active memory usage as mentioned above. GT.M now extends memory used for local variables more frequently when garbage collection does not reclaim a significant amount of space.(GTM-8672)</p></li><li class="listitem"><p><a name="GTM-8679"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> Name-level $ORDER() on globals maintains $REFERENCE analogously to other $ORDER() invocations, that is: by reflecting the first argument unless a subsequent global reference in the second argument takes precedence; previously, it left $REFERENCE empty except when the second argument was a variable. This also applies to $ZPREVIOUS(), which is a deprecated way to do a $ORDER(,-1). (GTM-8679)</p></li><li class="listitem"><p><a name="GTM-8689"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M protects OPEN commands against the possibility they don't complete due to an interrupt or device failure; previously, there was a very small window where external actions such as &lt;CTRL-C&gt;, MUPIP INTRPT, or a device disconnect could leave a device partially set up, which could cause a subsequent segmentation violation (SIG-11).  This was only encountered in the GT.M development environment and was never reported by a user. (GTM-8689)</p></li><li class="listitem"><p><a name="GTM-8705"></a> ZSHOW/ZWRITE work correctly even if they encounter a relatively rare heap management action. Previously, these commands could terminate with a segmentation violation (SIG-11) in these rare cases. This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8705)</p></li></ul></div></div><div class="sect1" title="System Administration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm45342456521744"></a>System Administration </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-6598"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MUPIP BACKUP and INTEG wait approximately one minute for any kill-in-progress to clear. Previously, the times exceeded the documented one minute time by three times for INTEG and an amount for BACKUP that was a function of the number of regions with kill-in-progress indicators; abandoned indicators showed this issue most strongly. These problems were never reported by users and were only seen in the GT.M development environment. (GTM-6598)</p></li><li class="listitem"><p><a name="GTM-7593"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M flushes dirty journal and database buffers to disk in a timely manner in a replicated environment. Additionally, the Source Server recovers from an unflushed journal buffer situation by taking on the task of flushing, if needed, every eight (8) seconds while waiting for a journal record in the journal file. It logs a "REPL_INFO : Source server did flush of journal file" message to record such an event. Previously, it was possible in a rare case, involving journal file switches and process exits, for the buffers to stay unflushed causing the Source Server to issue a "REPL_WARN: Check for problems with journaling" alert every 50 seconds. The workaround for this situation was to start a new process that did an update or shut the source server down. (GTM-7593)</p></li><li class="listitem"><p><a name="GTM-7729"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span>GDE ADD, CHANGE and TEMPLATE for REGION objects recognize the -[NO]LOCK_CRIT qualifier; MUPIP SET recognizes a -[NO]LCK_SHARES_DB_CRIT qualifier. Both control whether LOCK actions share the same resource and management as the database or use a separate resource and management. The GDE choice only affects database file creation with MUPIP CREATE. GDE SHOW -ALL and -REGION, and DSE DUMP -FILEHEADER each display the choice, which defaults to Sep(arate)/FALSE. Previously LOCK actions used the same resource and manager. While we expect this to have either no effect or a positive effect on performance depending on the application use patterns, it is different by default, so you should be aware of this change. (GTM-7729) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-7837"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MUPIP REPLICATE -CHANGELOG waits for up to twenty-five seconds for confirmation from Source and Receiver Server processes that the change succeeded (it may not for a variety of reasons). Previously, only MUPIP REPLICATE -RECEIVER -CHANGELOG waited; MUPIP REPLICATE -SOURCE -CHANGELOG did not. (GTM-7837)</p></li><li class="listitem"><p><a name="GTM-7922"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MUPIP EXTRACT appropriately handles the case where a concurrent process updates a spanning node that MUPIP EXTRACT is processing; previously, this situation could cause a segmentation violation (SIG-11). Note that running an EXTRACT without -FREEZE and with concurrent activity produces an inconsistent output (GTM-7922)</p></li><li class="listitem"><p><a name="GTM-8362"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span>MUPIP FREEZE -ON -ONLINE freezes updates to the database file, but allows updates to memory and journal files to continue. As for normal freezes, the Online Freeze is removed by a MUPIP FREEZE -OFF. Online Freeze may only be used on regions with the BG access method.</p><p>In the Online Freeze state, GT.M prevents casual database updates from occurring, including background flushing and timed epochs. However, certain conditions require updates to the database file, including full database buffers, journal file switches, and database file extensions. The -[NO]AUTORELEASE option may be used with the -ON option to select the behavior in these conditions, with -AUTORELEASE being the default. If a GT.M process autoreleases an Online Freeze, it sends an OFRZAUTOREL message to the operator log, all processes will be allowed to write to the database file, and a subsequent MUPIP FREEZE -OFF will warn that an Online Freeze had been removed. In this case any database copy or snapshot should be considered suspect and retried. If -NOAUTORELEASE is specified, memory updates will be suspended rather than release the freeze. If a process encounters this situation while holding a critical resource, it will send an OFRZCRITSTUCK message to the operator log and wait, which will prevent other operations on the region. When the Online Freeze is removed by a MUPIP FREEZE -OFF, the waiting process will send a OFRZCRITREL message to the operator log.</p><p>Some commands which cannot run with an Online Freeze, e.g., MUPIP BACKUP and MUPIP SET -JOURNAL, will either autorelease or issue an OFRZACTIVE error, depending on the -[NO]AUTORELEASE option used to set the freeze. Other commands, e.g., MUPIP EXTEND, MUPIP REORG -TRUNCATE, and MUPIP INTEG -ONLINE, will either autorelease or hang until the Online Freeze is released.</p><p>A MUPIP FREEZE -OFF must always follow a MUPIP FREEZE -ON -ONLINE, even in the case of an autorelease, to ensure that normal operations are resumed. In the case of an autorelease, the MUPIP FREEZE -OFF command will report a OFRZNOTHELD warning.</p><p>To maximize the time that updates to memory may continue, MUPIP FREEZE -ON -ONLINE flushes all dirty buffers to disk and performs a journal file switch, but it does not perform a database extension. If a database file is nearly full, the user should consider doing a database file extension before the Online Freeze. When the previous FREEZE operation was -ONLINE, a MUPIP FREEZE -OFF flushes any dirty buffers to disk and performs a journal file switch. These operations are performed in such a way as to minimize impact to processes doing memory updates, but they do involve performing epochs, so there may be some delay to other processes.(GTM-8362)</p></li><li class="listitem"><p><a name="GTM-8373"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MUPIP replication servers accept changes to their log file destinations immediately after the last change; previously, they occasionally required a wait between changes. (GTM-8373)</p></li><li class="listitem"><p><a name="GTM-8447"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MUPIP DUMPFHEAD [-FILE &lt;file-name&gt;][-REGION &lt;region-list&gt;] provides a way to get substantially the same information as DSE DUMP -FILEHEADER, but in the same format as provided by %PEEKBYNAME, and without connecting to database files. It is both lighter weight than DSE and avoids the need to use DSE, for which operator error can have serious consequences. The formatting is more regular than that of DSE. As MUPIP DUMPFHEAD does not open shared memory, values reported for dynamic fields that are in shared memory may be stale. Because MUPIP DUMPFHEAD is implemented in MUMPS, application code can call getfields^%DUMPFHEAD(varname,dbfilename), where varname is a local variable name passed by reference, and dbfilename is the name of a database file, to generate the records dumped by MUPIP. Note that this facility supersedes ^%DSEWRAP, which is deprecated, is not updated or tested, and eventually will be withdrawn. (GTM-8447) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8542"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MUPIP LOAD -FORMAT=BINARY validates the keys in the extract records and reports any errors it detects before skipping the bad record and any following records in the block. Previously, LOAD of a binary extract did not validate incoming keys. (GTM-8542)</p></li><li class="listitem"><p><a name="GTM-8547"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> The Source Server handles reconnects after errors gracefully. Previously the Source Server could exit with a REPLBRKNTRANs error after an error like REPLNOTLS that causes the Source and Receiver Servers to disconnect in middle of renegotiating the replication starting point. This issue was identified in FIS testing and has not been reported by any customers. (GTM-8547)</p></li><li class="listitem"><p><a name="GTM-8564"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MUPIP REORG -ENCRYPT works correctly when reissued after a prior invocation of the same command was interrupted. Previously, if a MUPIP REORG -TRUNCATE was run in between and did truncate the database, it was possible for the reissued MUPIP REORG -ENCRYPT to incorrectly succeed even though it did not finish the (re)encryption. This was particularly evident if one ran a MUPIP SET -ENCRYPTIONCOMPLETE command on the same database which correctly indicated the encryption as incomplete. This issue was only observed in the GT.M development environment, and was never reported by a user. A workaround for this was to run a MUPIP EXTEND on the database and reissue the MUPIP REORG -ENCRYPT. (GTM-8564)</p></li><li class="listitem"><p><a name="GTM-8582"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> Enabling sync_io for journaling works correctly on XFS filesystems configured with 4KiB sector sizes. Previously, the Source Server could experience a REPLFILIOERR error with the message "Error in reading jfh in update_eof_addr" when reading from journal files. (GTM-8582)</p></li><li class="listitem"><p><a name="GTM-8599"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MUPIP JOURNAL -ROLLBACK -FORWARD correctly rolls the database forward in the case one region has a journal file with very limited update activity (less duration than the epoch interval of that region). Previously, it was possible, in the unlikely case of a crash (where the journal files were not cleanly shutdown) where a region had only a single epoch matching the safe restore time determined across all regions, for ROLLBACK to inappropriately set the database file header as if it had restored updates beyond those it actually restored, which could cause a subsequent replication restart to miss updates. This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8599)</p></li><li class="listitem"><p><a name="GTM-8609"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> The error messages for JNLTRANSLSS and JNLTRANSGTR now include the transaction numbers in the database file header and journal file header. The accompanying JNLOPNERR prints the name of the database and journal files. Previously, when issued alongside a JNLSENDOPER message, JNLOPNERR missed information about the database file, and there were no transaction numbers for JNLTRANSLSS or JNLTRANSGTR. The error JNLREADEOF omits the journal file name as the accompanying JNLEXTEND message prints this information.[/p][p]The error messages JNLBADRECFMT, JNLVSIZE, and CRYPTJNLMISMATCH include context information when a process fails to open a journal file for thefirst time. Previously, these error messages did not include some or all of the context information.  (GTM-8609)</p></li><li class="listitem"><p><a name="GTM-8610"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> The Receiver Server handles unusual protocol messages appropriately. Previously, in extremely rare circumstance, the Receiver Server could mishandle such a message and terminate with a segmentation violation or REPLTRANS2BIG error preceded by numerous "Received UNKNOWN message" messages. This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8610)</p></li><li class="listitem"><p><a name="GTM-8612"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MUPIP LOAD does not terminate abnormally with a segmentation fault (SIG-11) when delivering the MAXSTRLEN error nor does MUPIP LOAD treat a 12 byte header as a MAXSTRLEN error. Previously, a 12 byte header line in a GO or ZWRITE extract could cause GT.M to terminate abnormally with a segmentation fault (SIG-11). The workaround for the short header was to edit it in order to pad the length. (GTM-8612)</p></li><li class="listitem"><p><a name="GTM-8614"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> The REQROLLBACK message indicates that required -ROLLBACK also requires the -NOONLINE qualifier.(GTM-8614)</p></li><li class="listitem"><p><a name="GTM-8629"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MUPIP RESTORE issues an IOEOF error and exits with a non-zero status when supplied with a truncated backup file. Previously, it used to prompt for the next volume to be mounted and later issue a SYSTEM-E-UNKNOWN error and incorrectly exit with a zero status indicating normal exit. Additionally, it cleans up database semaphore ipcs in case of errors; previously left two semaphores per database in case of errors.(GTM-8629)</p></li><li class="listitem"><p><a name="GTM-8654"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M considers available process groups when determining permissions based on group membership for IPCs and files, like journals and snapshot files. Previously, when GT.M failed to determine group membership, GT.M inappropriately removed owner access to the IPCs that it created resulting either a PERMGENFAIL error or DBFILERR error followed by the supplemental text "Error with database control semctl SETVAL". (GTM-8654) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8656"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> The GT.M reference encryption plugin is compatible with OpenSSL 1.1.0. Previously, the plugin would not compile with OpenSSL 1.1.0. (GTM-8656)</p></li><li class="listitem"><p><a name="GTM-8657"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M replication appropriately handles the case where a receiving Supplementary Instance (P) connects to a non-supplementary Originating Instance (A) for the first time and then reconnects with no intervening updates. Previously, if the A-&gt;P connection occurred twice with no intervening update, replication from P to another receiving Supplementary Instance (Q) failed with a STRMSEQMISMTCH error. (GTM-8657)</p></li><li class="listitem"><p><a name="GTM-8660"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M makes more information available to system profiling tools such as <a class="ulink" href="https://en.wikipedia.org/wiki/Perf_%28Linux%29" target="_blank">perf</a>. [x86_64 Linux] (GTM-8660)</p></li><li class="listitem"><p><a name="GTM-8668"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> The GT.M reference encryption plugin Makefile copies the pinentry.m routine into $gtm_dist/plugin/gtmcrypt and the GT.M reference encryption plugin pinentry program includes $gtm_dist/plugin/r in the gtmroutines search path. Previously, if the encryption plug-in source archive was not extracted in $gtm_dist/plugin/gtmcrypt, the custom pinentry program failed to load the pinentry routine and the user would be prompted via the system default pinentry program.The GT.M Encryption plugin properly compiles when GT.M is installed without Unicode support. Previously, this would result in the Makefile exiting with an error. The GT.M encryption plugin includes support for loopback pinentry mode (available starting with GnuPG 2.1.12) which simplifies unattended passphrase handling.(GTM-8668)</p></li></ul></div></div><div class="sect1" title="Other"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm45342456383664"></a>Other </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-4283"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> The GT.M compiler accepts input with &lt;CR&gt;&lt;LF&gt; line termination (common on some non-POSIX Operating Systems); previously, it did not. Our thanks to the membership of the May 2016 "Hacking GT.M" workshop for this change. (GTM-4283) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-6085"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> Update Process Reader Helpers operate correctly. Previously, under rare conditions the Reader Helper would encounter a segmentation violation (SIG-11). This was only encountered in the GT.M development environment, and was never reported by a user. (GTM-6085)</p></li><li class="listitem"><p><a name="GTM-6332"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> Code using literals on Linux on x86_64 is faster, and the generated object file is smaller than previously. Compilation is also faster, which should, in turn, speed up operations using indirection and XECUTE. As with any performance enhancement, actual benefit will vary, depending on the extent to which application code uses constructs that benefit from this change. [x86_64 Linux] (GTM-6332)</p></li><li class="listitem"><p><a name="GTM-7778"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> The gtmsecshr wrapper on AIX uses the standard system timezone taken from /etc/environment for the timestamps of any syslog entries it generates. It also passes this timezone on to gtmsecshr to use for its entries as well. Previously, syslog timestamps from the AIX gtmsecshr wrapper could be either in the timezone of the process that started gtmsecshr or UTC, depending on whether environment variables had been cleared at the time of the error or not. [AIX] (GTM-7778)</p></li><li class="listitem"><p><a name="GTM-8430"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> Critical section acquitions are slightly more efficient. [x86_64 Linux] (GTM-8430)</p></li><li class="listitem"><p><a name="GTM-8544"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M manages time-related tasks in a more lightweight fashion. On heavily loaded systems with large numbers of processes, this should reduce the number of interrupts and context switches that the operating system needs to process. In addition, GT.M processes time-related tasks in a timely fashion. Previously, in rare conditions, timed operations (e.g., HANG) could be delayed up to eight seconds. This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8544)</p></li><li class="listitem"><p><a name="GTM-8561"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> A GT.M process functions correctly when its M data heap exceeds 2GiB. Previously, such a process could experience damage to internal data structures, leading to incorrect process behavior including process termination with segmentation violations (SIG-11). This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8561)</p></li><li class="listitem"><p><a name="GTM-8562"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> The GT.M configure installation script always creates the plug-in routine source and object file directories. Previously, when installing over an existing directory the installation script did not create the plug-in routine source and object file directories. (GTM-8562)</p></li><li class="listitem"><p><a name="GTM-8567"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> When directed to install GT.M with UTF-8 support, the configure script defaults to the C.UTF-8 locale when systems have none defined. Previously, the configure script terminated prematurely on such a condition. This was only seen by users building GT.M from source in a restricted build environment. (GTM-8567)</p></li><li class="listitem"><p><a name="GTM-8569"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> When starting up, the replication Receiver Server only issues a NOMORESEMCNT message to the syslog if it is the first process to determine that more than 32Ki GT.M processes have run in that instance. Previously, in very rare cases, it could inappropriately log a duplicate message. This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8569)</p></li><li class="listitem"><p><a name="GTM-8570"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> The GT.M compiler reduces the size of object modules by not placing literals in an object module once the compilation eliminates a need for them. Previously, it sometimes left obsolete literals in the object files; in V6.3-000[A], GTM-7762 made this a more significant issue. (GTM-8570)</p></li><li class="listitem"><p><a name="GTM-8571"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> ^%GI appropriately handles empty string data values in GO format input. In V6.3-000 and V6.3-000A, ^%GI ignored such input, leading to incorrect loads. The workaround was to use ZWR format or MUPIP LOAD. (GTM-8571)</p></li><li class="listitem"><p><a name="GTM-8578"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> ^%PEEKBYNAME() handles cases where the type of data it is to access is an array of known types by returning a comma delimited list of the array elements; for example, $$^%PEEKBYNAME("sgmnt_data.tp_cdb_sc_blkmod",base) returns a string in the form "0,0,0,0,0,0,0,0" because the arguments identify an array of 8 integers (type int). Previously, this kind of invocation produced a BADZPEEKFMT error. (GTM-8578)</p></li><li class="listitem"><p><a name="GTM-8598"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M briefly defers certain operations while processing character input; previously, the non-reentrant system memory management services used in character-based input could hang a process if their timed operations also invoked memory management services. (GTM-8598)</p></li><li class="listitem"><p><a name="GTM-8602"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> MUPIP JOURNAL accepts multiple EOF records in the same journal file. Multiple EOF records only occur when the last process to halt out of a journaled database terminates abnormally just before cleanly shutting down the journal file. Note that FIS strongly recommends against using kill -9 on any GT.M process performing database updates. Previously, MUPIP JOURNAL produced  a GTM-E-JNLUNXPCTERR error when it encountered multiple EOF records in a journal file. (GTM-8602)</p></li><li class="listitem"><p><a name="GTM-8615"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M prevents certain timed operations during external calls. Previously, in an environment using encrypted databases,an external call could cause the process to hang due to an invocation of non-reentrant memory management system services also invoked by the encryption plug-in. (GTM-8615)</p></li><li class="listitem"><p><a name="GTM-8632"></a>The gtm_coredump_filter environment variable specifies the mappings of the process address space for a GT.M process, with the bits having the same meaning as those specified for /proc/&lt;pid&gt;/coredump_filter in "man 5 core". If unspecified, GT.M uses a value of 0x73; a value of -1 prevents GT.M from modifying the coredump_filter value. A running process can change its coredump_filter by writing to the file /proc/&lt;pid /coredump_filter, and can query the current value by reading that file. [Linux x86_64] (GTM-8632)</p></li><li class="listitem"><p><a name="GTM-8637"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> Processes handle a large volume of TP updates appropriately; previously, a long-running process, such as an Update Process, adding new global nodes could eventually inappropriately terminate with a GTMASSERT2. (GTM-8637)</p></li><li class="listitem"><p><a name="GTM-8642"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M appropriately handles the case of a process receiving a MUPIP STOP while another process has recently been performing a MUPIP REORG -ENCRYPT to change the encryption keys. In V6.3-000[A] this combination could rarely cause the stopped process to terminate with a GTMASSERT2 error. This caused no problems for the database. This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8642)</p></li><li class="listitem"><p><a name="GTM-8645"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M more accurately maintains the count of the number of processes attached to a database file $$^%PEEKBYNAME("node_local.ref_cnt",&lt;region&gt;) or "Reference count" in DSE DUMP -FILE output. Note that GT.M does not rely on this field, which exists to supply operational information to the user, but which may be inaccurate if processes are subject to kill - 9 - something that FIS recommends against and that GT.M does not guard against. Previously, in case the database has the quick-rundown mode enabled (MUPIP SET -QDBRUNDOWN), this counter could become inaccurate even without interference from kill -9. (GTM-8645)</p></li><li class="listitem"><p><a name="GTM-8659"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> When GT.M exits with a fatal error, such as GTM-F-MEMORY, it cleans up any empty file it was in the process of creating at the time of the failure. This applies to GT.M OPEN, DSE OPEN and a number of MUPIP functions which create files. Previously, this unusual situation left an empty file and in some cases the process terminated with a segmentation fault (SIG-11). (GTM-8659)</p></li><li class="listitem"><p><a name="GTM-8669"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> GT.M correctly marshals parameters when calling out to external Java libraries and programs. Previously GT.M over allocated the parameter space and in rare situations an overrun could occur. This problem was never reported by a customer and was only seen in development. (GTM-8669)</p></li><li class="listitem"><p><a name="GTM-8676"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> DSE FIND -KEY reports the correct path leading to the input key. For versions V6.0-000 to V6.3-000A, due to a regression introduced by GTM-6341, it sometimes reported an incorrect Global tree path if the input key is not found in the database file. (GTM-8676)</p></li><li class="listitem"><p><a name="GTM-8686"></a><span class="inlinemediaobject"><img src="images/V63-001.png" alt="V63-001"></span> ^%TI works as documented; previously, it rejected some documented forms. (GTM-8686)</p></li></ul></div></div><div class="sect1" title="More Information"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm45342456321760"></a>More Information</h2></div></div></div><div class="sect2" title="Additional information for GTM-6838 - Asynchronous database IO"><div class="titlepage"><div><div><h3 class="title"><a name="Additional_Information_GTM-6838"></a>Additional information for <a class="link" href="#GTM-6838">GTM-6838</a> - Asynchronous database IO</h3></div></div></div><p>Released as field test grade functionality in a production release, asynchronous IO is an option for database segments using the BG access method; previously GT.M performed only synchronous I/O through the file system cache.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="code">$$^%PEEKBYNAME("sgmnt_data.asyncio",</code>&lt;region-name&gt;<code class="code">)</code> - returns TRUE (1) if the region has asynchronous I/O enabled and FALSE (0) if it does not. </li><li class="listitem"><code class="code">$$^%PEEKBYNAME("node_local.wcs_wip_lvl",</code>&lt;region-name&gt;<code class="code">)</code> - returns the number of blocks for which GT.M has issued writes that it has not yet recognized as complete.</li></ul></div><p>DSE DUMP -FILEHEADER reports the above information for a region as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="code">Async IO</code> - whether AsyncIO is ON or OFF for the database</li><li class="listitem"><code class="code">WIP queue cache blocks</code> - the number of blocks for which GT.M has issued writes that it has not yet recognized as complete</li></ul></div><p>GDE ADD, CHANGE and TEMPLATE commands accept the following qualifier for SEGMENT objects with an access method of BG:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
-[NO]ASYNCIO specifies whether to use asynchronous I/O for a database file; the default is NOASYNCIO.</li></ul></div><p>MUPIP SET recognizes the -[NO]ASYNCIO qualifier. As there are two MUPIP SET qualifiers beginning with "A", MUPIP no longer recognizes "-A" to specify  "-ACCESS_METHOD" - please use the recommended minimum of four characters (-ACCE). Also, when a MUPIP SET command changes the database access method, it reports the change; previously it made the change silently.</p><p>Database files have an empty database block logically after the last usable database block; previously this location had an empty 512 byte block. Because of this change, downgrading a database using V6.3-001 or later for use by a version prior to V6.3-001 requires a MUPIP DOWNGRADE -VERSION=V63000A. This syntax uses V63000A to specify DOWNGRADE change the terminating block from having the current size of a database block to using a 512-byte size used by all releases up to V6.3-000A, and should be used regardless of which release older than V6.3-001 you plan to use after the DOWNGRADE.</p><p>For Linux x86_64, the gtm_aio_nr_events environment variable controls the number of structures a process has per global directory to manage asynchronous writes, and therefore determines the number of concurrent writes a process can manage across all regions within a global directory. If not specified, the value controlled by gtm_aio_nr_events defaults to 128. If a process encounters a situation where it needs to perform an asynchronous write, but has no available slots with which to manage an additional one, it either falls back to synchronous writing if the write is blocking other actions, and otherwise defers the write until a slot becomes available as other writes complete. Linux allocates the structures on a system-wide basis with the setting of /proc/sys/fs/aio-max-nr. Therefore you should configure this parameter to account for the needs (as determined by gtm_aio_nr_events or the default) of all processes using asynchronous I/O. When processes use multiple global directories with asynchronous I/O, their need for the system resources increases accordingly. For example, if an environment runs 10,000 processes each of which open two global directories and /proc/sys/fs/aio-max-nr is set to a value of 200,000 then gtm_aio_nr_events needs to be set to a value &lt;= 200,000 / (10,000 * 2) = 10. Conversely if gtm_aio_nr_events is set to a value of 20, then aio-max-nr needs to be bumped up to (10,000 * 2 * 20) = 400,000. GT.M captures the number of errors encountered when attempting to write database blocks for a region, and, barring problems with the storage subsystem, hitting an asynchronous write limit would constitute primary (probably only) contribution to that value, which you can access with the following: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="code">$$^%PEEKBYNAME("sgmnt_data.wcs_wterror_invoked_cntr",&lt;region&gt;)</code></li></ul></div><p>The performance characteristics of asynchronous IO are likely to be quite different from the traditional sequential IO. Although asynchronous IO in theory should be more efficient than synchronous IO by eliminating the need for the UNIX file buffer cache and eliminating certain filesystem locks, in practice asynchronous IO is likely to emerge from the starting gate under-performing synchronous IO because of the years that synchronous IO has been the common IO model operating systems and filesystems have had used by applications. So, you should anticipate extensive benchmarking and tuning for your application to achieve the best performance it can with asynchronous IO. Some notes and observations that we have to share:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
As asynchronous IO dispenses with the UNIX file buffer cache, GT.M global buffers are the sole caching mechanism. To make asynchronous IO perform well, you will likely need to increase the number of global buffers considerably. With GT.M's limit of 2GiB per shared memory segment, a database segment with 4KiB blocks has a limit of almost two million global buffers.</li><li class="listitem">
A large number of global buffers potentially implies a large number of dirty global buffers to be flushed at an epoch. You should investigate the impact on application response time of GT.M epoch tapering vs. turning off epoch tapering and using a separate stand-alone process that executes a line of code such as: <code class="code">for  set x="" for  set x=$view("gvnext",x) quit:""=x  view "dbflush":x,"dbsync":x,"epoch":x hang </code><span class="emphasis"><em>n</em></span> where <span class="emphasis"><em>n</em></span> is a number that causes each region to be flushed at an appropriate interval. If you choose this option, remember to turn off epoch tapering, and to set the epoch interval in the file header to be large enough to prevent application processes from performing epochs, and consider scripted timely switching of journal files by other than application processes (switching journal files involves an epoch).</li><li class="listitem">
On AIX, consider mounting file systems with the CIO mount option. The CIO mount option drops support for the file buffer cache (unused by asynchronous IO), and also eliminates a lock that is a potential bottleneck to GT.M performance on the AIX jfs2 filesystem.</li><li class="listitem">
Limited experience with solid-state storage (SSDs) on Linux in the GT.M development environment suggests a considerable difference in asynchronous IO performance on the same underlying hardware, with f2fs performing better than xfs, which in turn performed better than ext4.</li><li class="listitem">
On Linux, which does not have a mount option such as AIX's CIO, even when GT.M uses asynchronous IO, a command like cp (used under the covers by MUPIP BACKUP) can still use synchronous IO. Owing to what we expect is a race condition between the two IO models, MUPIP BACKUP -DATABASE on Linux has in our testing on rare occasions created backups with database errors in them. The errors were observed most often with an ext4 filesystem, less frequently on xfs, and never on f2fs; however, we must treat it as if all filesystems are potentially vulnerable. FIS recommends using MUPIP BACKUP -BYTESTREAM if your application uses asynchronous IO.</li></ul></div><p>In GT.M development, we have not benchmarked asynchronous IO on the types of storage commonly used for enterprise scale applications (as workloads vary widely, we do not routinely benchmark workloads in development). Please consider the above observations in this light.</p></div><div class="sect2" title="Additional information for GTM-6699 - Monitoring of shared database statistics"><div class="titlepage"><div><div><h3 class="title"><a name="Additional_Information_GTM-6699"></a>Additional information for <a class="link" href="#GTM-6699">GTM-6699</a> - Monitoring of shared database statistics</h3></div></div></div><p>GT.M provides a fast and efficient mechanism for processes to share their database access statistics for other processes to monitor. Processes opt in or out with the VIEW "[NO]STATSHARE" command, defaulting to VIEW "NOSTATSHARE". At process startup, a value of 1, or any case-independent string or leading substrings of "TRUE" or "YES" in the environment variable gtm_statshare provides an initial setting of VIEW "STATSHARE". When a process changes whether it is opting in or out, there is no change to the output of a ZSHOW "G" within that process. GT.M does not permit this keyword of the VIEW command within a TP transaction. Monitoring the statistics of other processes does not require a process to opt-in to sharing its own statistics.</p><p>Processes that have opted-in share their statistics as binary data in database files located in the directory specified by the gtm_statsdir environment variable. If you do not explicitly define this environment variable for a process, GT.M defines this to the evaluation of $gtm_tmp, which defaults to /tmp. All processes that share statistics MUST use the same value for $gtm_statsdir. FIS suggests that you point gtm_statsdir at a tmpfs or ramfs on Linux, and a filesystem on a ram disk on AIX. These database files have a name derived from the user defined database file name and a .gst extension. They are not usable as normal database files by application code, except to read statistics. GT.M automatically creates and deletes them as needed. Under normal operation, applications do not need to manage them explicitly. The mapping of ^%YGS to statistics database files is managed by GT.M within global directories, transparently to applications. As described below, the ^%YGBLSTAT utility program gathers and reports statistics from nodes of ^%YGS(region,pid).</p><p>Labels in the ^%YGBLSTAT utility program gather and report statistics, presenting both a high level API and a low level API. While we intend to preserve backward compatibility of the high level API in future GT.M releases, we may change the low level API if and when we change the underlying implementation. A call to a label in ^%YGBLSTAT does not in any way slow the execution of other processes. Because the gathering of statistics is not instantaneous, and processes concurrently open database files as well as close them on exit, and may turn their participation in statistics monitoring on and off, statistics typically do not show a single moment in time, as statistics change during the short time interval over which they are gathered.</p><p>In the following, an omitted response or argument is equivalent to "*".</p><p>The high level API implemented by $$STAT^%YGBLSTAT(expr1[,expr2[,expr3[,expr4]]]) reports global variable statistics and has arguments as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
expr1 (treated as an intexpr - coercing an expr to an integer is equivalent to +(expr)) specifies the PID of a process on which to report; if such a process does not exist, has not opted in, or no database file mapped by expr3 and expr4 includes statistics for such a process, the function returns an empty string. Specifying "*" as the value of expr1 returns the aggregate statistic(s) specified by expr2 for all processes whose statistics are included in the database file(s) of the region(s) specified by expr4 within the global directory specified by expr3, or the empty string if there are no statistics to report for any process.</li><li class="listitem">
expr2 specifies the statistic(s) to report as follows:<div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
If expr2 is a single statistic, e.g., "LKF", the function returns the requested value as an integer</li><li class="listitem">
If expr2 is a series of comma-separated names of statistics, e.g., "DTA,GET", the function returns a string with each requested statistic in ZSHOW "G" order, e.g., "GET:3289,DTA:598...", rather than in the order in which they appear within the specifying argument.</li><li class="listitem">
If expr2 is omitted, or consists of the string "*", the return value reports all statistics formatted like the ZSHOW "G" statistics for a single region, e.g., "SET:563,KIL:39,GET:3289,DTA:598...</li></ul></div></li><li class="listitem">
expr3 specifies a global directory file name (producing a ZGBLDIRACC error if such a global directory is not accessible); if unspecified, the utility defaults this value to $ZGBLDIR of the invoking process.</li><li class="listitem">
expr4 specifies the name of a region (producing a NOREGION error if no such region exists in the global directory expr3); if expr4 is unspecified, or the string "*", the function returns statistics for the process or processes summed across all regions of the global directory explicitly or implicitly specified by expr3.</li></ul></div><p>When invoked as an interactive utility program using DO, ^%YGBLSTAT, prompts for:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
the process id (respond * for all processes)</li><li class="listitem">
a comma separated list of the statistics desired (respond * for all statistics)</li><li class="listitem">
the global directory to use</li><li class="listitem">
region (respond * to report statistics summed across all regions).</li></ul></div><p>When invoked from a shell, the command line is:  mumps -run %YGBLSTAT [&#8722;&#8722;help] [&#8722;&#8722;pid pidlist] [&#8722;&#8722;reg reglist] [&#8722;&#8722;stat statlist] where:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
pidlist is a single pid, or "*" (quoted to protect it from expansion by the shell) for all processes currently sharing statistics.</li><li class="listitem">
reglist is a single region name in the global directory specified by $gtmgbldir, or "*" to report statistics summed across all regions</li><li class="listitem">
statlist is one or more comma separated statistics, or "*"</li><li class="listitem">
When statlist specifies a list of statistics, %YGBLSTAT reports them in the same order in which ZSHOW "G" reports those statistics, rather than in the order in which they appear within the specifying argument.</li></ul></div><p>$$ORDERPID^%YGBLSTAT(expr1[,expr2[,expr3]]) reports PIDs of processes that have opted in and recorded statistics. Its arguments are as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
expr1 coerced to an intexpr specifies a PID such that the function returns the next PID after expr1 of a process that has opted in to be monitored and which has recorded statistics in any region(s) specified by expr3 from the global directory specified by expr2, or the empty string if expr1 is the last PID. A value of the empty string ("") for expr1 returns the first monitored PID meeting the specifications in expr2 and expr3.</li><li class="listitem">
expr2 specifies a global directory file name (producing a ZGBLDIRACC error if such a global directory is not accessible); if unspecified or the empty string, the utility defaults this value to the $ZGBLDIR of the invoking process.</li><li class="listitem">
expr3 evaluates to the name of a region (producing a NOREGION error if no such region exists in the global directory specified by expr2); if expr3 is unspecified, or the string "*", the function returns the PID for the next process after expr1 for any region of the global directory specified by expr2.</li><li class="listitem">
Applications should not rely on GT.M returning the PIDs in a sorted or other predictable order: the order in which PIDs are returned is at the discretion of the implementation, and may change from release to release.</li></ul></div><p>The low level API implemented by $$SHOW^%YGBLSTAT(glvn[,strexp]) reports raw statistics of a process and has arguments as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
glvn specifies a node containing raw statistics for a process</li><li class="listitem">
the raw data is stored in uniquely managed database files as nodes of ^%YGS(expr1,expr2) where:<div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
expr1 evaluates to the name of a region in the current global directory (or the global directory of an extended reference), producing an UNDEF error, or, in NOUNDEF mode, an empty string, if no such region exists</li><li class="listitem">
expr2 coerced to an intexpr is a PID.</li><li class="listitem">
The data in the node is a series of binary bytes which are the raw statistics shared by a process</li></ul></div></li><li class="listitem">
strexp specifies statistics to report with the same interpretation as the expr2 parameter of $$STAT^%YGBLSTAT.</li><li class="listitem">
$$SHOW^%YGBLSTAT() reports a zero value for any statistic whose name is unrecognized. This facilitates application code written for a version of GT.M that includes a statistic, but which also needs to run on an earlier version without that statistic.</li><li class="listitem">
Because a process sharing statistics can exit or turn off sharing, deleting its node, between the time a monitoring process decides to access its statistics, e.g., finding it using $$ORDERPID^%YGBLSTAT() or $ORDER(^%YGS()), and the time the monitoring process performs the database access, any direct access to ^%YGBLSTAT should be wrapped in $GET().</li><li class="listitem">
As raw statistics are binary data, processes in UTF-8 mode that gather and monitor statistics should use code with appropriate BADCHAR handling. Note that processes sharing statistics and processes gathering statistics for monitoring and reporting need not run in the same UTF-8/M mode. As statistics sharing by processes is identical in M and UTF-8 modes, FIS suggests that processes gathering statistics run in M mode</li></ul></div><p>Except as documented here for sharing and gathering statistics, FIS strongly recommends that applications not access statistics database files unless otherwise directed by your GT.M support channel.</p><p>As they do for unshared statistics, shared statistics reflect all database actions for a TP transaction, including those during RESTARTs. Because the sharing of statistics is not a database operation that modifies the relative time stamps GT.M uses to maintain serialized operation preserving the Consistency and Isolation aspects of ACID operation, statistics generated by a sharing process inside a transaction (TSTART/TCOMMIT) do not cause transaction restarts as a consequence of updates to shared statistics by other processes.</p><p>DSE DUMP -FILEHEADER reports the following information for a region:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
DB is auto-created TRUE or FALSE to indicate whether the database file is automatically created</li><li class="listitem">
DB shares gvstats TRUE or FALSE to indicate whether the database supports sharing of statistics</li></ul></div><p>By default, DSE does not map the regions used to store shared GVSTAT information, however the -STATS qualifier on a FIND -REGION=&lt;region-name&gt; command directs DSE to any existing statistics database associated with the named  region. Note that these special purpose regions have a lower-case name that corresponds to their actual upper-case region name, and their databases tend not to exist unless they are in current use.</p><p>GDE, ADD. CHANGE and TEMPLATE commands accept the following qualifiers for REGION objects:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
-[NO]AUTODB specifies whether GT.M should automatically create the associated database file if it does not exist when a process first attempts to access it; it defaults to NOAUTODB. This feature is not intended to replace MUPIP CREATE, but rather permit somewhat easier management of temporary databases or process private databases.</li><li class="listitem">
-[NO]STATS specifies whether GT.M should permit statistics sharing for this region; it defaults to STATS. This characteristic permits operational exclusion of statistics sharing for a region.</li></ul></div><p>Any attempt to map globals with names starting with %Y produces a NOPERCENTY error, as this namespace is reserved by the standard for implementation use.</p><p>MUPIP commands with the exception of INTEG, SET and RUNDOWN do not apply to statistic databases; that is they are not available for operations such as BACKUP, EXTRACT or LOAD.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
INTEG recognizes the -STATS qualifier which directs it to integrity check any active statistics database associated with the region(s) specified for the command.</li><li class="listitem">
RUNDOWN -FILE can be directed to a statistics database file and works even if the corresponding actual database file does not exist. MUPIP RUNDOWN with no argument removes any statistics database file resources associated with actual database file resources it can remove.</li><li class="listitem">
SET recognizes the -[NO]STATS qualifier. Please refer to the GDE description above for a description of these database characteristics.</li></ul></div></div></div><div class="sect1" title="Error and Other Messages"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm45342456398624"></a>Error and Other Messages</h2></div></div></div><div class="sect2" title="CHANGELOGINTERVAL  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMCHANGELOGINTERVAL"></a>CHANGELOGINTERVAL <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>CHANGELOGINTERVAL, </strong></span>
ssss Server now logging to ffff with a IIII second interval</p><p>MUPIP Information: This message confirms a change to a replication server (ssss) by showing the current log file (ffff) and log interval (IIII)</p><p>Action: None Required</p></div><div class="sect2" title="CRYPTNOMM  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMCRYPTNOMM"></a>CRYPTNOMM <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>CRYPTNOMM, </strong></span>
ffff  is an encrypted database. Cannot support MM access method.</p><p>MUPIP Error: This error is triggered by an attempt to mark an MM database as encrypted with GDE or to switch an encrypted database from BG to MM with MUPIP SET. The MM access method is not supported for encrypted databases.</p><p>Action: Use the BG access method for encrypted files.</p></div><div class="sect2" title="DBDUPNULCOL  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMDBDUPNULCOL"></a>DBDUPNULCOL <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>DBDUPNULCOL, </strong></span>
Discarding kkkk=vvvv key due to duplicate null collation record</p><p>MUPIP Error: This idicates that MUPIP LOAD discarded a key-value pair from a binary EXTRACT because it contained conflicting empty string subscripts. This can only happen is someone changes the "Null" subscript representation used by a database while it contains such subscripts. FIS recommends against such a change.</p><p>Action: Determine whether the described data has value and restore it, typically with a SET command, appropriately.</p></div><div class="sect2" title="DBMISALIGN  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMDBMISALIGN"></a>DBMISALIGN <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>DBMISALIGN, </strong></span>
 Database file xxxx has yyyy blocks which does not match alignment rules. Reconstruct the database from a backup or extend it by at least zzzz blocks.</p><p>MUPIP Error: This is an auxiliary message, and is preceded by a primary message.</p><p>Action: Follow the primary message description and action as specified in this manual.</p></div><div class="sect2" title="DBNULCOL  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMDBNULCOL"></a>DBNULCOL <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>DBNULCOL, </strong></span>
NULL collation representation for record rrrr in block bbbb is RRRR which differs from the database file header settings of hhhh</p><p>DSE/MUPIP/Run Time Error: This indicates the database contains a record rrrr with an empty subscript ("Null" subscript) representation RRRR in block bbbb that is incompatible with the current setting hhhh for such representation. This can only arise if someone changes the setting for the database while it contains one or more such subscripts. FIS recommends against making such a change. This message can originate from MUPIP INTEG, DSE INTEG or VIEW "GDSCERT"</p><p>Action: Use the record and block information to remove the problematic record with DSE and restore the data appropriately, typically with a SET command. Note that the record and block of the record many change due to ongoing updates, so this operation requires great care and familiarity with DSE.</p></div><div class="sect2" title="DBTOTBLK  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMDBTOTBLK"></a>DBTOTBLK <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>DBTOTBLK, </strong></span>
File header indicates total blocks is tttt but file size indicates total blocks would be eeee</p><p>MUPIP Information: This is an auxiliary message, and is preceded by a primary message.</p><p>Action: Follow the primary message description and action as specified in this manual.</p></div><div class="sect2" title="GDECRYPTNOMM  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMGDECRYPTNOMM"></a>GDECRYPTNOMM <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>GDECRYPTNOMM, </strong></span>
ssss segment has encryption turned on. Cannot support MM access method</p><p>GDE Error: This error is triggered by an attempt to mark an MM database segment ssss as encrypted with GDE. The MM access method is not supported for encrypted databases.</p><p>Action: Use the BG access method for encrypted files.</p></div><div class="sect2" title="GDINVALID  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMGDINVALID"></a>GDINVALID <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>GDINVALID, </strong></span>
   Unrecognized Global Directory file format: ffff, expected label: eeee, found: bbbb</p><p>Run Time Error: This indicates that a version of the global directory file ffff does not match with the version expected by GT.M. The file might have been created by an incompatible GT.M version. If the text of eeee or bbbb contain non-graphic characters, GT.M replaces each of them with a period (.).  </p><p>Action: Compare the labels eeee and bbbb. If the global directory was created by an earlier GT.M version, upgrade the file by loading and then saving the file using the GDE of the new GT.M version.</p></div><div class="sect2" title="INVADDRSPEC  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMINVADDRSPEC"></a>INVADDRSPEC <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>INVADDRSPEC, </strong></span>
   Invalid IP address specification</p><p>Run Time Error: This indicates the IP address and/or port specified is not in a valid format.</p><p>Action: Verify and correct the IP address and port.</p></div><div class="sect2" title="INVLINKTMPDIR  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMINVLINKTMPDIR"></a>INVLINKTMPDIR <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>INVLINKTMPDIR, </strong></span>
Value for $gtm_linktmpdir is either not found or not a directory: dddd</p><p>Run Time Error: Indicates the process cannot access directory dddd, which it needs in order to do auto-relink as specified by its $ZROUTINES; the directory may not exist as a directory or the process lacks authorization to the directory.</p><p>Action: The directory specification comes from $gtm_linktmpdir if it is defined, otherwise from $gtm_tmp if that is defined; otherwise it defaults to the system temporary directory, typically /tmp. Either correct the environment variable definition or ensure directory dddd is appropriately set up. Note that all users of auto-relink for a directory normally need to use the same temporary directory for their relink control files.</p></div><div class="sect2" title="INVMEMRESRV  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMINVMEMRESRV"></a>INVMEMRESRV <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>INVMEMRESRV, </strong></span>
Could not allocate GT.M memory reserve (xxxx)</p><p>Images Warning: GT.M could not allocate xxxx KiB of reserve memory for handling and reporting out-of-memory conditions. Examine the subsequent messages for more information on why the memory reserve allocation failed. </p><p>Action: If $gtm_memory_reserve is too high, specify a lower value and retry. If the value is reasonable, determine what else is preventing the allocation (process or system limits or usage by other system components). Note that GT.M uses this reserve only when a process runs out of memory so it mostly requires address space and almost never requires actual memory.</p></div><div class="sect2" title="IOEOF  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMIOEOF"></a>IOEOF <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>IOEOF, </strong></span>
   Attempt to read past an end-of-file</p><p>Run Time/MUPIP Error: This indicates that a READ command for a run-time system or a MUPIP command attempted to move past an end-of-file.</p><p>Action: Verify that the $ZEOF special variable is tested by the function betwee READs or that an EXCEPTION code string is assigned to handle EOFs. Alternatively, have your $ETRAP (or $ZTRAP) error handling deal with this error. The USE command has a REWIND deviceparameter that allows you to read from the beginning of the file without having to CLOSE and OPEN again, which may facilitate recovery from this error. Attempting to READ from a non-existent file not opened READONLY also causes this error. In the event of a MUPIP error, make sure the file being read is not corrupted.</p></div><div class="sect2" title="JOBLVN2LONG  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMJOBLVN2LONG"></a>JOBLVN2LONG <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>JOBLVN2LONG, </strong></span>
The zwrite representation of a local variable transferred to a JOB'd process is too long. The zwrite representation cannot exceed MMMM. Encountered size: LLLL</p><p>Run Time Error: This error indicates that the total length LLLL (in bytes) of the ZWRITE representation of the variable name, subscripts, and value exceeds the maximum MMMM supported by the PASSCURLVN facility. Note that the ZWRITE representation contains the appropriate punctuation for any subscripts, the equal-sign and replaces any non-graphic characters with their $[Z]CHAR() representations.</p><p>Action: Consider whether the JOB'd process needs the variable(s) that exceed the maximum for PASSCURLVN - if not, they can be taken out of scope before the JOB command. Alternatively, pass them using global variables or a local SOCKET device.</p></div><div class="sect2" title="JOBLVNDETAIL  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMJOBLVNDETAIL"></a>JOBLVNDETAIL <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p>Last used version: V6.2-003</p><p><span class="bold"><strong>JOBLVNDETAIL, </strong></span>
The zwrite representation of a local variable transferred to a JOB'd process is too long. The zwrite representation cannot exceed XXXX. Encountered size: YYYY</p><p>Run Time Error: The length of the zwrite representation of a local, (including the quotes, the '=', concatenate operator "_", and "$[Z]C()") has the length of YYYY which exceeds the maximum limit of XXXX.</p><p>Action: Please check the sizes of locals that needs to be sent and make sure their lengths are less than XXXX. For those big locals, consider using another mechanism such as sockets.</p></div><div class="sect2" title="MUPJNLINTERRUPT  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMMUPJNLINTERRUPT"></a>MUPJNLINTERRUPT <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>MUPJNLINTERRUPT, </strong></span>
 Database file xxxx indicates interrupted MUPIP JOURNAL command. Restore from backup for forward recover/rollback.</p><p>MUPIP Error: This indicates that a MUPIP JOURNAL -ROLLBACK -FORWARD or a MUPIP JOURNAL -RECOVER -FORWARD did not proceed because a previous MUPIP JOURNAL command attempted on the database was terminated abnormally.</p><p>Action: Restore the database and journal files from a backup to proceed with the MUPIP JOURNAL -ROLLBACK -FORWARD or MUPIP JOURNAL -RECOVER -FORWARD.</p></div><div class="sect2" title="NOPRINCIO  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMNOPRINCIO"></a>NOPRINCIO <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>NOPRINCIO, </strong></span>
NOPRINCIO   Unable to write to principal device</p><p>Run Time Fatal: This indicates that GT.M attempted to, but could not, READ from, or WRITE to, the principal device and therefore attempted to issue an appropriate error, for example, an IOEOF. However if the error handling does not prevent any and all subsequent READs and WRITEs to the no longer available principal device, the next subsequent I/O error shuts down the process immediately with a NOPRINCIO to prevent mysteriously lost output, or, worse, an indefinite loop.</p><p>Action: The NOPRINCIO error message is FATAL which does not drive device or trap handlers and terminates the process. This termination does not allow any application level orderly shutdown and, depending on the application may lead to out-of-design application state. Therefore FIS recommends appropriate application level error handling that recognizes the preceding error and performs an orderly shutdown without issuing any additional READ or WRITE to the principal device. The most common causes for the principal device to cease to exist involve terminal sessions or socket connections (including those from processes started by inetd/xinetd).  When the remote client terminates the connection, the underlying principal device becomes inaccessible making any subsequent attempt to READ from, or WRITE to, it hopeless. In the case of terminals, a user closing the window of a session without cleanly exiting from the GT.M process sets up the case that can drive this error. </p></div><div class="sect2" title="NOTALLJNLEN  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMNOTALLJNLEN"></a>NOTALLJNLEN <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>NOTALLJNLEN, </strong></span>
Journaling disabled/off for dddd regions</p><p>MUPIP Warning: This indicates that some or all regions do not have journal state ON.</p><p>Action: Ensure you have journaling enabled for all regions that require it; use MUPIP SET to enable journaling.</p></div><div class="sect2" title="NOTALLREPLON  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMNOTALLREPLON"></a>NOTALLREPLON <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>NOTALLREPLON, </strong></span>
Replication off for dddd regions</p><p>MUPIP Warning: This indicates that some or all regions have replication state OFF.</p><p>Action: Ensure you have replication on for all regions that require it; use MUPIP SET to enable replication.</p></div><div class="sect2" title="OFRZACTIVE  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMOFRZACTIVE"></a>OFRZACTIVE <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>OFRZACTIVE, </strong></span>
Region aaaa has an Online Freeze</p><p>MUPIP Warning: A MUPIP operation has been requested while an Online Freeze is in place, but the operation can not be performed with an Online Freeze.</p><p>Action: The operation was not performed. Remove the freeze with MUPIP FREEZE -OFF and retry the operation.</p></div><div class="sect2" title="OFRZAUTOREL  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMOFRZAUTOREL"></a>OFRZAUTOREL <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>OFRZAUTOREL, </strong></span>
Online Freeze automatically released for region aaaa</p><p>Operator log Warning: A process needed to modify the database file for region aaaa, which had an Online Freeze, but with AutoRelease selected. The process continued normally, modifying the file.</p><p>Action: Discard any database copy or snapshot made after the Online Freeze, as its contents are suspect. Perform a MUPIP FREEZE -OFF to clean up the prior Online Freeze. If the AutoRelease behavior is not desired, try again with MUPIP FREEZE -ON -ONLINE -NOAUTORELEASE. If the cause of the AutoRelease is unclear, report this and the accompanying ERRCALL message to your GT.M support channel.</p></div><div class="sect2" title="OFRZCRITREL  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMOFRZCRITREL"></a>OFRZCRITREL <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>OFRZCRITREL, </strong></span>
Proceeding with a write to region aaaa after Online Freeze while holding crit</p><p>Operator log Warning: A process previously encountered a OFRZCRITSTUCK condition, which has since been resolved.</p><p>Action: None.</p></div><div class="sect2" title="OFRZCRITSTUCK  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMOFRZCRITSTUCK"></a>OFRZCRITSTUCK <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>OFRZCRITSTUCK, </strong></span>
Unable to proceed with a write to region !AD with Online Freeze while holding crit. Region stuck until freeze is removed.</p><p>Operator log Warning: A process needed to do a database write while holding a critical resource, but an Online Freeze was in place without AutoRelease enabled. No other process will be able to acquire the critical resource until the Online Freeze is removed.</p><p>Action: MUPIP FREEZE -OFF will remove the freeze and allow the process to continue, at which time it will send a OFRZCRITREL message to the operator log. This situation can be avoided by specifying MUPIP FREEZE -ON -ONLINE without the -NOAUTORELEASE option, or by including the -AUTORELEASE option.</p></div><div class="sect2" title="OFRZNOTHELD  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMOFRZNOTHELD"></a>OFRZNOTHELD <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>OFRZNOTHELD, </strong></span>
Online Freeze had been automatically released for at least one region</p><p>MUPIP Warning: A MUPIP FREEZE -OFF command encountered at least one region which previously had an Online Freeze, but a process had AutoReleased it.</p><p>Action: The command cleaned up the region with the AutoReleased Online Freeze, and database operations are back to normal. However, any database file snapshots or copies made after the Online Freeze should be discarded, as processes likely will have written to the file since the AutoRelease. An OFRZAUTOREL message in the operator log will report which process performed the AutoRelease.</p></div><div class="sect2" title="RECLOAD  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMRECLOAD"></a>RECLOAD <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>RECLOAD, </strong></span>
Error loading record number: nnnn</p><p>MUPIP Error: This message identifies a record nnnn that MUPIP could not LOAD and follows a message about the cause. If this message is Fatal, which it can be for BIN format, it produces a core file for diagnostic analysis.</p><p>Action: Address the cause or, for GO and ZWR format input files, examine the record with a text editor for possible correction or alternate action and for BIN format if fixing the cause does not resolve the error switch to ZWR format EXTRACT.</p></div><div class="sect2" title="REPLLOGOPN  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMREPLLOGOPN"></a>REPLLOGOPN <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>REPLLOGOPN, </strong></span>
Replication subsystem could not open log file LLLL : eeee. Logging done to OOOO</p><p>MUPIP Error: This indicates that MUPIP could not find, or did not have access permission to open, the log file LLLL, because of the error eeee. If there is another log file available (a previously opened file), MUPIP writes to the other log file OOOO. If there is no other log file available, MUPIP sends any remaining messages to /dev/null and terminates the replication server process. </p><p>Action: Check the log file permissions, and if permissions are correct, move the log file and specify that MUPIP should log to a log file which has appropriate access permissions. </p></div><div class="sect2" title="REPLSTATEOFF  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMREPLSTATEOFF"></a>REPLSTATEOFF <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>REPLSTATEOFF, </strong></span>
   MUPIP JOURNAL -ROLLBACK -BACKWARD cannot proceed as database xxxx does not have replication ON</p><p>MUPIP Error: This indicates that a MUPIP JOURNAL -ROLLBACK -BACKWARD command cannot proceed because the specified database xxxx does not have replication state ON. In most situations, this error occurs when the journal file storage runs out of disk space.</p><p>Action: Ensure replication is turned ON for a database, before executing the MUPIP JOURNAL -ROLLBACK -BACKWARD command. If the database is in the WAS_ON state, refer to the "Recovering from the WAS_ON state" section in the Database Replication chapter of the Administration and Operations Guide. Alternatively, if replication was not in use on the database, use MUPIP JOURNAL -RECOVER.</p></div><div class="sect2" title="REQROLLBACK  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMREQROLLBACK"></a>REQROLLBACK <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>REQROLLBACK, </strong></span>
 Error accessing database dddd. Run MUPIP JOURNAL -ROLLBACK -NOONLINE on cluster node cccc.</p><p>Run Time Error: This indicates that GT.M could not open a previously replicated database file dddd due to a prior improper shutdown on cluster node cccc. A GT.M process on cluster node ccccc may have failed to attach a database memory segment or it was terminated by a method other than MUPIP STOP.</p><p>Action: Perform MUPIP JOURNAL -ROLLBACK  -NOONLINE to cleanup the instance file, database, and journal files before starting a source server on this instance.</p></div><div class="sect2" title="RESRCINTRLCKBYPAS  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMRESRCINTRLCKBYPAS"></a>RESRCINTRLCKBYPAS <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>RESRCINTRLCKBYPAS, </strong></span>
 tttt with PID qqqq bypassing the ssss semaphore for region rrrr (ffff) currently held by PID pppp.</p><p>All GT.M Components Information: GT.M issues the RESRCINTRLCKBYPAS message to the system log as an indication it may not detect when the last process detaches from the shared resource and therefore may not rundown the database shared resources as it normally would. GT.M protects the actions of setting up and tearing down the shared resources associated with a database with a pair of semaphores. Because DSE, and LKE are tools for diagnosing issues, when they start and find they cannot acquire the semaphores after a reasonable number of tries, they proceed to open the database anyway because it is highly probable the database is already set up. When DSE and LKE bypass the semaphore acquisition, they leave the count of attached processes incorrect. When many processes terminate at the same time, typically because of a system shutdown, there can be significant contention for the semaphores that can cause their terminations to take an unusually long time. When this happens, and the count of remaining attached processes is significant, a process may skip the semaphore acquisition, again leaving the count of attached process incorrect. If either of these events occurs, GT.M issues the RESRCINTRLCKBYPAS message where tttt identifies the process type: "LKE", "DSE" or "GT.M"; qqqq is the bypassing process's PID; ssss identifies the semaphore type: "FTOK" or "access control"; rrrr is the region bypassed; ffff is the file corresponding to region rrrr; pppp is the PID of the process holding the semaphore.</p><p>Action: These messages when shutting down GT.M activity may indicate a need to complete the process by invoking a MUPIP JOURNAL -ROLLBACK -BACKWARD for replicated databases, a MUPIP JOURNAL -RECOVER -BACKWARD for unreplicated journaled databases and a MUPIP RUNDOWN for journal-free databases to get the database to a safe state; doing so as part of every shutdown is good practice.</p></div><div class="sect2" title="RESRCWAIT  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMRESRCWAIT"></a>RESRCWAIT <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>RESRCWAIT, </strong></span>
Waiting briefly for the tttt semaphore for region rrrr (ffff) was held by PID pppp (Sem. ID: ssss)</p><p>Run Time Information: A process started a three (3) second wait for an FTOK or access control semaphore. If process with PID pppp does not release the semaphore before the timeout expires, the waiting process bypasses acquiring the semaphore. tttt identifies the semaphore type: "FTOK" or "access control"; rrrr is the region; ffff is the database file corresponding to region rrrr; ssss is the semaphore ID. </p><p>Action: None required.</p></div><div class="sect2" title="TPRESTART  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMTPRESTART"></a>TPRESTART <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>TPRESTART, </strong></span>
Database mmmm; code: xxxx; blk: yyyy in glbl: zzzz; pvtmods: aaaa, blkmods: bbbb, blklvl: cccc, type: dddd, readset: eeee, writeset: ffff, local_tn: gggg, zpos: hhhh</p><p>Run Time Information: The UNIX environment variables GTM_TPRESTART_LOG_FIRST and GTM_TPRESTART_LOG_DELTA control the logging of TPRESTART messages. GTM_TPRESTART_LOG_FIRST indicates the number of TP restarts to log from a GT.M invocation. Once that many have been logged, every GTM_TPRESTART_LOG_DELTA TP restarts, GT.M logs a restart message. If GTM_TPRESTART_LOG_DELTA is undefined, GT.M performs no operator logging. The default value for GTM_TPRESTART_LOG_FIRST is 0 (zero), which leaves the control completely with GTM_TPRESTART_LOG_DELTA. The facility that produces this message can serve as a diagnostic tool in developmental environments for investigating contention due to global updates. A zzzz of "*BITMAP" indicates contention in block allocation which might involve multiple globals. hhhh is the $ZPOSITION of the line of M code that caused the restart of the transaction; utilities leave this field blank.</p><p>Action: Disable, or adjust the frequency of, these messages with the mechanism described above. To reduce the number of restarts, consider changes to the global structure, or varying the time when work is scheduled. Consider whether the business and program logic permits the use of NOISOLATION.</p></div><div class="sect2" title="TRIGINVCHSET  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMTRIGINVCHSET"></a>TRIGINVCHSET <span class="inlinemediaobject"><img src="images/revised.png" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>TRIGINVCHSET, </strong></span>
 Trigger tttt for global gggg was created with CHSET=cccc which is different from the current $ZCHSET of this process</p><p>Trigger/Run Time Error: TRIGINVCHSET occurs when a process invokes a trigger on a global using a $ZCHSET that is different from the $ZCHSET used at the time of loading the first trigger on that global. GT.M implicitly uses the $ZCHSET of the first trigger on a global to invoke all triggers on that global. Note that tttt is the name of the first trigger on the global gggg-not necessarily the name of the trigger being invoked.  cccc is the $ZCHSET of the process at the time of loading tttt on global gggg.</p><p>Action: Ensure that the process invoking a trigger on a global uses the same $ZCHSET that was used to load the first trigger on that global. If your application requires triggers in both M and UTF-8 modes, use different globals to load M mode and UTF-8 mode triggers.</p></div><div class="sect2" title="ZATRANSERR  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMZATRANSERR"></a>ZATRANSERR <span class="inlinemediaobject"><img src="images/new.png" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>ZATRANSERR, </strong></span>
The input string is too long to convert</p><p>Run Time Error: The first (expression) argument to a $ZATRANSFORM() produces a result that exceeds the maximum key length.</p><p>Action: Analyze the logic to determine if the argument is correct. If you need to produce translations that exceed the maximum key length, you must use $ZCOLLATE() or break them into chunks to avoid this error, Note that some transforms may use context such that selecting the chunks requires an understanding of the transform.</p></div></div></div></body></html>
