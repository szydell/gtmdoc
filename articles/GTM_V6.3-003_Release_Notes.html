<html>
<!-- Mirrored [from host tinco.pair.com [file /bhaskar/gtm/doc/articles/GTM_V6.3-003_Release_Notes.html]] -->
<head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>GT.M V6.3-003B Release Notes</title><link rel="stylesheet" href="gtm.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><meta name="description" content="Contact Information GT.M Group Fidelity National Information Services, Inc. 200 Campus Drive Collegeville, PA 19426 United States of America GT.M Support for customers: gtmsupport@fisglobal.com Automated attendant for 24 hour support: +1 (484) 302-3248 Switchboard: +1 (484) 302-3160 Website: http://fis-gtm.com"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" title="GT.M V6.3-003B Release Notes"><div class="titlepage"><div><div><div class="mediaobject"><img src="images/FIS_RGB_logo.jpg"></div></div><div><h2 class="title"><a name="idp171155760"></a>GT.M V6.3-003B Release Notes</h2></div><div><h3 class="subtitle"><i>Release Notes: GT.M V6.3-003B</i></h3></div><div><p class="copyright">Copyright (C) 2017-2019 Fidelity National Information Services, Inc.</p></div><div><div class="legalnotice" title="Legal Notice"><a name="idp171311824"></a><p class="legalnotice-title"><b>Legal Notice</b></p><p>Copyright (C) 2017-2019 Fidelity National Information Services, Inc. and/or its subsidiaries. All Rights Reserved.</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the <a class="ulink" href="http://www.gnu.org/licenses/fdl.txt" target="_blank">GNU Free Documentation License</a>, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts and no Back-Cover Texts. </p><p>GT.M&#8482; is a trademark of Fidelity National Information Services, Inc. Other trademarks are the property of their respective owners. </p><p>This document contains a description of GT.M and the operating instructions pertaining to the various functions that comprise the system. This document does not contain any commitment of FIS. FIS believes the information in this publication is accurate as of its publication date; such information is subject to change without notice. FIS is not responsible for any errors or defects. </p></div></div><div><p class="pubdate">5 February 2019</p></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><b>Revision History</b></th></tr><tr><td align="left">Revision 1.5</td><td align="left">5 February 2019</td><td align="left">Updated the <a class="link" href="#platforms" title="Platforms">Platforms</a> section to add AIX 7.1 TL 4 and AIX 7.2 as supported versions; Correct the maximum V6 database size.</td></tr><tr><td align="left">Revision 1.4</td><td align="left">20 August 2018</td><td align="left">Add <a class="link" href="#GTM-9020">GTM-9020</a> and <a class="link" href="#GTM-9023">GTM-9023</a>.</td></tr><tr><td align="left">Revision 1.3</td><td align="left">19 June 2018</td><td align="left"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Remove GTM-8859 as it was fixed in GT.M V6.3-004.</p></li><li class="listitem"><p>Make corrections to <a class="link" href="#GTM-7986">GTM-7986</a>, <a class="link" href="#GTM-8732">GTM-8732</a>, <a class="link" href="#GTM-8832">GTM-8832</a> and <a class="link" href="#GTM-8880">GTM-8880</a>.</p></li></ul></div></td></tr><tr><td align="left">Revision 1.2</td><td align="left">17 April 2018</td><td align="left"><p>Change category of <a class="link" href="#GTM-8769">GTM-8769</a> to <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span>.</p></td></tr><tr><td align="left">Revision 1.1</td><td align="left">22 January 2018</td><td align="left"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Updated for V6.3-003A. Added <a class="link" href="#GTM-8880">GTM-8880</a>, <a class="link" href="#GTM-8887">GTM-8887</a>, and <a class="link" href="#GTM-8889">GTM-8889</a>. </p></li><li class="listitem"><p>Added <a class="link" href="#GTM-8846">GTM-8846</a> and <a class="link" href="#GTM-8873">GTM-8873</a> which were missed in the V6.3-003 Release Notes due to a documentation error. </p></li></ul></div></td></tr><tr><td align="left">Revision 1.0</td><td align="left">12 December 2017</td><td align="left"><p>V6.3-003</p></td></tr></table></div></div><div><div class="abstract" title="Contact Information"><p class="title"><b>Contact Information</b></p><div class="informaltable"><table border="0" width="100%"><colgroup><col><col></colgroup><tbody><tr><td>
                  <p>
</p><div class="address"><p>GT.M Group<br>
Fidelity National Information Services, Inc.<br>
<span class="street">200 Campus Drive</span><br>
<span class="city">Collegeville, </span><span class="state">PA </span><span class="postcode">19426</span><br>
<span class="country">United States of America</span></p></div><p>
</p>
                </td><td>
                  <p>
</p><div class="address"><p><br>
<span class="phone">GT.M Support for customers: gtmsupport@fisglobal.com </span><br>
<span class="phone">Automated attendant for 24 hour support: +1 (484) 302-3248</span><br>
<span class="phone">Switchboard: +1 (484) 302-3160</span><br>
<span class="otheraddr">Website: <a class="ulink" href="http://fis-gtm.com/" target="_blank">http://fis-gtm.com</a></span><br>
</p></div><p>
</p>
                </td></tr></tbody></table></div><p>
</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#GTMrel_overview">V6.3-003A</a></span></dt><dd><dl><dt><span class="sect2"><a href="#overview"> Overview </a></span></dt><dt><span class="sect2"><a href="#conventions">Conventions</a></span></dt><dt><span class="sect2"><a href="#platforms"> Platforms </a></span></dt><dt><span class="sect2"><a href="#manage64">32- vs. 64-bit platforms</a></span></dt><dt><span class="sect2"><a href="#addn_instr">Additional Installation Instructions</a></span></dt><dt><span class="sect2"><a href="#upgrade"> Upgrading to GT.M V6.3-003A</a></span></dt><dt><span class="sect2"><a href="#mng_mode">Managing M mode and UTF-8 mode</a></span></dt><dt><span class="sect2"><a href="#setterm">Setting the environment variable TERM</a></span></dt><dt><span class="sect2"><a href="#install_comp_lib"> Installing Compression Libraries</a></span></dt></dl></dd><dt><span class="sect1"><a href="#GTMchng_hist"></a></span></dt><dd><dl><dt><span class="sect2"><a href="#GTMtaV63-003Bble">V6.3-003B</a></span></dt><dt><span class="sect2"><a href="#GTMtaV63-003Able">V6.3-003A</a></span></dt><dt><span class="sect2"><a href="#GTMtaV63-003ble">V6.3-003</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp171698608">Database </a></span></dt><dt><span class="sect1"><a href="#idp171645344">Language </a></span></dt><dt><span class="sect1"><a href="#idp171785280">System Administration </a></span></dt><dt><span class="sect1"><a href="#idp171778176">Other </a></span></dt><dt><span class="sect1"><a href="#idp171846816">Error and Other Messages</a></span></dt><dd><dl></dl></dd></dl></div><div class="sect1" title="V6.3-003A"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GTMrel_overview"></a>V6.3-003A</h2></div></div></div><div class="sect2" title="Overview"><div class="titlepage"><div><div><h3 class="title"><a name="overview"></a> Overview </h3></div></div></div><p>V6.3-003B adds some capabilities to the restriction facility introduced in V6.3-002. It improves performance when you have a large number of concurrent M LOCKs. While we have designated it as field test grade, perhaps the biggest new thing is the ability for a process to access multiple instances during its execution (<a class="link" href="#GTM-8182">GTM-8182</a>). We are interested in your explorations of this and are ready to answer questions you encounter as you explore the facility.</p><p>As always, the release bring numerous smaller enhancements, and fixes. See the <a class="link" href="#GTMchng_hist">Change History</a> below. Please pay special attention to the items marked with the symbols <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="New Feature"></span>
 or <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="Alert"></span>
</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Messages are not part of the GT.M API whose stability we strive to maintain. Make sure that you review any automated scripting that parses GT.M messages.</p></td></tr></table></div></div><div class="sect2" title="Conventions"><div class="titlepage"><div><div><h3 class="title"><a name="conventions"></a>Conventions</h3></div></div></div><p>This document uses the following conventions:</p><div class="informaltable"><table border="1" width="70%"><colgroup><col><col><col></colgroup><tbody><tr><td>

<p>              <span class="bold"><strong>Flag/Qualifiers</strong></span>            </p>
          </td><td colspan="2">
<p>-</p>
          </td></tr><tr><td>

<p>              <span class="bold"><strong>Program Names or Functions</strong></span>            </p>
          </td><td colspan="2">
<p>upper case. For example, MUPIP BACKUP</p>
          </td></tr><tr><td>

<p>              <span class="bold"><strong>Examples</strong></span>            </p>
          </td><td colspan="2">
<p>lower case. For example: <br> mupip backup -database ACN,HIST /backup</p>
          </td></tr><tr><td>

<p>              <span class="bold"><strong>Reference Number</strong></span>            </p>
          </td><td colspan="2">
<p>A reference number is used to track software <br> enhancements and support requests. <br> It is enclosed between parentheses (). </p>
          </td></tr><tr><td>

<p>              <span class="bold"><strong>Platform Identifier</strong></span>            </p>
          </td><td colspan="2">
<p>Where an item affects only specific platforms, the platforms are listed in square brackets, e.g., [AIX]</p>
          </td></tr></tbody></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The term UNIX refers to the general sense of all platforms on which GT.M uses a POSIX API. As of this date, this includes: AIX and GNU/Linux on x86 (32- and 64-bits).</p></td></tr></table></div><p>The following table summarizes the new and revised replication terminology and qualifiers. </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>

<p>Pre V5.5-000 terminology</p>
          </th><th>

<p>Pre V5.5-000 qualifier</p>
          </th><th>

<p>Current terminology</p>
          </th><th>

<p>Current qualifiers </p>
          </th></tr></thead><tbody><tr><td>

<p>originating instance or primary instance </p>
          </td><td>

<p>-rootprimary</p>
          </td><td>

<p>originating instance or originating primary instance. </p>

<p>Within the context of a replication connection between two instances, an originating instance is referred to as source instance or source side. For example, in an B&lt;-A-&gt;C replication configuration, A is the source instance for B and C. </p>
          </td><td>

<p>-updok (recommended)</p>

<p>-rootprimary (still accepted)</p>
          </td></tr><tr><td>

<p>replicating instance (or secondary instance) and propagating instance </p>
          </td><td>

<p>N/A for replicating instance or secondary instance. </p>

<p>-propagateprimary for propagating instance </p>
          </td><td>

<p>replicating instance. </p>

<p>Within the context of a replication connection between two instances, a replicating instance that receives updates from a source instance is referred to as receiving instance or receiver side. For example, in an B&lt;-A-&gt;C replication configuration, both B and C can be referred to as a receiving instance. </p>
          </td><td>

<p>-updnotok </p>
          </td></tr><tr><td>

<p>N/A</p>
          </td><td>

<p>N/A</p>
          </td><td>

<p>supplementary instance. </p>

<p>For example, in an A-&gt;P-&gt;Q replication configuration, P is the supplementary instance. Both A and P are originating instances. </p>
          </td><td>

<p>-updok</p>
          </td></tr></tbody></table></div><p>Effective V6.0-000, GT.M documentation adopted IEC standard <a class="ulink" href="http://physics.nist.gov/cuu/Units/binary.html" target="_blank">Prefixes for binary multiples</a>. This document therefore uses prefixes Ki, Mi and Ti (e.g., 1MiB for 1,048,576 bytes). Over time, we'll update all GT.M documentation to this standard.</p><p><span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="New Feature"></span>
 denotes a new feature that requires updating the manuals. </p><p><span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="New Feature"></span>
 denotes a new feature or an enhancement that may not be upward compatible and may affect an existing application. </p><p><span class="inlinemediaobject"><img src="images/deprecated.png" alt="-Deprecated Message-"></span>
 denotes deprecated messages.</p><p><span class="inlinemediaobject"><img src="images/revised.html" alt="-Revised Message-"></span>
 denotes revised messages.</p><p><span class="inlinemediaobject"><img src="images/new.html" alt="-New Message-"></span>
 denotes added messages.</p></div><div class="sect2" title="Platforms"><div class="titlepage"><div><div><h3 class="title"><a name="platforms"></a> Platforms </h3></div></div></div><p> Over time, computing platforms evolve. Vendors obsolete hardware architectures. New versions of operating systems replace old ones. We at FIS continually evaluate platforms and versions of platforms that should be Supported for GT.M. In the table below, we document not only the ones that are currently Supported for this release, but also alert you to our future plans given the evolution of computing platforms. If you are an FIS customer, and these plans would cause you hardship, please contact your FIS account executive promptly to discuss your needs. </p><p>Each GT.M release is extensively tested by FIS on a set of specific versions of operating systems on specific hardware architectures (the combination of operating system and hardware architecture is referred to as a platform). This set of specific versions is considered Supported. There may be other versions of the same operating systems on which a GT.M release may not have been tested, but on which the FIS GT.M Group knows of no reason why GT.M would not work. This larger set of versions is considered Supportable. There is an even larger set of platforms on which GT.M may well run satisfactorily, but where the FIS GT.M team lacks the knowledge to determine whether GT.M is Supportable. These are considered Unsupported. Contact FIS GT.M Support with inquiries about your preferred platform.</p><p>As of the publication date, FIS supports this release on the hardware and operating system versions below. Contact FIS for a current list of Supported platforms. The reference implementation of the encryption plugin has its own additional requirements, should you opt to use it as included with GT.M.</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>
            <p class="bold"> Platform </p>
          </th><th>
            <p class="bold"> Supported Versions </p>
          </th><th>
            <p class="bold"> Notes </p>
          </th></tr></thead><tbody><tr><td>

<p> IBM Power Systems AIX </p>
          </td><td>

<p> 7.1 TL 4, 7.2 </p>
          </td><td>

<p>Only 64-bit versions of AIX with POWER7 as the minimum required CPU architecture level are Supported.</p>

<p> While GT.M supports both UTF-8 mode and M mode on this platform, there are problems with the AIX ICU utilities that prevent FIS from testing 4-byte UTF-8 characters as comprehensively on this platform as we do on others. </p>

<p> Running GT.M on AIX 7.1 requires APAR IZ87564, a fix for the POW() function, to be applied. To verify that this fix has been installed, execute <code class="code"> instfix -ik IZ87564. </code> </p>

<p>AIX 7.1 TL 5 is Supportable.</p>

<p>Only the AIX jfs2 filesystem is Supported. Other filesystems, such as jfs1 are Supportable, but not Supported. FIS strongly recommends use of the jfs2 filesystem on AIX; use jfs1 only for existing databases not yet migrated to a jfs2 filesystem.</p>
          </td></tr><tr><td>

<p> x86_64 GNU/Linux </p>
          </td><td>

<p> Red Hat Enterprise Linux 7.3; Ubuntu 16.04 LTS</p>
          </td><td>

<p> To run 64-bit GT.M processes requires both a 64-bit kernel as well as 64-bit hardware. </p>

<p> GT.M should also run on recent releases of other major Linux distributions with a contemporary Linux kernel (2.6.32 or later), glibc (version 2.12 or later) and ncurses (version 5.7 or later). </p>
<p>Due to build optimization and library incompatibilities, GT.M versions older than V6.2-000 are incompatible with glibc 2.24 and up. This incompatibility has not been reported by a customer, but was observed on internal test systems that use the latest Linux software distributions from Fedora (26), Debian (unstable), and Ubuntu (17.10). In internal testing, processes either hung or encountered a segmentation violation (SIG-11) during operation. Customers upgrading to Linux distributions that utilize glibc 2.24+ must upgrade their GT.M version at the same time as or before the OS upgrade.</p>

<p> GT.M requires the libtinfo library. If it is not already installed on your system, and is available using the package manager, install it using the package manager. If a libtinfo package is not available:</p>
            <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Find the directory where libncurses.so is installed on your system.</p></li><li class="listitem"><p> Change to that directory and make a symbolic link to libncurses.so.&lt;ver&gt; from libtinfo.so.&lt;ver&gt;. Note that some of the libncurses.so entries may themselves be symbolic links, for example, libncurses.so.5 may itself be a symbolic link to libncurses.so.5.9.</p></li></ul></div>

<p>To support the optional WRITE /TLS fifth argument (the ability to provide / override options in the tlsid section of the encryption configuration file), the reference implementation of the encryption plugin requires libconfig 1.4.x.</p>

<p>Although GT.M itself does not require libelf, the geteuid program used by the GT.M installation script requires libelf (packaged as libelf1 on current Debian/Ubuntu distributions and elfutils-libelf on RHEL 6 &amp; 7).</p>

<p>Only the ext4 and xfs filesystems are Supported. Other filesystems are Supportable, but not Supported. Furthermore, if you use the NODEFER_ALLOCATE feature, FIS strongly recommends that you use xfs. If you must use NODEFER_ALLOCATE with ext4, you <span class="emphasis"><em>must</em></span> ensure that your kernel includes commit d2dc317d564a46dfc683978a2e5a4f91434e9711 (search for d2dc317d564a46dfc683978a2e5a4f91434e9711 at <a class="ulink" href="https://www.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.0.3" target="_blank">https://www.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.0.3</a>). The Red Hat Bugzilla identifier for the bug is 1213487. With NODEFER_ALLOCATE, do not use any filesystem other than ext4 and a kernel with the fix, or xfs.</p>
          </td></tr><tr><td>

<p> x86 GNU/Linux </p>
          </td><td>

<p> Debian 9 (Stretch) </p>
          </td><td>

<p> This 32-bit version of GT.M runs on either 32- or 64-bit x86 platforms; we expect the x86_64 GNU/Linux version of GT.M to be preferable on 64-bit hardware. Running a 32-bit GT.M on a 64-bit GNU/Linux requires 32-bit libraries to be installed. The CPU must have an instruction set equivalent to 586 (Pentium) or better.</p>

<p>Please also refer to the notes above on x86_64 GNU/Linux.</p>
          </td></tr></tbody></table></div><div class="sect3" title="Platform support lifecycle"><div class="titlepage"><div><div><h4 class="title"><a name="GTMplatform_lifecycle"></a> Platform support lifecycle </h4></div></div></div><p> FIS usually supports new operating system versions six months or so after stable releases are available and we usually support each version for a two year window. GT.M releases are also normally supported for two years after release. While FIS will attempt to provide support to customers in good standing for any GT.M release and operating system version, our ability to provide support diminishes after the two year window. </p><p> GT.M cannot be patched, and bugs are only fixed in new releases of software.</p></div></div><div class="sect2" title="32- vs. 64-bit platforms"><div class="titlepage"><div><div><h3 class="title"><a name="manage64"></a>32- vs. 64-bit platforms</h3></div></div></div><p>The same application code runs on both 32-bit and 64-bit platforms; however there are operational differences between them (for example, auto-relink and the ability to use GT.M object code from shared libraries exist only on 64-bit platforms). Please note that:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> You must compile the application code separately for each platform. Even though the M source code is the same, the generated object modules are different - the object code differs between x86 and x86_64.</p></li><li class="listitem"><p> Parameter-types that interface GT.M with non-M code using C calling conventions must match the data-types on their target platforms. Mostly, these parameters are for call-ins, external calls, internationalization (collation) and environment translation, and are listed in the tables below. Note that most addresses on 64-bit platforms are 8 bytes long and require 8 byte alignment in structures whereas all addresses on 32-bit platforms are 4 bytes long and require 4-byte alignment in structures.</p></li></ul></div><div class="sect3" title="Call-ins and External Calls"><div class="titlepage"><div><div><h4 class="title"><a name="GTMcallext"></a>Call-ins and External Calls</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
              <p class="bold">Parameter type</p>
            </th><th>
              <p class="bold">32-Bit</p>
            </th><th>
              <p class="bold">64-bit</p>
            </th><th>
              <p class="bold">Remarks</p>
            </th></tr></thead><tbody><tr><td>

<p> gtm_long_t</p>
            </td><td>

<p> 4-byte (32-bit)</p>
            </td><td>

<p> 8-byte (64-bit)</p>
            </td><td>

<p> gtm_long_t is much the same as the C language long type.</p>
            </td></tr><tr><td>

<p> gtm_ulong_t</p>
            </td><td>

<p> 4-byte</p>
            </td><td>

<p> 8-byte</p>
            </td><td>

<p> gtm_ulong_t is much the same as the C language unsigned long type.</p>
            </td></tr><tr><td>

<p> gtm_int_t</p>
            </td><td>

<p> 4-byte</p>
            </td><td>

<p> 4-byte</p>
            </td><td>

<p> gtm_int_t has 32-bit length on all platforms.</p>
            </td></tr><tr><td>

<p> gtm_uint_t</p>
            </td><td>

<p> 4-byte</p>
            </td><td>

<p> 4-byte</p>
            </td><td>

<p> gtm_uint_t has 32-bit length on all platforms</p>
            </td></tr></tbody></table></div><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution:  Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.html"></td><th align="left"> Caution</th></tr><tr><td align="left" valign="top"><p> If your interface uses gtm_long_t or gtm_ulong_t types but your interface code uses int or signed int types, failure to revise the types so they match on a 64-bit platform will cause the code to fail in unpleasant, potentially dangerous, and hard to diagnose ways.</p></td></tr></table></div></div><div class="sect3" title="Internationalization (Collation)"><div class="titlepage"><div><div><h4 class="title"><a name="GTMinternationalization"></a> Internationalization (Collation)</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
              <p class="bold">Parameter type</p>
            </th><th>
              <p class="bold">32-Bit</p>
            </th><th>
              <p class="bold">64-bit</p>
            </th><th>
              <p class="bold">Remarks</p>
            </th></tr></thead><tbody><tr><td>

<p> gtm_descriptor in gtm_descript.h</p>
            </td><td>

<p> 4-byte</p>
            </td><td>

<p> 8-byte</p>
            </td><td>

<p> Although it is only the address within these types that changes, the structures may grow by up to 8 bytes as a result of compiler padding to meet platform alignment requirements.</p>
            </td></tr></tbody></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.html"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> Assuming other aspects of code are 64-bit capable, collation routines should require only recompilation. </p></td></tr></table></div></div><div class="sect3" title="Environment Translation"><div class="titlepage"><div><div><h4 class="title"><a name="GTMenv_trans"></a> Environment Translation</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>
              <p class="bold">Parameter type</p>
            </th><th>
              <p class="bold">32-Bit</p>
            </th><th>
              <p class="bold">64-bit</p>
            </th><th>
              <p class="bold">Remarks</p>
            </th></tr></thead><tbody><tr><td>

<p> gtm_string_t type in gtmxc_types.h</p>
            </td><td>

<p> 4-byte</p>
            </td><td>

<p> 8-byte</p>
            </td><td>

<p> Although it is only the address within these types that changes, the structures may grow by up to 8 bytes as a result of compiler padding to meet platform alignment requirements.</p>
            </td></tr></tbody></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.html"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>Assuming other aspects of code are 64-bit capable, environment translation routines should require only recompilation.</p></td></tr></table></div></div></div><div class="sect2" title="Additional Installation Instructions"><div class="titlepage"><div><div><h3 class="title"><a name="addn_instr"></a>Additional Installation Instructions</h3></div></div></div><p>To install GT.M, see the "Installing GT.M" section in the GT.M Administration and Operations Guide. For minimal down time, upgrade a current replicating instance and restart replication. Once that replicating instance is current, switch it to become the originating instance. Upgrade the prior originating instance to become a replicating instance, and perform a switchover when you want it to resume an originating primary role.</p><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution: Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.html"></td><th align="left">Caution</th></tr><tr><td align="left" valign="top"><p>Never replace the binary image on disk of any executable file while it is in use by an active process. It may lead to unpredictable results. Depending on the operating system, these results include but are not limited to denial of service (that is, system lockup) and damage to files that these processes have open (that is, database structural damage). </p></td></tr></table></div><div class="sect3"><div class="titlepage"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>FIS strongly recommends installing each version of GT.M in a separate (new) directory, rather than overwriting a previously installed version. If you have a legitimate need to overwrite an existing GT.M installation with a new version, you must first shut down all processes using the old version. FIS suggests installing GT.M V6.3-003A in a Filesystem Hierarchy Standard compliant location such as /usr/lib/fis-gtm/V6.3-003A_arch (for example, /usr/lib/fis-gtm/V6.3-003A_x86 on 32-bit Linux systems). A location such as /opt/fis-gtm/V6.3-003A_arch would also be appropriate. Note that the <em class="replaceable"><code>arch</code></em> suffix is especially important if you plan to install 32- and 64-bit versions of the same release of GT.M on the same system.</p></li><li class="listitem"><p>Use the appropriate MUPIP command (e.g. ROLLBACK, RECOVER,  RUNDOWN) of the old GT.M version to ensure all database files are cleanly closed.</p></li><li class="listitem"><p>Make sure gtmsecshr is not running. If gtmsecshr is running, first stop all GT.M processes including the DSE, LKE and MUPIP utilities and then perform a <code class="code">MUPIP STOP</code> <em class="replaceable"><code>pid_of_gtmsecshr</code></em>.</p></li><li class="listitem"><p>Starting with V6.2-000, GT.M no longer supports the use of the deprecated $gtm_dbkeys and the master key file it points to for database encryption. To convert master files to the libconfig format, please click <a class="ulink" href="downloadables/CONVDBKEYS.html" target="_blank"><span class="inlinemediaobject"><img src="images/download.html" alt="Download CONVDBKEYS.m"></span>
</a> to download the CONVDBKEYS.m program and follow instructions in the comments near the top of the program file. You can also download CONVDBKEYS.m from http://tinco.pair.com/bhaskar/gtm/doc/articles/downloadables/CONVDBKEYS.m. If you are using $gtm_dbkeys for database encryption, please convert master key files to libconfig format immediately after upgrading to V6.2-000 or later. Also, modify your environment scripts to include the use of gtmcrypt_config environment variable. </p></li></ul></div><div class="sect4" title="Recompile"><div class="titlepage"><div><div><h5 class="title"><a name="idp171452096"></a> Recompile </h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Recompile all M and C source files.</p></li></ul></div></div><div class="sect4" title="Rebuild Shared Libraries or Images"><div class="titlepage"><div><div><h5 class="title"><a name="idp171476880"></a>Rebuild Shared Libraries or Images</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Rebuild all Shared Libraries after recompiling all M and C source files.</p></li><li class="listitem"><p>If your application is not using object code shared using GT.M's auto-relink functionality, please consider using it.</p></li></ul></div></div><div class="sect4" title="Compiling the Reference Implementation Plugin"><div class="titlepage"><div><div><h5 class="title"><a name="idp171410880"></a>Compiling the Reference Implementation Plugin </h5></div></div></div><p>If you plan to use database encryption and TLS replication, you must compile the reference implementation plugin to match the shared library dependencies unique to your platform. The instructions for compiling the Reference Implementation plugin are as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Install the development headers and libraries for libgcrypt, libgpgme, libconfig, and libssl. On Linux, the package names of development libraries usually have a suffix such as -dev or -devel and are available through the package manager. For example, on Ubuntu_x86_64 a command like the following installs the required development libraries:</p><pre class="programlisting">sudo apt-get install libgcrypt11-dev libgpgme11-dev libconfig-dev libssl-dev</pre><p>Note that the package names may vary by distribution / version. </p></li><li class="listitem"><p>Unpack $gtm_dist/plugin/gtmcrypt/source.tar to a temporary directory. </p><pre class="programlisting">mkdir /tmp/plugin-build
cd /tmp/plugin-build
cp $gtm_dist/plugin/gtmcrypt/source.tar . 
tar -xvf source.tar</pre></li><li class="listitem"><p>Follow the instructions in the README.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Open Makefile with your editor; review and edit the common header (IFLAGS) and library paths (LIBFLAGS) in the Makefile to reflect those on your system.</p></li><li class="listitem"><p>Define the gtm_dist environment variable to point to the absolute path for the directory where you have GT.M installed</p></li><li class="listitem"><p>Copy and paste the commands from the README to compile and install the encryption plugin with the permissions defined at install time</p><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution: Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.html"></td><th align="left">Caution</th></tr><tr><td align="left" valign="top"><p>There are separate steps to compile the encryption plugin for GT.M versions V5.3-004 through V6.3-000 when OpenSSL 1.1 is installed and OpenSSL 1.0.x libraries arestill available.</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Download the most recent OpenSSL 1.0.x version</p></li><li class="listitem"><p>Compile and install (default installs to /usr/local/ssl)</p><pre class="programlisting">./config &amp;&amp; make install</pre></li><li class="listitem"><p>Adjust the configuration : Move the newly installed libraries out of the way</p><pre class="programlisting">mv /usr/local/ssl/lib /usr/local/ssl/lib.donotuse</pre></li><li class="listitem"><p>Adjust the configuration : Create another /usr/local/ssl/lib and symlink the existing 1.0.x library into it as the default. This ensures that the encryption plugin is compiled using the compatible OpenSSL 1.0.x library. Adjust the path below as necessary.</p><pre class="programlisting">mkdir /usr/local/ssl/lib &amp;&amp; ln -s /path/to/existing/libssl.so.1.0.x /usr/local/ssl/libssl.so</pre></li><li class="listitem"><p>Recompile the encryption plugin following existing directions above</p></li><li class="listitem"><p>Remove /usr/local/ssl to avoid future complications</p></li></ul></div></td></tr></table></div></li></ul></div></li></ol></div></div></div></div><div class="sect2" title="Upgrading to GT.M V6.3-003A"><div class="titlepage"><div><div><h3 class="title"><a name="upgrade"></a> Upgrading to GT.M V6.3-003A</h3></div></div></div><p>The GT.M database consists of four types of components- database files, journal files, global directories, and replication instance files. The format of some database components differs for 32-bit and 64-bit GT.M releases for the x86 GNU/Linux platform.</p><p> GT.M upgrade procedure for V6.3-003A consists of 5 stages:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>        <a class="link" href="#GTMstage_1" title="Stage 1: Global Directory Upgrade">Stage 1: Global Directory Upgrade</a>      </p></li><li class="listitem"><p>        <a class="link" href="#GTMstage_2" title="Stage 2: Database Files Upgrade">Stage 2: Database Files Upgrade</a>      </p></li><li class="listitem"><p>        <a class="link" href="#GTMstage_3" title="Stage 3: Replication Instance File Upgrade">Stage 3: Replication Instance File Upgrade</a>      </p></li><li class="listitem"><p>        <a class="link" href="#GTMstage_4" title="Stage 4: Journal Files Upgrade">Stage 4: Journal Files Upgrade</a>      </p></li><li class="listitem"><p>        <a class="link" href="#GTMstage_5" title="Stage 5: Trigger Definitions Upgrade">Stage 5: Trigger Definitions Upgrade</a>      </p></li></ul></div><p> Read the upgrade instructions of each stage carefully. Your upgrade procedure for GT.M V6.3-003A depends on your GT.M upgrade history and your current version.</p><div class="sect3" title="Stage 1: Global Directory Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_1"></a> Stage 1: Global Directory Upgrade</h4></div></div></div><p> FIS strongly recommends you back up your Global Directory file before upgrading. There is no one-step method for downgrading a Global Directory file to an older format.</p><p>      <span class="bold"><strong>To upgrade from any previous version of GT.M:</strong></span>    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Open your Global Directory with the GDE utility program of GT.M V6.3-003A.</p></li><li class="listitem"><p> Execute the EXIT command. This command automatically upgrades the Global Directory.</p></li></ul></div><p>      <span class="bold"><strong>To switch between 32- and 64-bit global directories on the x86 GNU/Linux platform:</strong></span>    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Open your Global Directory with the GDE utility program on the 32-bit platform.</p></li><li class="listitem"><p> On GT.M versions that support SHOW -COMMAND, execute SHOW -COMMAND -FILE=file-name. This command stores the current Global Directory settings in the specified file.</p></li><li class="listitem"><p> On GT.M versions that do not support GDE SHOW -COMMAND, execute the SHOW -ALL command. Use the information from the output to create an appropriate command file or use it as a guide to manually enter commands in GDE.</p></li><li class="listitem"><p> Open GDE on the 64-bit platform. If you have a command file from 2. or 3., execute @file-name and then run the EXIT command. These commands automatically create the Global Directory. Otherwise use the GDE output from the old Global Directory and apply the settings in the new environment.</p></li></ol></div><p> An analogous procedure applies in the reverse direction. </p><p> If you inadvertently open a Global Directory of an old format with no intention of upgrading it, execute the QUIT command rather than the EXIT command.</p><p> If you inadvertently upgrade a global directory, perform the following steps to downgrade to an old GT.M release:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Open the global directory with the GDE utility program of V6.3-003A.</p></li><li class="listitem"><p> Execute the SHOW -COMMAND -FILE=file-name command. This command stores the current Global Directory settings in the file-name command file. If the old version is significantly out of date, edit the command file to remove the commands that do not apply to the old format. Alternatively, you can use the output from SHOW -ALL or SHOW -COMMAND as a guide to manually enter equivalent GDE commands for the old version.</p></li></ul></div></div><div class="sect3" title="Stage 2: Database Files Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_2"></a> Stage 2: Database Files Upgrade</h4></div></div></div><p>      <span class="bold"><strong>To upgrade from GT.M V5.0*/V5.1*/V5.2*/V5.3*/V5.4*/V5.5:</strong></span>    </p><p>A V6 database file is a superset of a V5 database file and has potentially longer keys and records. Therefore, upgrading a database file requires no explicit procedure. After upgrading the Global Directory, opening a V5 database with a V6 process automatically upgrades fields in the database fileheader.</p><p>A database created with V6 supports up to 992Mi blocks and is not backward compatible. V6 databases that take advantage of V6 limits on key size and records size cannot be downgraded. Use MUPIP DOWNGRADE -VERSION=V5 to downgrade a V6 database back to V5 format provided it meets the database downgrade requirements. For more information on downgrading a database, refer to <a class="link" href="#GTMdown_v54" title="Downgrading to V5 or V4"> Downgrading to V5 or V4</a>.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.html"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> A V5 database that has been automatically upgraded to V6 can perform all GT.M V6.3-003A operations. However, that database can only grow to the maximum size of the version in which it was originally created. A database created on V5.0-000 through V5.3-003 has maximum size of 128Mi blocks. A database created on V5.4-000 through V5.5-000 has a maximum size of 224Mi blocks. A database file created with V6.0-000 (or above) can grow up to a maximum of 992Mi blocks. This means that, for example, the maximum size of a V6 database file having 8KiB block size is 7936GiB (8KiB*992Mi).</p></td></tr></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.html"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> In order to perform a database downgrade you must perform a MUPIP INTEG -NOONLINE. If the duration of the MUPIP INTEG exceeds the time allotted for an upgrade you should rely on a rolling upgrade scheme using replication.</p></td></tr></table></div><p> If your database has any previously used but free blocks from an earlier upgrade cycle (V4 to V5), you may need to execute the MUPIP REORG -UPGRADE command. If you have already executed the MUPIP REORG -UPGRADE command in a version prior to V5.3-003 and if subsequent versions cannot determine whether MUPIP REORG -UPGRADE performed all required actions, it sends warnings to the syslog requesting another run of MUPIP REORG -UPGRADE. In that case, perform any one of the following steps: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Execute the MUPIP REORG -UPGRADE command again, or</p></li><li class="listitem"><p> Execute the DSE CHANGE -FILEHEADER -FULLY_UPGRADED=1 command to stop the warnings.</p></li></ul></div><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution:  Caution"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Caution]" src="images/caution.html"></td><th align="left"> Caution</th></tr><tr><td align="left" valign="top"><p> Do not run the DSE CHANGE -FILEHEADER -FULLY_UPGRADED=1 command unless you are absolutely sure of having previously run a MUPIP REORG -UPGRADE from V5.3-003 or later. An inappropriate DSE CHANGE -FILEHEADE -FULLY_UPGRADED=1 may lead to database integrity issues.</p></td></tr></table></div><p> You do not need to run MUPIP REORG -UPGRADE on:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> A database that was created by a V5 MUPIP CREATE</p></li><li class="listitem"><p> A database that has been completely processed by a MUPIP REORG -UPGRADE from V5.3-003 or later.</p></li></ul></div><p> For additional upgrade considerations, refer to Database Compatibility Notes.</p><p>      <span class="bold"><strong>To upgrade from a GT.M version prior to V5.000:</strong></span>    </p><p> You need to upgrade your database files only when there is a block format upgrade from V4 to V5. However, some versions, for example, database files which have been initially been created with V4 (and subsequently upgraded to a V5 format) may additionally need a MUPIP REORG -UPGRADE operation to upgrade previously used but free blocks that may have been missed by earlier upgrade tools.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Upgrade your database files using in-place or traditional database upgrade procedure depending on your situation. For more information on in-place/traditional database upgrade, see <a class="ulink" href="GTM_Database_Migration.html" target="_blank">Database Migration Technical Bulletin</a>.</p></li><li class="listitem"><p> Run the MUPIP REORG -UPGRADE command. This command upgrades all V4 blocks to V5 format. </p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note:  Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left"> Note</th></tr><tr><td align="left" valign="top"><p> Databases created with GT.M releases prior to V5.0-000 and upgraded to a V5 format retain the maximum size limit of 64Mi (67,108,864) blocks.</p></td></tr></table></div><div class="sect4" title="Database Compatibility Notes"><div class="titlepage"><div><div><h5 class="title"><a name="GTMdatabase_comp"></a> Database Compatibility Notes</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Changes to the database file header may occur in any release. GT.M automatically upgrades database file headers as needed. Any changes to database file headers are upward and downward compatible within a major database release number, that is, although processes from only one GT.M release can access a database file at any given time, processes running different GT.M releases with the same major release number can access a database file at different times.</p></li><li class="listitem"><p> Databases created with V5.3-004 through V5.5-000 can grow to a maximum size of 224Mi (234,881,024) blocks. This means, for example, that with an 8KiB block size, the maximum database file size is 1,792GiB; this is effectively the size of a single global variable that has a region to itself and does not itself span regions; a database consists of any number of global variables. A database created with GT.M versions V5.0-000 through V5.3-003 can be upgraded with MUPIP UPGRADE to increase the limit on database file size from 128Mi to 224Mi blocks.</p></li><li class="listitem"><p> Databases created with V5.0-000 through V5.3-003 have a maximum size of 128Mi (134, 217,728) blocks. GT.M versions V5.0-000 through V5.3-003 can access databases created with V5.3-004 and later as long as they remain within a 128Mi block limit.</p></li><li class="listitem"><p> Database created with V6.0-000 or above have a maximum size of 1,040,187,392(992Mi) blocks.</p></li><li class="listitem"><p>For information on downgrading a database upgraded from V6 to V5, refer to: <a class="link" href="#GTMstage_1" title="Stage 1: Global Directory Upgrade">Downgrading to V5 or V4</a>.</p></li></ul></div></div></div><div class="sect3" title="Stage 3: Replication Instance File Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_3"></a> Stage 3: Replication Instance File Upgrade</h4></div></div></div><p> V6.3-003A does not require new replication instance files if you are upgrading from V5.5-000. However, V6.3-003A requires new replication instance files if you are upgrading from any version prior to V5.5-000. Instructions for creating new replication instance files are in the <a class="ulink" href="../books/ao/UNIX_manual/ch07.html" target="_blank">Database Replication</a> chapter of the GT.M Administration and Operations Guide. Shut down all Receiver Servers on other instances that are to receive updates from this instance, shut down this instance Source Server(s), recreate the instance file, restart the Source Server(s) and then restart any Receiver Server for this instance with the -UPDATERESYNC qualifier.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note:  Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left"> Note</th></tr><tr><td align="left" valign="top"><p> Without the -UPDATERESYNC qualifier, the replicating instance synchronizes with the originating instance using state information from both instances and potentially rolling back information on the replicating instance. The -UPDATERESYNC qualifier declares the replicating instance to be in a wholesome state matching some prior (or current) state of the originating instance; it causes MUPIP to update the information in the replication instance file of the originating instance and not modify information currently in the database on the replicating instance. After this command, the replicating instance catches up to the originating instance starting from its own current state. Use -UPDATERESYNC only when you are absolutely certain that the replicating instance database was shut down normally with no errors, or appropriately copied from another instance with no errors.</p></td></tr></table></div><p> </p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.html"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> You must always follow the steps described in the <a class="ulink" href="../books/ao/UNIX_manual/ch07.html" target="_blank">Database Replication</a> chapter of the GT.M Administration and Operations Guide when migrating from a logical dual site (LDS) configuration to an LMS configuration, even if you are not changing GT.M releases.</p></td></tr></table></div></div><div class="sect3" title="Stage 4: Journal Files Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_4"></a> Stage 4: Journal Files Upgrade</h4></div></div></div><p> On every GT.M upgrade:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Create a fresh backup of your database.</p></li><li class="listitem"><p> Generate new journal files (without back-links).</p></li></ul></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important:  Important"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Important]" src="images/important.html"></td><th align="left"> Important</th></tr><tr><td align="left" valign="top"><p> This is necessary because MUPIP JOURNAL cannot use journal files from a release other than its own for RECOVER, ROLLBACK, or EXTRACT. </p></td></tr></table></div></div><div class="sect3" title="Stage 5: Trigger Definitions Upgrade"><div class="titlepage"><div><div><h4 class="title"><a name="GTMstage_5"></a> Stage 5: Trigger Definitions Upgrade</h4></div></div></div><p> If you are upgrading from V5.4-002A/V5.4-002B/V5.5-000 to V6.3-003A and you have database triggers defined in V6.2-000 or earlier, you need to ensure that your trigger definitions are wholesome in the older version and then run MUPIP TRIGGER -UPGRADE. If you have doubts about the wholesomeness of the trigger definitions in the old version use the instructions below to capture the definitions delete them in the old version (-*), run MUPIP TRIGGER -UPGRADE in V6.3-003A and then reload them as described below.</p><p> You need to extract and reload your trigger definitions only if you are upgrading from V5.4-000/V5.4-000A/V5.4-001 to V6.3-003A or if you find your prior version trigger definitions have problems. For versions V5.4-000/V5.4-000A/V5.4-001 this is necessary because multi-line XECUTEs for triggers require a different internal storage format for triggers which makes triggers created in V5.4-000/V5.4-000A/V5.4-001 incompatible with V5.4-002/V5.4-002A/V5.4-002B/V5.5-000/V6.0-000/V6.0-001/V6.3-003A.</p><p> To extract and reapply the trigger definitions on V6.3-003A using MUPIP TRIGGER:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Using the old version, execute a command like <code class="code">mupip trigger -select="*" trigger_defs.trg</code>. Now, the output file trigger_defs.trg contains all trigger definitions.</p></li><li class="listitem"><p> Place -* at the beginning of the trigger_defs.trg file to remove the old trigger definitions.</p></li><li class="listitem"><p> Using V6.3-003A, run <code class="code">mupip trigger -triggerfile=trigger_defs.trg </code> to reload your trigger definitions.</p></li></ol></div><p> To extract and reload trigger definitions on a V6.3-003A replicating instance using $ZTRIGGER():</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Shut down the instance using the old version of GT.M. </p></li><li class="listitem"><p> Execute a command like <code class="code">mumps -run %XCMD 'i $ztrigger("select")' &gt; trigger_defs.trg</code> . Now, the output file trigger_defs.trg contains all trigger definitions.</p></li><li class="listitem"><p> Turn off replication on all regions. </p></li><li class="listitem"><p> Run <code class="code">mumps -run %XCMD 'i $ztrigger("item","-*") </code> to remove the old trigger definitions. </p></li><li class="listitem"><p> Perform the upgrade procedure applicable for V6.3-003A.</p></li><li class="listitem"><p> Run <code class="code"> mumps -run %XCMD 'if $ztrigger("file","trigger_defs.trg")'</code> to reapply your trigger definitions.</p></li><li class="listitem"><p> Turn replication on. </p></li><li class="listitem"><p> Connect to the originating instance. </p></li></ol></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note:  Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left"> Note</th></tr><tr><td align="left" valign="top"><p> Reloading triggers renumbers automatically generated trigger names. </p></td></tr></table></div></div><div class="sect3" title="Downgrading to V5 or V4"><div class="titlepage"><div><div><h4 class="title"><a name="GTMdown_v54"></a> Downgrading to V5 or V4 </h4></div></div></div><p> You can downgrade a GT.M V6 database to V5 or V4 format using MUPIP DOWNGRADE.</p><p> Starting with V6.0-000, MUPIP DOWNGRADE supports the -VERSION qualifier with the following format: </p><pre class="programlisting">MUPIP DOWNGRADE -VERSION=[V5|V4] </pre><p> -VERSION specifies the desired version for the database header. </p><p>      <span class="bold"><strong> To qualify for a downgrade from V6 to V5, your database must meet the following requirements: </strong></span>    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> The database was created with a major version no greater than the target version. </p></li><li class="listitem"><p> The database does not contain any records that exceed the block size (spanning nodes). </p></li><li class="listitem"><p> The sizes of all the keys in database are less than 256 bytes. </p></li><li class="listitem"><p> There are no keys present in database with size greater than the Maximum-Key-Size specification in the database header, that is, Maximum-Key-Size is assured. </p></li><li class="listitem"><p> The maximum Record size is small enough to accommodate key, overhead, and value within a block. </p></li></ol></div><p> To verify that your database meets all of the above requirements, execute MUPIP INTEG -NOONLINE. Note that the integrity check requires the use of -NOONLINE to ensure no concurrent updates invalidate the above requirements. Once assured that your database meets all the above requirements, MUPIP DOWNGRADE -VERSION=V5 resets the database header to V5 elements which makes it compatible with V5 versions. </p><p>To qualify for a downgrade from V6 to V4, your database must meet the same downgrade requirements that are there for downgrading from V6 to V5.</p><p> If your database meets the downgrade requirements, perform the following steps to downgrade to V4: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> In a GT.M V6.3-003A environment: </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p> Execute MUPIP SET -VERSION=v4 so that GT.M writes updates blocks in V4 format. </p></li><li class="listitem"><p> Execute MUPIP REORG -DOWNGRADE to convert all blocks from V6 format to V4 format. </p></li></ol></div></li><li class="listitem"><p> Bring down all V6 GT.M processes and execute MUPIP RUNDOWN -FILE on each database file to ensure that there are no processes accessing the database files.</p></li><li class="listitem"><p> Execute MUPIP DOWNGRADE -VERSION=V4 to change the database file header from V6 to V4. </p></li><li class="listitem"><p> Restore or recreate all the V4 global directory files. </p></li><li class="listitem"><p> Your database is now successfully downgraded to V4. </p></li></ol></div></div></div><div class="sect2" title="Managing M mode and UTF-8 mode"><div class="titlepage"><div><div><h3 class="title"><a name="mng_mode"></a>Managing M mode and UTF-8 mode</h3></div></div></div><p>With <a class="ulink" href="http://icu-project.org/" target="_blank">International Components for Unicode</a> (ICU) version 3.6 or later installed, GT.M's UTF-8 mode provides support for <span class="trademark">Unicode</span>(R) (ISO/IEC-10646) character strings. On a system that does not have ICU 3.6 or later installed, GT.M only supports M mode.</p><p>On a system that has ICU installed, GT.M optionally installs support for both M mode and UTF-8 mode, including a utf8 subdirectory of the directory where GT.M is installed. From the same source file, depending upon the value of the environment variable gtm_chset, the GT.M compiler generates an object file either for M mode or UTF-8 mode. GT.M generates a new object file when it finds both a source and an object file, and the object predates the source file and was generated with the same setting of $gtm_chset/$ZCHset. A GT.M process generates an error if it encounters an object file generated with a different setting of $gtm_chset/$ZCHset than that processes' current value.</p><p>Always generate an M object module with a value of $gtm_chset/$ZCHset matching the value processes executing that module will have. As the GT.M installation itself contains utility programs written in M, their object files also conform to this rule. In order to use utility programs in both M mode and UTF-8 mode, the GT.M installation ensures that both M and UTF-8 versions of object modules exist, the latter in the utf8 subdirectory. This technique of segregating the object modules by their compilation mode prevents both frequent recompiles and errors in installations where both modes are in use. If your installation uses both modes, consider a similar pattern for structuring application object code repositories.</p><p>GT.M is installed in a parent directory and a utf8 subdirectory as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Actual files for GT.M executable programs (mumps, mupip, dse, lke, and so on) are in the parent directory, that is, the location specified for installation.</p></li><li class="listitem"><p>Object files for programs written in M (GDE, utilities) have two versions - one compiled with support for UTF-8 mode in the utf8 subdirectory, and one compiled without support for UTF-8 mode in the parent directory. Installing GT.M generates both versions of object files, as long as ICU 3.6 or greater is installed and visible to GT.M when GT.M is installed, and you choose the option to install UTF-8 mode support. Note that on 64-bit versions of GT.M, the object code is in shared libraries, rather than individual files in the directory.</p></li><li class="listitem"><p>The utf8 subdirectory has files called mumps, mupip, dse, lke, and so on, which are relative symbolic links to the executables in the parent directory (for example, mumps is the symbolic link ../mumps).</p></li><li class="listitem"><p>When a shell process sources the file gtmprofile, the behavior is as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>If $gtm_chset is "m", "M" or undefined, there is no change from the previous GT.M versions to the value of the environment variable $gtmroutines.</p></li><li class="listitem"><p>If $gtm_chset is "UTF-8" (the check is case-insensitive),</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>$gtm_dist is set to the utf8 subdirectory (that is, if GT.M is installed in /usr/lib/fis-gtm/gtm_V6.3-003A_i686, then gtmprofile sets $gtm_dist to /usr/lib/fis-gtm/gtm_V6.3-003A_i686/utf8).</p></li><li class="listitem"><p>On platforms where the object files have not been placed in a libgtmutil.so shared library, the last element of $gtmroutines is $gtm_dist($gtm_dist/..) so that the source files in the parent directory for utility programs are matched with object files in the utf8 subdirectory. On platforms where the object files are in libgtmutil.so, that shared library is the one with the object files compiled in the mode for the process.</p></li></ul></div></li></ul></div></li></ul></div><p>For more information on gtmprofile, refer to the <a class="ulink" href="../books/ao/UNIX_manual/ch03.html" target="_blank">Basic Operations</a> chapter of GT.M Administration and Operations Guide.</p><p>Although GT.M uses ICU for UTF-8 operation, ICU is not FIS software and FIS does not support ICU.</p></div><div class="sect2" title="Setting the environment variable TERM"><div class="titlepage"><div><div><h3 class="title"><a name="setterm"></a>Setting the environment variable TERM</h3></div></div></div><p>The environment variable TERM must specify a terminfo entry that accurately matches the terminal (or terminal emulator) settings. Refer to the terminfo man pages for more information on the terminal settings of the platform where GT.M needs to run.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Some terminfo entries may seem to work properly but fail to recognize function key sequences or fail to position the cursor properly in response to escape sequences from GT.M. GT.M itself does not have any knowledge of specific terminal control characteristics. Therefore, it is important to specify the right terminfo entry to let GT.M communicate correctly with the terminal. You may need to add new terminfo entries depending on your specific platform and implementation. The terminal (emulator) vendor may also be able to help.</p></li><li class="listitem"><p>GT.M uses the following terminfo capabilities. The full variable name is followed by the capname in parenthesis:</p><pre class="programlisting">auto_right_margin(am), clr_eos(ed), clr_eol(el), columns(cols), cursor_address(cup), cursor_down(cud1), cursor_left(cub1), cursor_right(cuf1), cursor_up(cuu1), eat_newline_glitch(xenl), key_backspace(kbs), key_dc(kdch1),key_down(kcud1), key_left(kcub1), key_right(kcuf1), key_up(kcuu1), key_insert(kich1), keypad_local(rmkx),keypad_xmit(smkx), lines(lines).</pre></li></ul></div><p>GT.M sends keypad_xmit before terminal reads for direct mode and READs (other than READ *) if EDITING is enabled. GT.M sends keypad_local after these terminal reads.</p></div><div class="sect2" title="Installing Compression Libraries"><div class="titlepage"><div><div><h3 class="title"><a name="install_comp_lib"></a> Installing Compression Libraries</h3></div></div></div><p> If you plan to use the optional compression facility for replication, you must provide the compression library. The GT.M interface for compression libraries accepts the zlib compression libraries without any need for adaptation. These libraries are included in many UNIX distributions and are downloadable from the <a class="ulink" href="http://www.zlib.net/" target="_blank">zlib home page</a>. If you prefer to use other compression libraries, you need to configure or adapt them to provide the same API as that provided by zlib.</p><p> If a package for zlib is available with your operating system, FIS suggests that you use it rather than building your own.</p><p> By default, GT.M searches for the libz.so shared library in the standard system library directories (for example, /usr/lib, /usr/local/lib, /usr/local/lib64). If the shared library is installed in a non-standard location, before starting replication, you must ensure that the environment variable LIBPATH (AIX) or LD_LIBRARY_PATH (GNU/Linux) includes the directory containing the library. The Source and Receiver Server link the shared library at runtime. If this fails for any reason (such as file not found, or insufficient authorization), the replication logic logs a DLLNOOPEN error and continues with no compression.</p><p>Although GT.M uses a library such as zlib for compression, such libraries are not FIS software and FIS does not support any compression libraries.</p></div></div><div class="sect1"><div class="titlepage"></div><div class="sect2" title="V6.3-003B"><div class="titlepage"><div><div><h3 class="title"><a name="GTMtaV63-003Bble"></a>V6.3-003B</h3></div></div></div><p>Fixes and enhancements specific to V6.3-003B:</p><p></p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>                <p><span class="bold"><strong>Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Prior Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Category</strong></span></p>              </th><th>                <p><span class="bold"><strong>Summary</strong></span></p>              </th></tr></thead><tbody><tr><td><p><a class="link" href="#GTM-9020">GTM-9020</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Prevent problems when the LOCK space fills.</p></td></tr><tr><td><p><a class="link" href="#GTM-9023">GTM-9023</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Fix rare, but serious issues with LOCKs by reverting GTM-8680</p></td></tr></tbody></table></div></div><div class="sect2" title="V6.3-003A"><div class="titlepage"><div><div><h3 class="title"><a name="GTMtaV63-003Able"></a>V6.3-003A</h3></div></div></div><p>Fixes and enhancements specific to V6.3-003A:</p><p></p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>                <p><span class="bold"><strong>Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Prior Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Category</strong></span></p>              </th><th>                <p><span class="bold"><strong>Summary</strong></span></p>              </th></tr></thead><tbody><tr><td><p><a class="link" href="#GTM-8880">GTM-8880</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Fix issue with (non-default) Standard Boolean evaluation with side-effects and certain patterns</p></td></tr><tr><td><p><a class="link" href="#GTM-8887">GTM-8887</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Fix rare timer issue</p></td></tr><tr><td><p><a class="link" href="#GTM-8889">GTM-8889</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Prevent UNDEF error after &lt;CTRL-C&gt; within ZHELP navigation</p></td></tr></tbody></table></div></div><div class="sect2" title="V6.3-003"><div class="titlepage"><div><div><h3 class="title"><a name="GTMtaV63-003ble"></a>V6.3-003</h3></div></div></div><p>Fixes and enhancements specific to V6.3-003:</p><p></p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>                <p><span class="bold"><strong>Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Prior Id</strong></span></p>              </th><th>                <p><span class="bold"><strong>Category</strong></span></p>              </th><th>                <p><span class="bold"><strong>Summary</strong></span></p>              </th></tr></thead><tbody><tr><td><p><a class="link" href="#GTM-4212">GTM-4212</a></p></td><td><p>C9C03-001944</p></td><td><p>Admin</p></td><td><p>MUPIP better deals with over length file names</p></td></tr><tr><td><p><a class="link" href="#GTM-6115">GTM-6115</a></p></td><td><p>C9I01-002944</p></td><td><p>Language</p></td><td><p>Please see <a class="ulink" href="#GTM-8792" target="_blank">GTM-8694</a></p></td></tr><tr><td><p><a class="link" href="#GTM-7986">GTM-7986</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Warning on implicit wrapping of source lines exceeding maximum supported length</p></td></tr><tr><td><p><a class="link" href="#GTM-8182">GTM-8182</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Allow updating globals belonging to different instances  <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8186">GTM-8186</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Accept offset alone for an entryref in DO, GOTO and ZGOTO <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8587">GTM-8587</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Maintain $DEVICE and $KEY for all supported devices <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8617">GTM-8617</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP SET supports N[ULL_SUBSCRIPTS] and STD[NULLCOLL] qualifiers. <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8680">GTM-8680</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> LOCK Improvements</p></td></tr><tr><td><p><a class="link" href="#GTM-8732">GTM-8732</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Better validation for MUPIP REPLICATE -LOG_INTERVAL and -HELPER, and MUPIP SET -DEFER_TIME</p></td></tr><tr><td><p><a class="link" href="#GTM-8735">GTM-8735</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>READ_ONLY characteristic to prevent state changes to MM databases <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8754">GTM-8754</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Prevent odd ASYNCIO deadlock</p></td></tr><tr><td><p><a class="link" href="#GTM-8767">GTM-8767</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> MUPIP SET -HARD_SPIN_COUNT  and -SPIN_SLEEP_MASK support <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8769">GTM-8769</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> Syntax check $ETRAP, $ZSTEP, $ZTRAP, and EXCEPTION when specified <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8779">GTM-8779</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Freeze Notification</p></td></tr><tr><td><p><a class="link" href="#GTM-8780">GTM-8780</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Fix $SELECT() handling of certain syntax errors</p></td></tr><tr><td><p><a class="link" href="#GTM-8781">GTM-8781</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Prevent memory leak in ZSYSTEM</p></td></tr><tr><td><p><a class="link" href="#GTM-8786">GTM-8786</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> $NAME() of a naked reference returns any current extended reference</p></td></tr><tr><td><p><a class="link" href="#GTM-8787">GTM-8787</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP JOURNAL -EXTRACT='-stdout' doesn't explode at termination if stdout is gone</p></td></tr><tr><td><p><a class="link" href="#GTM-8788">GTM-8788</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>The compiler excludes BLKTODEEP lines from the object files</p></td></tr><tr><td><p><a class="link" href="#GTM-8789">GTM-8789</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Prevent NEW $ZGBLDIR from setting up an Update Process failure</p></td></tr><tr><td><p><a class="link" href="#GTM-8790">GTM-8790</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Retain any extended first reference in $REFERENCE when sharing statistics </p></td></tr><tr><td><p><a class="link" href="#GTM-8792">GTM-8792</a></p></td><td><p>C9I01-002944</p></td><td><p>Language</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> Prevent keys that exceed the supported maximum string length</p></td></tr><tr><td><p><a class="link" href="#GTM-8794">GTM-8794</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> MUPIP RUNDOWN -OVERRIDE works on a non-MUPIP backup made during an Instance Freeze</p></td></tr><tr><td><p><a class="link" href="#GTM-8795">GTM-8795</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Journal Updates promptly during MUPIP FREEZE -ONLINE</p></td></tr><tr><td><p><a class="link" href="#GTM-8796">GTM-8796</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Improved error handling during TP and mini transaction commits</p></td></tr><tr><td><p><a class="link" href="#GTM-8797">GTM-8797</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>Installation script fixes</p></td></tr><tr><td><p><a class="link" href="#GTM-8798">GTM-8798</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>MUPIP ENDIANCVT converts Mutex Queue Slots</p></td></tr><tr><td><p><a class="link" href="#GTM-8799">GTM-8799</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Improve performance for a pattern of local variable creation</p></td></tr><tr><td><p><a class="link" href="#GTM-8801">GTM-8801</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>cmake build produces appropriate support for the ^%YGBLSTATS utility.</p></td></tr><tr><td><p><a class="link" href="#GTM-8804">GTM-8804</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>ZSHOW "T" option to return summary for ZSHOW "GL" <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8805">GTM-8805</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Fix to havesting of LOCKs abandoned by an abnormally terminated process</p></td></tr><tr><td><p><a class="link" href="#GTM-8832">GTM-8832</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Appropriately report NUMOFLOW for string literal with a huge value when used as a number</p></td></tr><tr><td><p><a class="link" href="#GTM-8839">GTM-8839</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>$DEVICE shows the full error message <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8840">GTM-8840</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span>  Normalized gtmsecshr message severities</p></td></tr><tr><td><p><a class="link" href="#GTM-8842">GTM-8842</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>ZBREAK and ZSTEP restricted in triggers when TRIGGER_MOD is restricted <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8844">GTM-8844</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p> <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!alert!]"></span> Restriction available for HALT and ZHALT; ZGOTO 0 can return a non-zero status to the shell <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8846">GTM-8846</a></p></td><td><p>-</p></td><td><p>Admin</p></td><td><p>GT.M accepts multi-slash journal file names</p></td></tr><tr><td><p><a class="link" href="#GTM-8847">GTM-8847</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Provide a way to detect and limit process private heap storage <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></td></tr><tr><td><p><a class="link" href="#GTM-8849">GTM-8849</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Help databases built with make files have QDBRUNDOWN and NOGVSTATS characteristics</p></td></tr><tr><td><p><a class="link" href="#GTM-8850">GTM-8850</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Allow process exit when MUPIP FREEZE -ONLINE is in place</p></td></tr><tr><td><p><a class="link" href="#GTM-8854">GTM-8854</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Compiler handles a syntax error after a literal postconditional that's FALSE</p></td></tr><tr><td><p><a class="link" href="#GTM-8855">GTM-8855</a></p></td><td><p>-</p></td><td><p>Other</p></td><td><p>Prevent memory leak from an error locating a global directory</p></td></tr><tr><td><p><a class="link" href="#GTM-8856">GTM-8856</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Defer failing evaluations of literal pattern matches to run time</p></td></tr><tr><td><p><a class="link" href="#GTM-8857">GTM-8857</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Improve error detection for certain pattern match cases</p></td></tr><tr><td><p><a class="link" href="#GTM-8858">GTM-8858</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Improve available information in cases of apparent database integrity issues</p></td></tr><tr><td><p><a class="link" href="#GTM-8866">GTM-8866</a></p></td><td><p>-</p></td><td><p>Language</p></td><td><p>Prevent timeouts with more than three decinal digits from being too long</p></td></tr><tr><td><p><a class="link" href="#GTM-8873">GTM-8873</a></p></td><td><p>-</p></td><td><p>DB</p></td><td><p>Prevent occasional $ORDER(,-1) problem</p></td></tr></tbody></table></div></div></div><div class="sect1" title="Database"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp171698608"></a>Database </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-8182"></a> GT.M allows updating globals belonging to a different source instance using extended global references or SET $ZGBLDIR. While the replication setup remains the same, these are the main considerations:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Use one of two ways to identify the current instance as specified by a replication instance file:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>A global directory can define a mapping to a replication instance file as specified with a GDE CHANGE -INSTANCE -FILE_NAME=&lt;replication_instance_file&gt; command. When a global directory is use, if it has a mapping of an instance file, that mapping overrides any setting of the gtm_repl_instance environment variable. GDE CHANGE -INSTANCE -FILE_NAME="" removes any global directory mapping for an instance file. </p></li><li class="listitem"><p>The gtm_repl_instance environment variable specifies a replication instance file for utilities, and, as the default, whenever a user processes relies on a global directory with no instance file specification.</p></li></ol></div></li><li class="listitem"><p>In order to use multiple instances, at least one global directory must have an instance mapping.</p></li><li class="listitem"><p>A replication instance file cannot share any region with another instance file. </p></li><li class="listitem"><p>The Source Servers of all the instances have properly set up Replication Journal Pools.</p></li><li class="listitem"><p>A TP transaction or a trigger, as it always executes within a TP transaction, must always restrict updates to globals in one replicating instance. </p></li></ol></div><div class="note" title="Notes" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Notes"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Notes</th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Like other mapping specified by a global directory, a process determines any instance mapping by a global directory at the time a process first uses uses the global directory. Processes other than MUPIP CREATE ignore other (non-mapping) global directory database characteristics, except for collation, which interacts with mapping.</p></li><li class="listitem"><p>When Instance Freeze is enabled  (gtm_custom_errors is appropriately defined), a process attaches a region to an instance at the first access to the region; the access may be a read or a VIEW/$VIEW(). Otherwise, the process attaches to a region at the first update to that region. When the mappings are correct, this difference does not matter.</p></li><li class="listitem"><p>A process can always update globals that are not in a replicated region.</p></li><li class="listitem"><p>Use $VIEW("JNLPOOL") to determine the state of the current Journal Pool. $VIEW("JNLPOOL") returns the replication instance file name for the current Journal Pool and an empty string when there is no Journal Pool. Note that the current Journal Pool may not be associated with the last global accessed by an extended reference.</p></li></ul></div></td></tr></table></div><p>Example:</p><p>An EHR application uses a BC replication configuration (A-&gt;B) to provide continuous availability. There are two data warehouses for billing information and medical history. For research purposes, the data in these medical history warehouses is cleansed of patient identifiers. Two SI replication instances (P-&gt;Q) are setup for the two data warehouses.</p><p>The primary global directory (specified  via the environment variable gtmgbldir) includes the regions needed for the application proper. It may have the instance file as specified in the global directory or via the environment variable gtm_repl_instance. Each warehouse instance would have its own global directory (e.g. p.gld and q.gld). These global directories have an instance file specified with GDE CHANGE -INSTANCE -FILE_NAME=&lt;replication_instance_file&gt;.</p><p>Such a replication setup may benefit from this facility in the following ways:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A trigger on the primary database A uses normal global references to update a staging global (say ^%BACKLOG) in a non-replicated region of A to store information meant for the warehouses. At an appropriate time, a separate batch process runs across the ^%BACKLOG staging global and applies updates using extended references to P or Q using a transaction or non-TP. If the transaction succeeds, the process removes the applied updates from ^%BACKLOG. Locks control access to ^%BACKLOG and enforce the serialization of updates to P</p><p>OR</p></li><li class="listitem"><p>The application does not use triggers but updates a global on A in a transaction. If the transaction succeeds, the application starts two more transactions for the warehouses. The second transaction uses extended references to update P. If it fails, the application updates ^%BACKLOG("P") on a non-replicated region of A.  The third transaction uses extended references to update Q. If it fails, the application updates ^%BACKLOG("Q") on a non-replicated region of A.  A batch process runs periodically to apply updates from ^%BACKLOG to P and Q using TP or non-TP and remove updates that have been applied. This batch process uses LOCKs to control access and enforce serialization of updates to P and Q.</p></li></ol></div><p>Because this functionality has a wide variety of user stories (use cases) and has substantial complexity, although the code appears robust, we are not confident that we have exercised a sufficient breadth of use cases in our testing. Also, we may make changes in future releases that are not entirely backwards compatible. We encourage you to use this facility in development and testing, and to provide us with feedback. If you are an FIS customer and wish to use this in production, please contact us beforehand to discuss your use case(s). (GTM-8182) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8680"></a> GT.M LOCK commands perform better with large numbers of locks, and particularly with large numbers of processes acquiring the locks. Previously processes acquiring locks could encounter significant slowdown and lock timeouts as the number of locks and competing processes increased. This change requires additional memory per lock slot, so administrators should monitor lock slots (LKE SHOW) to determine if they need to increase lock space needs. </p><p>The GDE -LOCK_SPACE segment qualifier and MUPIP SET -LOCK_SPACE qualifier accept a maximum value of 262144 pages. Previously the maximum value was 65536 pages. </p><p>LKE SHOW includes a LOCKSPACEINFO message in its output for regions with a BG or MM access method. This message provides additional information on the use of LOCK space. Previously LKE only issued this message when the lock space was exhausted.</p><p>(GTM-8680) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span></p></li><li class="listitem"><p><a name="GTM-8790"></a> When the first reference to a database for which a process has statistics sharing enabled is an extended reference, $REFERENCE maintains the extended reference. A regression associated with the implementation of statistics sharing in V6.3-001[A] caused this unusual case to lose that information. This was only ever observed in the GT.M development environment and has never been reported from a customer site. (GTM-8790)</p></li><li class="listitem"><p><a name="GTM-8795"></a> GT.M keeps journal files up to date while a MUPIP FREEZE -ONLINE is in place. Previously the journal files would only be updated when there was a large amount of journal activity or the freeze was removed. (GTM-8795)</p></li><li class="listitem"><p><a name="GTM-8796"></a> GT.M correctly handles any errors in the middle of a transaction commit. In GT.M V6.3-002, due to a regression introduced by GTM-8436, it was possible in very rare scenarios for a critical section deadlock. This issue was only observed in the GT.M development environment, and was never reported by a user.  (GTM-8796)</p></li><li class="listitem"><p><a name="GTM-8805"></a> GT.M manages LOCK concurrency correctly when checking for abandoned LOCKs. In V6.3-002 it could prematurely or belatedly determine that a LOCK was abandoned. (GTM-8805)</p></li><li class="listitem"><p><a name="GTM-8850"></a> GT.M processes detach from database files correctly when a FREEZE -ONLINE is in place. Previously a process could hang waiting on a critical resource while trying to detach, which typically occurs when the process is trying to exit. (GTM-8850)</p></li><li class="listitem"><p><a name="GTM-8858"></a> Improve available information in cases of apparent database integrity issues. (GTM-8858)</p></li><li class="listitem"><p><a name="GTM-8873"></a> GT.M properly handles retries involving $ORDER(gvn,-1) or $ZPREVIOUS(gvn) functions. Previously, with certain key combinations, the retry processing could overflow a buffer, leading to memory corruption. The workaround was for any process using $$ORDER(,-1) in a region to previously have used a maximum length key for the region. (GTM-8873)</p></li><li class="listitem"><p><a name="GTM-9020"></a><span class="inlinemediaobject"><img src="images/V63-003B.png" alt="V63-003B"></span> GT.M handles out-of-lock-space conditions more gracefully. Previously a full lock table could result in corruption of the lock structures, leading to segmentation violations (SIG-11). (GTM-9020)</p></li><li class="listitem"><p><a name="GTM-9023"></a><span class="inlinemediaobject"><img src="images/V63-003B.png" alt="V63-003B"></span> This basically reverts GTM-8680 as the performance improvements were unreliable in circumstances reported by a customer, resulting in multiple processes occasionally holding the same LOCK. The GDE -LOCK_SPACE segment qualifier and MUPIP SET -LOCK_SPACE qualifier accept a maximum value of 65536 pages. In V6.3-003[A] the maximum value was 262144 pages. LKE SHOW does not include a LOCKSPACEINFO message in its output for regions with a BG or MM access method as it did in V6.3-003[A]; GT.M only issues this when the application exhausts the LOCK space. (GTM-9023)</p></li></ul></div></div><div class="sect1" title="Language"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp171645344"></a>Language </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-6115"></a> Addressed by <a class="ulink" href="#GTM-8792" target="_blank">GTM-8694</a> (GTM-6115)</p></li><li class="listitem"><p><a name="GTM-7986"></a> When GT.M encounters a line with a length greater than 8192 bytes in a source file, it emits a %GTM-W-LSINSERTED warning. This warning identifies cases where a line greater than 8192 bytes is split into multiple lines, which causes statements beyond the character prior to the limit to execute irrespective of any starting IF, ELSE or FOR commands. Previously, GT.M split the lines with no warning. (GTM-7986)</p></li><li class="listitem"><p><a name="GTM-8186"></a> GT.M accepts an offset without a label for an entryref argument to DO, GOTO and ZGOTO. FIS recommends restricting the use of offsets in entryrefs to debugging, error handling and testing. Previously GT.M required a label before any offset. (GTM-8186) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8587"></a> GT.M sets $KEY to the characters terminating a READ, and NULL if terminated otherwise (e.g. FIX format, end of file, or timeout). When it encounters an error during an I/O, GT.M sets $DEVICE to "1," followed by an error description. Previously, GT.M did not maintain $KEY for sequential devices and only maintained $DEVICE for certain I/O errors. (GTM-8587) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8769"></a> GT.M checks the syntax of code assigned to $ETRAP, $ZSTEP, $ZTRAP, and EXCEPTION at the time they are specified. Note that $ZTRAP and EXCEPTION are subject to gtm_ztrap_form, and, if that specifies entryref or adaptive, GT.M does not check the syntax. Also, the environment variables $gtm_etrap, $gtm_trigger_etrap, and $gtm_zstep provide ways of setting some of the ISVs, so their values are verified at process initiation. Further, a SET $ETRAP uses a temporary default value of "IF $ZJOBEXAM" when shifting from $ZTRAP to $ETRAP in case the specified value has compilation errors. Previously GT.M detected errors in such code only for SET $ZSTEP and when attempting to use the vector. (GTM-8769) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span> <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8780"></a> $SELECT() compilation properly handles special cases where an omitted colon after a literal true select argument produces a syntax error; a regression introduced in V6.3-001[A], caused it to produce a GTMASSERT2 after reporting the issue.  (GTM-8780)</p></li><li class="listitem"><p><a name="GTM-8786"></a> $NAME() of a naked reference returns any extended reference associated with the current $REFERENCE; previously it did not. (GTM-8786) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span></p></li><li class="listitem"><p><a name="GTM-8788"></a> The compiler excludes BLKTODEEP lines from the object files; due to a regression introduced by GTM-5178 in V6.3-002 they were not excluded (GTM-8788)</p></li><li class="listitem"><p><a name="GTM-8789"></a> The Update Process operates correctly when a trigger issues a NEW $ZGBLDIR while performing updates on other unreplicated instances. A regression introduced with GTM-4759 in V63000[A] caused such operations in the Update Process to terminate unexpectedly with a segmentation fault (SIG-11). (GTM-8789)</p></li><li class="listitem"><p><a name="GTM-8792"></a> $QUERY() of a local variable produces a MAXSTRLEN error when its result exceeds the supported string length. While GT.M supports very long key lengths for local variables, features that need to work with the entire key, such as $NAME() and $QUERY(), may not be able to handle keys with a length that exceeds the maximum supported string length (currently 1MiB). Rather than prohibit longer keys entirely, GT.M just restricts such features, so, if you need the features, avoid keys that exceed the limit. Previously $QUERY() could give a segmentation violation (SIG-11) if it encountered an over-length key. (GTM-6115)(GTM-8792) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span></p></li><li class="listitem"><p><a name="GTM-8804"></a> The ZSHOW "T" (where "T" can be case-insensitive) produces only the summary lines for "G" and "L" output; previously ZSHOW always showed the detail with the summary. (GTM-8804) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8832"></a> GT.M reports a NUMOFLOW error for a string literal used as a number and evaluating to a number that exceeds the supported range, as of this writing: 1E47. A compiler optimization in V6.3-001[A] caused such an evaluation to produce a very very small negative value. (GTM-8832)</p></li><li class="listitem"><p><a name="GTM-8839"></a> $DEVICE returns the complete error message. Previously, $DEVICE truncated messages which were over 80 characters. (GTM-8839) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8847"></a> The read/write (non-NEWable) $ZSTRPLLIM ISV provides a way for a process to limit its process private memory used for local variable and scratch storage. When the value is zero (0), the default, or negative, there is no limit. A positive value specifies a byte limit. When a request for additional memory exceeds the limit, GT.M does the expansion, and then produces an STPCRIT error. By default, a later request for memory produces an STPOFLOW, unless, subsequent to STPCRIT, $ZSTRPLLIM has been set to the same or higher limit. Note that GT.M allocates memory in large blocks so the interaction of $ZSTRPLLIM with memory growth is not exact. When the gtm_string_pool_limit environment variable specifies a positive value, GT.M uses it for the initial value of $ZSTRPLLIM. Previously, process memory was only limited by operating system configuration. (GTM-8847) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8854"></a> The compiler appropriately handles a syntax error in the argument of a postconditional command when the postconditional is a literal that evaluates to FALSE. Due to a regression associated with GTM-8573 in V6.3-001[A], this combination caused an abnormal termination with a segmentation violation (SIG-11). (GTM-8854)</p></li><li class="listitem"><p><a name="GTM-8856"></a> GT.M defers literal optimizations involving patterns within an XECUTE as well as evaluations that encounter issues with the pattern table. Due to a regression associated with GTM-8573 in V6.3-001[A], these combinations caused an abnormal termination with a segmentation violation (SIG-11). (GTM-8856)</p></li><li class="listitem"><p><a name="GTM-8857"></a> Pattern code processing appropriately produces a PATMAXLEN error for certain patterns that exceed the size GT.M supports. Previously, some patterns produced a segmentation violation (SIG-11). This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8857)</p></li><li class="listitem"><p><a name="GTM-8866"></a> GT.M appropriately handles timeout values which have more than three decimal digits; in V6.3-002 and V6.3-003, such values inappropriately had a very long timeout. The workaround was to avoid such values because GT.M only recognizes three digits after the decimal point for timeouts. (GTM-8866)</p></li><li class="listitem"><p><a name="GTM-8880"></a><span class="inlinemediaobject"><img src="images/V63-003A.png" alt="V63-003A"></span> When using standard Boolean evaluation (no short-circuiting enabled by $gtm_boolean or gtm_side_effects) GT.M deals appropriately with cases where the there is a side effect and an right-hand operand interior to the expression happens to evaluate to a value that causes an incorrect result. This issue appeared with the introduction of standard Boolean evaluation in V5.5-000, and has not previously shown up in testing or been reported until a customer encountered a case. (GTM-8880) </p></li></ul></div></div><div class="sect1" title="System Administration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp171785280"></a>System Administration </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-4212"></a> MUPIP BACKUP for directory and file name lengths equal and greater than 255, issues FILENAMETOOLONG error; previously, this produced a core.  Also, backing up an Instance File to a path longer than 255 succeeds with the correct journal sequence number; previously, this issued an incorrect journal sequence number. In addition, MUPIP JOURNAL -RECOVER -REDIRECT issues more information for the INVREDIRQUAL error; previously, it provided less context for the INVREDIRQUAL error. (GTM-4212)</p></li><li class="listitem"><p><a name="GTM-8617"></a> The MUPIP SET command supports the following qualifiers: -N[ULL_SUBSCRIPTS]={never, always, existing}, which controls whether GT.M accepts null subscripts for database keys. -[NO]STD[NULLCOLL], which determines whether GT.M will use standard MUMPS collation or GT.M collation for null-subscripted keys. Previously, this functionality was only available through GDE for database file creation, and DSE for existing database files. FIS strongly recommends avoiding the use of DSE when there is an alternative. (GTM-8617) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8732"></a> MUPIP REPLICATE -RECEIVER -LOG_INTERVAL= and MUPIP SET -DEFER_TIME= accept values ranging from 0 to 2**31-1, -DEFER_TIME= accepts one special value -1; otherwise they produce an error message. MUPIP REPLICATE -RECEIVER -HELPER accepts values ranging from 1 to 128 and otherwise produces an error message. Previously, all these operations accepted inappropriate values. (GTM-8732)</p></li><li class="listitem"><p><a name="GTM-8735"></a> MUPIP SET -{FILE|REGION} recognizes the -[NO]READ_ONLY qualifier to indicate whether GT.M should treat an MM access method segment as read only for all users, including root. This designation augments UNIX authorizations and prevents any state updates that normally might require an operational action for a database with no current accessing (attached) processes. The GT.M help databases have -READ_ONLY set by default. Previously, a database such as the gtmhelp database in the GT.M distribution typically never received a data update but nevertheless could require a ROLLBACK, RECOVER or RUNDOWN to ensure a proper at-rest state. MUPIP emits an error on attempts to set -READ_ONLY on databases with the BG access method, or to set the access method to BG on databases with -READ_ONLY set. (GTM-8735) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8767"></a> MUPIP SET for file or region accepts -H[ARD_SPIN_COUNT]=&lt;integer count&gt; and -SPIN[_SLEEP_MASK]=&lt;hexadecimal mask&gt;; previously it did not support changes to the hard spin count and required -SPIN_SLEEP_LIMIT to change the spin sleep mask. MUPIP SET no longer supports the -SPIN_SLEEP_LIMIT qualifier.(GTM-8767) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span> <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8779"></a> MUPIP FREEZE sends a DBFREEZEON/DBFREEZEOFF message to the system log for each region whose freeze state is changed. (GTM-8779)</p></li><li class="listitem"><p><a name="GTM-8787"></a> MUPIP JOURNAL -EXTRACT='-stdout' appropriately handles its termination; previously, if stdout was already closed this specification produced a segmentation violation (SIG-11). (GTM-8787)</p></li><li class="listitem"><p><a name="GTM-8794"></a> Copies of a database file made while a MUPIP FREEZE -ONLINE -ON is in effect can be used on the same system by performing a MUPIP RUNDOWN -OVERRIDE and a MUPIP FREEZE -OFF on the copy. Previously, an attempt to remove the freeze on the copy would attempt to modify the journal files of the original database and fail. Note that this change moved the ^%PEEKBYNAME item "sgmnt_data.freeze_online" to "node_local.freeze_online"; for this release (V6.3-003) only, ^%PEEKBYNAME recognizes either designation, but going forward, it will not. If you have code referencing this item, please revise it. (GTM-8794) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span></p></li><li class="listitem"><p><a name="GTM-8797"></a> The gtminstall script has a new command line option to skip disablingRemoveIPC=Yes in systemd configuration files. This option was added to facilitate unattended installs and automated builds. Previously, if noresponse was provided, the script would terminate with an error in the script. This issue was only observed in the GT.M development environment, and was never reported by a user.</p><p>The configure script better handles the detection of 64 bit software. Previously, the script could mistakenly identify 32bit software as 64bit software if the output of the file command contained "64" in the sha1 binary hash. This issue was only observed in the GT.M development environment, and was never reported by a user.</p><p>Additionally the gtminstall script defaults to i586 kit for i686 platforms. Since GT.M V6.2-001, the GT.M release distribution kit has i586 in the name. Attempting to use gtminstall on an i686 platform resulted in a failure to download and install the distribution kit due to this change in name. This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8797)</p></li><li class="listitem"><p><a name="GTM-8798"></a> MUPIP ENDIANCVT converts all numeric file header fields to the opposite endian. Previously, it did not convert the Mutex Queue Slots field. (GTM-8798)</p></li><li class="listitem"><p><a name="GTM-8840"></a> gtmsecshr, and facilities that interact with it use message severities that seem appropriate to the issue. Previously, we received customer concerns that the severities were arbitrary, which complicated understanding them. Note that, should you use message parsing that depends on severity, you should review it for possible impact. (GTM-8840) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span></p></li><li class="listitem"><p><a name="GTM-8842"></a> When TRIGGER_MOD is restricted, attempting to ZBREAK a trigger results in a RESTRICTEDOP error, and both ZBREAK and ZSTEP actions are ignored while executing code within a trigger. Previously a TRIGGER_MOD restriction did not imply these other restrictions. (GTM-8842) <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8844"></a> The GT.M restrictions facility recognizes HALT[:&lt;group-name&gt;] and ZHALT[:&lt;group-name&gt;]. When either is present and restriction conditions are met, the restricted command produces a RESTRICTEDOP error. In order to limit pathological looping, if A GT.M process issues a second occurrence of the restricted command within half a second, it terminates after sending a fatal error to both the principal device and the syslog, and also producing a GTM_FATAL* context file, but no core file. Note that, With these restrictions in place, a process should terminate with, for example: ZGOTO 0. with or without a restriction, executing these commands as part triggered logic on a replicating instance may cause the Update Server to terminate and thereby stop replication. As part of this change when ""=$ZTRAP and ""!=$ECODE, ZGOTO 0 returns a non-zero status, derived from the error code in $ZSTATUS, to the shell. If you have an application that uses ZHALT, ZGOTO 0 and shell scripts that check returned status, you should review things in light of this change. Note: with appropriate error handling, an application can use one or both of these restrictions to perform clean up after any explicit HALT or ZHALT. Previously, the restrictions facility did not support these two restrictions, and $ZGOTO 0 always returned a success status to the shell. (GTM-8844) <span class="inlinemediaobject"><img src="images/chkmrkb.png" alt="[!Alert!]"></span> <span class="inlinemediaobject"><img src="images/chkmrkg.png" alt="[!New Feature!]"></span></p></li><li class="listitem"><p><a name="GTM-8846"></a> GT.M appropriately uses file paths with multiple adjacent forward slashes (/) when turning journaling on. Previously, when turning journaling on, GT.M appended inappropriate characters to the end of intended journal file names whose path contained adjacent forward slashes. The workaround was to avoid specifying file paths with any adjacent forward slashes. (GTM-8846)</p></li></ul></div></div><div class="sect1" title="Other"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp171778176"></a>Other </h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="GTM-8754"></a> GT.M defers interrupts during asynchronous database writes. Previously, such interrupts could very occasionally cause a deadlock. This issue was only observed in the GT.M development environment, and was never reported by a user. (GTM-8754)</p></li><li class="listitem"><p><a name="GTM-8781"></a> ZSYSTEM manages memory appropriately; a regression in V6.3-002 caused it to leak small amounts of memory. This issue was only observed in the GT.M development environment, and was not reported by a user. (GTM-8781)</p></li><li class="listitem"><p><a name="GTM-8799"></a> GT.M handles certain unusual cases of local storage (heap) utilization more efficiently. Previously, these cases would cause poor performance as local when adding variables with such patterns. (GTM-8799)</p></li><li class="listitem"><p><a name="GTM-8801"></a> The cmake build produces appropriate support for the ^%YGBLSTATS utility; in the original V6.3-001, V6.3-001A and V6.3-002 releases, an attempt to use ^%YGBLSTATS with a cmake build produced DLLNORTN and ZCRTENOTF errors.(GTM-8801)</p></li><li class="listitem"><p><a name="GTM-8849"></a> Help databases built with make files have QDBRUNDOWN and NOGVSTATS characteristics, which match the properties of help databases of the release builds. Previously, these characteristics differed depending on the build. (GTM-8849)</p></li><li class="listitem"><p><a name="GTM-8855"></a> GT.M correctly cleans up buffers which were allocated prior to a runtime error due to a missing global directory. Previously, these buffers would accumulate if an error handler prevented GT.M from terminating. The workaround for this was to avoid repeated attempts to use a global directory that does not exist or to which the process does not have an authorized path. (GTM-8855)</p></li><li class="listitem"><p><a name="GTM-8887"></a><span class="inlinemediaobject"><img src="images/V63-003A.png" alt="V63-003A"></span> GT.M handles rare cases in timer handling correctly. Previously these cases could result in SETITIMERFAILED errors and messages in the system log. This was only ever observed in the GT.M development environment and has never been reported from a customer site. (GTM-8887)</p></li><li class="listitem"><p><a name="GTM-8889"></a><span class="inlinemediaobject"><img src="images/V63-003A.png" alt="V63-003A"></span> The ZHELP command does not report errors after the user presses a &lt;CTRL-C&gt;. Previously, when exiting after a &lt;CTRLC&gt;, the utility reported an UNDEF error and left a GT.M help dump file for analysis. (GTM-8889)</p></li></ul></div></div><div class="sect1" title="Error and Other Messages"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp171846816"></a>Error and Other Messages</h2></div></div></div><div class="sect2" title="DBFREEZEOFF  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMDBFREEZEOFF"></a>DBFREEZEOFF <span class="inlinemediaobject"><img src="images/new.html" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>DBFREEZEOFF, </strong></span>
Region rrrr is UNFROZEN ([NO]OVERRIDE [NO]AUTOREL)</p><p>Operator log/MUPIP Information: The database region rrrr is no longer frozen, most likely due to a MUPIP FREEZE -OFF, with the selected options. [NO]AUTOREL indicates whether an autorelease of the region occurred prior to the MUPIP FREEZE -OFF command.</p><p>Action: Confirm that this was the desired action.</p></div><div class="sect2" title="DBFREEZEON  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMDBFREEZEON"></a>DBFREEZEON <span class="inlinemediaobject"><img src="images/new.html" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>DBFREEZEON, </strong></span>
Region rrrr is FROZEN ([NO]OVERRIDE [NO]ONLINE [NO]AUTOREL)</p><p>Operator log/MUPIP Information: The database region rrrr is frozen, most likely due to a MUPIP FREEZE -ON, with the reported options.</p><p>Action: Confirm that this was the desired action.</p></div><div class="sect2" title="DBNONUMSUBS  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMDBNONUMSUBS"></a>DBNONUMSUBS <span class="inlinemediaobject"><img src="images/revised.html" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>DBNONUMSUBS, </strong></span>
XXXX Key contains a numeric form of subscript in a global defined to collate all subscripts as strings</p><p>Run Time/MUPIP Error: The record has a numeric subscript but the collation setting for the global or region indicates all subscripts are filed as strings. The leading context (XXXX) identifies the block and offest of the problematic record. This can arise if an operator uses DSE to force a change to a collation setting or to modify a key when the global already has content.</p><p>Action: If you can determine the cause of, and reason for, the change and you may choose to reverse it. If you need to change the collation, the appropriate procedure is to EXTRACT the data, KILL the global, or remove and recreate the database file, and them LOAD the extracted data.</p></div><div class="sect2" title="DBNULCOL  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMDBNULCOL"></a>DBNULCOL <span class="inlinemediaobject"><img src="images/revised.html" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>DBNULCOL, </strong></span>
XXXX NULL collation representation differs from the database file header setting</p><p>DSE/MUPIP/Run Time Error: This indicates the database contains a record with an empty subscript ("Null" subscript) representation  that is incompatible with the current setting database file header setting for such a representation. The leading context (XXXX) specifies the block number and offset of the problematic record. This can only arise if someone changes the setting for the database while it contains one or more such subscripts. FIS recommends against making such a change. This message can originate from MUPIP INTEG, DSE INTEG or from running with VIEW "GDSCERT"</p><p>Action: Use the record and block information to remove the problematic record with DSE and restore the data appropriately, typically with a SET command. Note that the record and block of the record many change due to ongoing updates, so this operation requires great care and familiarity with DSE.</p></div><div class="sect2" title="GBLOFLOW  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMGBLOFLOW"></a>GBLOFLOW <span class="inlinemediaobject"><img src="images/revised.html" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>GBLOFLOW, </strong></span>
Database segment is full</p><p>Run Time/MUPIP Error: This indicates that an error was encountered while extending the database file.</p><p>Action: Examine the accompanying message(s) for the cause of the error. If the error is due to insufficient authorization, address that. If the error is due to TOTALBLKMAX (refer to the explaination of that message) or a lack of enough free space on the disk to fit the size of a database file, try performing a KILL of some nodes in the database to get free blocks in the existing allocated space (you may need to KILL several subscripted nodes before you can KILL a name node).</p></div><div class="sect2" title="LSINSERTED  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMLSINSERTED"></a>LSINSERTED <span class="inlinemediaobject"><img src="images/new.html" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>LSINSERTED, </strong></span>
Line YYYY, source module XXXX exceeds maximum source line length; line seperator inserted, terminating scope of any prior IF, ELSE, or FOR</p><p>Compile Time Warning: Indicates that source XXXX line YYYY exceeded the maximum line length and GT.M separated it into multiple lines to allow continued parsing. Internally, GT.M represents the generated code as N lines for this source line, where N is the number of segments extracted from this source line. Be aware that as a result of this, source lines containing a command whose scope is rest of the line (IF, ELSE, FOR), are now split into multiple lines, each with a separate scope.</p><p>Action: Consider refactoring code to avoid source line lengths in excess of 8192 characters.</p></div><div class="sect2" title="MUTEXFRCDTERM  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMMUTEXFRCDTERM"></a>MUTEXFRCDTERM <span class="inlinemediaobject"><img src="images/revised.html" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>MUTEXFRCDTERM, </strong></span>
   Mutual Exclusion subsystem detected forced termination of process pppp. Crit salvaged from database file  dddd.</p><p>Run Time Warning: This indicates that GT.M confirmed inappropriate termination of the process pppp, while holding crit on database file dddd.</p><p>Action: Determine the cause of the termination and take appropriate action.</p></div><div class="sect2" title="NULSUBSC  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMNULSUBSC"></a>NULSUBSC <span class="inlinemediaobject"><img src="images/revised.html" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>NULSUBSC, </strong></span>
XXXX Null subscripts are not allowed for current region</p><p>Run Time/MUPIP Error: This indicates that a global variable specified a null subscript in a database file which does not accept null subscripts. The leading context (XXXX) specifies more about the event or location of the issue</p><p>Action: Look for the source of the null subscript(s) and consider whether they are appropriate or due to a coding error. If they are appropriate, use MUPIP SET -NULL_SUBSCRIPTS, and remember to make the same adjustment with GDE CHANGE REGION -NULL_SUBSCRIPTS to ensure the next time you recreate a database that the characteristic persists.</p></div><div class="sect2" title="READONLYNOBG  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMREADONLYNOBG"></a>READONLYNOBG <span class="inlinemediaobject"><img src="images/new.html" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>READONLYNOBG, </strong></span>
Read-only cannot be enabled on non-MM databases</p><p>MUPIP Error: This indicates an attempt to change a BG database to -READ_ONLY or to change a -READ_ONLY to MM access method; -READ_ONLY only compatible with the MM access mode.</p><p>Action: Verify whether the database should not be read only and adjust, if appropriate. Alternatively, set the database to MM access mode then mark it as read-only.</p></div><div class="sect2" title="REPLINSTACC  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMREPLINSTACC"></a>REPLINSTACC <span class="inlinemediaobject"><img src="images/revised.html" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>REPLINSTACC, </strong></span>
Error accessing replication instance file xxxx</p><p>Run Time/MUPIP Error: This indicates that some errors were encountered while accessing the specified replication instance file defined by $gtm_repl_instance or the relevant global directory.</p><p>Action: Refer to the accompanying message(s) for additional information.</p></div><div class="sect2" title="REPLINSTMISMTCH  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMREPLINSTMISMTCH"></a>REPLINSTMISMTCH <span class="inlinemediaobject"><img src="images/revised.html" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>REPLINSTMISMTCH, </strong></span>
Process has replication instance file ffff (jnlpool  shmid = ssss) open but database dddd is bound to instance file gggg  (jnlpool shmid =tttt)</p><p>Run Time Error: The process attempted an update on the replicated database dddd associated with the replication instance file ffff and journal pool shared memory id ssss; however, the process has already associated the database with a different replication instance file gggg or journal pool shmid tttt.</p><p>Action: A replicated database can only accept updates by processes that have the same replication instance file (defined by the environment variable gtm_repl_instance or in the global directory) open for that database. Ensure the same replication instance file is used for all processes that update the same replicated database file. This error can also occur if the replication instance file was recreated (while processes were still accessing the replication instance). In this case, the name ffff and gggg would be the same but the corresponding journal pool shared memory ids would be different. To recover from this situation, shut down all processes accessing the instance from before and after the instance file recreate. Run an argumentless MUPIP RUNDOWN to clean up the older journal pool tttt and restart the instance.  The Source Server (which is the first process to start on a replicated instance) only binds replicated databases from its global directory to the journal  pool that it creates. No other replicated database file can be bound with this journal pool.</p></div><div class="sect2" title="REPLMULTINSTUPDATE  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMREPLMULTINSTUPDATE"></a>REPLMULTINSTUPDATE <span class="inlinemediaobject"><img src="images/new.html" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>REPLMULTINSTUPDATE, </strong></span>
Previous updates in the current transaction are to xxxx so updates to yyyy (in rrrr) not allowed</p><p>Run Time Error: Previous updates in the current TP transaction mapped to database files associated with replication instance file xxxx, so it cannot make updates to database file yyyy which is associated with replication instance file rrrr.</p><p>Action: Modify the application so all updates in a TP transaction to replicated regions are associated with a single replication instance.</p></div><div class="sect2" title="STACKCRIT  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMSTACKCRIT"></a>STACKCRIT <span class="inlinemediaobject"><img src="images/revised.html" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>STACKCRIT, </strong></span>
Stack space critical</p><p>Run Time Error: This indicates that the process has consumed almost all of the available stack space.</p><p>Action: Look for infinite recursion. If you do not take immediate action to reduce your stack, GT.M is likely to produce a STACKOFLOW error, which terminates the process. Examine the stack with ZSHOW. Trim the stack using QUIT, ZGOTO, HALT or ZHALT.</p></div><div class="sect2" title="STACKOFLOW  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMSTACKOFLOW"></a>STACKOFLOW <span class="inlinemediaobject"><img src="images/revised.html" alt="Revised"></span>  </h3></div></div></div><p><span class="bold"><strong>STACKOFLOW, </strong></span>
Stack overflow</p><p>Run Time Fatal: This indicates that the process required more stack space than was available in memory.</p><p>Action: Reduce the stack when you get a STACKCRIT error. This error terminates the process.</p></div><div class="sect2" title="STPCRIT  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMSTPCRIT"></a>STPCRIT <span class="inlinemediaobject"><img src="images/new.html" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>STPCRIT, </strong></span>
String pool space critical</p><p>Run Time Error: This indicates that the process has exceeded the heap (string pool) limit specified in the $ZSTRPLLIM ISV. If you do not take prompt action to reduce the process memory requirements, at the next heap expansion, GTM produces an STPOFLOW error, which terminates the process.</p><p>Action: Investigate whether the process memory usage is appropriate, and if so, increase or remove the limit. Otherwise correct the cause(s) of the excessive memory consumption. Please see the documentation for $ZSTRPLLIM for additional information.</p></div><div class="sect2" title="STPOFLOW  "><div class="titlepage"><div><div><h3 class="title"><a name="GTMSTPOFLOW"></a>STPOFLOW <span class="inlinemediaobject"><img src="images/new.html" alt="New"></span>  </h3></div></div></div><p><span class="bold"><strong>STPOFLOW, </strong></span>
String pool space overflow</p><p>Run Time Fatal: This indicates that the process has previously exceeded the heap (string pool) limit specified in the $ZSTRPLLIM ISV and still needs more memory, so GTM terminates the process.</p><p>Action: Investigate whether the process memory usage is appropriate, and if so, increase or remove the limit. Otherwise correct the cause(s) of the excessive memory consumption. Please see the documentation for $ZSTRPLLIM for additional information.</p></div></div></div></body>
<!-- Mirrored [from host tinco.pair.com [file /bhaskar/gtm/doc/articles/GTM_V6.3-003_Release_Notes.html]] -->
</html>
