<html>

<!-- Mirrored [from host tinco.pair.com [file /bhaskar/gtm/doc/books/pg/UNIX_manual/ch09s09.html]] -->
<HEAD><META HTTP-EQUIV="Pragma" CONTENT="no-cache"><META HTTP-EQUIV="Expires" CONTENT="-1">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>I/O Commands</title>
<link rel="stylesheet" href="gtm.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="index.html" title="GT.M Programmer's Guide">
<link rel="up" href="ch09.html" title="Chapter 9. Input/Output Processing">
<link rel="prev" href="ch09s08.html" title="Using Socket Devices">
<link rel="next" href="ch10.html" title="Chapter 10. Utility Routines">
<link rel="copyright" href="ln-idp64351152.html" title="Legal Notice">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">I/O Commands</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ch09s08.html">Prev</a> </td>
<th width="60%" align="center">Chapter 9. <span>Input/Output</span> Processing</th>
<td width="20%" align="right"> <a accesskey="n" href="ch10.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">GT.M Programmer's Guide</a></span> &gt; <span class="breadcrumb-link"><a href="ch09.html"><span>Input/Output</span> Processing</a></span> &gt; <span class="breadcrumb-node">I/O Commands</span>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="io_commands_9"></a>I/O Commands<a class="indexterm" name="idp72059280"></a>
</h2></div></div></div>
<p>This section describes the following GT.M I/O commands:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="opencircle">
<li class="listitem" style="list-style-type: circle"><p>OPEN establishes a connection from a GT.M process to a device.</p></li>
<li class="listitem" style="list-style-type: circle"><p>USE declares a device as the current source of input and destination for output.</p></li>
<li class="listitem" style="list-style-type: circle"><p>READ accepts characters from the current device into a global or local variable.</p></li>
<li class="listitem" style="list-style-type: circle"><p>WRITE sends characters to the current device.</p></li>
<li class="listitem" style="list-style-type: circle"><p>CLOSE breaks the connection between a GT.M process and a device.</p></li>
</ul></div>
<p></p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="open_cmmd_9"></a>Open<a class="indexterm" name="idp72303088"></a>
</h3></div></div></div>
<p>The OPEN command establishes a connection from a GT.M process to a device.</p>
<p>The format of the OPEN command is:</p>
<pre class="programlisting">O[PEN][:tvexpr] expr[:[(keyword[=expr][:...])][:numexpr][:expr]][,...]</pre>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>The optional truth-valued expression immediately following the command is a command postconditional that controls whether or not GT.M executes the command.</p></li>
<li class="listitem"><p>The required expression specifies the device to OPEN.</p></li>
<li class="listitem"><p>The optional keywords specify deviceparameters that control device behavior; some deviceparameters take arguments delimited by an equal sign (=); if the argument only contains one deviceparameter, the surrounding parentheses are optional.</p></li>
<li class="listitem"><p>The optional numeric expression specifies a time in seconds after which the command should timeout if unsuccessful; 0 provides a single attempt to open the device.</p></li>
<li class="listitem"><p>When an OPEN command specifying a timeout contains no deviceparameters, double colons (::) separate the timeout numeric expression from the device expression.</p></li>
<li class="listitem"><p>The optional expression specifies a mnemonicspace that selects a device binding. The only mnemonicspaces that GT.M currently accepts are SOCKET and PIPE.</p></li>
<li class="listitem"><p>When an OPEN command specifies a mnemonicspace with no timeout, double colons separate the mnemonicspace string expression from the deviceparameters; if there are neither a timeout nor deviceparameters, triple colons separate the SOCKET mnemonicspace from the device expression. </p></li>
<li class="listitem"> A triple colon for the PIPE menemonicspace produces an error.</li>
<li class="listitem"><p>An indirection operator and an expression atom evaluating to a list of one or more OPEN arguments form a legal argument for an OPEN.</p></li>
<li class="listitem"><p>For sequential files, multiple processes can open the same file for reading with the OPEN command. </p></li>
</ul></div>
<p>By default, when a device is unavailable, GT.M retries the OPEN indefinitely at approximately one second intervals. A device is unavailable when another process is using it exclusively, or when the OPENing process does not have the resources left to open the device. </p>
<p>All other errors on OPEN raise an error condition and interrupt program flow. A timeout is a tool that lets a GT.M routine regain program control when a device remains unavailable. When the OPEN specifies a timeout, GT.M keeps retrying until either the OPEN succeeds or the timeout expires. </p>
<p>If OPEN establishes a connection with a device before the timeout expires, GT.M sets $TEST to TRUE (1). If the timeout expires, GT.M sets $TEST to FALSE (0). If an OPEN command does not specify a timeout, the execution of the command does not affect $TEST.</p>
<p>If a process has not previously OPENed a device, any deviceparameters not supplied on the OPEN take their default values. When reOPENing a device that it previously closed, a GT.M process restores all characteristics not specified on the OPEN to the values the device had when it was last CLOSEd, except with SD<span>, FIFO, and PIPE</span>. GT.M treats sequential disk files differently and uses defaults for unspecified sequential disk file characteristics on every OPEN; in other words, by default CLOSE of a sequential disk file acts as if DESTROY were specified and it requires an explicit NODESTROY to retain sequential disk file characteristics on a CLOSE.</p>
<p>For a sequential disk device CLOSEd with the NODESTROY deviceparameter, a subsequent OPEN of the device with no deviceparameters restores the device state including its file position; or to the file position specified by a SEEK deviceparameter. Note that when $ZCHSET specifies a UTF character set in FIXED format, the device must have done at least one READ prior to its close. An OPEN with additional deviceparameters positions the device to the beginning of the file or to the end of file if APPEND is specified. Any SEEK specified as a deviceparameter is then applied.</p>
<p>If you have a menu-driven application that OPENs and CLOSEs devices based on user selections, take care that every OPEN explicitly includes all deviceparameters important to the application.</p>
<p> If a process OPENs an already OPEN device, GT.M modifies any characteristics that accept changes when a device is OPEN to reflect any new deviceparameter specifications.</p>
<p>In UTF-8 mode, the OPEN command recognizes ICHSET, OCHSET, and CHSET as three additional deviceparameters to determine the encoding of the the input / output devices. </p>
<p>In M mode, the OPEN command ignores ICHSET, OCHSET, CHSET, and PAD device parameters. </p>
<p>If an I/O device uses a multi-byte character encoding, every READ and WRITE operation of that device checks for well-formed characters according to the specified character encoding with ICHSET or OCHSET. If the I/O commands encounter an illegal sequence of bytes, they always trigger a run-time error; a VIEW "NOBADCHAR" does not prevent such errors. Strings created by $ZCHAR() and other Z equivalent functions may contain illegal sequences. The only way to input or output such illegal sequences is to specify character set "M" with one of these deviceparameters. </p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="examples_of_open_9"></a>Examples of OPEN<a class="indexterm" name="idp72308240"></a>
</h4></div></div></div>
<p>Example:</p>
<pre class="programlisting">set sd="report.dat" open sd:newversion</pre>
<p>This OPENs a NEWVERSION of a sequential disk file named report.dat for both read and write access.</p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="open_device_params"></a>OPEN Deviceparameters</h4></div></div></div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="append_9"></a>APPEND<a class="indexterm" name="idp72319664"></a>
</h5></div></div></div>
<p>APPEND Applies to: SD</p>
<p>Positions the file pointer at the end-of-file. This deviceparameter only affects the device on the first OPEN command or OPEN command if the file is CLOSEd NODESTROY. Re-OPENing an already OPEN device with this deviceparameter has no effect. By default, OPEN sets the file pointer to the beginning-of-file.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>If an APPEND is combined with a SEEK deviceparameter the APPEND is done first - regardless of deviceparameter order.</p></td></tr>
</table></div>
<p>Example:</p>
<pre class="programlisting">set sd="foo.txt"
open sd:(append:recordsize=70:wrap)
use sd</pre>
<p>This example open file foo.txt and positions the file pointer at the end of the file.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="attach_open"></a>ATTACH<a class="indexterm" name="idp72203904"></a>
</h5></div></div></div>
<p>ATTACH=expr Applies to: SOC</p>
<p>ATTACH assigns expr as the handle name to the newly created socket. When ATTACH is used and one of LISTEN or CONNECT is specified on the same OPEN, the value of expr becomes the identifier of the newly created socket. If neither LISTEN nor CONNECT is specified, ATTACH is ignored.</p>
<p>For information on using the ATTACH with USE, refer to <a class="xref" href="ch09s09.html#attach_use" title="ATTACH">&#8220;ATTACH&#8221;</a> in the USE Deviceparameters section.</p>
<p>Example:</p>
<pre class="programlisting">open tcpdev:(ichset="M":connect=hostname_":"_portno_":TCP":attach="client"):timeout:"SOCKET"</pre>
<p>This example uses the ATTACH deviceparameter to specify "client" as the identifier of the newly created socket. Note that GT.M recognizes ICHSET only in UTF-8 mode. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="chset"></a>CHSET</h5></div></div></div>
<p>CHSET=expr Applies to: All devices</p>
<p>Establishes a common encoding for both input and output devices for the device being OPENed in UTF-8 mode. The value of the expression can be M, UTF-8, UTF-16, UTF-16LE, or UTF-16BE. <span>For more information, refer to <a class="xref" href="ch09s09.html#ichset" title="ICHSET">&#8220;ICHSET&#8221;</a> and <a class="xref" href="ch09s09.html#ochset" title="OCHSET">&#8220;OCHSET&#8221;</a>.</span></p>
<div class="informaltable"><table border="0">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr valign="top">
<td align="left" valign="top">
<p class="relatedtopics">See Also</p>
</td>
<td align="left" valign="top">
<div class="itemizedlist"><ul class="itemizedlist" type="disc" compact>
<li class="listitem"><p><a class="xref" href="ch09s09.html#ichset" title="ICHSET">&#8220;ICHSET&#8221;</a></p></li>
<li class="listitem"><p><a class="xref" href="ch09s09.html#ochset" title="OCHSET">&#8220;OCHSET&#8221;</a></p></li>
<li class="listitem"><p><a class="xref" href="ch02s08.html#Discussion_and_Best_Practices" title="Discussion and Best Practices">&#8220;Discussion and Best Practices&#8221;</a></p></li>
</ul></div>
</td>
</tr></tbody>
</table></div>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="command"></a>COMMAND</h5></div></div></div>
<p>COMMAND=expr Applies to: PIPE</p>
<p>Specifies the UNIX command the newly created shell process performs. An invalid command value triggers an error in the new process, not the process issuing the OPEN. This can make diagnosis difficult - see the <span><a class="xref" href="ch09s09.html#parse_pipe" title="PARSE">&#8220;PARSE&#8221;</a></span> deviceparameter for potential assistance.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="connect_9"></a>CONNECT<a class="indexterm" name="idp72375696"></a>
</h5></div></div></div>
<p>CONNECT=expr Applies to: SOC</p>
<p>Creates a client connection with a server, which is located by the information provided by expr. A new socket is allocated for the client connection and is made the current socket for the device, if the operation is successful.</p>
<p>expr specifies the protocol and the protocol-specific information. Currently, GT.M supports TCP/IP and LOCAL (also known as UNIX domain) socket protocols. For TCP/IP sockets, specify expr in the form of "&lt;host&gt;:&lt;port&gt;:TCP", where host is an IPv4 or IPv6 address optionally encapsulated by square-brackets ([]) like "127.0.0.1", "::1", "[127.0.0.1]", or "[::1]" or a IPv4 or IPv6 hostname like server.fis-gtm.com. When a hostname is specified, GT.M uses the IP version of the first address returned by DNS:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>that is supported by the operating system, and</p></li>
<li class="listitem"><p>for which a network interface exists.</p></li>
</ul></div>
<p>For LOCAL sockets, specify expr in the form of "&lt;pathname&gt;:LOCAL", where &lt;pathname&gt; is the name of the file to be used for communication. &lt;pathname&gt; may contain a dollar sign ($) followed by the name of an environment variable which GT.M expands in the same way as the device name for a sequential file. The maximum allowed length of the expanded path name depends on the OS. </p>
<p>For LOCAL sockets, CONNECT attempts to open the specified file. If it doesn't exist or there is no listener, CONNECT retries until it succeeds or a specified timeout expires. </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>CONNECT is not compatible with LISTEN.</p></td></tr>
</table></div>
<p>If the OPEN does not specify a timeout, a SOCKET OPEN waits for the connection to complete or an event that terminates the attempt.</p>
<p>Example: </p>
<pre class="programlisting">open tcpdev:(connect=hostname_":"_portno_":TCP":attach="client":ioerror="TRAP"):timeout:"SOCKET" </pre>
<p>This example establishes a client connect with the server using the connection string in the format of "hostname:port:TCP".</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="delimiter_9"></a>DELIMITER<a class="indexterm" name="idp72377264"></a>
</h5></div></div></div>
<p>[NO]DELIMITER=expr Applies to: SOC</p>
<p>DELIMITER establishes or replaces the list of delimiters used by the newly created socket. The default is NODELIMITER. The delimiter list on a preexisting device remains the same until it is explicitly replaced or deleted.</p>
<p>expr is a string where the following characters have special interpretation:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>':' is used to separate delimiters (it is the delimiter for delimiters).</p></li>
<li class="listitem"><p>'/' serves as an character, so use /: to use colon as part of a delimiter and // to use slash as part of a delimiter.</p></li>
</ul></div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>expr "ab:/:://:bc" is interpreted as four delimiters, which are "ab", ":", "/", and "bc". One socket can have 0-64 delimiters and each delimiter can contain 1-64 characters.</p></td></tr>
</table></div>
<p>Example: </p>
<pre class="programlisting">open tcpdev:(connect=host_":"_portno_":TCP":delim=$c(13):attach="client"):timeout:"SOCKET" </pre>
<p>This command specifies $CHAR(13) as the delimiter for the socket tcpdev. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="exception_9"></a>EXCEPTION<a class="indexterm" name="idp72318432"></a>
</h5></div></div></div>
<p>EXCEPTION=expr Applies to: All devices</p>
<p>Defines an error handler for an I/O device. The expression must contain a fragment of GT.M code (for example, GOTO ERRFILE) that GT.M XECUTEs when GT.M detects an error, or an entryref to which GT.M transfers control, as appropriate for the current gtm_ztrap_form, setting except that there is never any implicit popping with EXCEPTION action.</p>
<p>A device EXCEPTION gets control after a non-fatal device error and $ETRAP/$ZTRAP get control after other non-fatal errors.</p>
<p>Example: </p>
<pre class="programlisting">GTM&gt;do ^FREAD
FREAD;
 zprint ^FREAD 
 read "File &gt; ",sd
 set retry=0
 set $ztrap="BADAGAIN"
 open sd:(readonly:exception="do BADOPEN")
 use sd:exception="goto EOF"
 for  use sd read x use $principal write x,!
EOF;
 if '$zeof zmessage +$zstatus
 close sd
 quit
BADOPEN;
 set retry=retry+1 
 if retry=2 open sd
 if retry=4 halt
 if $piece($zstatus,",",1)=2 do  
 . write !,"The file ",sd," does not exist. Retrying in about 2 seconds ..."
 . hang 2.1
 . quit 
 if $piece($zstatus,",",1)=13 do  
 . write !,"The file ",sd," is not accessible. Retrying in about 3 seconds ..."
 . hang 3.1
 . quit
 quit
BADAGAIN;
 w !,"BADAGAIN",!
 
File &gt;</pre>
<p>This example asks for the name of the file and displays its contents. It OPENs that file as READONLY and specifies an EXCEPTION. The exception handler for the OPEN deals with file-not-found and file-access errors and retries the OPEN command on error. The first USE sets the EXCEPTION to handle end-of-file. The FOR loop reads the file one record at a time and transfers each record to the principal device. The GOTO in the EXCEPTION terminates the FOR loop. At label EOF, if $ZEOF is false, the code reissues the error that triggered the exception. Otherwise, the CLOSE releases the file. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="empterm_open"></a>EMPTERM</h5></div></div></div>
<p>[NO]EMPT[ERM] Applies to: TRM</p>
<p>Allows an "Erase" character on an empty input line to terminate a READ or READ # command. The default is NOEMPTERM. The gtm_principal_editing environment variable specifies the initial setting of [NO]EMPTERM. The TERMINFO specified by the current value of the TERM environment variable defines capnames values "kbs" and/or "kdch1" with character sequences for "Erase." If "kbs" or "kdch1" are multi-character values, you must also specify the ESCAPE or EDIT deviceparameters for EMPTERM recognition.</p>
<p>The erase character as set and shown by stty also terminates a READ command with an empty input line. You can set this erase character to various values using the stty shell command. Typical values of an erase character are &lt;CTRL-H&gt; and &lt;CTRL-?&gt;. Characters set and shown with stty setting must match what the terminal emulator sends.</p>
<p>The environment variable TERM must specify a terminfo entry that matches both what the terminal (or terminal emulator) sends and expects.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="fifo_9"></a>FIFO<a class="indexterm" name="idp72329296"></a>
</h5></div></div></div>
<p>FIFO Applies to: FIFO</p>
<p>Specifies that the device for the OPEN is a FIFO name. GT.M creates the FIFO if it does not already exist and if the process has adequate privileges. However, in the event that the process does not have adequate privileges, the process generates a run-time error. A process does not require any special privileges to OPEN an existing FIFO. The FIFO needs to be readable (or writeable) just like any other file.</p>
<p>Example: </p>
<pre class="programlisting">open file:(fifo:read:recordsize=1048576):100 </pre>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="fixed_9"></a>FIXED<a class="indexterm" name="idp72368672"></a>
</h5></div></div></div>
<p>[NO]FIXED Applies to: SD FIFO PIPE</p>
<p>Selects a fixed-length record format for sequential disk files. FIXED does not specify the actual length of a record. Use RECORDSIZE to specify the record length.</p>
<p>NOFIXED specifies a variable-length record format for sequential disk files. NOFIXED is a synonym for VARIABLE. FIXED is incompatible with STREAM and VARIABLE. By default, records have VARIABLE length record format.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>FIXED length records do not implicitly use embedded record terminators such as line feeds.</p></td></tr>
</table></div>
<p>In UTF-8 mode, GT.M I/O enforces a more record-oriented view of the file, treating each record as RECORDSIZE bytes long. Note that a UTF-8 code-point never splits across records. If a multi-byte character (when CHSET is UTF-8) or a surrogate pair (when CHSET is UTF-16) does not fit into the record (either logical as given by WIDTH or physical as given by RECORDSIZE), the WRITE command uses the byte values as specified by the PAD deviceparameter to fill the physical record. A combining character may end up in the subsequent record if it does not fit in the current record.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>PAD is effective only for devices opened with a CHSET related to <span class="trademark">Unicode</span>(R) characters. In M mode PAD is always &lt;SP&gt;</p></td></tr>
</table></div>
<p>Example:</p>
<pre class="programlisting">GTM&gt;do ^fixedex
fixedex;
  zprint ^fixedex
  set file="fix.txt"
  open file:(newversion:fixed:recordsize=4)
  use file
  write "Hello, World",!
  close file
  set file="fixnowrap.txt"
  open file:(newversion:fixed:recordsize=4:nowrap)
  use file
  write "Hel",!
  write "lo, World",! ; This writes only 'lo, '
  close file
  zsystem ("more fix*.txt")
  zsystem ("od -cb fix.txt")
  zsystem ("od -cb fixnowrap.txt")
  quit
::::::::::::::
fix.txt
::::::::::::::
Hello, World
::::::::::::::
fixnowrap.txt
::::::::::::::
Hel lo,
0000000   H   e   l   l   o   ,       W   o   r   l   d
        110 145 154 154 157 054 040 127 157 162 154 144
0000014
0000000   H   e   l       l   o   ,
        110 145 154 040 154 157 054 040
0000010</pre>
<p>Example: </p>
<pre class="programlisting">GTM&gt;zprint ^gtmcp
gtmcp ; Copy a binary file using GT.M
  new dest,line,max,src
  if 2&gt;$length($zcmdline," ") write "$gtm_dist/mumps -r source target",!
  set dest=$piece($zcmdline," ",2)
  set src=$piece($zcmdline," ",1)
  set max=1024*1024 ; the maximum GT.M string size
  open src:(readonly:FIXED:WRAP:CHSET="M") ;
  open dest:(newversion:FIXED:WRAP:CHSET="M") ; use FIXED format because it does not insert carriage control characters after $X reaches its maximum value.
  for  use src read line#max quit:$zeof  use dest write line
  close src
  use dest
  set $x=0
  close dest
  quit</pre>
<p>This example copies a binary file using GT.M. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="follow_9_open"></a>FOLLOW</h5></div></div></div>
<p>[NO]FOLLOW Applies to: SD</p>
<p>Configures READ to return only when it has a complete record or reaches any specified timeout; it waits for more input rather than
 terminating on an EOF (end-of-file) condition.</p>
<p>The USE command can switch a device from NOFOLLOW to FOLLOW or from FOLLOW to NOFOLLOW. This provides a READ mode of operation similar to a <code class="code">tail -f</code> in UNIX.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="group_9_unix"></a>GROUP<a class="indexterm" name="idp72389056"></a>
</h5></div></div></div>
<p>GROUP=expr Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies access permission on a UNIX file for other users in the file owner's group. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating respectively Read, Write, and eXecute access. When permission controlling deviceparameters (OWNER,GROUP,WORLD) appears on an OPEN of a new file, any user category (OWNER, SYSTEM, WORLD), that is not explicitly specified is given the default access permissions. When any one of these deviceparameters appears on an OPEN of an existing device, any user category that is not explicitly specified remains unchanged. </p>
<p>In order to modify file security, the user who issues the OPEN must have ownership. </p>
<p>If none of GROUP, SYSTEM, OWNER, or WORLD are specified on OPEN, GT.M does not modify the permissions on an existing file and new files are created using the standard UNIX rules.</p>
<p>Example: </p>
<pre class="programlisting">open "test52.txt":(append:group="rw") </pre>
<p>This examples open file test52.txt in append mode with Read Write group access. Note that the user who opens file text52.txt must have ownership permissions for it. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="ichset"></a>ICHSET</h5></div></div></div>
<p>ICHSET=expr</p>
<p>Applies to: All devices </p>
<p>Establishes the character encoding of an input device being OPENed and USEed in the UTF-8 mode. The value of the expression can be M, UTF-8, UTF-16, UTF-16LE, or UTF-16BE. In M mode, ICHSET has no effect. </p>
<p>If ICHSET is not specified, GT.M assumes UTF-8 as the default character set for input from the device. </p>
<p>If expr is set to a value other than M, UTF-8, UTF-16, UTF-16LE or UTF-16BE, GT.M produces a run-time error. UTF-16, UTF-LE, and UTF-16BE are not supported for $Principal and Terminal devices. </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>ICHSET is a deviceparameter of both the OPEN and USE commands. As ICHSET can change the character set of an already OPENed device, it can help deal with binary data intermixed with character data. </p></td></tr>
</table></div>
<div class="informaltable"><table border="0">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr valign="top">
<td align="left" valign="top">
<p class="relatedtopics">See Also</p>
</td>
<td align="left" valign="top">
<div class="itemizedlist"><ul class="itemizedlist" type="disc" compact>
<li class="listitem"><p><a class="xref" href="ch09s09.html#chset" title="CHSET">&#8220;CHSET&#8221;</a></p></li>
<li class="listitem"><p><a class="xref" href="ch09s09.html#ochset" title="OCHSET">&#8220;OCHSET&#8221;</a></p></li>
<li class="listitem"><p><a class="xref" href="ch02s08.html#Discussion_and_Best_Practices" title="Discussion and Best Practices">&#8220;Discussion and Best Practices&#8221;</a></p></li>
</ul></div>
</td>
</tr></tbody>
</table></div>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="independent"></a>INDEPENDENT</h5></div></div></div>
<p>INDEPENDENT Applies to: PIPE</p>
<p>The INDEPENDENT deviceparameter specifies that the newly created process will not be terminated by the CLOSE of the device. The input and output of INDEPENDENT processes should be handled in such a way that it runs independently even after the CLOSE of the device. By default, CLOSE terminates the process associated with the PIPE device.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="ikey_open"></a>IKEY</h5></div></div></div>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>IKEY allows the use of a seperate key for READ to a device; for example, when a GT.M process 
is an element of a UNIX pipe. The format of the IKEY deviceparameter is:</p>
<p><code class="code">IKEY="key_name [IV]"</code></p>
<p>key_name is case-sensitive and must match a key name in the "files" section of the 
gtmcrypt_config file. The optional IV specifies an initialization vector to use for encryption and 
decryption.</p>
<p>For more information, refer to the description of KEY deviceparameter of OPEN or USE. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="io_error_9"></a>IOERROR<a class="indexterm" name="idp72410336"></a>
</h5></div></div></div>
<p>IOERROR=expr Applies to: SOC</p>
<p>Enables exception handling in socket devices. expr specifies the I/O error trapping mode. A value equal to "TRAP" specifies that I/O errors on a device raise error conditions. A value equal to "NOTRAP", or when IOERROR is not specified, indicates that I/O error on a device does not raise error conditions.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>The IOERROR setting is associated with sockets while EXCEPTION is associated with the SOCKET device. In other words, IOERROR can be turned on or off for each of the sockets associated with a SOCKET device but there is only one EXCEPTION value which is used for all the sockets.</p></td></tr>
</table></div>
<p>Example: </p>
<pre class="programlisting">open sock:(connect=host_":"_port_":TCP":delim=$char(13,10):ioerror="TRAP")::"SOCKET" </pre>
<p>This example opens a socket connection and specifies that I/O errors on the device raises error conditions.  </p>
<p>If $LENGTH(expr)&amp;("Tt"[$EXTRACT(expr)) then Error Trapping is enabled; otherwise the application must check $DEVICE and other ISVs for errors.</p>
<p>Note that an OPEN command does not change the current device. Therefore, $DEVICE does not have the status information when an error occurs on OPEN. An application should check $TEST and other ISVs for errors on OPEN.</p>
<p>$DEVICE holds status information only after a socket is successfully ATTACHed to a socket device. To properly trap IOERRORs related to connection handling, it is best to create an empty SOCKET device (with something like <code class="code">open tcpdev::timeout:"SOCKET"</code>) before opening a socket connection with the OPEN (with LISTEN or CONNECT deviceparameters) command. Then, use ATTACH to bring it to the current SOCKET device. This method ensures that a device exists that would update $DEVICE with status information.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="key_open"></a>KEY</h5></div></div></div>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>Specifies information about the key file to use for reading and writing encrypted data. The syntax of the KEY deviceparameter is as follows:</p>
<p><code class="code">KEY="key_name [IV]"</code></p>
<p>key_name is case-sensitive and must match a key name in the "files" section of the gtmcrypt_config file. The optional IV specifies an initialization vector to use for encryption and decryption.</p>
<p>To perform encryption and description, GT.M calls an encryption plugin using the GT.M encryption API and can use any library that conforms to the API. The encryption plugin in turn can call user-selected cryptographic libraries for cryptographic functionality. The key name and IV are passed as binary sequences of bytes to the reference implementation plugin. Because GT.M only uses the first space in the deviceparameter to delimit the end of the key, the IV can include any content, including spaces. The GT.M runtime system uses the plugin to pass the IV to the cryptographic libraries used, which use the length of the IV, to determine whether an IV less than the required size it is zero padded, and whether an IV that is longer than the required length generates an error. FIS suggests using $ZCHAR() in preference to $CHAR() when building IV byte sequences, and to make sure that IV sequences are not unintentionally subjected to numeric conversion.</p>
<p>A USE command with a KEY/IKEY/OKEY deviceparameter that attempts to change the cipher key or IV, including disabling encryption (by specifying an empty key), only succeeds prior to the first WRITE or READ, or after the encryption or decryption state has been reset, such as after a REWIND (only for READ) or a TRUNCATE at the start of a file (for both READ and WRITE).</p>
<p>Separate IKEY and OKEY deviceparameters allow different keys for READ from and WRITE to a device; for example, when a GT.M process is an element of a UNIX pipe. Because encryption ciphers use state machines (which are initialized with the IV at the beginning of the file), GT.M permits READ and WRITE operations only either starting at the beginning of a file, or at the position at which the last READ or WRITE operation completed. In particular, non-empty files cannot be opened in APPEND mode; the SEEK deviceparameter is prohibited; and the TRUNCATE is only permitted at the beginning of a file or at the end, the former deleting the contents, and the latter effectively a no-op.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>Encrypted files must be written and read sequentially from the beginning (including the Byte Order Marker for UTF files); GT.M supports READ and WRITE operations at arbitrary locations in a file only for unencrypted files.</p></td></tr>
</table></div>
<p>Example: </p>
<p>The basic steps to use a key and IV to create an encrypted file and decrypt its data in a testing environment are as follows. These steps are solely for demonstration purposes. You must understand and appropriately adjust the steps before using them in a production environment. For example, in a production environment you should keep the key files in a secure location, protected with appropriate permissions from unauthorized access (such as 0500 for directories and 0400 for individual files). File encryption is just one of many components of a comprehensive security plan.</p>
<pre class="programlisting">export LD_LIBRARY_PATH=/usr/local/lib
export GNUPGHOME=$PWD/mygnupg
$gtm_dist/plugin/gtmcrypt/gen_keypair.sh mykeypair@gtm Keymaster
$gtm_dist/plugin/gtmcrypt/gen_sym_key.sh 0 Sunday.key
$gtm_dist/plugin/gtmcrypt/gen_sym_key.sh 0 Monday.key
$gtm_dist/plugin/gtmcrypt/gen_sym_key.sh 0 Tuesday.key
$gtm_dist/plugin/gtmcrypt/gen_sym_key.sh 0 Wednesday.key
$gtm_dist/plugin/gtmcrypt/gen_sym_key.sh 0 Thursday.key
$gtm_dist/plugin/gtmcrypt/gen_sym_key.sh 0 Friday.key
$gtm_dist/plugin/gtmcrypt/gen_sym_key.sh 0 Saturday.key
echo -n "Enter password for gtm_passwd";export gtm_passwd="`$gtm_dist/plugin/gtmcrypt/maskpass|cut -f 3 -d " "`"
export gtmcrypt_config=mygtmcryptfile
cat mygtmcryptfile
 files: {
 CustomerReportKey1: "Sunday.key";
 CustomerReportKey2: "Monday.key";
 CustomerReportKey3: "Tuesday.key";
 CustomerReportKey4: "Wednesday.key";
 CustomerReportKey5: "Thursday.key";
 CustomerReportKey6: "Friday.key";
 CustomerReportKey7: "Saturday.key";
};
$gtm_dist/mumps -dir
GTM&gt;zprint ^encrfile
encrfile
 set now=$horolog
 set timestamp=$zdate(now,"YYYYMMDDAM1260SS")
 set dayofweek=$zdate(now,"DAY","","1,2,3,4,5,6,7")
 set file="Customers"_timestamp_".log"
 open file:(newversion:key="CustomerReportKey"_dayofweek_" "_timestamp)
 use file
 write "Customer Report - Page 1",!
 close file
 write "IV : ",timestamp,!,"Key : CustomerReportKey"_dayofweek
GTM&gt;do ^encrfile
IV : 20140911AM042419
Key : CustomerReportKey5
GTM&gt;zprint ^readencrfile
readencrfile(key,iv)
 set file="Customers"_iv_".log"
 open file:(key=key_" "_iv)
 use file
 for read data use $principal write data,! use file quit:$zeof
 close file
GTM&gt;do ^readencrfile("CustomerReportKey5","20140911AM042419")
Customer Report - Page 1
GTM&gt;</pre>
<p>In this example, the key name is CustomerReportKey followed by the number representing the day of the week, and IV is a timestamp, which is also a part of the file name. Although all reports start with the same string "Customer Report - Page 1", using a different IV for each file ensures that encrypted data begins with a different sequence of bytes, and making that IV a part of the file name ensures that the recipient of a report (who would have access to the key) can easily deduce the IV needed to decrypt the contents.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="zlisten"></a>LISTEN<a class="indexterm" name="idp72382384"></a>
</h5></div></div></div>
<p>LISTEN=expr Applies to: SOC</p>
<p>A new socket is allocated to listen for a connection. It is made the current socket for the device, if the operation is successful. Upon successful completion, $KEY is set to the format of "LISTENING|&lt;socket_handle&gt;|{&lt;portnumber&gt;|&lt;/path/to/LOCAL_socket&gt;}" otherwise, $KEY is assigned the empty string. </p>
<p>expr specifies the protocol and protocol specific information. Currently, GT.M supports TCP/IP and LOCAL (also known as UNIX domain) socket protocols. For TCP/IP sockets, specify expr in the form of "&lt;port&gt;:TCP". </p>
<p>If &lt;port&gt;=0 is specified, the system chooses the port for the TCP/IP socket. </p>
<p>For LOCAL sockets:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>Specify expr in the form of "&lt;pathname&gt;:LOCAL", where &lt;pathname&gt; is the name of the file to be used for communication. &lt;pathname&gt; may contain a dollar sign ($) followed by the name of an environment variable which GT.M expands in the same way as the device name for a sequential file. The maximum allowed length of the expanded path name depends on the OS. </p></li>
<li class="listitem"><p>LISTEN creates the file if it doesn't exist. If the OPEN command specifies the NEWVERSION deviceparameter, the file specified by the pathname exists, and is a socket file, that file is deleted and GT.M creates a new file. 
</p></li>
<li class="listitem"><p>LISTEN with an OPEN processes the GROUP, OWNER, SYSTEM, WORLD, UIC, and NEWVERSION deviceparameters the same as OPEN for sequential files. </p></li>
</ul></div>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="morereadtime_9"></a>MOREREADTIME</h5></div></div></div>
<p>MOREREADTIME=intexpr Applies to: SOC </p>
<p>MOREREADTIME specifies the polling interval (in milliseconds) that a SOCKET device uses to check for arriving packets.</p>
<p>With no MOREREADTIME specified, SOCKET READ implements a dynamic approach of using a longer first interval of 200 ms when it finds no data, then shortening the interval to 10 ms when data starts to arrive. </p>
<p>If an interval is specified, the SOCKET device always uses the specified interval and doesn't adjust dynamically. This applies to any SOCKET READ. <span>For more information on implementing SOCKET READ, refer to <a class="xref" href="ch09s08.html#socket_read_opr" title="Socket Read Operation">&#8220;Socket Read Operation&#8221;</a>. </span></p>
<p>If a SOCKET READ is not subject to any of the defined terminating conditions, it terminates either after it has at least one character followed by an interval with no new packets, or reading 1,048,576 bytes.</p>
<p>If you use the MOREREADTIME behavior, bear in mind that: </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>Usually, it is more efficient and responsive for an application to wait and process input in larger chunks. Therefore, a larger value for MOREREADTIME can bring larger chunks of input to the application. However, large values may make for sluggish response. </p></li>
<li class="listitem"><p>A short value for MOREREADTIME may consume considerable CPU cycles, especially on a lightly loaded system. </p></li>
<li class="listitem"><p>The maximum value of MORETREADTIME is 999 (basically 1 second). Never set MOREREADTIME to 0 as it causes excessive CPU "spinning". </p></li>
</ul></div>
<p>Example: </p>
<pre class="programlisting">Use tcpdev:morereadtime=200 </pre>
<p>This example specifies that all READs for socket device tcpdev must wait for 200 milliseconds for input. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="newversion_9_u"></a>NEWVERSION<a class="indexterm" name="idp72425952"></a>
</h5></div></div></div>
<p>NEWVERSION Applies to: SD FIFO SOC(LOCAL)</p>
<p>The NEWVERSION deviceparameter assures that when an existing file is used, it is empty upon the OPEN.</p>
<p>By default, if any version of the file exists, OPEN accesses the current version. If no version of the file exists, OPEN without READONLY creates a new file.</p>
<p>Example: </p>
<pre class="programlisting">GTM&gt;file1="foo.txt"
GTM&gt;open file1:newversion:recordsize=5000 
GTM&gt;</pre>
<p>This example creates a new version of sequential file foo.txtwith RECORDSIZE of 5000 bytes. </p>
<p>Example:</p>
<pre class="programlisting">GTM&gt;set delim=$c(13)
GTM&gt;set tcpdev="server$"_$j,timeout=30
GTM&gt;open tcpdev:(LISTEN="local.socket"_":LOCAL":delim=$c(13):attach="server":newversion):timeout:"SOCKET"</pre>
<p>This example deletes the old local.socket file (if it exists) and creates a new LISTENING local.socket file. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="ochset"></a>OCHSET</h5></div></div></div>
<p>OCHSET=expr Applies to: All devices </p>
<p>Establishes the character encoding of the output device OPENed and USEed in the UTF-8 mode. The value of the expression can be M, UTF-8, UTF-16, UTF-16LE, or UTF-16BE. In M mode, OCHSET has no effect. </p>
<p>If *CHSET is not specified, GT.M assumes UTF-8 as the default character set for all the input / output devices. </p>
<p>If expr is set to a value other than M, UTF-8, UTF-16, UTF-16LE or UTF-16BE, GT.M produces a run-time error. UTF-16, UTF-LE, and UTF-16BE are not supported for $Principal and Terminal devices. </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>OCHSET is a deviceparameter of both the OPEN and USE commands. As OCHSET can change the character set of an already OPENed device, it can help deal with binary data intermixed with character data. </p></td></tr>
</table></div>
<div class="informaltable"><table border="0">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr valign="top">
<td align="left" valign="top">
<p class="relatedtopics">See Also</p>
</td>
<td align="left" valign="top">
<div class="itemizedlist"><ul class="itemizedlist" type="disc" compact>
<li class="listitem"><p>
<a class="xref" href="ch09s09.html#chset" title="CHSET">&#8220;CHSET&#8221;</a></p></li>
<li class="listitem"><p><a class="xref" href="ch09s09.html#ichset" title="ICHSET">&#8220;ICHSET&#8221;</a></p></li>
<li class="listitem"><p><a class="xref" href="ch02s08.html#Discussion_and_Best_Practices" title="Discussion and Best Practices">&#8220;Discussion and Best Practices&#8221;</a></p></li>
</ul></div>
</td>
</tr></tbody>
</table></div>
<p>Example: </p>
<pre class="programlisting">GTM&gt;SET file1="mydata.out" 
GTM&gt;SET expr="UTF-16LE" 
GTM&gt;OPEN file1:(ochset=expr) 
GTM&gt;SET DS=$CHAR($$FUNC^%HD("0905"))_$CHAR($$FUNC^%HD("091A"))
GTM&gt;SET DS=DS_$CHAR($$FUNC^%HD("094D"))_$CHAR($$FUNC^%HD("091B"))_$CHAR($$FUNC^%HD("0940"))
GTM&gt;USE file1 WRITE DS,! 
GTM&gt;CLOSE file1 </pre>
<p>This example opens a new file called mydata.out and writes Devanagari characters in the UTF-16LE encoding. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="okey_open"></a>OKEY</h5></div></div></div>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>OKEY allows the use of a seperate key for WRITE to a device; for example, when a GT.M process 
is an element of a UNIX pipe. The format of the IKEY deviceparameter is:</p>
<p><code class="code">OKEY="key_name [IV]"</code></p>
<p>key_name is case-sensitive and must match a key name in the "files" section of the 
gtmcrypt_config file. The optional IV specifies an initialization vector to use for encryption and 
decryption.</p>
<p>For more information, refer to the description of KEY deviceparameter of OPEN or USE. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="owner_u_9"></a>OWNER<a class="indexterm" name="idp72404384"></a>
</h5></div></div></div>
<p>OWNER=expr Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies access permission on a UNIX file for the owner of the file. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating Read, Write, and eXecute access. When any one of these deviceparameters appears on an OPEN of a new file, any user category that is not explicitly specified is given the default mask. When any one of these deviceparameters (<span>OWNER, </span>GROUP, <span>,</span> WORLD) appears on an OPEN of an existing file, any user category that is not explicitly specified remains unchanged.</p>
<p>To modify file security, the user who issues the OPEN must have ownership.</p>
<p>If none of GROUP, SYSTEM, OWNER, or WORLD are specified on OPEN, GT.M does not modify the permissions on an existing file and new files are created using the standard UNIX rules.</p>
<p>Example: </p>
<pre class="programlisting">open "test49.txt":(newversion:owner="rw":group="rw":world="rw")</pre>
<p>This example opens a new version of test49.txt with Read Write acess for the owner. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="pad"></a>PAD</h5></div></div></div>
<p>PAD=expr Applies to: SD FIFO PIPE</p>
<p>For FIXED format sequential files when the character set is not M, if a multi-byte character (when CHSET is UTF-8) or a surrogate pair (when CHSET is UTF-16) does not fit into the record (either logical as given by WIDTH or physical as given by RECORDSIZE) the WRITE command uses bytes with the value specified by the PAD deviceparameter to fill out the physical record. READ ignores the pad bytes when found at the end of the record. The value for PAD is given as an integer in the range 0-127 (the ASCII characters). PAD is always a byte value and the default is $ZCHAR(32) or [SPACE]. </p>
<p>In UTF-8 mode, there are three cases that cause GT.M to insert PAD characters when WRITEing. When READing GT.M attempts to strip any PAD characters. This stripping only works properly if the RECORDSIZE and PAD are the same for the READ as when the WRITEs occurred. WRITE inserts PAD characters when:</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><p>The file is closed and the last record is less than the RECORDSIZE. Records are padded (for FIXED) by WRITE ! as well as when the file is closed.</p></li>
<li class="listitem"><p>$X exceeds WIDTH before the RECORDSIZE is full. </p></li>
<li class="listitem"><p>The next character won't fit in the remaining RECORDSIZE. </p></li>
</ol></div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>In all UTF-16 character sets, RECORDSIZE must be even and PAD bytes occupy two bytes with the high order byte zero. </p></td></tr>
</table></div>
<p>Example: </p>
<pre class="programlisting">GTM&gt;do ^padexample
padexample 
 zprint ^padexample
 set a="<span class="symbol">&#20027;&#35201;&#38632;&#22312;&#35199;&#29677;&#29273;&#20572;&#30041;&#22312;&#24179;&#21407;</span>"
 set encoding="UTF-8"
 set filename="bom"_encoding_".txt"
 open filename:(newversion:fixed:record=8:pad=66:chset=encoding)
 use filename
 write a
 close filename
 halt
$ cat bomUTF-8.txt 
<span class="symbol">&#20027;&#35201;BB&#38632;&#22312;BB&#35199;&#29677;BB&#29273;&#20572;BB&#30041;&#22312;BB&#24179;&#21407;</span>
$ od -tcd1 bomUTF-8.txt 
0000000  344  270  273  350  246  201    B    B  351  233  250  345  234  250    B    B
         -28  -72  -69  -24  -90 -127   66   66  -23 -101  -88  -27 -100  -88   66   66
0000020  350  245  277  347  217  255    B    B  347  211  231  345  201  234    B    B
         -24  -91  -65  -25 -113  -83   66   66  -25 -119 -103  -27 -127 -100   66   66
0000040  347  225  231  345  234  250    B    B  345  271  263  345  216  237
         -25 -107 -103  -27 -100  -88   66   66  -27  -71  -77  -27 -114  -97   32   32</pre>
<p>
In this example, the local variable a is set to a string of three-byte characters. PAD=66 sets padding byte value to $CHAR(66) </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="parse_pipe"></a>PARSE</h5></div></div></div>
<p>PARSE Applies to: PIPE</p>
<p>The PARSE deviceparameter invokes preliminary validation of the COMMAND value. When debugging, PARSE provides more accessible diagnosis for COMMAND values. By default, OPEN does not validate command values before passing them to the newly created process. PARSE has certain limitations, which may, or may not map to, those of the shell.</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>PARSE searches for the command in the environment variables PATH and gtm_dist and produces an error if it is not found.</p></li>
<li class="listitem"><p>PARSE does not resolve aliases, so they produce an error.</p></li>
<li class="listitem"><p>PARSE does not resolve environment variables, except $gtm_dist (as mentioned above), so they trigger an error.</p></li>
<li class="listitem"><p>PARSE does not recognize built-in commands other than nohup and cd unless $PATH or $gtm_dist contain a version with the same name (as the built-in). In the case of nohup, PARSE looks for the next token in $PATH and $gtm_dist. "When PARSE encounters cd it ignores what follows until the next "|" token (if one appears later in the COMMAND value).</p></li>
<li class="listitem"><p>PARSE rejects parentheses around commands.</p></li>
<li class="listitem">
<p>The following example fails:</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<p><code class="code">OPEN p:(COMM="(cd; pwd)":WRITEONLY)::"PIPE"</code></p>
<p>which could be specified without a PARSE error as:</p>
<p><code class="code">OPEN p:(COMM="cd; pwd":WRITEONLY)::"pipe"</code></p>
<p>This restriction does not include parentheses embedded in character strings as in:</p>
</li>
<li class="listitem">
<p><code class="code">OPEN p:(COMM="echo ""(test)""":WRITEONLY)::"pipe" </code></p>
<p>or parameters to a command as in:</p>
<p><code class="code">OPEN p:(COMM="tr -d '()'":WRITEONLY)::"PIPE" </code></p>
</li>
<li class="listitem">
<p>The following are examples of valid OPEN commands using PARSE:</p>
<pre class="programlisting">OPEN a:(COMM="tr e j | echoback":STDERR=e:exception="g BADOPEN":PARSE)::"PIPE"
OPEN a:(SHELL="/usr/local/bin/tcsh":COMM="/bin/cat |&amp; nl":PARSE)::"PIPE"
OPEN a:(COMM="mupip integ -file mumps.dat":PARSE)::"PIPE"
OPEN a:(COMM="$gtm_dist/mupip integ -file mumps.dat":PARSE)::"PIPE"
OPEN a:(COMM="nohup cat":PARSE)::"PIPE" </pre>
</li>
</ol></div>
</li>
</ul></div>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="read_only_9"></a>READONLY<a class="indexterm" name="idp72513696"></a>
</h5></div></div></div>
<p>[NO]READONLY Applies to: SD FIFO PIPE </p>
<p>OPENs a device for reading only (READONLY) or reading and writing (NOREADONLY).</p>
<p>To open a sequential file using the READONLY parameter, the file must exist on the disk. If it does not, GT.M issues a run-time error.</p>
<p>When GT.M encounters a WRITE directed to a file,  OPENed READONLY, GT.M issues a run-time error.</p>
<p>By default, OPEN accesses the device or file NOREADONLY (read-write).</p>
<p>Example: </p>
<pre class="programlisting">GTM&gt;set filename="foo.txt"
GTM&gt;open filename:(readonly:recordsize=1048576) 
GTM&gt;</pre>
<p>This example open the file foo.txt with read permission</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="recordsize_9"></a>RECORDSIZE<a class="indexterm" name="idp72507136"></a>
</h5></div></div></div>
<p>RECORDSIZE=intexpr Applies to: SD <span>FIFO PIPE</span></p>
<p>Overrides the default record size for a disk. </p>
<p>RECORDSIZE specifies an initial WIDTH. Note because RECORDSIZE is in bytes that in UTF-8 mode it produces a WIDTH that assumes one-byte characters.</p>
<p>The RECORDSIZE of a fixed length record for a GT.M sequential disk device is always specified in bytes, rather than characters.</p>
<p>For all UTF-16 CHSET values, RECORDSIZE must be even and PAD characters each occupy two bytes in the
record.</p>
<p>The maximum size of intexpr is 1,048,576 bytes. GT.M produces an error if you specify a value greater than 1,048,576. </p>
<p>When a CHSET related to <span class="trademark">Unicode</span>(R) characters is in use, GT.M treats RECORDSIZE as a byte limit at which to wrap or truncate output depending on [Z][NO]WRAP. For any Unicode character set, GT.M ignores RECORDSIZE for a device which is already open if any I/O has been done. </p>
<p>If the character set is not UTF-16, UTF-16LE, UTF-16BE, the default RECORDSIZE is 32K-1bytes. </p>
<p>If the character set is UTF-16, UTF-16LE or UTF16-BE, the RECORDSIZE must always be in multiples of 2. For these character sets, the default RECORDIZE is 32K-4 bytes. </p>
<p>For all UTF-16 CHSET values, RECORDSIZE must be even and PAD characters each occupy two bytes in the record.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="rewind_9"></a>REWIND<a class="indexterm" name="idp72519232"></a>
</h5></div></div></div>
<p>REWIND Applies to: SD </p>
<p>REWIND positions the file pointer of a sequential disk.</p>
<p>When $PRINCIPAL identifies a device that supports REWIND, the REWIND or INREWIND device parameters perform a REWIND of the input and OUTREWIND performs a REWIND of the output.</p>
<p>By default, OPEN does not REWIND.</p>
<p>Example: </p>
<pre class="programlisting">OPEN "test40.txt":(REWIND:RECORDSIZE=70:NOWRAP) </pre>
<p>This example opens file test40.txt and places the file pointer at the beginning of the file. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="seek_9"></a>SEEK=strexpr</h5></div></div></div>
<p>SEEK Applies to: SD</p>
<p>Positions the current file pointer to the location specified in strexpr. The format of 
strexpr is a string of the form "[+|-]integer" where unsigned value specifies an offset from
the beginning of the file, and an explicitly signed value specifies an offset relative to the
current file position. For STREAM or VARIABLE format, the positive intexpr after any sign is
a byte offset, while for a FIXED format, it is a record offset. In order to deal with the
possible presence of a Byte Order Marker (BOM), SEEK for a FIXED format file written in a UTF
character set must follow at least one prior READ since the device was created.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>If an APPEND is combined with a SEEK deviceparameter the APPEND is done first - regardless of deviceparameter order.</p></td></tr>
</table></div>
<p>Example:</p>
<pre class="programlisting">GTM&gt;zprint ^seekdemo
seekdemo
  new x,p
  set p="seekfixed"
  open p:(newversion:fixed:recordsize=60)
  use p
  ; create file with 9 records of length 60 bytes each
  ; number from 0 to correspond to record offset
 
  for i=0:1:8 write $justify(i_" - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-|",60)
  use p:rewind
  for i=0:1:8 read x set zk=$zkey use $p write "x= ",x," $zkey= ",zk,! use p
  close p
  write !!,"** OPEN with FIXED:RECORDSIZE=60:seek=""5""",!
  open p:(fixed:recordsize=60:seek="5")
  use p
  read x set ZKEY=$zkey
  ;expect: $ZKEY= 6,0
  use $p write "x= ",x," $zkey= ",ZKEY,!
  write !,"** use with SEEK=""-3""",!
  use p:seek="-3"
  read x set ZKEY=$zkey
  ;expect: $ZKEY= 4,0
  use $p write "x= ",x," $zkey= ",ZKEY,!
  write !,"** use with SEEK=""-1"" to read from the same record. read x#20 to read a partial record",!
  use p:seek="-1"
  read x#20 set ZKEY=$zkey
  ;expect: $ZKEY= 3,20
  use $p write "x= ",x," $zkey= ",ZKEY,!
  write !,"** read x#40 to finish reading the record",!
  use p
  read x#40 set ZKEY=$zkey
  ;expect: $ZKEY= 4,0
  use $p write "x= ",x," $zkey= ",ZKEY,!
  write !,"** CLOSE NODESTROY and reOPEN with no deviceparameters",!
  close p:nodestroy
  open p
  use p
  read x set ZKEY=$zkey
  ;expect: $ZKEY= 5,0
  use $p write "x= ",x," $zkey= ",ZKEY,!
  write !,"** CLOSE NODESTROY and reOPEN with SEEK=""+2""",!
  close p:nodestroy
  open p:seek="+2"
  use p
  read x set ZKEY=$zkey
  ;expect: $ZKEY= 8,0
  use $p write "x= ",x," $zkey= ",ZKEY,!
  write !,"** CLOSE NODESTROY and reOPEN with M:SEEK=""+3""",!
  close p:nodestroy
  open p:(M:seek="+3")
  use p
  read x set ZKEY=$zkey
  ;expect: $ZKEY= 4,0
  use $p write "x= ",x," $zkey= ",ZKEY,!
  write !,"** CLOSE NODESTROY and reOPEN with APPEND:SEEK=""-1""",!
  close p:nodestroy
  open p:(append:seek="-1")
  use p
  read x set ZKEY=$zkey
  ;expect: $ZKEY= 9,0
  use $p write "x= ",x," $zkey= ",ZKEY,!
  close p
  write !,"** CLOSE DESTROY and OPEN non-fixed with SEEK=""120"" and read 60 bytes",!
  open p:seek="120"
  use p
  read x#60 set ZKEY=$zkey
  ;expect: $ZKEY= 180
  use $p write "x= ",x," $zkey= ",ZKEY,!
  write !,"** CLOSE NODESTROY and reOPEN with append:SEEK=""-60"" and read last 60 bytes",!
  close p:nodestroy
  open p:(append:seek="-60")
  use p
  read x#60 set ZKEY=$zkey
  ;expect: $ZKEY= 540
  use $p write "x= ",x," $zkey= ",ZKEY,!
  close p
  quit
 
 
 
GTM&gt;do ^seekdemo
x= 0 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 1,0
x= 1 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 2,0
x= 2 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 3,0
x= 3 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 4,0
x= 4 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 5,0
x= 5 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 6,0
x= 6 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 7,0
x= 7 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 8,0
x= 8 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 9,0
** OPEN with FIXED:RECORDSIZE=60:seek="5"
x= 5 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 6,0
** use with SEEK="-3"
x= 3 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 4,0
** use with SEEK="-1" to read from the same record. read x#20 to read a partial record
x= 3 - [-05-|-10-|-15-| $zkey= 3,20
** read x#40 to finish reading the record
x= -20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 4,0
** CLOSE NODESTROY and reOPEN with no deviceparameters
x= 4 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 5,0
** CLOSE NODESTROY and reOPEN with SEEK="+2"
x= 7 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 8,0
** CLOSE NODESTROY and reOPEN with M:SEEK="+3"
x= 3 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 4,0
** CLOSE NODESTROY and reOPEN with APPEND:SEEK="-1"
x= 8 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 9,0
** CLOSE DESTROY and OPEN non-fixed with SEEK="120" and read 60 bytes
x= 2 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 180
** CLOSE NODESTROY and reOPEN with append:SEEK="-60" and read last 60 bytes
x= 8 - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-| $zkey= 540
 
GTM&gt;</pre>
<p>This program demonstrates the use of the SEEK deviceparameter on OPEN and USE and reOPEN after CLOSE NODESTROY.
This test is shown as an M program which may be executed, followed by the expected test output. First the test creates
the file called "seekfixed" with 9, 60-byte records and then REWINDs and reads each record and outputs the record
followed by $ZKEY which is a record,byte pair. Note that the records are numbered from 0 to match the SEEK record
offset. Later in the test the same file is OPENed VARIABLE so $ZKEY will be a byte offset in that case. Details are
given after the file output.</p>
<p>The first OPEN has deviceparameters set to (FIXED:RECORDSIZE=60:SEEK="5") which SEEKs to record offset 5 or physical
record 6. Note, FIXED length records and RECORDSIZE remain in effect after a CLOSE NODESTROY unless changed on a
reOPEN. Record offset 5 is read and output along with $ZKEY= 6,0 which points to the beginning of record offset 6.
Next, a USE with SEEK="-3" is done to move back 3 records to read and output record followed by $ZKEY= 4,0. A USE with
SEEK="-1" moves back one record to the beginning of the record just processed. A partial read of 20 bytes is done to
show a record offset 3 with a byte offset of 20 or $ZKEY= 3,20. A read of 40 bytes is then done to finish processing
that record for a $ZKEY= 4,0. Next a sequence of CLOSE NODESTROY and reOPENs are done. After the first CLOSE NODESTROY
a reOPEN is done with no deviceparameters. The state of the file device, including file position, is restored and a
read is done of record offset 4 which is output followed by $ZKEY= 5,0. The file device is then CLOSEd NODESTROY and a
reOPEN is done with the only deviceparameter being SEEK="+2". The state of the file device is restored and a relative
SEEK is done 2 records later in the file with a read which outputs record offset 7 followed by $ZKEY= 8,0. The file
device is then CLOSEd NODESTORY and a reOPEN is done with deviceparameters (M:SEEK="+3"). The file device is OPENed at
the beginning of the file due to the presence of a deviceparameter (M) other than SEEK on reOPEN. A relative SEEK
forward of 3 records is then done from the beginning of the file and record offset 3 is read and output followed by
$ZKEY= 4,0. The file device is then CLOSEd NODESTORY and a reOPEN is done with the (APPEND:SEEK="-1"). APPEND moves the
file position to the EOF and then the SEEK="-1" moves the file position to the beginning of record 8 - the final record
in the file. Note, the APPEND is applied prior to the SEEK - regardless of deviceparameter order. The file device is
then CLOSEd (DESTROY is the default) and OPENed with the only deviceparameter being absolute SEEK="120" to byte offset
120. This processing is NOFIXED by default and a read of x#60 is done and output followed by $ZKEY= 180. The output is
the same as record 2 in FIXED format. Finally, the file device is then CLOSEd NODESTROY and a reOPEN is done with
deviceparameters (APPEND:SEEK="-60"). This will move the file position to the EOF and go back 60 bytes which is the
starting offset to the final record in the file. Another read of x#60 and is done and output followed by $ZKEY= 540 -
which is the size of the file. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="shell_9"></a>SHELL<a class="indexterm" name="idp72456752"></a>
</h5></div></div></div>
<p>SHELL Applies to: PIPE</p>
<p>The SHELL deviceparameter specifies the shell for the new process. By default the newly created process uses the shell specified by the $SHELL environment variable, otherwise, if the environment variable SHELL is undefined the process uses /bin/sh.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="stderr_9"></a>STDERR<a class="indexterm" name="idp72360448"></a>
</h5></div></div></div>
<p>STDERR Applies to: PIPE</p>
<p>The STDERR deviceparameter specifies that the stderr output from the created process goes to a PIPE device with the name of the STDERR value. This PIPE device acts as a restricted device that can appear only as the argument to USE, READ and CLOSE commands. It is implicitly READONLY and an attempt to WRITE to it triggers an error. If it has not previously acted as the argument to an explicit CLOSE command, the CLOSE of the PIPE device implicitly closes the the STDERR device.</p>
<p>If the OPEN command does not specify STDERR, GT.M redirects the stderr output of the co-process created by the COMMAND to the standard output of the co-process. Specify STDERR when there is a need to read the standard error of the COMMAND seperately. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="stream_9"></a>STREAM<a class="indexterm" name="idp72438272"></a>
</h5></div></div></div>
<p>[NO]STREAM Applies to: SD FIFO PIPE</p>
<p>STREAM and VARIABLE are semantically equivalent unless WRAP is disabled. As long as records do not exceed the WIDTH, they are also equivalent. </p>
<p>When WRAP is disabled and a WRITE exceeds the WIDTH, VARIABLE format truncates the line at the WIDTH, however in STREAM format, each 
WRITE argument is output without truncation or line terminator and the total record can be of arbitrary length.
</p>
<p>For STREAM or VARIABLE record format files, a READ returns when it encounters an EOL, or has read #length characters for a READ #(fixed length READ), or WIDTH characters if #length is not specified, whichever occurs first.</p>
<p>By default, records are VARIABLE, NOSTREAM.</p>
<p>Example: </p>
<pre class="programlisting">set sd="foo.txt"
open sd:(newversion:stream)
use sd:(width=20:nowrap)
for i=1:1:10 write " the quick brown fox jumped over the lazy dog ",$x,!
use sd:(rewind:width=100)
for i=1:1 use sd read x quit:$zeof use $principal write !,i,?5,x
close sd
quit </pre>
<p>The output of this example is as follows: </p>
<pre class="programlisting">1     the quick brown fox jumped over the lazy dog 46
2     the quick brown fox jumped over the lazy dog 46
3     the quick brown fox jumped over the lazy dog 46
4     the quick brown fox jumped over the lazy dog 46
5     the quick brown fox jumped over the lazy dog 46
6     the quick brown fox jumped over the lazy dog 46
7     the quick brown fox jumped over the lazy dog 46
8     the quick brown fox jumped over the lazy dog 46
9     the quick brown fox jumped over the lazy dog 46
10    the quick brown fox jumped over the lazy dog 46</pre>
<p>If you change the FORMAT to VARIABLE, the same example produces the following output. </p>
<pre class="programlisting">1     the quick brown fox 
2     the quick brown fox 
3     the quick brown fox 
4     the quick brown fox 
5     the quick brown fox 
6     the quick brown fox 
7     the quick brown fox 
8     the quick brown fox 
9     the quick brown fox 
10    the quick brown fox </pre>
<p>If you remove the "!" format from the WRITE sequence for VARIABLE, the same example produces the following output: </p>
<pre class="programlisting">1     the quick brown fox </pre>
<p>With STREAM, the same example produces the following output: </p>
<pre class="programlisting">1     the quick brown fox jumped over the lazy dog 46 the quick brown fox jumped over the lazy dog 94 the
2     quick brown fox jumped over the lazy dog 142 the quick brown fox jumped over the lazy dog 191 the q
3    uick brown fox jumped over the lazy dog 240 the quick brown fox jumped over the lazy dog 289 the qui
4    ck brown fox jumped over the lazy dog 338 the quick brown fox jumped over the lazy dog 387 the quick
5     brown fox jumped over the lazy dog 436 the quick brown fox jumped over the lazy dog 485</pre>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="system_u_9"></a>SYSTEM<a class="indexterm" name="idp72464080"></a>
</h5></div></div></div>
<p>SYSTEM=expr Applies to: SOC(LOCAL) SD FIFO</p>
<p>This deviceparameter is a synonym for OWNER that is provided in the UNIX version of GT.M for compatibility with OpenVMS applications. </p>
<p>Example: </p>
<pre class="programlisting">GTM&gt; set perm="rwx" 
GTM&gt;OPEN "test52.txt":(NEWVERSION:SYSTEM="r":GROUP=perm:WORLD=perm) 
GTM&gt;ZSYSTEM "ls -la test52.txt" </pre>
<p></p>
<pre class="programlisting">-r--rwxrwx 1 user group 0 Aug 20 18:36 test52.txt
GTM&gt; </pre>
<p>This example opens file test52.txt and sets read access for the owner, while others have complete access. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="truncate_u"></a>TRUNCATE<a class="indexterm" name="idp72486352"></a>
</h5></div></div></div>
<p>[NO]TRUNCATE Applies to: SD</p>
<p>Truncates the file destroying all data beyond the current file pointer. If APPEND is also specified, the file pointer will be positioned at the end of the file even if TRUNCATE is before APPEND in the list of device parameters.</p>
<p>TRUNCATE on a USE $PRINCIPAL command works on a stdout device when the device supports the action.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="uic"></a>UIC<a class="indexterm" name="idp72546848"></a>
</h5></div></div></div>
<p>UIC=expr Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies the owner and group for the file. </p>
<p>Specifies the group that has access to the file. The format of the string is "o,g" where g is a decimal number representing the group portion of the UIC and o is a decimal number representing the owner portion. The super-user can set the file UIC to any value. See the man page for the chown() system call for the rules for regular users since they vary by platform and system configuration. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="variable_9"></a>VARIABLE<a class="indexterm" name="idp72526704"></a>
</h5></div></div></div>
<p>VARIABLE Applies to: SD <span>FIFO PIPE</span></p>
<p>Specifies the VARIABLE record length format for sequential disk files.</p>
<p>By default, records have variable length format.</p>
<p>For more information, refer to <a class="xref" href="ch09s09.html#stream_9" title="STREAM">&#8220;STREAM&#8221;</a>.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="world_9"></a>WORLD<a class="indexterm" name="idp72537168"></a>
</h5></div></div></div>
<p>WORLD=expr Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies access permissions for users other than the owner who are not in the group specified for a file. This category of users is usually referred to as other in UNIX. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating respectively Read, Write, and eXecute access. When any one of these deviceparameters appear on an OPEN of an existing file, any user category that is not explicitly specified remains unchanged. </p>
<p>To modify file security, the user who issues the OPEN must have <span>ownership</span>.</p>
<p>By default, OPEN and CLOSE do not modify the <span>permissions</span> on an existing file. Unless otherwise specified, when OPEN creates a new file, it establishes security using standard defaulting rules.</p>
<p>Example: </p>
<pre class="programlisting">OPEN "test51.txt":(NEWVERSION:WORLD="rw")</pre>
<p>This example opens file test51.txt and specifies Read Write permission for users not in owner's group. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="wrap_9"></a>WRAP<a class="indexterm" name="idp72552512"></a>
</h5></div></div></div>
<p>[NO]WRAP Applies to: TRM  SD <span>NULL FIFO PIPE</span> SOC</p>
<p>Enables or disables automatic record termination. When the current record size ($X) reaches the maximum WIDTH and the device has WRAP enabled, GT.M starts a new record, as if the routine had issued a WRITE ! Command. When reading, WRAP only determines whether $X remains within the range of zero to WIDTH.</p>
<p>Note that WRAP is enabled by default for SD, NULL, FIFO, PIPE and SOCKET. For TRM, WRAP is enabled by default if the terminfo variable auto_right_margin (capname "am") is set. </p>
<p>NOWRAP causes GT.M to require a WRITE ! to terminate the record. NOWRAP allows $X to become greater than the device WIDTH for terminals and null devices. </p>
<p>The combination of STREAM and NOWRAP on disk files allows you to write data of arbitrary length without truncation. Without the STREAM option, the WRAP option determines the action taken when the record length exceeds the device WIDTH. NOWRAP causes GT.M to truncate the record, while WRAP causes GT.M to insert a format control character except for FIXED format.</p>
<p>NOTE: FIFO, SD and SOCKET devices opened as $PRINCIPAL (at process start-up) default to NOWRAP and for SD and FIFO devices, STREAM.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="writeonly_9"></a>WRITEONLY</h5></div></div></div>
<p>[NO]WRITEONLY Applies to: PIPE</p>
<p>The WRITEONLY deviceparameter specifies that the PIPE acts only to send its output to the created process. Any attempt to READ from such a PIPE triggers an error. Note that when you open a PIPE with both STDERR and WRITEONLY you can still READ from the STDERR device.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="zbf_size"></a>ZBFSIZE<a class="indexterm" name="idp72513824"></a>
</h5></div></div></div>
<p>ZBFSIZE Applies to: SOC</p>
<p>Allocates a buffer used by GT.M when reading from a socket. The ZBFSIZE deviceparameter should be at least as big as the largest message expected.</p>
<p>By default, the size of ZBFSIZE is 1024 and the maximum it can be is 1048576.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="zdelay"></a>ZDELAY<a class="indexterm" name="idp72526400"></a>
</h5></div></div></div>
<p>Z[NO]DELAY Applies to: SOC(TCP)</p>
<p>Controls buffering of data packets by the system TCP stack using the TCP_NODELAY option to the setsockopt system call. This behavior is sometimes known as the Nagle algorithm. The default is ZDELAY. This delays sending additional packets until either an acknowledgment of previous packets is received or an interval passes. If several packets are sent from one end of a connection before the other end responds, setting ZNODELAY may be desirable though at the cost of additional packets being transmitted over the network. ZNODELAY must be fully spelled out.</p>
<p>LOCAL sockets ignore the ZDELAY deviceparameter. </p>
<p>Example: </p>
<pre class="programlisting">open tcpdev:(LISTEN=portno_":TCP":attach="server":zbfsize=2048:zibfsize=1024):timeout:"SOCKET"</pre>
<p>This example opens the socket device tcpdev and allocates a buffer size of 2048 bytes. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="zff"></a>ZFF<a class="indexterm" name="idp72551264"></a>
</h5></div></div></div>
<p>Z[NO]FF=expr Applied to: SOC</p>
<p>expr specifies a string of characters, typically in $CHAR() format to send to socket device, whenever a routine issues a WRITE #. When no string is specified or when ZFF="", then no characters are sent. The default in GT.M is ZNOFF.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="zibfsize"></a>ZIBFSIZE<a class="indexterm" name="idp72574624"></a>
</h5></div></div></div>
<p>ZIBFSIZE  Applies to: SOC</p>
<p>Sets the buffer size used by the network software (setsockopt SO_RCVBUF).</p>
<p>The default and the maximum values depend on the platform and/or system parameters.</p>
<p>Note that LOCAL sockets ignore the ZIBFSIZE deviceparameter. </p>
</div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="open_device_param_table"></a>OPEN Deviceparameter Table</h4></div></div></div>
<p></p>
<div class="informaltable">
<a name="tblopendevsum"></a><table border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr><th colspan="7">
<p>OPEN Deviceparameters</p>
</th></tr>
<tr>
<th>
<p>OPEN DEVICEPARAMETER</p>
</th>
<th>
<p>TRM</p>
</th>
<th>
<p>SD</p>
</th>
<th>
<p>FIFO</p>
</th>
<th>PIPE</th>
<th>
<p>NULL</p>
</th>
<th>
<p>SOC</p>
</th>
</tr>
</thead>
<tfoot><tr><th colspan="7">
<p>TRM: Valid for terminals and printers</p>
<p>SD: Valid for sequential disk files</p>
<p>FIFO: Valid for FIFOs</p>
<p>NULL: Valid for null devices</p>
<p>PIPE: Valid for PIPEs</p>
<p>SOC: Valid for Socket devices</p>
</th></tr></tfoot>
<tbody>
<tr>
<td>
<p>APPEND</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>ATTACH=expr</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
<p>X</p>
</td>
</tr>
<tr>
<td><p>CHSET=encoding</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr>
<td><p>COMMAND=expr</p></td>
<td> </td>
<td> </td>
<td> </td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>CONNECT=expr</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
<p>X</p>
</td>
</tr>
<tr>
<td>
<p>[NO]DELIMITER</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
<p>X</p>
</td>
</tr>
<tr>
<td>
<p>[NO]EMPT[ERM]</p>
</td>
<td>
<p>X</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>EXCEPTION=expr</p>
</td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td>
   <p>X</p>
  </td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
</tr>
<tr>
<td>
<p>FIFO</p>
</td>
<td> </td>
<td> </td>
<td>
<p>X</p>
</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>[NO]FIXED</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>[NO]FOLLOW</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td class="auto-generated"> </td>
</tr>
<tr>
<td>
<p>GROUP=expr</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td><p>ICHSET=encoding</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr>
<td><p>IKEY</p></td>
<td><p></p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr>
<td><p>INDEPENDENT</p></td>
<td> </td>
<td> </td>
<td> </td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>IOERROR=expr</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
<p>X</p>
</td>
</tr>
<tr>
<td><p>KEY</p></td>
<td><p></p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr>
<td>
<p>LISTEN=expr</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
<p>X</p>
</td>
</tr>
<tr>
<td>
<p>[NO]NEWVERSION</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td><p>OCHSET=encoding</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr>
<td><p>OKEY</p></td>
<td><p></p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr>
<td>
<p>OWNER=expr</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td><p>PARSE</p></td>
<td> </td>
<td> </td>
<td> </td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>[NO]READONLY</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>RECORDSIZE=intexpr</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td><p>SEEK=strexpr</p></td>
<td> </td>
<td><p>X</p></td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td><p>SHELL=expr</p></td>
<td> </td>
<td> </td>
<td> </td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td><p>STDERR=expr</p></td>
<td> </td>
<td> </td>
<td> </td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>[NO]STREAM</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td><p>X</p></td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>SYSTEM=expr</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>[NO]TRUNCATE</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>UIC=expr</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>VARIABLE</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td><p>X</p></td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>WORLD=expr</p>
</td>
<td> </td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>[NO]WRAP</p>
</td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
<td><p>X</p></td>
<td>
<p>X</p>
</td>
<td>
<p>X</p>
</td>
</tr>
<tr>
<td>
<p>[NO]WRITEONLY</p>
</td>
<td> </td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
<p>ZBFSIZE</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
<p>X</p>
</td>
</tr>
<tr>
<td>
<p>Z[NO]DELAY</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
<p>X</p>
</td>
</tr>
<tr>
<td>
<p>Z[NO]FF</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
<p>X</p>
</td>
</tr>
<tr>
<td>
<p>ZIBFSIZE</p>
</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
<p>X</p>
</td>
</tr>
</tbody>
</table>
</div>
<p></p>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="use_cmmd_9"></a>Use<a class="indexterm" name="idp72609616"></a>
</h3></div></div></div>
<p>The USE command selects the current device for READs (input) and WRITEs (output).</p>
<p>The format of the USE command is:</p>
<pre class="programlisting">U[SE][:tvexpr] expr[:(keyword[=expr][:...])][,...]</pre>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>The optional truth-valued expression immediately following the command is a command postconditional that controls whether or not GT.M executes the command.</p></li>
<li class="listitem"><p>The required expression specifies the device to make the current device.</p></li>
<li class="listitem"><p>A USE that selects a device not currently OPENed by the process causes a run-time error.</p></li>
<li class="listitem"><p>The optional keywords specify deviceparameters that control device behavior; some deviceparameters take arguments delimited by an equal sign (=). If there is only one deviceparameter, the surrounding parentheses are optional.</p></li>
<li class="listitem"><p>An indirection operator and an expression atom evaluating to a list of one or more USE arguments form a legal argument for a USE.</p></li>
</ul></div>
<p>The intrinsic special variable $IO identifies the current device, so GT.M directs all READs and WRITEs to $IO. When a GT.M image starts, $PRINCIPAL is implicitly OPENed and USEd. Once the GT.M image USEs a device, $IO holds the name of that device until the next USE command.</p>
<p>A USE command modifies the device in accordance with the deviceparameters that apply to the device type and ignores those that do not apply. Characteristics set with USE deviceparameters persist until another USE for the same device with the corresponding deviceparameter. Characteristics persist through USEs of other devices and, except for <span>SD, FIFO, and PIPE</span>, through a subsequent CLOSE and re-OPEN.</p>
<p>Example:</p>
<pre class="programlisting">USE $P:(X=0:Y=$Y-1:NOECHO)</pre>
<p>This example USEs the principal device. If that device is a terminal, the deviceparameters turn off echo and position the cursor to the beginning of the previous line.</p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="use_device_params"></a>USE Deviceparameters</h4></div></div></div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="attach_use"></a>ATTACH<a class="indexterm" name="idp72575456"></a>
</h5></div></div></div>
<p>ATTACH=expr Applies to: SOC</p>
<p>expr specifies the handle for a socket in the socketpool. ATTACH looks up expr in the socketpool's collection of sockets and brings the one found to the current SOCKET device. If an ATTACH operation is successful, the attached socket becomes the current socket for the device.</p>
<p>ATTACH is not compatible with any other device parameters in the USE command.A socket can move from one device to another using DETACH/ATTACH.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>A socket does not carry [I|O]CHSET with it while being moved. Such a socket uses the [I|O]CHSET of the device it is ATTACHed to. If there is input still buffered, this may cause unintentional consequences in the application if [I|O]CHSET changes. GT.M does not detect (or report) a change in [I|O]CHSET due to DETACH/ATTACH.</p></td></tr>
</table></div>
<p>For information on using the ATTACH with OPEN, refer to <a class="xref" href="ch09s09.html#attach_open" title="ATTACH">&#8220;ATTACH&#8221;</a> in the OPEN Deviceparameters section.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="canonical_use"></a>CANONICAL<a class="indexterm" name="idp72611600"></a>
</h5></div></div></div>
<p>[NO]CANONICAL  Applies to: TRM</p>
<p>Enables or disables canonical input as controlled by the ICANON terminal attribute. See the documentation on your platform for details, but in general this would be erase and kill edit functions, and lines delimited by NL (usually &lt;LF&gt;), EOF (usually ^D), and EOL (usually not defined).</p>
<p>By default, canonical input is enabled (that is [NO]CANONICAL is the default).</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="cenable"></a>CENABLE<a class="indexterm" name="idp72596048"></a>
</h5></div></div></div>
<p>[NO]CENABLE Applies to: TRM</p>
<a class="indexterm" name="idp72281168"></a><p>Enables or disables the ability to force GT.M into Direct Mode by entering &lt;CTRL-C&gt; at $PRINCIPAL.</p>
<p>If CENABLE is set, &lt;CTRL-C&gt; interrupts process execution. <span>For more information on interrupt handling, refer to <a class="xref" href="ch08s36.html#interrupt_handling" title="Interrupt Handling">&#8220;Interrupt Handling&#8221;</a>.</span></p>
<p>By default, CENABLE is set. If CTRAP contains $C(3), CENABLE is disabled. </p>
<p>Example: </p>
<pre class="programlisting">use $principal:(nocenable:ctrap="":exception="") </pre>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="clearscreen_use"></a>CLEARSCREEN<a class="indexterm" name="idp72631872"></a>
</h5></div></div></div>
<p>CLEARSCREEN Applies to: TRM</p>
<p>Clears the terminal screen from the present cursor position to the bottom of the screen. The CLEARSCREEN deviceparameter does not change the cursor position or the $X and $Y variables.</p>
<p>Example:</p>
<pre class="programlisting">U $P:(X=0:Y=0:CLEAR)</pre>
<p>This example positions the cursor to "home" in the upper left corner of a VDT and clears the entire current screen "page."</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="connect_use"></a>CONNECT<a class="indexterm" name="idp72729072"></a>
</h5></div></div></div>
<p>CONNECT=expr Applies to: SOC</p>
<p>Enables a client connection with a server, which is located by the information provided by expr. A new socket is allocated for the client connection and is made the current socket for the device, if the operation is successful.</p>
<p>expr specifies the protocol and the protocol-specific information. Currently, GT.M supports TCP/IP and LOCAL (also known as UNIX domain) socket protocols. </p>
<p>For more information, refer to <a class="xref" href="ch09s09.html#connect_9" title="CONNECT">&#8220;CONNECT&#8221;</a>.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>CONNECT is not compatible with LISTEN.</p></td></tr>
</table></div>
<p>Although CONNECT can be used with USE command, FIS recommends not to use it that way, because unlike the OPEN command, there is no way to specify a timeout to the USE command. CONNECT in the USE command take a default timeout value of 0. </p>
<p>Example: </p>
<p>Refer to the "CONNECT" examples in <a class="xref" href="ch09s09.html#examples_of_open_9" title="Examples of OPEN">&#8220;Examples of OPEN&#8221;</a>. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="covert_use"></a>CONVERT<a class="indexterm" name="idp72569984"></a>
</h5></div></div></div>
<p>[NO]CONVERT Applies to: TRM</p>
<p>Enables or disables GT.M from converting lowercase input to uppercase during READs.</p>
<p>By default, the terminal device driver operates NOCONVERT.</p>
<p>Example: </p>
<pre class="programlisting">use $principal:(convert) 
READ X</pre>
<p>This example converts all lowercase to uppercase during READ X. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="ctrap_use"></a>CTRAP<a class="indexterm" name="idp72280880"></a>
</h5></div></div></div>
<p>CTRAP=expr Applies to: TRM</p>
<p>Establishes the &lt;CTRL&gt; characters in the expression as trap characters for the current device. When a READ from a device receives a trap character, GT.M interrupts process execution. The device does not have to be the current device, that is $IO.</p>
<p>The &lt;CTRL&gt; characters are ASCII 0 though 31. However terminal configuration may prevent of most &lt;CTRL&gt; characters from ever reaching GT.M's CTRAP facility.</p>
<p>For example, the command U $P:CTRAP=$C(26,30,7,19) sets a trap for the ASCII characters &lt;SUB&gt;, &lt;RS&gt;, &lt;BEL&gt; and &lt;DC3&gt;.</p>
<p>Specifying CTRAP completely replaces the previous CTRAP list. Setting CTRAP to the null string ("") disables character trapping.</p>
<p>A trap character enabled by CTRAP produces one of the following actions:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>If an EXCEPTION deviceparameter has been issued for the device, the process executes the EXCEPTION argument.</p></li>
<li class="listitem"><p>Otherwise, if $ETRAP is not the empty string, execute $ETRAP.</p></li>
<li class="listitem"><p>Otherwise, if $ZTRAP is not the empty string, the process executes $ZTRAP.</p></li>
<li class="listitem"><p>Otherwise, GT.M terminates the process.</p></li>
</ul></div>
<p>For more information on error handling, refer to <a class="xref" href="ch13.html" title="Chapter 13. Error Processing">Chapter 13: &#8220;<i>Err<span>or</span> Processing</i>&#8221;</a>.</p>
<p>When CTRAP includes &lt;CTRL-C&gt;, [NO]CENABLE has no effect. CTRAPping &lt;CTRL-C&gt; also takes precedence over CENABLE.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="delimiter_use"></a>DELIMITER<a class="indexterm" name="idp72745296"></a>
</h5></div></div></div>
<p>[NO]DELIMITER Applies to: SOC</p>
<p>DELIMITER establishes or replaces the list of delimiters used by the current socket. The default is NODELIMITER. </p>
<p>expr must be a string of the following format: </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><p>':' is used to separate delimiters (it is the delimiter for delimiters).</p></li>
<li class="listitem"><p>'/' serves as an escape character.</p></li>
</ol></div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>expr "ab:/:://:bc" is interpreted as four delimiters, which are "ab", ":", "/", and "bc". One socket can have 0-64 delimiters and each delimiter can contain 1-64 characters.</p></td></tr>
</table></div>
<p>Example: </p>
<p>See "Socket (server.m)" example. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="detach_use"></a>DETACH<a class="indexterm" name="idp72753344"></a>
</h5></div></div></div>
<p>DETACH=expr Applies to: SOC</p>
<p>Removes the socket identified by expr from the current socket device, without affecting any existing connection of that socket. The removed socket is placed in the socketpool and may be attached to another socket device. If the socket being removed is the current socket, then GT.M does the following:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>The socket ATTACHed prior to the removed socket, is made current, if one such exists.</p></li>
<li class="listitem"><p>The socket ATTACHed after the removed socket, is made current, if the removed one was the first socket.</p></li>
<li class="listitem"><p>$PRINCIPAL is made the current device ($IO), if the removed socket was the only one in the current socket device.</p></li>
</ul></div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>A socket can move from one device to another using DETACH/ATTACH. A socket does not carry [I|O]CHSET with it while being moved. Such a socket uses the [I|O]CHSET of the device it is ATTACHed to. If there is input still buffered, this may cause unintentional consequences in the application if [I|O]CHSET changes. GT.M does not detect (or report) a change in [I|O]CHSET due to DETACH/ATTACH.</p></td></tr>
</table></div>
<p>Example:</p>
<pre class="programlisting">GTM&gt;set tcp="seerv" open tcp:(listen="6321:TCP":attach="serv")::"SOCKET"
GTM&gt;zshow "D"
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE WIDTH=80 LENG=24
seerv OPEN SOCKET TOTAL=1 CURRENT=0
    SOCKET[0]=serv DESC=3 LISTENING PASSIVE NOTRAP PORT=6321
         ZDELAY ZBFSIZE=1024 ZIBFSIZE=87380 NODELIMITER
GTM&gt;set tcp="seerv" o tcp:(listen="6322:TCP":attach="serv2")::"SOCKET"
GTM&gt;zshow "D"
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE WIDTH=80 LENG=24
seerv OPEN SOCKET TOTAL=2 CURRENT=1
    SOCKET[0]=serv DESC=3 LISTENING PASSIVE NOTRAP PORT=6321
         ZDELAY ZBFSIZE=1024 ZIBFSIZE=87380 NODELIMITER
    SOCKET[1]=serv2 DESC=4 LISTENING PASSIVE NOTRAP PORT=6322
         ZDELAY ZBFSIZE=1024 ZIBFSIZE=87380 NODELIMITER</pre>
<p>At this point, the socket device "seerv" has two sockets associated with it.</p>
<p>The following command moves the "serv" socket to the "socketpool" device. </p>
<pre class="programlisting">GTM&gt;use tcp:detach="serv"
GTM&gt;use 0 zshow "D"
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE WIDTH=80 LENG=24
seerv OPEN SOCKET TOTAL=1 CURRENT=0
    SOCKET[0]=serv2 DESC=4 LISTENING PASSIVE NOTRAP PORT=6322
         ZDELAY ZBFSIZE=1024 ZIBFSIZE=87380 NODELIMITER
socketpool OPEN SOCKET TOTAL=1 CURRENT=0
    SOCKET[0]=serv DESC=3 LISTENING PASSIVE NOTRAP PORT=6321
         ZDELAY ZBFSIZE=1024 ZIBFSIZE=87380 NODELIMITER</pre>
<p>Notice how socket "serv" is now associated with the pseudo socket device "socketpool". Its only purpose is to hold detached sockets.</p>
<pre class="programlisting">GTM&gt;set tcp2="s2" o tcp2:::"SOCKET"</pre>
<p>This creates a new socket device.</p>
<pre class="programlisting">GTM&gt;zshow "D"
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE WIDTH=80 LENG=24
 s2 OPEN SOCKET TOTAL=0 CURRENT=0
seerv OPEN SOCKET TOTAL=1 CURRENT=0
    SOCKET[0]=serv2 DESC=4 LISTENING PASSIVE NOTRAP PORT=6322
        ZDELAY ZBFSIZE=1024 ZIBFSIZE=87380 NODELIMITER
socketpool OPEN SOCKET TOTAL=1 CURRENT=0
    SOCKET[0]=serv DESC=3 LISTENING PASSIVE NOTRAP PORT=6321
        ZDELAY ZBFSIZE=1024 ZIBFSIZE=87380 NODELIMITER</pre>
<p>The following command moves the serv socket from the socketpool to the tcp2 device.</p>
<pre class="programlisting">GTM&gt;use tcp2:attach="serv"
GTM&gt;use 0 zshow "D"
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE WIDTH=80 LENG=24
s2 OPEN SOCKET TOTAL=1 CURRENT=0
   SOCKET[0]=serv DESC=3 LISTENING PASSIVE NOTRAP PORT=6321
       ZDELAY ZBFSIZE=1024 ZIBFSIZE=87380 NODELIMITER
seerv OPEN SOCKET TOTAL=1 CURRENT=0
   SOCKET[0]=serv2 DESC=4 LISTENING PASSIVE NOTRAP PORT=6322
       ZDELAY ZBFSIZE=1024 ZIBFSIZE=87380 NODELIMITER
socketpool OPEN SOCKET TOTAL=0 CURRENT=-1</pre>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="downscroll_use"></a>DOWNSCROLL<a class="indexterm" name="idp72757120"></a>
</h5></div></div></div>
<p>DOWNSCROLL Applies to: TRM</p>
<p>If $Y=0, DOWNSCROLL does nothing. Otherwise, DOWNSCROLL moves the cursor up one line on the terminal screen and decrements $Y by one. DOWNSCROLL does not change the column position or $X. Some terminal hardware may not support DOWNSCROLL.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="echo_use"></a>ECHO<a class="indexterm" name="idp72754592"></a>
</h5></div></div></div>
<p>[NO]ECHO Applies to: TRM</p>
<p>Enables or disables the echo of terminal input. If you disable ECHO, the EDITING functions will be disabled and any input is not available for later recall. </p>
<p>By default, terminal input ECHOes. </p>
<p>Example: </p>
<pre class="programlisting">use $principal:noecho</pre>
<p>This example disables the echo of terminal input. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="editing_uni"></a>EDITING<a class="indexterm" name="idp72774592"></a>
</h5></div></div></div>
<p>[NO]EDITING    Applies to: TRM </p>
<p>Enables the EDITING mode for the $PRINCIPAL device. If you enable EDITING, GT.M allows the use of the left and right cursor movement keys and certain &lt;CTRL&gt; characters within the current input line. You can recall the last input line using the up or down arrow key. The editing functions are the same as during direct mode command input as described in the "Line Editing" section of the "Operating &amp; Debugging in Direct Mode" chapter except that backspace is not treated the same as the erase character from terminfo which is usually delete (ASCII 127). NOECHO disables EDITING mode. </p>
<p>Set the environment variable gtm_principal_editing to specify the mode for EDITING. For example, gtm_principal_editing="EDITING" enables EDITING mode at GT.M startup. You can also specify the mode for INSERT. For example, gtm_principal_editing="NOINSERT:EDITING". If you specify both modes then separate them with a colon (":") and put them in any order. </p>
<p>By default, EDITING mode is disabled. </p>
<p>If you enable the EDITING mode, escape sequences do not terminate READs. </p>
<p>Enabling PASTHRU mode supersedes EDITING mode. </p>
<p>If any of the EDITING &lt;CTRL&gt; characters are in the CTRAP list, their editing functions are not available since CTRAP takes precedence. However the EDITING &lt;CTRL&gt; characters takes precedence over the TERMINATOR list. </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>M READ EDITING depends on the values of $X and $Y being correct. If the application sends its own escape sequences or control characters, which change the cursor position, it must properly update $X and $Y before doing a M READ with EDITING enabled to ensure correct formatting during input. </p></td></tr>
</table></div>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="empterm_use"></a>EMPTERM</h5></div></div></div>
<p>[NO]EMPT[ERM] Applies to: TRM</p>
<p>Allows an "Erase" character on an empty input line to terminate a READ or READ # command. The default is NOEMPTERM. The gtm_principal_editing environment variable specifies the initial setting of [NO]EMPTERM. The TERMINFO specified by the current value of the TERM environment variable defines capnames values "kbs" and/or "kdch1" with character sequences for "Erase." If "kbs" or "kdch1" are multi-character values, you must also specify the ESCAPE or EDIT deviceparameters for EMPTERM recognition.</p>
<p>The erase character as set and shown by stty also terminates a READ command with an empty input line. You can set this erase character to various values using the stty shell command. Typical values of an erase character are &lt;CTRL-H&gt; and &lt;CTRL-?&gt;. Characters set and shown with stty setting must match what the terminal emulator sends.</p>
<p>The environment variable TERM must specify a terminfo entry that matches both what the terminal (or terminal emulator) sends and expects.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="eraseline_use"></a>ERASELINE<a class="indexterm" name="idp72751376"></a>
</h5></div></div></div>
<p>ERASELINE Applies to: TRM</p>
<p>Clears the current line from the physical cursor position to the end of the line. ERASELINE does not affect the physical cursor position, or $X and $Y.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="escape_use"></a>ESCAPE<a class="indexterm" name="idp72786768"></a>
</h5></div></div></div>
<p>[NO]ESCAPE Applies to: TRM</p>
<p>Enables or disables GT.M processing of escape sequences. </p>
<p>The following events result when a terminal has ESCAPE sequence processing enabled. When an &lt;ESC&gt; or &lt;CSI&gt; arrives in the terminal input, the device driver verifies the sequence that follows as a valid ANSI escape sequence, terminates the READ, and sets $ZB to contain the entire escape sequence. In the case of a READ * when ESCAPE sequence processing is enabled and an escape introducer is read, the entire escape sequence is returned in $ZB and the ASCII representation of the first character is returned in the argument of the READ *. </p>
<p>When escape processing is disabled, READ *x returns 27 in x for an &lt;ESC&gt;. If the escape introducer is also a TERMINATOR, $ZB has a string of length one (1), and a value of the $ASCII() representation of the escape introducer; otherwise, $ZB holds the empty string. For single character and short fixed reads with NOESCAPE, the remaining characters in the escape sequence will be in the input stream for subsequent READS regardless of [NO]TYPEAHEAD.</p>
<p>An application that operates with (NOESCAPE:TERM=$C(13)) must provide successive READ * commands to remove the remaining characters in the escape sequence from the input stream.</p>
<p>By default, ESCAPE processing is disabled. </p>
<p>Example: </p>
<pre class="programlisting">use $principal:(noescape:term=$c(13)) </pre>
<p>This example disables the escape sequence processing and set $c(13) as the line terminator. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="exception_use"></a>EXCEPTION<a class="indexterm" name="idp72788880"></a>
</h5></div></div></div>
<p>EXCEPTION=expr Applies to: All devices</p>
<p>Defines an error handler for an I/O device. The expression must contain a fragment of GT.M code (for example, GOTO ERRFILE) that GT.M XECUTEs when the driver for the device detects an error, or an entryref to which GT.M transfers control, as appropriate for the current gtm_ztrap_form.</p>
<p>For more information on error handling, refer to <a class="xref" href="ch13.html" title="Chapter 13. Error Processing">Chapter 13: &#8220;<i>Err<span>or</span> Processing</i>&#8221;</a>.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="filter_use"></a>FILTER<a class="indexterm" name="idp72745824"></a>
</h5></div></div></div>
<p>[NO]FILTER[=expr] Applies to: TRM SOC NULL</p>
<p>Specifies character filtering for specified cursor movement sequences. Filtering requires character by character examination of all output and reduces I/O performance.</p>
<p>Each FILTER deviceparameter can have only one argument. However, multiple FILTER deviceparameters can appear in a single USE command, each with different arguments.</p>
<p>The valid values for expr:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>[NO]CHARACTERS enables or disables maintenance of $X and $Y according to the M ANSI standard for the characters &lt;BS&gt;, &lt;LF&gt;, &lt;CR&gt; and &lt;FF&gt;. CHARACTERS causes the device driver to examine all output for the above characters, and to adjust $X and $Y accordingly. By default, GT.M performs special maintenance on $X and $Y only for M format control characters, WRAPped records, and certain action deviceparameters.</p></li>
<li class="listitem">In UTF-8 mode, FILTER recognizes the line terminators specified by the <span class="trademark">Unicode</span>(R) standard.</li>
<li class="listitem"><p>[NO]ESCAPE alters the effect of ANSI escape sequences on $X and $Y. ESCAPE causes GT.M to filter the output, searching for ANSI escape sequences and preventing them from updating $X and $Y. By default, GT.M does not screen output for escape sequences.</p></li>
</ul></div>
<p>By default, GT.M does not perform output filtering. For GT.M to maintain $X for non-graphic characters as described by the standard, FILTER="CHARACTERS" must be enabled. Output filtering adds additional overhead to I/O processing. </p>
<p>Example: </p>
<pre class="programlisting">use tcpdev:filter="NOESCAPE" </pre>
<p>This example removes the effect of escape sequences on the maintenance $X and $Y. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="follow_9"></a>FOLLOW</h5></div></div></div>
<p>[NO]FOLLOW Applies to: SD</p>
<p>Configures READ to return only when it has a complete record or reaches any specified timeout; it waits for more input rather than
 terminating on an EOF (end-of-file) condition.</p>
<p>The USE command can switch a device from NOFOLLOW to FOLLOW or from FOLLOW to NOFOLLOW. This provides a READ mode of operation similar to a tail -f in UNIX.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="hostsync"></a>HOSTSYNC<a class="indexterm" name="idp72771856"></a>
</h5></div></div></div>
<p>[NO]HOSTSYNC  Applies to: TRM</p>
<p>Enables or disables the use of XON/XOFF by the host to throttle input and prevent impending buffer overruns for a terminal. This deviceparameter provides a control mechanism for the host over asynchronous communication lines to help prevent data loss when hardware is slow and/or processing load is high.</p>
<p>By default, HOSTSYNC is disabled. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="ikey_use"></a>IKEY</h5></div></div></div>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>IKEY allows the use of a seperate key to READ from a device; for example, when a GT.M process is an element of a UNIX pipe. The format of the IKEY deviceparameter is:</p>
<p><code class="code">IKEY="key_name [IV]"</code></p>
<p>key_name is case-sensitive and must match a key name in the "files" section of the gtmcrypt_config file. The optional IV specifies an initialization vector to use for encryption and decryption.</p>
<p>For more information, refer to the description of KEY deviceparameter of OPEN.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="inrewind_use"></a>INREWIND</h5></div></div></div>
<p>Applies to: SD</p>
<p>Performs a REWIND on input when $PRINCIPAL identifies a device that supports REWIND. Use this deviceparameter with $PRINCIPAL when redirected from a file. <span>For more information, refer to <a class="xref" href="ch09s09.html#seek_use" title="SEEK=strexpr">&#8220;SEEK=strexpr&#8221;</a>.</span> </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="inseek_use"></a>INSEEK=strexpr</h5></div></div></div>
<p>Applies to: SD</p>
<p>Performs a SEEK on input when $PRINCIPAL identifies a device that supports SEEK. Use this deviceparameter with $PRINCIPAL when redirected from a file. <span>For more information, refer to <a class="xref" href="ch09s09.html#seek_use" title="SEEK=strexpr">&#8220;SEEK=strexpr&#8221;</a>.</span> </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="insert_use"></a>INSERT<a class="indexterm" name="idp72809264"></a>
</h5></div></div></div>
<p>[NO]INSERT Applies to: TRM</p>
<p>Enables or disables insert mode for the $PRINCIPAL device. If INSERT mode is enabled, GT.M inserts input characters at the logical position in the input stream designated by the virtual cursor as defined by $X and $Y, for example in the middle of the line/record. If INSERT mode is disabled, input characters overwrite the existing characters in the input stream at the logical position designated by the virtual cursor. You can toggle the insert mode within a direct mode line or if EDITING is enabled for a single READ argument's input using the terminal's INSERT key. The INSERT mode is reset to the default or what was last specified with USE at the beginning of each direct mode line or READ argument. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="io_error_use"></a>IOERROR</h5></div></div></div>
<p>IOERROR=expr Applies to: SOC</p>
<p>Enables exception handling in socket devices. expr specifies the I/O error trapping mode. A value equal to "TRAP" specifies that I/O errors on a device raise error conditions. A value equal to "NOTRAP", or when IOERROR is not specified, indicates that an I/O error on a device does not raise error conditions.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>GT.M currently handles exception handling at device level instead of socket level.</p></td></tr>
</table></div>
<p>Example: </p>
<pre class="programlisting">use sock:(ioerror="TRAP":exception="zgoto "_$zlevel_":error") </pre>
<p>This example enables exception handling in socket device sock and specifies that all I/O errors on sock raise the error condition. </p>
<p>If $LENGTH(strexpr)&amp;("Tt"[$EXTRACT(strexpr)) then Error Trapping is enabled; otherwise the application must check $DEVICE for errors.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="key_use"></a>KEY</h5></div></div></div>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>Specifies information about the key file to use for reading and writing encrypted data. The syntax of the KEY deviceparameter is as follows:</p>
<p><code class="code">KEY="key_name [IV]"</code></p>
<p>key_name is case-sensitive and must match a key name in the "files" section of the gtmcrypt_config file. The optional IV specifies an initialization vector to use for encryption and decryption.</p>
<p>For more information and an example, refer to the description of KEY deviceparameter of OPEN.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="length_use"></a>LENGTH<a class="indexterm" name="idp72843568"></a>
</h5></div></div></div>
<p>[Z]LENGTH=intexpr Applies to: TRM SOC SD<span> FIFO PIPE</span> NULL</p>
<p>Sets the virtual page length for an I/O device to the integer expression. You can specify the virtual page length up to 1,048,576. The page length controls the point at which the device driver automatically resets $Y to 0. </p>
<p>By default, for terminals, GT.M uses the terminfo variable lines (which may be from the terminal definition or from a stty command) as the initial value for LENGTH. The default length for null device and socket device is 66.</p>
<p>Setting LENGTH to zero prevents resetting $Y to zero.</p>
<p>Example: </p>
<pre class="programlisting">use sock:(width=80:znoff:zlength=24) </pre>
<p>This example sets the virtual page length to 24 for socket device sock. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="zlisten_use_9"></a>LISTEN<a class="indexterm" name="idp72838704"></a>
</h5></div></div></div>
<p>LISTEN=expr  Applies to: SOC</p>
<p>A new socket is allocated to listen for a connection. It is made the current socket for the device, if the operation is successful. </p>
<p>expr specifies the protocol and the protocol-specific information. Currently, GT.M supports TCP/IP and LOCAL (also known as UNIX domain) socket protocols. </p>
<p>For more information, refer to <a class="xref" href="ch09s09.html#zlisten" title="LISTEN">&#8220;LISTEN&#8221;</a>.</p>
<p>Example: </p>
<pre class="programlisting">GTM&gt;set tcp="seerv" open tcp:(listen="6321:TCP":attach="serv")::"SOCKET"
GTM&gt;use tcp:listen="6322:TCP"
GTM&gt;use 0 zshow "D"
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE WIDTH=80 LENG=24
seerv OPEN SOCKET TOTAL=2 CURRENT=1
SOCKET[0]=serv DESC=3 LISTENING PASSIVE NOTRAP PORT=6321
     ZDELAY ZBFSIZE=1024 ZIBFSIZE=87380 NODELIMITER
SOCKET[1]=h12185825450 DESC=4 LISTENING PASSIVE NOTRAP PORT=6322
     ZDELAY ZBFSIZE=1024 ZIBFSIZE=87380 NODELIMITER</pre>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="okey_use"></a>OKEY</h5></div></div></div>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>OKEY allows the use of a seperate key for WRITE to a device; for example, when a GT.M process is an element of a UNIX pipe. The format of the IKEY deviceparameter is:</p>
<p><code class="code">OKEY="key_name [IV]"</code></p>
<p>key_name is case-sensitive and must match a key name in the "files" section of the gtmcrypt_config file. The optional IV specifies an initialization vector to use for encryption and decryption.</p>
<p>For more information, refer to the description of KEY deviceparameter of OPEN. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="outrewind_use"></a>OUTREWIND</h5></div></div></div>
<p>Applies to: SD</p>
<p>Performs a REWIND on output when $PRINCIPAL identifies a device that supports REWIND. Use this deviceparameter with $PRINCIPAL when redirected to a file. <span>For more information, refer to <a class="xref" href="ch09s09.html#rewind_use" title="REWIND">&#8220;REWIND&#8221;</a>.</span> </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="outseek_use"></a>OUTSEEK=strexpr</h5></div></div></div>
<p>Applies to: SD</p>
<p>Performs a SEEK on output when $PRINCIPAL identifies a device that supports SEEK. Use this deviceparameter with $PRINCIPAL when redirected to a file. <span>For more information, refer to <a class="xref" href="ch09s09.html#seek_use" title="SEEK=strexpr">&#8220;SEEK=strexpr&#8221;</a>. </span></p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="pasthru_use"></a>PASTHRU<a class="indexterm" name="idp72836368"></a>
</h5></div></div></div>
<p>[NO]PASTHRU Applies to: TRM</p>
<p>Enables or disables interpretation of the ERASE character for a terminal. PASTHRU shifts management of handling and response to ERASE characters in the input stream from GT.M to the application code.</p>
<p>Exercise caution with PASTHRU in debugging, because using a PASTHRU terminal in Direct Mode is somewhat awkward.</p>
<p>[NO]TTSYNC must be used with [NO]PASTHRU to control XON/XOFF handling.</p>
<p>By default, the device driver operates NOPASTHRU.</p>
<p>PASTHRU supersedes line editing. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="readsync_use"></a>READSYNC<a class="indexterm" name="idp72854224"></a>
</h5></div></div></div>
<p>[NO]READSYNC Applies to: TRM</p>
<p>Enables or disables automatic output of &lt;XON&gt; before a READ and &lt;XOFF&gt; after a READ. </p>
<p>By default, the terminal drivers operate NOREADSYNC. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="rewind_use"></a>REWIND<a class="indexterm" name="idp72865744"></a>
</h5></div></div></div>
<p>REWIND Applies to: SD</p>
<p>REWIND places the file pointer to the beginning of the file. </p>
<p>By default, USE does not REWIND.</p>
<p>REWIND on redirected output for $PRINCIPAL is the same as OUTREWIND.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="seek_use"></a>SEEK=strexpr</h5></div></div></div>
<p>SEEK Applies to: SD</p>
<p>Positions the current file pointer to the location specified in strexpr. The format of 
strexpr is a string of the form "[+|-]integer" where an unsigned value specifies an offset from
the beginning of the file, and an explicitly signed value specifies an offset relative to the
current file position. For STREAM or VARIABLE format, the positive intexpr after any sign is
a byte offset, while for a FIXED format, it is a record offset. In order to deal with the
possible presence of a Byte Order Marker (BOM), SEEK for a FIXED format file written in a UTF
character set must follow at least one prior READ since the device was created.</p>
<p>SEEK on redirected input for $PRINCIPAL is the same as INSEEK.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="socket_use"></a>SOCKET<a class="indexterm" name="idp72861136"></a>
</h5></div></div></div>
<p>SOCKET=expr Applies to: SOC</p>
<p>Makes the socket specified by the handle named in expr the current socket for the Socket device . If the named socket is a listening socket, it checks for an incoming connection request and if one is available, it accepts the request and creates a new connected socket in which case $KEY provides information on the new socket Specifying a socket handle not contained in the Socket device generates an error.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>SOCKET is compatible with DELIMITER only.</p></td></tr>
</table></div>
<p>For a usage example, refer to the socketexamplemulti2.m in the <a class="xref" href="ch09s08.html#socket_device_examples" title="Socket Device Examples">Section : &#8220;Socket Device Examples&#8221;</a>. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="terminator_use"></a>TERMINATOR<a class="indexterm" name="idp72860464"></a>
</h5></div></div></div>
<p>[NO]TERMINATOR[=expr] Applies to: TRM</p>
<p>Specifies which of the 256 ASCII characters terminate a READ. For example, TERMINATOR=$C(0) makes &lt;NUL&gt; the terminator. </p>
<p>When NOESCAPE is in effect, TERMINATOR controls whether or not &lt;ESC&gt; or &lt;CSI&gt; are treated as terminators, however, when ESCAPE processing is enabled, the entire escape sequence is treated as a terminator regardless of the TERMINATOR specification.</p>
<p>When EDITING is enabled, the control characters used for editing are not treated as terminators even if they are in the TERMINATOR list. </p>
<p>You can define any control character as a terminator, but they are all single character.</p>
<p>When the terminal is in UTF-8 mode (chset=utf8,) GT.M limits the terminator characters to the first 127 which are common between ASCII and UTF-8 encodng. In M mode, any of the 256 characters may be specified a terminator.</p>
<p>In UTF-8 mode, if CR is in the terminator list (either by default or explicitly,) GT.M ignore the following LF to keep with the standard <span class="trademark">Unicode</span>(R) line terminator definitions.</p>
<p>NOTERMINATOR eliminates all terminators. When a terminal has all terminators disabled, fixed length READ and READ * terminate on receipt of some number of characters, and a timed READ terminates on timeout, but any other READ only terminates when the input fills the terminal read buffer.</p>
<p>By default, terminals recognize &lt;CR&gt;, &lt;LF&gt;, and &lt;ESC&gt; as terminators (that is, TERMINATOR=$C(10, 13,27)). TERMINATOR="" restores the default. In UTF-8 mode, the usual UTF-8 line terminators are also included in the default set of terminators. </p>
<p>Example:</p>
<pre class="programlisting">GTM&gt; USE $P:TERM=$C(26,13,11,7)</pre>
<p>This example enables the ASCII characters &lt;SUB&gt;, &lt;CR&gt;, &lt;VT&gt; and &lt;BEL&gt; as READ terminators.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="truncate_use_9"></a>TRUNCATE<a class="indexterm" name="idp72823232"></a>
</h5></div></div></div>
<p>[NO]TRUNCATE Applies to: SD</p>
<p>Enables or disables overwriting of existing data in sequential files. Because the position of each record depends on the prior record, a WRITE destroys the ability to reliably position to subsequent records in a file. Therefore, by default (NOTRUNCATE), GT.M permits WRITEs only when the file pointer is positioned at the end-of-file. When a device has TRUNCATE enabled, a WRITE issued when the file pointer is not at end-of-file truncates the file by destroying all data from the file pointer to the end-of-file.</p>
<p>By default, OPEN accesses files NOTRUNCATE, which does not allow overwriting of sequential files.</p>
<p>This deviceparameter may not be supported by your platform.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="ttsync_use_9"></a>TTSYNC<a class="indexterm" name="idp72874304"></a>
</h5></div></div></div>
<p>[NO]TTSYNC Applies to: TRM</p>
<p>Enables or disables recognition of XON/XOFF for terminal output. </p>
<p></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>A terminal may have its own handling of XON/XOFF, controlled by a set-up mode or by switches. If an application requires program recognition of &lt;CTRL-S&gt; and &lt;CTRL-Q&gt;, the terminals may require reconfiguration.</p></td></tr>
</table></div>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="typehead"></a>TYPEAHEAD<a class="indexterm" name="idp72852464"></a>
</h5></div></div></div>
<p>[NO]TYPEAHEAD  Applies to: TRM</p>
<p>Enables or disables type-ahead buffering for a terminal. When TYPEAHEAD is disabled, any pending input which has not yet been read will be discarded before input is read for each READ argument. When TYPEAHEAD is enabled, any input not read by one READ argument will remain available for the next READ argument or command. </p>
<p>The size of the type-ahead buffer limits the amount of data entered at the terminal that the device driver can store in anticipation of future READs. </p>
<p>By default, the terminal device driver accepts TYPEAHEAD.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="upscroll"></a>UPSCROLL<a class="indexterm" name="idp72892048"></a>
</h5></div></div></div>
<p>UPSCROLL  Applies to: TRM</p>
<p>Moves the cursor down one line on the terminal screen. If $Y=LENGTH-1, UPSCROLL sets $Y=0. Otherwise UPSCROLL increments $Y by one. If the cursor is physically at the bottom of the page, the screen scrolls up one line. UPSCROLL does not change the column position or $X.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="width_use_9"></a>WIDTH<a class="indexterm" name="idp72824320"></a>
</h5></div></div></div>
<p>[Z]WIDTH=intexpr Applies to: TRM SOC NULL SD<span> FIFO PIPE</span></p>
<p>Sets the device's logical record size and enables WRAP. The default WIDTH for SOC, SD and FIFO is taken from the RECORDSIZE. </p>
<p>NOWRAP and WIDTH supersede each other. When WIDTH and NOWRAP appear together on the same USE command, the final one controls the device behavior. For a terminal, WIDTH=0 is equivalent to WIDTH=n:NOWRAP, where n is the default length of a logical record on that terminal.</p>
<p><span>Terminals inherit their default WIDTH in GT.M from the invoking shell environment.</span> The default WIDTH for null and socket device is 255.</p>
<p>For SD and SOC which support 1MB strings, you can specify WIDTH up to 1,048,576. </p>
<p>In UTF-8 mode and TRM, SOC, SD, and FIFO output, the WIDTH deviceparameter is in units of display-columns and is used with $X to control truncation and WRAPing for output and maintenance of $X and $Y for input. </p>
<p>In UTF-8 mode and SOC, the WIDTH deviceparameter is in units of UTF-8 code points and is used with $X to control truncation and wrapping for output and maintenance of $X and $Y for input. </p>
<p>In M mode if WIDTH is set to 0, GT.M uses the default WIDTH of the TRM and SOC devices. USE x:WIDTH=0 is equivalent to USE x:(WIDTH=&lt;device-default&gt;:NOWRAP. For SOC, SD and FIFO devices in M mode, the device default is the RECORDSIZE. </p>
<p>GT.M format control characters, FILTER, and the device WIDTH and WRAP also have an effect on $X. </p>
<p>In UTF-8 mode and SOC output, the WIDTH deviceparameter specifies the number of UTF-8 characters. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="wrap_use_9"></a>WRAP<a class="indexterm" name="idp72858512"></a>
</h5></div></div></div>
<p>[NO]WRAP  Applies to: TRM SOC NULL SD <span>FIFO PIPE</span></p>
<p>Enables or disables automatic record termination. When the current record size ($X) reaches the maximum WIDTH and the device has WRAP enabled, GT.M starts a new record, as if the routine had issued a WRITE ! command.  When reading, WRAP only determines whether $X remains within the range of zero to WIDTH.</p>
<p>Note that WRAP is enabled by default for SD, NULL, FIFO, PIPE and SOCKET. For TRM, WRAP is enabled by default if the terminfo variable auto_right_margin (capname "am") is set. </p>
<p>NOWRAP causes GT.M to require a WRITE ! to terminate the record. NOWRAP allows $X to become greater than the device WIDTH for terminals and null devices.</p>
<p>The combination of STREAM and NOWRAP on disk files allows you to write data of arbitrary length without truncation. Without the STREAM option, the WRAP option determines the action taken when the record length exceeds the device WIDTH. NOWRAP causes GT.M to truncate the record, while WRAP causes GT.M to insert a format control character except for FIXED format.</p>
<p>Example:</p>
<p>See WRAP examples in the OPEN deviceparameters section.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="x_use_9"></a>X<a class="indexterm" name="idp72844064"></a>
</h5></div></div></div>
<p>X=intexpr  Applies to: TRM</p>
<p>$X positions the cursor to a vertical column on the terminal. If NOWRAP is enabled or intexpr&lt;WIDTH, GT.M sets $X=intexpr. If WRAP is enabled and intexpr&gt;WIDTH, GT.M sets $X=intexpr#WIDTH, where # is the GT.M modulo operator. The resulting $X determines the actual physical position. </p>
<p>To ensure that $Y and $X match what is occurring visually on the terminal, the GT.M deviceparameters and the device characteristics must match at all times.</p>
<p>The terminal hardware may affect physical cursor positioning. The X deviceparameter does not change the cursor row or update $Y.</p>
<div class="informaltable"><table border="0">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr valign="top">
<td align="left" valign="top">
         <p class="relatedtopics">See Also</p>
        </td>
<td align="left" valign="top">
         <div class="itemizedlist"><ul class="itemizedlist" type="disc" compact>
<li class="listitem"><p>
<a class="xref" href="ch09s09.html#y_use_9" title="Y">&#8220;Y&#8221;</a></p></li>
<li class="listitem"><p><a class="xref" href="ch09s03.html" title="Using Terminals">&#8220;Using Terminals&#8221;</a></p></li>
<li class="listitem"><p><a class="xref" href="ch09s01.html#mainetance_of_z_and_y" title="Maintenance of $X and $Y">&#8220;Maintenance of $X and $Y&#8221;</a></p></li>
</ul></div>
        </td>
</tr></tbody>
</table></div>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="y_use_9"></a>Y<a class="indexterm" name="idp72945088"></a>
</h5></div></div></div>
<p>Y=intexpr  Applies to: TRM </p>
<p>Positions the cursor to a horizontal row on the terminal.</p>
<p>GT.M sets $Y=intexpr#LENGTH, where # is the GT.M modulo operator. If intexpr&lt;LENGTH, the resulting $Y determines the physical position. If intexpr&gt;LENGTH, the cursor is positioned so that $Y=intexpr#LENGTH, where # is the GT.M module operator. The terminal hardware may affect physical cursor positioning.</p>
<p>To ensure that $Y and $X match what is occurring visually on the terminal, the GT.M deviceparameters and the device characteristics must match at all times. For example, if a process <span>initiates a subprocess that</span> changes the terminal wrap setting from NOWRAP, previously set with the GT.M USE command to WRAP , GT.M does not reflect the change when the subprocess completes. Therefore, wraps on the terminal do not reflect in the values of $X and $Y. </p>
<p>The Y deviceparameter does not change the cursor column or update $X.</p>
<div class="informaltable"><table border="0">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr valign="top">
<td align="left" valign="top">
         <p class="relatedtopics">See Also</p>
        </td>
<td align="left" valign="top">
         <div class="itemizedlist"><ul class="itemizedlist" type="disc" compact>
<li class="listitem"><p>
<a class="xref" href="ch09s09.html#x_use_9" title="X">&#8220;X&#8221;</a></p></li>
<li class="listitem"><p><a class="xref" href="ch09s03.html" title="Using Terminals">&#8220;Using Terminals&#8221;</a></p></li>
<li class="listitem"><p><a class="xref" href="ch09s01.html#mainetance_of_z_and_y" title="Maintenance of $X and $Y">&#8220;Maintenance of $X and $Y&#8221;</a></p></li>
</ul></div>
        </td>
</tr></tbody>
</table></div>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="zbfsize_use_9"></a>ZBFSIZE<a class="indexterm" name="idp72915360"></a>
</h5></div></div></div>
<p>ZBFSIZE  Applies to: SOC</p>
<p>Allocates a buffer used by GT.M when reading from a socket. The ZBFSIZE deviceparameter should be at least as big as the largest message expected.</p>
<p>By default, the size of ZBFSIZE is 1024 and the maximum it can be is 1048576.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="zdelay_use_9"></a>ZDELAY<a class="indexterm" name="idp72982672"></a>
</h5></div></div></div>
<p>Z[NO]DELAY  Applies to: SOC</p>
<p>Controls buffering of data packets by the system TCP stack using the TCP_NODELAY option to the SETSOCKOPT system call. This behavior is sometimes known as the Nagle algorithm. The default is ZDELAY. This delays sending additional packets until either an acknowledgement of previous packets is received or an interval passes. If several packets are sent from one end of a connection before the other end responds, setting ZNODELAY may be desirable though at the cost of additional packets being transmitted over the network. ZNODELAY must be fully spelled out.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="zff_use_9"></a>ZFF<a class="indexterm" name="idp72982032"></a>
</h5></div></div></div>
<p>Z[NO]FF=expr  Applies to: SOC</p>
<p>expr specifies a string of characters, typically in $CHAR() format to send to socket device, whenever a routine issues a WRITE #. When no string is specified or when ZFF="", then no characters are sent. The default in GT.M is ZNOFF.</p>
<p>Example:</p>
<pre class="programlisting">u tcpdev:(zwidth=80:zff=$char(13):zlength=24) </pre>
<p>This example sends $char(13) to the current socket of device tcpdev on every WRITE #. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="zibfsize_use_9"></a>ZIBFSIZE<a class="indexterm" name="idp72831536"></a>
</h5></div></div></div>
<p>ZIBFSIZE  Applies to: SOC</p>
<p>Sets the buffer size used by the network software (setsockopt SO_RCVBUF).</p>
<p>The default and the maximum values depend on the platform and/or system parameters.</p>
<p>Note that LOCAL sockets ignore the ZIBFSIZE deviceparameter. </p>
</div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="use_device_param_table"></a>
    <span>USE Deviceparameters </span>Summary</h4></div></div></div>
<p></p>
<div class="informaltable">
<a name="tblusedevsum"></a><table border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr><th colspan="7">
                  <p>USE Deviceparameters</p>
                </th></tr>
<tr>
<th>
                  <p>USE DEVICEPARAMETER</p>
                </th>
<th>
                  <p>TRM</p>
                </th>
<th>
                  <p>SD</p>
                </th>
<th>
                  <p>FIFO</p>
                </th>
<th>PIPE</th>
<th>
                  <p>NULL</p>
                </th>
<th>
                  <p>SOC</p>
                </th>
</tr>
</thead>
<tfoot><tr><th colspan="7">
                  <p>TRM:  Valid for terminals and printers</p>
                  <p>SD:  Valid for sequential files</p>
                  <p>FIFO:  Valid for FIFOs</p>
                <p>PIPE:  Valid for PIPE devices</p>
                  <p>NULL:  Valid for null devices</p>
                  <p>SOC:  Valid for socket devices</p>
                
                </th></tr></tfoot>
<tbody>
<tr>
<td>
                  <p>ATTACH</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>CANONICAL</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>[NO]CENABLE</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>[I|O]CHSET</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>CLEARSCREEN</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>CONNECT</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>[NO]CONVERT</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>CTRAP=expr</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>[NO]DELIMITER</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>DETACH=expr</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>DOWNSCROLL</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>[NO]ECHO</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>[NO]EMPTERM</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>ERASELINE</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>[NO]ESCAPE</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>EXCEPTION=expr</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>[NO]FILTER[=expr]</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>FLUSH</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>[NO]FOLLOW</p>
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td class="auto-generated"> </td>
</tr>
<tr>
<td>
                  <p>[NO]HOSTSYNC</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>IKEY</p>
                </td>
<td> </td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>INREWIND</p>
                </td>
<td> </td>
<td><p>X</p></td>
<td> </td>
<td> </td>
<td> </td>
<td>
                </td>
</tr>
<tr>
<td>
                  <p>INSEEK</p>
                </td>
<td> </td>
<td><p>X</p></td>
<td> </td>
<td> </td>
<td> </td>
<td>
                </td>
</tr>
<tr>
<td>
                  <p>IOERROR</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>KEY</p>
                </td>
<td> </td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>[Z]LENGTH=expr</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                 </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>LISTEN</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>OKEY</p>
                </td>
<td> </td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>OUTREWIND</p>
                </td>
<td> </td>
<td><p>X</p></td>
<td> </td>
<td> </td>
<td> </td>
<td>
                </td>
</tr>
<tr>
<td>
                  <p>OUTSEEK</p>
                </td>
<td> </td>
<td><p>X</p></td>
<td> </td>
<td> </td>
<td> </td>
<td>
                </td>
</tr>
<tr>
<td>
                  <p>[NO]PASTHRU</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>REWIND</p>
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>SEEK=strexpr</p>
                </td>
<td> </td>
<td><p>X</p></td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>SOCKET</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>TERMINATOR[=expr]</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>[NO]TRUNCATE</p>
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>[NO]TYPEAHEAD</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>UPSCROLL</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>[Z]WIDTH=intexpr</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td><p>X</p></td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>[NO]WRAP</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>X=intexpr</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>Y=intexpr</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
</tr>
<tr>
<td>
                  <p>ZBFSIZE</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>Z[NO]DELAY</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>Z[NO]FF</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p>ZIBFSIZE</p>
                </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="read_cmmd_9"></a>READ<a class="indexterm" name="idp72917344"></a>
</h3></div></div></div>
<p>The READ command transfers input from the current device to a global or local variable specified as a READ argument. For convenience, READ also accepts arguments that perform limited output to the current device.</p>
<p>The format of the READ command is:</p>
<pre class="programlisting">R[EAD][:tvexpr] glvn|*glvn|glvn#intexpr|strlit|fcc[,...]</pre>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>The optional truth-valued expression immediately following the command is a command postconditional that controls whether or not GT.M executes the command.</p></li>
<li class="listitem"><p>A subscripted or unsubscripted global or local variable name specifies a variable into which to store the input; the variable does not have to exist prior to the READ; if the variable does exist prior to the READ, the READ replaces its old value.</p></li>
<li class="listitem"><p>For fixed format files, READ X always read WIDTH characters. </p></li>
<li class="listitem"><p>For VARIABLE or STREAM format files, READ X reads up to WIDTH characters, stopping if a line terminator or end of file is found first. </p></li>
<li class="listitem"><p>When an asterisk (*) immediately precedes the variable name, READ accepts one character of input and places the ASCII code for that character in the variable.</p></li>
<li class="listitem"><p>When a number sign (#) and a non-zero integer expression immediately follow the variable name, the integer expression determines the maximum number of characters accepted as input to the read; such reads terminate when GT.M reads the number of characters specified by the integer expression or a terminator in the input stream, whichever occurs first. </p></li>
<li class="listitem"><p>To provide a concise means of issuing prompts, GT.M sends string literal and format control character (!,?intexpr,#) arguments of a READ to the current device as if they were arguments of a WRITE.</p></li>
<li class="listitem"><p>An indirection operator and an expression atom evaluating to a list of one or more READ arguments form a legal argument for a READ.</p></li>
</ul></div>
<p>The maximum length of the input string is the smaller of the device buffer size limitation or the GT.M maximum string size (1,048,576 bytes). If a record is longer than the maximum record length, GT.M returns the record piece by piece during sequential reads, for devices that allow it.</p>
<p>When a string literal appears as an argument to a READ, M writes the literal to the current device. String literals appear as READ arguments to serve as prompts for input. GT.M does not permit expression arguments on a READ to act as prompts. Variable prompts must appear as arguments to a WRITE. If a variable appears as an argument to a READ, GT.M always interprets it as input, never as output. This facility is used mostly with terminal I/O.</p>
<p>The READ commands adjust $X and $Y, based on the length of the input read.</p>
<p>In UTF-8 mode, the READ command uses the character set value specified on the device OPEN as the character encoding of the input device. If character set "M" or "UTF-8" is specified, the data is read with no transformation. If character set is "UTF-16", "UTF-16LE", or "UTF-16BE", the data is read with the specified encoding and transformed to UTF-8. If the READ command encounters an illegal character or a character outside the selected representation, it produces a run-time error. The READ command recognizes all <span class="trademark">Unicode</span>(R) line terminators for non-FIXED devices. See "Line Terminators" section for more details. In M mode, characters and bytes have a one-to-one relationship and therefore READ can be used to read bit-streams of non-character data. </p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="read_cmmd_star"></a>READ * Command<a class="indexterm" name="idp72939024"></a>
</h4></div></div></div>
<p>The READ * command reads one character from the current device and returns the decimal ASCII representation of that character into the variable specified for the READ * command. READ * appears most frequently in communication protocols, or in interactive programs where single character answers are appropriate.</p>
<p>In UTF-8 mode, the READ * command accepts one <span class="trademark">Unicode</span>(R) character input and puts the numeric code-point value for that character into the variable. The READ * command reads one to four bytes, depending on the encoding and returns the numeric code-point value of the character. If ICHSET specifies "UTF-16", "UTF-16LE" or "UTF-16BE", the READ * command reads a byte pair or two byte pairs (if it is a surrogate pair) and returns the numeric code-point value. If ICHSET is M, the READ * command reads a single byte and returns the numeric byte value just like in M mode. </p>
<p>The following example reads the value "A", and returns the decimal ASCII representation of "A" in the variable X.</p>
<p>Example:</p>
<pre class="programlisting">GTM&gt; READ *X
A
GTM&gt; WRITE X
65</pre>
<p>If a timeout occurs before GT.M reads a character, the READ * returns a negative one (-1) in the variable.</p>
<pre class="programlisting">GTM&gt;Set filename="mydata.out"; assume that mydata.out contains "<span class="symbol">&#20027;&#35201;&#38632;&#22312;&#35199;&#29677;&#29273;&#20572;&#30041;&#22312;&#24179;&#21407;</span>".
GTM&gt;Open filename:(readonly:ichset="UTF-16LE")
GTM&gt;Use filename
GTM&gt;Read *x
GTM&gt;Close filename
GTM&gt;Write $char(x)
&#20027;</pre>
<p>In this example, the READ * command reads the first character of the file mydata.out according to the encoding specified by ICHSET. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="read_x_maxlen_cmmd"></a>READ X#maxlen Command<a class="indexterm" name="idp73025888"></a>
</h4></div></div></div>
<p>The READ X#maxlen command limits the maximum size of the input to a maximum of "maxlen" characters, where maxlen is an integer expression.</p>
<p>If a READ follows a READ X#maxlen command, the READ returns the remainder of the current record. </p>
<p>If a terminator arrives before maxlen characters are received the READ X#maxlen terminates.</p>
<p>For fixed format files, If WIDTH - $X is greater than len, READ X#maxlen reads maxlen characters otherwise READ reads WIDTH - $X characters. Fewer may be returned if end of file is reached. </p>
<p>For VARIABLE or STREAM format files, READ X#maxlen reads up to MIN(maxlen, WIDTH - $X) characters, stopping if it finds line terminator or end of file.</p>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="write_cmmd_9"></a>Write<a class="indexterm" name="idp72612944"></a>
</h3></div></div></div>
<p>The WRITE command transfers a character stream specified by its arguments to the current device.</p>
<p>The format of the WRITE command is:</p>
<pre class="programlisting">W[RITE][:tvexpr] expr|*intexpr|fcc[,...]</pre>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>The optional truth-valued expression immediately following the command is a command postconditional that controls whether or not GT.M executes the command.</p></li>
<li class="listitem"><p>An expression argument supplies the text of a WRITE.</p></li>
<li class="listitem"><p>When a WRITE argument consists of a leading asterisk (*) followed by an integer expression, WRITE outputs one character associated with the code specified by the integer evaluation of the expression.</p></li>
<li class="listitem"><p>WRITE also accepts format control characters as arguments; format control characters modify the position of a virtual cursor: an exclamation point (!) produces the device specific record terminator (for example, new line for a terminal), a number sign (#) produces device specific page terminator (for example, form feed for a terminal) and a question mark (?) followed by an expression moves the virtual cursor to the column specified by the integer evaluation of the expression if the virtual cursor is to the "left" of the specified column.</p></li>
<li class="listitem"><p>When directed to a device bound to a mnemonicspace, WRITE also accepts controlmnemonics, which are keywords specific to the binding &#8211; they are delimited by a slash (/) prefix and optionally followed by a parenthetical list of arguments. The parentheses "( )" are optional when there are no arguments, but must appear even if there is a single argument</p></li>
<li class="listitem"><p>An indirection operator and an expression atom evaluating to a list of one or more WRITE arguments form a legal argument for a WRITE.</p></li>
<li class="listitem"><p>In the UTF-8 mode, the WRITE command uses the character set specified on the device OPEN as the character encoding of the output device. If character set specifies "M" or "UTF-8", GT.M WRITEs the data with no transformation. If character set specifies "UTF-16", "UTF-16LE" or "UTF-16BE", the data is assumed to be encoded in UTF-8 and WRITE transforms it to the character encoding specified by character set device parameter.</p></li>
<li class="listitem"><p>If a WRITE command encounters an illegal character in UTF-8 mode, it produces a run-time error irrespective of the setting of VIEW "BADCHAR". </p></li>
</ul></div>
<p>GT.M can write up to 1,048,576  bytes (the GT.M maximum string size) as a result of a single WRITE argument. GT.M buffers output into a "logical record" for all devices except sockets without DELIMITERs and sequential devices with STREAM enabled. The WRITE command appends a string to the current record of the current device. GT.M does not write to the output device until the buffer is full, a GT.M format control character forces a write, a USE command, a CLOSE command, or, for terminals, the buffer becomes stale. The GT.M compiler breaks a concatenated WRITE argument into a series of WRITE arguments to eliminate the overhead of the concatentation. If circumstances provide a reason for a single WRITE, perform the concatenation prior to the WRITE. </p>
<p>Each device has a WIDTH and a LENGTH that define the virtual "page". The WIDTH determines the maximum size of a record for a device, while the LENGTH determines how many records fit on a page. When the current record size ($X) reaches the maximum WIDTH and the device has WRAP enabled, GT.M starts a new record. When the current line ($Y) reaches the maximum LENGTH, GT.M starts a new page.</p>
<p>For devices OPENed with a CHSET supported in UTF-8 mode, WRITE * takes intexpr as a code-point and writes the associated <span class="trademark">Unicode</span>(R) character in the encoding specified by CHSET. For devices OPENed in M mode, WRITE * takes intexpr as an ASCII value and writes the associated ASCII character.</p>
<p>The WRITE command also has several format control characters that allow the manipulation of the virtual cursor. For all I/O devices, the GT.M format control characters do the following:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>WRITE !: Clears $X and increments $Y and terminates the logical record in progress. The definition of "logical record" varies from device to device, and is discussed in each device section.</p></li>
<li class="listitem"><p>WRITE #: Clears $X and $Y and terminates the logical record in progress.</p></li>
<li class="listitem"><p>WRITE ?n: If n is greater than $X, writes n-$X spaces to the device, bringing $X to n. If n is less than or equal to $X, WRITE ?n has no effect. When WRAP is enabled and n exceeds the LENGTH of the line, WRITE ?n increments $Y.</p></li>
</ul></div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>If $X is less than WIDTH, WRITE ! writes WIDTH - $X spaces. </p></td></tr>
</table></div>
<p>For devices OPENed with a CHSET supported in UTF-8 mode, WRITE * takes intexpr as a code-point and writes the associated Unicode character in the encoding specified by CHSET. For devices OPENed in M mode, WRITE * takes intexpr as an ASCII value and writes the associated ASCII character.</p>
<p>In UTF-8 mode, if a WRITE command encounters an illegal character, it produces a run-time error irrespective of the setting of VIEW "BADCHAR". </p>
<p>For more information, see the sections on specific I/O devices.</p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="writestar"></a>WRITE *</h3></div></div></div>
<p>When the argument of a WRITE command consists of a leading asterisk (*) followed by an integer expression, the WRITE command outputs the character represented by the code-point value of that integer expression. </p>
<p>With character set M specified at device OPEN, the WRITE * command transfers the character (byte) associated with the numeric value of the integer expression. With character UTF-8 specified at device OPEN, the WRITE command outputs the character associated with the numeric code-point value. If character set "UTF-16", "UTF-16LE" or "UTF-16BE" is specified, WRITE * transforms the character code to the mapping specified by that character set. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="close_cmmd_9"></a>Close<a class="indexterm" name="idp72935696"></a>
</h3></div></div></div>
<p>The CLOSE command breaks the connection between a process and a device.</p>
<p>The format of the CLOSE command is:</p>
<pre class="programlisting">C[LOSE][:tvexpr] expr[:(keyword[=expr][:...])][,...]</pre>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>The optional truth-valued expression immediately following the command is a command postconditional that controls whether or not GT.M executes the command.</p></li>
<li class="listitem"><p>The required expression specifies the device to CLOSE.</p></li>
<li class="listitem"><p>The optional keywords specify deviceparameters that control device behavior; some deviceparameters take arguments delimited by an equal sign (=); if there is only one keyword, the surrounding parentheses are optional.</p></li>
<li class="listitem"><p>An indirection operator and an expression atom evaluating to a list of one or more CLOSE arguments form a legal argument for a CLOSE.</p></li>
</ul></div>
<p>When a CLOSE is issued, GT.M flushes all pending output to the device, and processes any deviceparameters. CLOSEing a device not currently OPEN has no effect.</p>
<p>If a partial record has been output, a WRITE ! is done to complete it. To suppress this action, set $X to zero before the CLOSE. </p>
<p>GT.M retains the characteristics of all device types, except a <span> sequential file</span>, for use in case of subsequent re-OPENs. If the device is a <span> sequential file</span>, characteristics controlled by deviceparameters are lost after the CLOSE. </p>
<p>If the device being CLOSEd is $IO, GT.M implicitly USEs $PRINCIPAL. GT.M ignores CLOSE $PRINCIPAL.</p>
<p>Example:</p>
<pre class="programlisting">CLOSE SD:RENAME=SD_".SAV"</pre>
<p>This closes the device and, if it is a disk file, renames it to have the type .SAV.</p>
<p>Example:</p>
<pre class="programlisting">CLOSE SOCKDEV:(SOCKET="LOCALSOCK1":DELETE)</pre>
<p>This deletes the socket file associated with LOCALSOCK1 if it is a listening socket and closes only the named socket on the socket device.</p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="close_device_params_9"></a>CLOSE Deviceparameters</h4></div></div></div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="delete_close"></a>DELETE<a class="indexterm" name="idp73149824"></a>
</h5></div></div></div>
<p>DELETE  Applies to:  SD FIFO SOC(LOCAL)</p>
<p>Instructs GT.M to delete  the disk file after GT.M closes it. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="destroy_close"></a>DESTROY</h5></div></div></div>
<p>[NO]DESTROY Applies to: SD, <span>FIFO, </span>SOC</p>
<p>Determines whether the process retains device characteristics after CLOSE. The default is DESTROY
for sequential disk files and FIFO devices and NODESTROY for SOCKET devices. While NODESTROY
allows the re-OPEN of previously CLOSE'd device with the same characteristics as when it was last
CLOSE'd, as described by the M standard, every tracked device uses process memory. A device that
has been DESTROYed on CLOSE cannot be re-opened with the previous characteristics, but reclaims
memory used by the process for that device. [NO]DESTROY is ignored for CLOSE of a specific socket
rather than the entire socket device.</p>
<p>Because it forms a communication link with a process it creates, CLOSE of a PIPE device always eliminates the device and hence ignores any [NO]DESTROY deviceparameter.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="exception_close"></a>EXCEPTION<a class="indexterm" name="idp73157968"></a>
</h5></div></div></div>
<p>EXCEPTION=expr  Applies to: All devices</p>
<p>Defines an error handler for an I/O device. The expression must contain a fragment of GT.M code (for example, GOTO ERRFILE) that GT.M XECUTEs when the driver for the device detects an error, or an entryref to which GT.M transfers control, as appropriate for the current gtm_ztrap_form.</p>
<p>The expression must contain a fragment of GT.M code (for example, GOTO ERRFILE) that GT.M XECUTEs when the driver for the device detects an error, or an entryref to which GT.M transfers control, as appropriate for the current gtm_ztrap_form. </p>
<p>For more information on error handling, refer to <a class="xref" href="ch13.html" title="Chapter 13. Error Processing">Chapter 13: &#8220;<i>Err<span>or</span> Processing</i>&#8221;</a>.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="group_close"></a>GROUP<a class="indexterm" name="idp73154240"></a>
</h5></div></div></div>
<p>GROUP=expr  Applies to: SOC(LOCAL), SD<span>, FIFO</span></p>
<p>Specifies access permission on a UNIX file for other users in the file owner's group. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating respectively Read, Write, and eXecute access. When any one of these deviceparameters (OWNER, GROUP, WORLD) appear on a CLOSE of an existing file, any user category, that is not explicitly specified remains unchanged.</p>
<p>In order to modify file security, the user who issues the CLOSE must have <span>ownership</span>.</p>
<p>By default, CLOSE does not modify the <span>permissions</span> on an existing file. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="owner_close"></a>OWNER<a class="indexterm" name="idp73150624"></a>
</h5></div></div></div>
<p>OWNER=expr   Applies to: SOC(LOCAL) SD <span>FIFO</span></p>
<p>Specifies access permission on a UNIX file for the owner of the file. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating respectively Read, Write, and eXecute access. When any one of these deviceparameters appear on a CLOSE of an existing file, any user category (GROUP, SYSTEM, WORLD), that is not explicitly specified remains unchanged.</p>
<p>In order to modify file security, the user who issues the CLOSE must have <span>ownership</span>.</p>
<p>By default, CLOSE does not modify the <span>permissions</span> on an existing file. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="rename_close"></a>RENAME<a class="indexterm" name="idp73161264"></a>
</h5></div></div></div>
<p>RENAME=expr   Applies to: SD</p>
<p>Changes the file name to the name contained in the argument string. <span> When the expression omits part of the pathname, GT.M constructs the full pathname by applying the defaults discussed in the section on device specifications.</span></p>
<p>If the process has sufficient access permissions, it may use RENAME to specify a different directory as well as file name. RENAME cannot move a file to a different filesystem.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="socket_close"></a>SOCKET<a class="indexterm" name="idp73155632"></a>
</h5></div></div></div>
<p>SOCKET=expr   Applies to: SOC</p>
<p>The socket specified in expr is closed. Specifying a socket that has not been previously OPENed generates an error. If no SOCKET deviceparameter is specified on a CLOSE for a socket device, the socket device and all sockets associated with it are closed.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="system_close_unix"></a>SYSTEM<a class="indexterm" name="idp73179168"></a>
</h5></div></div></div>
<p>SYSTEM=expr   Applies to: SOC(LOCAL) SD FIFO</p>
<p>This deviceparameter is a synonym for OWNER that is maintained in UNIX for compatibility with VMS applications.</p>
<p>By default, CLOSE does not modify the permissions on an existing file. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="close_unix"></a>TIMEOUT</h5></div></div></div>
<p>TIMEOUT=expr Applies to: PIPE</p>
<p>Performs a timed check (in seconds) on the termination status of the PIPE co-process of a PIPE device that is not OPEN'd with the INDEPENDENT deviceparameter. intexpr specifies time in seconds. The default is 2 seconds if TIMEOUT is not specified.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="uic_unix_close"></a>UIC<a class="indexterm" name="idp73173296"></a>
</h5></div></div></div>
<p>UIC=exprgroup number    Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies the group that has access to the file. The format of the string is "g,i" where g is a decimal number representing the group portion of the UIC and i is a decimal number representing the individual portion. </p>
<p>Specifies the owner and affects access to the file. The expression evaluates to the numeric identifier of the new owner.</p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="world_close"></a>WORLD<a class="indexterm" name="idp73154512"></a>
</h5></div></div></div>
<p>WORLD=expr    Applies to: SOC(LOCAL) SD <span>FIFO</span></p>
<p>Specifies access permissions for users not in the owner's group on a UNIX file. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating respectively Read, Write, and eXecute access. When any one of these deviceparameters (OWNER, GROUP, WORLD) appears on a CLOSE of a new file, any user category that is not explicitly specified is given the default character string. When any one of these deviceparameters (OWNER, GROUP, WORLD) appears on a CLOSE of an existing file, any user category , that is not explicitly specified remains unchanged.</p>
<p>In order to modify file security, the user who issues the CLOSE must have <span> ownership</span>.</p>
<p>By default, CLOSE and CLOSE do not modify the <span>permissions</span> on an existing file. Unless otherwise specified, when CLOSE creates a new file, it establishes security using standard defaulting rules.</p>
<p>In order to modify file security, the user who issues the CLOSE must have <span> ownership</span>.</p>
</div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="close_device_param_table"></a>CLOSE Deviceparameters Table</h4></div></div></div>
<p></p>
<div class="informaltable">
<a name="tblclosedevsum"></a><table border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr><th colspan="5">
                  <p>CLOSE Deviceparameters</p>
                </th></tr>
<tr>
<th>
                  <p>CLOSE DEVICEPARAMETER</p>
                </th>
<th>
                  <p>TRM</p>
                </th>
<th>
                  <p>SD</p>
                </th>
<th>
                  <p>FIFO</p>
                </th>
<th>
                  <p>SOC</p>
                </th>
</tr>
</thead>
<tfoot><tr align="left"><th colspan="5" align="left">
                  <p>SD:  Valid for sequential disk files</p>
                  <p>TRM: Valid for terminals and printers</p>
                  <p>FIFO: Valid for FIFOs</p>
                  <p>NULL: Valid for NULL devices</p>
                  <p>SOC: Valid for Socket devices</p>
                </th></tr></tfoot>
<tbody>
<tr>
<td>
                  <p><a class="xref" href="ch09s09.html#delete_close" title="DELETE">&#8220;DELETE&#8221;</a></p>
                  
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p><a class="xref" href="ch09s09.html#destroy_close" title="DESTROY">&#8220;DESTROY&#8221;</a></p>
                  
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td><p>X</p></td>
</tr>
<tr>
<td>
                  <p><a class="xref" href="ch09s09.html#exception_close" title="EXCEPTION">&#8220;EXCEPTION&#8221;</a></p>
                  
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p><a class="xref" href="ch09s09.html#group_close" title="GROUP">&#8220;GROUP&#8221;</a></p>
                  
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
</tr>
<tr>
<td>
                  <p><a class="xref" href="ch09s09.html#owner_close" title="OWNER">&#8220;OWNER&#8221;</a></p>
                  
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
</tr>
<tr>
<td>
                  <p><a class="xref" href="ch09s09.html#rename_close" title="RENAME">&#8220;RENAME&#8221;</a></p>
                  
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
</tr>
<tr>
<td>
                  <p><a class="xref" href="ch09s09.html#rewind_9" title="REWIND">&#8220;REWIND&#8221;</a></p>
                  
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
                  <p><a class="xref" href="ch09s09.html#socket_close" title="SOCKET">&#8220;SOCKET&#8221;</a></p>
                  
                </td>
<td> </td>
<td> </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
</tr>
<tr>
<td>
                  <p><a class="xref" href="ch09s09.html#system_close_unix" title="SYSTEM">&#8220;SYSTEM&#8221;</a></p>
                  
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
</tr>
<tr>
<td>
                  <p><a class="xref" href="ch09s09.html#uic_unix_close" title="UIC">&#8220;UIC&#8221;</a></p>
                  
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
</tr>
<tr>
<td>
                  <p><a class="xref" href="ch09s09.html#world_close" title="WORLD">&#8220;WORLD&#8221;</a></p>
                  
                </td>
<td> </td>
<td>
                  <p>X</p>
                </td>
<td>
                  <p>X</p>
                </td>
<td> </td>
</tr>
</tbody>
</table>
</div>
<p></p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note">
<tr>
<td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>Since EXCEPTION is the only CLOSE deviceparameter that applies to NULL, the NULL device column is not shown in the table above.</p></td></tr>
</table></div>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="device_param_summ_table"></a>Deviceparameter Summary<span> Table</span>
</h3></div></div></div>
<p>The following table lists all of the deviceparameters and shows the commands to which they apply.</p>
<p></p>
<div class="informaltable">
<a name="tbldevsumm"></a><table border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr><th colspan="4">
   <p>Deviceparameter Summary</p>
  </th></tr>
<tr>
<th>
   <p>DEVICEPARAMETER</p>
  </th>
<th>
   <p>OPEN</p>
  </th>
<th>
   <p>USE</p>
  </th>
<th>
   <p>CLOSE</p>
  </th>
</tr>
</thead>
<tbody>
<tr>
<td>
   <p>APPEND</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
   <p>ATTACH</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>BLOCKSIZE=intexpr</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[NO]CENABLE</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>CLEARSCREEN</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>CONNECT</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[NO]CONVERT</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>CTRAP</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  
</td>
<td> </td>
</tr>
<tr>
<td>
   <p>DELETE</p>
  </td>
<td> </td>
<td> </td>
<td>
   <p>X</p>
  </td>
</tr>
<tr>
<td>
   <p>[NO]DELIMITER</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[NO]DESTROY</p>
  </td>
<td>
  </td>
<td>
  </td>
<td>
<p>X</p>
</td>
</tr>
<tr>
<td>
   <p>DETACH</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>DOWNSCROLL</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[NO]ECHO</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>ERASELINE</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[NO]ESCAPE</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>EXCEPTION=expr</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
</tr>
<tr>
<td>
   <p>[NO]FILTER[=expr]</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[NO]FIXED</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
   <p>FLUSH</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>GROUP=expr</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
</tr>
<tr>
<td>
   <p>KEY</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p></p>
  </td>
</tr>
<tr>
<td>
   <p>IKEY</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p></p>
  </td>
</tr>
<tr>
<td>
   <p>IOERROR=expr</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[NO]HOSTSYNC</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[Z]LENGTH=intexpr</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>NEWVERSION</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
   <p>OKEY</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p></p>
  </td>
</tr>
<tr>
<td>
   <p>OWNER=expr</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
</tr>
<tr>
<td>
   <p>[NO]PASTHRU</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[NO]RCHK</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[NO]READONLY</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
   <p>RECORDSIZE=intexpr</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
   <p>RENAME=expr</p>
  </td>
<td> </td>
<td> </td>
<td>
   <p>X</p>
  </td>
</tr>
<tr>
<td>
   <p>[NO]RETRY</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>REWIND</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
</tr>
<tr>
<td>
   <p>SKIPFILE=intexpr</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>SOCKET</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
</tr>
<tr>
<td>
   <p>SPACE=intexpr</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
</tr>
<tr>
<td>
   <p>[NO]STREAM</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
   <p>SYSTEM=expr</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
</tr>
<tr>
<td>
   <p>TERMINATOR=expr</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>TIMEOUT=expr</p>
  </td>
<td> </td>
<td>
   <p></p>
  </td>
<td><p>X</p></td>
</tr>
<tr>
<td>
   <p>[NO]TRUNCATE</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[NO]TTSYNC</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[NO]TYPEAHEAD</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>UIC=expr</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
</tr>
<tr>
<td>
   <p>UPSCROLL</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>VARIABLE</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>
   <p>[Z]WIDTH=intexpr</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>WORLD=expr</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
</tr>
<tr>
<td>
   <p>[Z][NO]WRAP</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>WRITELB=expr</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>X=intexpr</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>Y=intexpr</p>
  </td>
<td> </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>ZBFSIZE</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>Z[NO]DELAY</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>Z[NO]FF</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>ZIBFSIZE</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
<tr>
<td>
   <p>LISTEN=expr</p>
  </td>
<td>
   <p>X</p>
  </td>
<td>
   <p>X</p>
  </td>
<td> </td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ch09s08.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="ch09.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="ch10.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Using Socket Devices </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 10. Utility Routines</td>
</tr>
</table>
</div>
</body>

<!-- Mirrored [from host tinco.pair.com [file /bhaskar/gtm/doc/books/pg/UNIX_manual/ch09s09.html]] -->
</html>
