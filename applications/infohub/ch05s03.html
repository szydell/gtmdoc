<html>
<!-- Mirrored from tinco.pair.com/bhaskar/gtm/doc/applications/infohub/ch05s03.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 14 Mar 2019 11:48:40 GMT -->
<HEAD><META HTTP-EQUIV="Pragma" CONTENT="no-cache"><META HTTP-EQUIV="Expires" CONTENT="-1"><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Installing the SNMP Plugin</title><link rel="stylesheet" href="gtm.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="titlepage.html" title="FIS InfoHub"><link rel="up" href="ch05.html" title="Chapter 5. Appendix A: FIS GT.M SNMP Plugin"><link rel="prev" href="ch05s02.html" title="SNMP Plugin Overview"><link rel="next" href="ch05s04.html" title="Operating the SNMP Plugin"><link rel="copyright" href="ln-idp160629056.html" title="Legal Notice"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Installing the SNMP Plugin</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s02.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Appendix A: FIS GT.M SNMP Plugin </th><td width="20%" align="right"> <a accesskey="n" href="ch05s04.html">Next</a></td></tr></table><hr></div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="titlepage.html">FIS InfoHub</a></span> &gt; <span class="breadcrumb-link"><a href="ch05.html">Appendix A: FIS GT.M SNMP Plugin </a></span> &gt; <span class="breadcrumb-node">Installing the SNMP Plugin</span></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="install_snmplugin"></a>Installing the SNMP Plugin</h2></div></div></div><p>To install the SNMP Plugin, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Use your package manager to download and install the following packages:</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td>
                    <p>1</p>
                  </td><td>
                    <p>
                      <code class="code">snmp</code>
                    </p>
                  </td><td>
                    <p>Installs SNMP (Simple Network Management Protocol) applications like snmpget, snmpgetnext, snmptrapd, and so on. </p>
                  </td></tr><tr><td>
                    <p>2</p>
                  </td><td>
                    <p>
                      <code class="code">snmp-mibs-downloader</code>
                    </p>
                  </td><td>
                    <p>Installs and manages Management Information Base (MIB) files</p>
                  </td></tr><tr><td>
                    <p>3</p>
                  </td><td>
                    <p>
                      <code class="code">snmpd</code>
                    </p>
                  </td><td>
                    <p>SNMP (Simple Network Management Protocol) agents </p>
                  </td></tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Although the InfoHub SNMP plug-in uses NET-SNMP, NET-SNMP is not FIS software and FIS does not support NET-SNMP. The sample instructions for installing and configuring NET-SNMP are merely provided as a convenience to you. </p></td></tr></table></div><p>On Ubuntu, the command to download and install these packages is:</p><pre class="programlisting">$ sudo aptitude install snmpd snmp snmp-mibs-downloader</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: AIX Notes"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">AIX Notes</th></tr><tr><td align="left" valign="top"><p>For testing the SNMP Plugin on AIX, the FIS GT.M Team built net-snmp 5.7.2 using the following commands:</p><pre class="programlisting">./configure --disable-shared --without-kmem-usage
make
make test 
sudo make install</pre><p>To start net-snmp, execute the following command:</p><pre class="programlisting">sudo /usr/local/sbin/snmpd</pre><p>To stop net-snmp, execute the following commands:</p><pre class="programlisting">sudo /usr/local/sbin/snmpd
$ ps -ef | grep snmpd
    root 42270958        1   0 13:46:31      -  0:00 /usr/local/sbin/snmpd
...
$ sudo kill 42270958</pre><p>Here is a possible default location of SNMP files:</p><pre class="programlisting">log file: /var/log/snmpd.log
write persistent info: /var/net-snmp
library dir: /usr/local/lib
executable: /usr/local/sbin/snmpd &lt;-- This is the snmpd executable for NET-SNMP (with the corresponding /usr/local/sbin/snmptrapd)
configuration file: /usr/local/share/snmp/snmpd.conf 
MIBs dir: /usr/local/share/snmp/mibs &lt;-- You need to place the MIB in this location after generating it in step 8. 
help files: /usr/local/share/man/man[1,3,8]/snmp*</pre></td></tr></table></div><p>If you have built the binaries from source, proceed to step 2. If you have installed these packages using a package manager, proceed directly to step 3.</p></li><li class="listitem"><p>Execute the following commands to check whether the shared library dependencies of your SNMP application are available. </p><pre class="programlisting">$ ldd `which snmpget`|grep snmp</pre><p>This command produces an output like:</p><pre class="programlisting">libnetsnmp.so.30 =&gt; /usr/lib/libnetsnmp.so.30 (0x00007fc985541000)</pre><p>Execute the following command to find the location of the shared library  libnetsnmp.so:</p><pre class="programlisting">$ locate libnetsnmp.so</pre><p>If the command finds shared library dependency version (libnetsnmp.so.30 in this case), proceed directly to step 3. Otherwise, find the directory where libnetsnmp*.so and libsnmp.so are installed on your system. </p><p>Change to that directory and make symbolic links to:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>libnetsnmp*.so.&lt;ver_snmp_cmds_expect&gt; from libnetsnmp.so.&lt;installed_ver&gt;. </p></li><li class="listitem"><p>libsnmp.so.&lt;ver_snmp_cmds_expect&gt; from libsnmp.so.&lt;installed_ver&gt;.</p></li></ul></div><p>Suppose .15 version of the shared library dependencies is installed, but your smnp command line programs expect .30, you might make symbolic links as follows:</p><pre class="programlisting">$ sudo ln -s libnetsnmp.so.15 libnetsnmp.so.30
$ sudo ln -s libnetsnmpagent.so.15 libnetsnmpagent.so.30
$ sudo ln -s libnetsnmphelpers.so.15 libnetsnmphelpers.so.30
$ sudo ln -s libnetsnmpmibs.so.15 libnetsnmpmibs.so.30
$ sudo ln -s libnetsnmptrapd.so.15 libnetsnmptrapd.so.30
$ sudo ln -s libsnmp.so.15 libsnmp.so.30</pre></li><li class="listitem"><p>Add /usr/local/lib to your LD_LIBRARY_PATH. If LB_LIBRARY_PATH is not defined, set LD_LIBRARY_PATH to point to /usr/local/lib.</p></li><li class="listitem"><p>Using your favorite editor, open /etc/snmp/snmpd.conf as user root (via sudo)  (root-only access is needed to protect the community string) and ensure /etc/snmp/snmpd.conf contains the following lines:</p><pre class="programlisting"># SNMP daemon listens on default port on localhost
agentAddress udp:127.0.0.1:161
# Create a view for the InfoHub
view InfoHubonly included .1.3.6.1.4.1.16830.6.2
# Allow read-only access to the InfoHub on the localhost
rocommunity &lt;communitystring&gt; 127.0.0.1 -V InfoHubonly
# Have snmpd convert agentx notifications into informs
informsink 127.0.0.1 &lt;communitystring&gt;
#AgentX Sub-agents
## Have snmpd run as a master agent
master agentx
# Tell snmpd where to listen for Agentx connections
agentXSocket tcp:127.0.0.1:705</pre><p>Replace &lt;communitystring&gt; with an appropriate password. &lt;communitystring&gt; is used to authenticate SNMPv1/v2c transactions. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: AIX Notes"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">AIX Notes</th></tr><tr><td align="left" valign="top"><p>To allow NET-SNMP and AIX's native snmp to coexist, assign a new port for the NET-SNMP agent by modifying the agentAddress line in snmp.conf:</p><pre class="programlisting">agentAddress  udp:127.0.0.1:9716  </pre><p>If NET-SNMP was installed from binaries, please note down what port number was assigned as this will be needed by snmpget, snmpgetnext, etc. For example: </p><pre class="programlisting">agentAddress  udp:127.0.0.1:1610  </pre></td></tr></table></div></li><li class="listitem"><p>Using your favorite editor, open /etc/snmp/snmptrapd.conf as user root (via sudo), and if /etc/snmp/snmptrapd.conf does not exist, create it with R/W only permission for user root (root-only access is needed to protect the community string). Add the following line to /etc/snmp/snmptrapd.conf:</p><pre class="programlisting">authCommunity log &lt;communitystring&gt;</pre><p>Replace &lt;communitystring&gt; with the same password that you used in step 5. </p></li><li class="listitem"><p>Restart your network management services to apply changes in snmpd.conf and snmptrapd.conf. On Ubuntu, the command is:</p><pre class="programlisting">$ sudo service snmpd restart</pre></li><li class="listitem"><p>Set up the environment for your InfoHub and execute the following command to generate the MIB module from InfoHub. </p><pre class="programlisting">$gtm_dist/mumps -r generatemib &gt;INFOHUB-1-MIB</pre></li><li class="listitem"><p>Place INFOHUB-1-MIB in one of the directories in the MIB search path, for example, /usr/local/share/snmp/mibs. This allows both you and snmptrapd (discussed later) to access it. </p></li><li class="listitem"><p>Congratulations! The SNMP Plugin is now installed on your system. Perform step 8 and 9 every time there is a change to the InfoHub configuration that impacts the structure of InfoHub or the objects available. You do not need to perform these steps if your updates neither impacts the InfoHub structure nor alters the number of objects available, for example updating a subscription condition. </p></li></ol></div><p><span class="bold"><strong>Related Information:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="xref" href="ch05s04.html" title="Operating the SNMP Plugin">&#8220;Operating the SNMP Plugin&#8221;</a></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch05s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">SNMP Plugin Overview </td><td width="20%" align="center"><a accesskey="h" href="titlepage.html">Home</a></td><td width="40%" align="right" valign="top"> Operating the SNMP Plugin</td></tr></table></div></body>
<!-- Mirrored from tinco.pair.com/bhaskar/gtm/doc/applications/infohub/ch05s03.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 14 Mar 2019 11:48:40 GMT -->
</html>
