<html>
<!-- Mirrored [from host tinco.pair.com [file /bhaskar/gtm/doc/applications/infohub/ch06s03.html]] -->
<HEAD><META HTTP-EQUIV="Pragma" CONTENT="no-cache"><META HTTP-EQUIV="Expires" CONTENT="-1"><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Uptime and Log File Monitoring</title><link rel="stylesheet" href="gtm.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="titlepage.html" title="FIS InfoHub"><link rel="up" href="ch06.html" title="Chapter 6. Appendix B: Reference Implementations"><link rel="prev" href="ch06s02.html" title="FileLineSyslogGleaner Operation"><link rel="next" href="ch07.html" title="Chapter 7. Appendix C: Error Messages"><link rel="copyright" href="ln-idp160629056.html" title="Legal Notice"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Uptime and Log File Monitoring</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06s02.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Appendix B: Reference Implementations</th><td width="20%" align="right"> <a accesskey="n" href="ch07.html">Next</a></td></tr></table><hr></div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="titlepage.html">FIS InfoHub</a></span> &gt; <span class="breadcrumb-link"><a href="ch06.html">Appendix B: Reference Implementations</a></span> &gt; <span class="breadcrumb-node">Uptime and Log File Monitoring</span></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="uptime_demo"></a>Uptime and Log File Monitoring</h2></div></div></div><p>The Uptime and Log File Monitoring (ULFM) Reference Implementation monitors:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="code">uptime</code>: captures days up and load averages after every 15 seconds from <code class="code">/usr/bin/uptime</code> output. It generates two notifications&#8211;when up days is less than 30 days and when the 15 minutes load average is less than 1. Note that the notification for up days is generated only once per day because up days gets updated only once per day. The notification criteria were chosen specifically so that they generate alerts.</p></li><li class="listitem"><p>System log (<code class="code">/var/log/messages</code>): automatically generates a notification when it detect a GT.M error in the system log. </p></li><li class="listitem"><p>Authentication log (<code class="code">/var/log/auth.log</code>): automatically generates a notification when it detects a login failure in the authentication log.</p></li></ul></div><p>The following table contains information about all files that are a part of the ULFM Reference Implementation. You can view these files from the configs subdirectory of your InfoHub distribution where they reside or download them from the links in the table. You can also click <a class="ulink" href="configs/ULFM_RI.html" target="_top"><span class="inlinemediaobject"><img src="images/downloadall.html" alt="Download ULFM Implementation"></span></a> to download all files of the ULFM Reference Implementation together or open directly from http://tinco.pair.com/bhaskar/gtm/applications/infohub/ULFM_RI.zip. </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th><p>Component</p></th><th><p>Name</p></th><th><p>Description</p></th><th><p>Download</p></th></tr></thead><tbody><tr><td><p>InfoHub Main Configuration File</p></td><td><p><code class="code">SimpleMonitor.conf</code></p></td><td><p>The InfoHub configuration file used to configure the ULFM Reference Implementation. For uptime, it defines InfoDict Items  <code class="code">Load01</code>, <code class="code">Load05</code>, and <code class="code">Load15 </code> to store load averages, and <code class="code">Days</code> to store up days. There are two subscriptions&#8211;<code class="code">PatchMe</code> to send a notification when <code class="code">Days</code> is greater than 30 and <code class="code">DontBeLazy</code> to send a notification when <code class="code">Load15</code> is less than 1. For log files, it defines an InfoDict Item called <code class="code">Anything</code> to hold the value of line read from each log file. For this item, it defines two subscriptions&#8211;<code class="code">AuthFail</code> to send an alert when <code class="code">Anything</code> contains ([) "Fail" and <code class="code">GTMError</code> to send an alert when <code class="code">Anything</code>contains ([) "%GTM-E".</p></td><td><p><a class="ulink" href="configs/SimpleMonitor.conf" target="_top"><span class="inlinemediaobject"><img src="images/download.html" alt="Download SimpleMonitor.conf"></span></a></p></td></tr><tr><td><p>FileLine Gleaner</p></td><td><p><code class="code">LogFileGleaner.m</code></p></td><td><p>A simple FileLine gleaner program that reads every line of the /var/log/messages and /var/log/auth.log and returns value in the form of 9999:line_read_value. Note that 9999 is the InfoDict Id for <code class="code">msg</code>. PreExpr gets invoked before processing the log file and defines configuration options and PostExpr gets invoked after completion of log file processing and removes configuration options defined in PreExpr. </p></td><td><p><a class="ulink" href="configs/LogFileGleaner.html" target="_top"><span class="inlinemediaobject"><img src="images/download.html" alt="Download LogFileGleaner.m"></span></a></p></td></tr><tr><td><p>PipeLine Gleaner</p></td><td><p><code class="code">UptimeGleaner.m</code></p></td><td><p>A simple PipeLine gleaner program for the <code class="code">uptime</code> command. It returns values in the multiples of &lt;key&gt;:&lt;value&gt; in the form of <code class="code">3030400:Days :3030401:Load:3030405:Load5:3030415:Load15</code> for every line read from the <code class="code">uptime</code> output. PreExpr gets invoked prior before processing <code class="code">uptime</code> and defines configuration options. PostExpr gets invoked after completion of <code class="code">uptime</code>processing and removes configuration options defined in PreExpr. InfoHub invokes the UptimeGleaner every 15 seconds.</p></td><td><p><a class="ulink" href="configs/UptimeGleaner.html" target="_top"><span class="inlinemediaobject"><img src="images/download.html" alt="Download UptimeGleaner.m"></span></a></p></td></tr></tbody></table></div><p>
        <span class="bold"><strong>To install the ULFM Reference Implementation, perform the following steps:</strong></span>
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Install InfoHub and create an InfoHub database. For more information, refer to <a class="link" href="ch03s01.html" title="Installing InfoHub">Installing InfoHub</a>.</p></li><li class="listitem"><p>From the samples directory copy SimpleMonitor.conf to the configs directory.</p></li><li class="listitem"><p>Execute the following command to load the SimpleMonitor.conf configuration file and start InfoHub.</p><pre class="programlisting">$ $gtm_dist/mumps -run InfoHub --action=configure --file=$ihsrcdir/configs/SimpleMonitor.conf</pre><pre class="programlisting">$ $gtm_dist/mumps -run InfoHub --action=start</pre><p>For more information, refer to <a class="link" href="ch03s03.html" title="Loading a Configuration File">Loading a Configuration File</a> and <a class="link" href="ch03s06.html" title="Starting an InfoHub">Starting an InfoHub</a>.</p></li><li class="listitem"><p>Install the FIS GT.M SNMP Plugin. For installation instructions and prerequisites, refer to <a class="link" href="ch05s03.html" title="Installing the SNMP Plugin">Installing the SNMP Plugin</a>.</p></li><li class="listitem"><p>Execute the following command to start the SNMP Plugin using Subscriber Id 404. Note that the SNMP Subscriber Descriptor (entry starting with <code class="code">Subscriber:</code>) in SimpleMonitor.conf specifies 404 as the Subscriber Id for <code class="code">uptime</code> notifications and 503 as Subscriber Id for log file notifications.</p><pre class="programlisting">$ $gtm_dist/mumps -run IHsnmp --action=start --plugin=404</pre><p>For more information, refer to <a class="link" href="ch05s05.html" title="Starting the SNMP Plugin">Starting the SNMP Plugin</a>.</p></li><li class="listitem"><p>Execute the following commands to check the status of InfoHub and the SNMP Plugin:</p><pre class="programlisting">$ $gtm_dist/mumps -run InfoHub --action=status </pre><pre class="programlisting">$ $gtm_dist/mumps -run IHsnmp --action=status --plugin=404</pre><p>For more information, refer to <a class="link" href="ch03s07.html" title="Monitoring (Checking) an InfoHub">Monitoring an InfoHub</a> and <a class="link" href="ch05s06.html" title="Monitoring (Checking) an SNMP Plugin">Monitoring the SNMP Plugin</a>.</p></li><li class="listitem"><p>Congratulations! Your ULFM Reference Implementation is now installed .</p></li></ol></div><p>The following illustration shows how the ULFM Reference Implementation sets up an InfoHub framework for monitoring. </p><p>
        <span class="inlinemediaobject"><img src="images/ulfm.html" alt="ULFM Reference Implementation setup"></span>
      </p><p><span class="bold"><strong>Related Information:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="xref" href="ch04s11.html" title="Writing an xLine Gleaner">&#8220;Writing an xLine Gleaner&#8221;</a></li><li class="listitem"><a class="xref" href="ch03s01.html" title="Installing InfoHub">&#8220;Installing InfoHub&#8221;</a></li><li class="listitem"><a class="xref" href="ch05s03.html" title="Installing the SNMP Plugin">&#8220;Installing the SNMP Plugin&#8221;</a></li><li class="listitem"><a class="xref" href="ch03s07.html" title="Monitoring (Checking) an InfoHub">&#8220;Monitoring (Checking) an InfoHub&#8221;</a></li><li class="listitem"><a class="xref" href="ch05s05.html" title="Starting the SNMP Plugin">&#8220;Starting the SNMP Plugin&#8221;</a></li><li class="listitem"><a class="xref" href="ch03s03.html" title="Loading a Configuration File">&#8220;Loading a Configuration File&#8221;</a></li><li class="listitem"><a class="xref" href="ch03s06.html" title="Starting an InfoHub">&#8220;Starting an InfoHub&#8221;</a></li><li class="listitem"><a class="xref" href="ch05s06.html" title="Monitoring (Checking) an SNMP Plugin">&#8220;Monitoring (Checking) an SNMP Plugin&#8221;</a></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch06.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch07.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">FileLineSyslogGleaner Operation </td><td width="20%" align="center"><a accesskey="h" href="titlepage.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 7. Appendix C: Error Messages</td></tr></table></div></body>
<!-- Mirrored [from host tinco.pair.com [file /bhaskar/gtm/doc/applications/infohub/ch06s03.html]] -->
</html>
