<html>
<!-- Mirrored [from host tinco.pair.com [file /bhaskar/gtm/doc/applications/infohub/ch05s11.html]] -->
<HEAD><META HTTP-EQUIV="Pragma" CONTENT="no-cache"><META HTTP-EQUIV="Expires" CONTENT="-1"><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Listening for Alerts (snmptrapd)</title><link rel="stylesheet" href="gtm.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="titlepage.html" title="FIS InfoHub"><link rel="up" href="ch05.html" title="Chapter 5. Appendix A: FIS GT.M SNMP Plugin"><link rel="prev" href="ch05s10.html" title="Exploring the InfoHub MIB (snmptranslate)"><link rel="next" href="ch06.html" title="Chapter 6. Appendix B: Reference Implementations"><link rel="copyright" href="ln-idp160629056.html" title="Legal Notice"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Listening for Alerts (snmptrapd)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s10.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Appendix A: FIS GT.M SNMP Plugin </th><td width="20%" align="right"> <a accesskey="n" href="ch06.html">Next</a></td></tr></table><hr></div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="titlepage.html">FIS InfoHub</a></span> &gt; <span class="breadcrumb-link"><a href="ch05.html">Appendix A: FIS GT.M SNMP Plugin </a></span> &gt; <span class="breadcrumb-node">Listening for Alerts (snmptrapd)</span></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="listen_alerts"></a>Listening for Alerts (snmptrapd)</h2></div></div></div><p>The snmptrapd CLI application sets up a listener for SNMP notifications (TRAP or INFORM) from the Master SNMP Agent. The SNMP Plugin uses its Subscriber relationship with InfoHub to obtain notification details and sends them to the SNMP Master Agent. Then, snmptrapd receives those notifications in the form of a TRAP or an INFORM. INFORM differs from a TRAP in that it requires acknowledgement message, while the TRAP does not. Because snmptrapd, by default, listens for SNMP notifications on the special privilege UDP port 162 on IPv4 interfaces, you need to run the snmptrapd command as root. At any given time, only one snmptrapd can receive notifications but you can set up one or more listening addresses (refer to the man page entry for snmpd for more information). A typical syntax of the snmptrapd command in the SNMP Plugin is:</p><pre class="programlisting">snmptrapd[&lt;snmpcmd_common_options&gt;] -m &lt;MIBModule(s)&gt;
-Lo -f -t -Oa</pre><div class="variablelist"><dl><dt><span class="term">
            <code class="filename">
              <span class="bold"><strong>-f</strong></span>
            </code>
          </span></dt><dd><p>Disables forking from the calling shell. For more information, refer to the man page entry for snmptrapd.</p></dd><dt><span class="term">
            <code class="filename">
              <span class="bold"><strong>-t</strong></span>
            </code>
          </span></dt><dd><p>Disables logging of messages to the system log. For more information, refer to the man page entry for snmptrapd. For more information, refer to the man page entry for snmptrapd. </p></dd><dt><span class="term">
            <code class="filename">
              <span class="bold"><strong>snmpcmd_common_options</strong></span>
            </code>
          </span></dt><dd><p>snmpcmd_common_options are options and agent arguments that are common to most snmp commands. For more information, refer to the man page entry for snmpcmd. </p></dd><dt><span class="term">
            <code class="filename">
              <span class="bold"><strong>-L</strong></span>
            </code>
          </span></dt><dd><p>Specifies the mechanism and target location for messages coming to snmptrapd. -Lo specifies that the received messages should be logged to STDOUT. For more information, refer to the LOGGING OPTIONS in the man page entry for snmpcmd.</p></dd><dt><span class="term">
            <code class="filename">
              <span class="bold"><strong>-Oa</strong></span>
            </code>
          </span></dt><dd><p>Displays strings in ASCII form. For more information on the -O option, refer to the man page entry for snmpcmd. </p></dd></dl></div><p>For more information on the snmptrapd command options, refer to the man page of the snmptrapd command. </p><p>Examples:</p><pre class="programlisting">$ sudo snmptrapd -m INFOHUB-1-MIB -Lo -f -t -Oa
SNMPv2-SMI::snmpModules.1.1.4.1.0 = OID: INFOHUB-1-MIB::infohubtestMyBoxSyslogDBFILEXTcurr.0
2013-10-23 03:34:10 localhost.localdomain [UDP: [127.0.0.1]:54501-&gt;[127.0.0.1]]:
SNMPv2-SMI::mib-2.1.3.0 = Timeticks: (118883997) 13 days, 18:13:59.97   
SNMPv2-SMI::snmpModules.1.1.4.1.0 = OID: INFOHUB-1-MIB::infohubtestMyBoxSyslogDBFILEXTcurr.0</pre><p>This example sets up a listener for notifications coming from InfoHub. -Lo specifies that the messages are logged on standard output. The DBFILEXT notification that arrives on snmptrapd is from a Noinfo subscription called DBFILEXT which InfoHub raised due to lack of activity for the DBFILEXT message. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: AIX Notes"><tr><td rowspan="2" align="center" valign="top" width="12pt"><img alt="[Note]" src="images/note.jpg"></td><th align="left">AIX Notes</th></tr><tr><td align="left" valign="top"><p>On AIX, use the NET-SNMP executable to set up a listener for notifications coming from InfoHub. A sample snmptrapd command might look like:</p><pre class="programlisting">sudo /usr/local/sbin/snmptrapd -m INFOHUB-1-MIB -Oa -Lo -f -t </pre></td></tr></table></div><p><span class="bold"><strong>Related Information:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="xref" href="ch05s10.html" title="Exploring the InfoHub MIB (snmptranslate)">&#8220;Exploring the InfoHub MIB (snmptranslate)&#8221;</a></li><li class="listitem"><a class="xref" href="ch04s09.html" title="Defining a Subscriber Descriptor">&#8220;Defining a Subscriber Descriptor&#8221;</a></li><li class="listitem"><a class="xref" href="ch04s10.html" title="Defining a Subscription Descriptor">&#8220;Defining a Subscription Descriptor&#8221;</a></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s10.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch06.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Exploring the InfoHub MIB (snmptranslate) </td><td width="20%" align="center"><a accesskey="h" href="titlepage.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 6. Appendix B: Reference Implementations</td></tr></table></div></body>
<!-- Mirrored [from host tinco.pair.com [file /bhaskar/gtm/doc/applications/infohub/ch05s11.html]] -->
</html>
